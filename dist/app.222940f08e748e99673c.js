/*! @senthanal/largecluster@version2.3.0 */!function(n){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=n,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=176)}([function(t,g,v){"use strict";(function(t){Object.defineProperty(g,"__esModule",{value:!0});var u=v(1),l=v(2),e=v(3);g.root="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this;var n=g.root.angular||{};function i(t,e){return-1!==t.indexOf(e)}function r(t,e){var n=t.indexOf(e);return 0<=n&&t.splice(n,1),t}function o(t,e){return t.push(e),e}function s(t,e){var n={};for(var i in t)-1!==e.indexOf(i)&&(n[i]=t[i]);return n}function a(t,n){var i=u.isArray(t)?[]:{};return g.forEach(t,function(t,e){return i[e]=n(t,e)}),i}function c(t,e){return t.push(e),t}function h(n,i){return void 0===i&&(i="assert failure"),function(t){var e=n(t);if(!e)throw new Error(u.isFunction(i)?i(t):i);return e}}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return[];for(var n=t.reduce(function(t,e){return Math.min(e.length,t)},9007199254740991),i=[],r=0;r<n;r++)switch(t.length){case 1:i.push([t[0][r]]);break;case 2:i.push([t[0][r],t[1][r]]);break;case 3:i.push([t[0][r],t[1][r],t[2][r]]);break;case 4:i.push([t[0][r],t[1][r],t[2][r],t[3][r]]);break;default:i.push(t.map(function(t){return t[r]}))}return i}function p(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var i=Object.keys(n),r=0;r<i.length;r++)t[i[r]]=n[i[r]]}return t}function d(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n=typeof t;if(n!=typeof e||"object"!=n)return!1;var i,r,o=[t,e];if(l.all(u.isArray)(o))return r=e,(i=t).length===r.length&&f(i,r).reduce(function(t,e){return t&&d(e[0],e[1])},!0);if(l.all(u.isDate)(o))return t.getTime()===e.getTime();if(l.all(u.isRegExp)(o))return t.toString()===e.toString();if(l.all(u.isFunction)(o))return!0;if([u.isFunction,u.isArray,u.isDate,u.isRegExp].map(l.any).reduce(function(t,e){return t||!!e(o)},!1))return!1;var s,a={};for(s in t){if(!d(t[s],e[s]))return!1;a[s]=!0}for(s in e)if(!a[s])return!1;return!0}g.fromJson=n.fromJson||JSON.parse.bind(JSON),g.toJson=n.toJson||JSON.stringify.bind(JSON),g.forEach=n.forEach||function(e,n,t){if(u.isArray(e))return e.forEach(n,t);Object.keys(e).forEach(function(t){return n(e[t],t)})},g.extend=Object.assign||p,g.equals=n.equals||d,g.identity=function(t){return t},g.noop=function(){},g.createProxyFunctions=function(e,i,n,t,r){function o(t){return e()[t].bind(n())}return void 0===r&&(r=!1),(t=t||Object.keys(e())).reduce(function(t,e){var n;return t[e]=r?(n=e,function(){return i[n]=o(n),i[n].apply(null,arguments)}):o(e),t},i)},g.inherit=function(t,e){return g.extend(Object.create(t),e)},g.inArray=l.curry(i),g._inArray=i,g.removeFrom=l.curry(r),g._removeFrom=r,g.pushTo=l.curry(o),g._pushTo=o,g.deregAll=function(e){return e.slice().forEach(function(t){"function"==typeof t&&t(),g.removeFrom(e,t)})},g.defaults=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=e.concat({}).reverse(),r=g.extend.apply(null,i);return g.extend({},r,s(t||{},Object.keys(r)))},g.mergeR=function(t,e){return g.extend(t,e)},g.ancestors=function(t,e){var n=[];for(var i in t.path){if(t.path[i]!==e.path[i])break;n.push(t.path[i])}return n},g.pick=s,g.omit=function(n,t){return Object.keys(n).filter(l.not(g.inArray(t))).reduce(function(t,e){return t[e]=n[e],t},{})},g.pluck=function(t,e){return a(t,l.prop(e))},g.filter=function(t,n){var e=u.isArray(t),i=e?[]:{},r=e?function(t){return i.push(t)}:function(t,e){return i[e]=t};return g.forEach(t,function(t,e){n(t,e)&&r(t,e)}),i},g.find=function(t,n){var i;return g.forEach(t,function(t,e){i||n(t,e)&&(i=t)}),i},g.mapObj=a,g.map=a,g.values=function(e){return Object.keys(e).map(function(t){return e[t]})},g.allTrueR=function(t,e){return t&&e},g.anyTrueR=function(t,e){return t||e},g.unnestR=function(t,e){return t.concat(e)},g.flattenR=function(t,e){return u.isArray(e)?t.concat(e.reduce(g.flattenR,[])):c(t,e)},g.pushR=c,g.uniqR=function(t,e){return g.inArray(t,e)?t:c(t,e)},g.unnest=function(t){return t.reduce(g.unnestR,[])},g.flatten=function(t){return t.reduce(g.flattenR,[])},g.assertPredicate=h,g.assertMap=h,g.assertFn=h,g.pairs=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})},g.arrayTuples=f,g.applyPairs=function(t,e){var n,i;if(u.isArray(e)&&(n=e[0],i=e[1]),!u.isString(n))throw new Error("invalid parameters to applyPairs");return t[n]=i,t},g.tail=function(t){return t.length&&t[t.length-1]||void 0},g.copy=function(t,e){return e&&Object.keys(e).forEach(function(t){return delete e[t]}),e=e||{},g.extend(e,t)},g._extend=p,g.silenceUncaughtInPromise=function(t){return t.catch(function(t){return 0})&&t},g.silentRejection=function(t){return g.silenceUncaughtInPromise(e.services.$q.reject(t))}}).call(this,v(47))},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(e){return function(t){return typeof t===e}}var r=e(2),o=e(39),s=Object.prototype.toString;i.isUndefined=n("undefined"),i.isDefined=r.not(i.isUndefined),i.isNull=function(t){return null===t},i.isNullOrUndefined=r.or(i.isNull,i.isUndefined),i.isFunction=n("function"),i.isNumber=n("number"),i.isString=n("string"),i.isObject=function(t){return null!==t&&"object"==typeof t},i.isArray=Array.isArray,i.isDate=function(t){return"[object Date]"===s.call(t)},i.isRegExp=function(t){return"[object RegExp]"===s.call(t)},i.isState=o.StateObject.isState,i.isInjectable=function(t){if(i.isArray(t)&&t.length){var e=t.slice(0,-1),n=t.slice(-1);return!(e.filter(r.not(i.isString)).length||n.filter(r.not(i.isFunction)).length)}return i.isFunction(t)},i.isPromise=r.and(i.isObject,r.pipe(r.prop("then"),i.isFunction))},function(t,e,n){"use strict";function i(n){var t=[].slice.apply(arguments,[1]),i=n.length;return function t(e){return e.length>=i?n.apply(null,e):function(){return t(e.concat([].slice.apply(arguments)))}}(t)}function r(){var n=arguments,i=n.length-1;return function(){for(var t=i,e=n[i].apply(this,arguments);t--;)e=n[t].call(this,e);return e}}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.apply(null,[].slice.call(arguments).reverse())}Object.defineProperty(e,"__esModule",{value:!0}),e.curry=i,e.compose=r,e.pipe=o,e.prop=function(e){return function(t){return t&&t[e]}},e.propEq=i(function(t,e,n){return n&&n[t]===e}),e.parse=function(t){return o.apply(null,t.split(".").map(e.prop))},e.not=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!n.apply(null,t)}},e.and=function(n,i){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(null,t)&&i.apply(null,t)}},e.or=function(n,i){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(null,t)||i.apply(null,t)}},e.all=function(n){return function(t){return t.reduce(function(t,e){return t&&!!n(e)},!0)}},e.any=function(n){return function(t){return t.reduce(function(t,e){return t||!!n(e)},!1)}},e.is=function(e){return function(t){return null!=t&&t.constructor===e||t instanceof e}},e.eq=function(e){return function(t){return e===t}},e.val=function(t){return function(){return t}},e.invoke=function(e,n){return function(t){return t[e].apply(t,n)}},e.pattern=function(n){return function(t){for(var e=0;e<n.length;e++)if(n[e][0](t))return n[e][1](t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notImplemented=function(t){return function(){throw new Error(t+"(): No coreservices implementation for UI-Router is loaded.")}};var i={$q:void 0,$injector:void 0};e.services=i},function(n,t,e){(function(t){function e(t){return t&&t.Math==Math&&t}n.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||Function("return this")()}).call(this,e(47))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(0)),i(e(3)),i(e(28)),i(e(2)),i(e(1)),i(e(40)),i(e(6)),i(e(11))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(20),s=n(0),a=n(2),u=n(29),l=n(22);function c(t){var e=h(t),n=e.match(/^(function [^ ]+\([^)]*\))/),i=n?n[1]:e,r=t.name||"";return r&&i.match(/function \(/)?"function "+r+i.substr(9):i}function h(t){var e=r.isArray(t)?t.slice(-1)[0]:t;return e&&e.toString()||"undefined"}e.maxLength=function(t,e){return e.length<=t?e:e.substr(0,t-3)+"..."},e.padString=function(t,e){for(;e.length<t;)e+=" ";return e},e.kebobString=function(t){return t.replace(/^([A-Z])/,function(t){return t.toLowerCase()}).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},e.functionToString=c,e.fnToString=h;var f=null;e.stringify=function(t){var i=[];function n(t){if(r.isObject(t)){if(-1!==i.indexOf(t))return"[circular ref]";i.push(t)}return e=t,n=o.Rejection.isRejectionPromise,(f=f||a.pattern([[a.not(r.isDefined),a.val("undefined")],[r.isNull,a.val("null")],[r.isPromise,a.val("[Promise]")],[n,function(t){return t._transitionRejection.toString()}],[a.is(o.Rejection),a.invoke("toString")],[a.is(u.Transition),a.invoke("toString")],[a.is(l.Resolvable),a.invoke("toString")],[r.isInjectable,c],[a.val(!0),s.identity]]))(e);var e,n}return JSON.stringify(t,function(t,e){return n(e)}).replace(/\\"/g,'"')},e.beforeAfterSubstr=function(n){return function(t){if(!t)return["",""];var e=t.indexOf(n);return-1===e?[t,""]:[t.substr(0,e),t.substr(e+1)]}},e.hostRegex=new RegExp("^(?:[a-z]+:)?//[^/]+/"),e.stripLastPathElement=function(t){return t.replace(/\/[^/]*$/,"")},e.splitHash=e.beforeAfterSubstr("#"),e.splitQuery=e.beforeAfterSubstr("?"),e.splitEqual=e.beforeAfterSubstr("="),e.trimHashVal=function(t){return t?t.replace(/^#/,""):""},e.splitOnDelim=function(t){var e=new RegExp("("+t+")","g");return function(t){return t.split(e).filter(s.identity)}},e.joinNeighborsR=function(t,e){return r.isString(s.tail(t))&&r.isString(e)?t.slice(0,-1).concat(s.tail(t)+e):s.pushR(t,e)}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(t,e,n){n(124),t.exports=angular},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),i=n(1),a=n(6);function r(t){if(!t)return"ui-view (defunct)";var e=t.creationContext?t.creationContext.name||"(root)":"(none)";return"[ui-view#"+t.id+" "+t.$type+":"+t.fqn+" ("+t.name+"@"+e+")]"}function o(t){return i.isNumber(t)?u[t]:u[u[t]]}var u,l,c=Function.prototype.bind.call(console.log,console),h=i.isFunction(console.table)?console.table.bind(console):c.bind(console);(l=u=e.Category||(e.Category={}))[l.RESOLVE=0]="RESOLVE",l[l.TRANSITION=1]="TRANSITION",l[l.HOOK=2]="HOOK",l[l.UIVIEW=3]="UIVIEW",l[l.VIEWCONFIG=4]="VIEWCONFIG";function f(t){return"Transition #"+p(t)+"-"+d(t)}var p=s.parse("$id"),d=s.parse("router.$id"),g=(v.prototype._set=function(e,t){var n=this;t.length||(t=Object.keys(u).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)}).map(function(t){return u[t]})),t.map(o).forEach(function(t){return n._enabled[t]=e})},v.prototype.enable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!0,t)},v.prototype.disable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!1,t)},v.prototype.enabled=function(t){return!!this._enabled[o(t)]},v.prototype.traceTransitionStart=function(t){this.enabled(u.TRANSITION)&&console.log(f(t)+": Started  -> "+a.stringify(t))},v.prototype.traceTransitionIgnored=function(t){this.enabled(u.TRANSITION)&&console.log(f(t)+": Ignored  <> "+a.stringify(t))},v.prototype.traceHookInvocation=function(t,e,n){var i,r,o;this.enabled(u.HOOK)&&(i=s.parse("traceData.hookType")(n)||"internal",r=s.parse("traceData.context.state.name")(n)||s.parse("traceData.context")(n)||"unknown",o=a.functionToString(t.registeredHook.callback),console.log(f(e)+":   Hook -> "+i+" context: "+r+", "+a.maxLength(200,o)))},v.prototype.traceHookResult=function(t,e,n){this.enabled(u.HOOK)&&console.log(f(e)+":   <- Hook returned: "+a.maxLength(200,a.stringify(t)))},v.prototype.traceResolvePath=function(t,e,n){this.enabled(u.RESOLVE)&&console.log(f(n)+":         Resolving "+t+" ("+e+")")},v.prototype.traceResolvableResolved=function(t,e){this.enabled(u.RESOLVE)&&console.log(f(e)+":               <- Resolved  "+t+" to: "+a.maxLength(200,a.stringify(t.data)))},v.prototype.traceError=function(t,e){this.enabled(u.TRANSITION)&&console.log(f(e)+": <- Rejected "+a.stringify(e)+", reason: "+t)},v.prototype.traceSuccess=function(t,e){this.enabled(u.TRANSITION)&&console.log(f(e)+": <- Success  "+a.stringify(e)+", final state: "+t.name)},v.prototype.traceUIViewEvent=function(t,e,n){void 0===n&&(n=""),this.enabled(u.UIVIEW)&&console.log("ui-view: "+a.padString(30,t)+" "+r(e)+n)},v.prototype.traceUIViewConfigUpdated=function(t,e){this.enabled(u.UIVIEW)&&this.traceUIViewEvent("Updating",t," with ViewConfig from context='"+e+"'")},v.prototype.traceUIViewFill=function(t,e){this.enabled(u.UIVIEW)&&this.traceUIViewEvent("Fill",t," with: "+a.maxLength(200,e))},v.prototype.traceViewSync=function(t){var e;this.enabled(u.VIEWCONFIG)&&(e=t.map(function(t){var e=t.uiView,n=t.viewConfig;return{"ui-view fqn":e&&e.fqn,"state: view name":n&&n.viewDecl.$context.name+": "+n.viewDecl.$name}}).sort(function(t,e){return t["ui-view fqn"].localeCompare(e["ui-view fqn"])}),h(e))},v.prototype.traceViewServiceEvent=function(t,e){var n,i,r;this.enabled(u.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+(i=(n=e).viewDecl,r=i.$context.name||"(root)","[View#"+n.$id+" from '"+r+"' state]: target ui-view: '"+i.$uiViewName+"@"+i.$uiViewContextAnchor+"'"))},v.prototype.traceViewServiceUIViewEvent=function(t,e){this.enabled(u.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+r(e))},v);function v(){this._enabled={},this.approximateDigests=0}var m=new(e.Trace=g);e.trace=m},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(10);t.exports=!i(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";var i,r;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.TransitionHookPhase||(e.TransitionHookPhase={}))[i.CREATE=0]="CREATE",i[i.BEFORE=1]="BEFORE",i[i.RUN=2]="RUN",i[i.SUCCESS=3]="SUCCESS",i[i.ERROR=4]="ERROR",(r=e.TransitionHookScope||(e.TransitionHookScope={}))[r.TRANSITION=0]="TRANSITION",r[r.STATE=1]="STATE"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(6),o=n(5),s=(a.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},a.prototype.identifier=function(){return this._identifier},a.prototype.params=function(){return this._params},a.prototype.$state=function(){return this._definition},a.prototype.state=function(){return this._definition&&this._definition.self},a.prototype.options=function(){return this._options},a.prototype.exists=function(){return!(!this._definition||!this._definition.self)},a.prototype.valid=function(){return!this.error()},a.prototype.error=function(){var t=this.options().relative;if(this._definition||!t)return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'";var e=t.name?t.name:t;return"Could not resolve '"+this.name()+"' from state '"+e+"'"},a.prototype.toString=function(){return"'"+this.name()+"'"+r.stringify(this.params())},a.prototype.withState=function(t){return new a(this._stateRegistry,t,this._params,this._options)},a.prototype.withParams=function(t,e){void 0===e&&(e=!1);var n=e?t:o.extend({},this._params,t);return new a(this._stateRegistry,this._identifier,n,this._options)},a.prototype.withOptions=function(t,e){void 0===e&&(e=!1);var n=e?t:o.extend({},this._options,t);return new a(this._stateRegistry,this._identifier,this._params,n)},a.isDef=function(t){return t&&t.state&&(i.isString(t.state)||i.isString(t.state.name))},a);function a(t,e,n,i){this._stateRegistry=t,this._identifier=e,this._identifier=e,this._params=o.extend({},n||{}),this._options=o.extend({},i||{}),this._definition=t.matcher.find(e,this._options.relative)}e.TargetState=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var S,i,$=n(0),T=n(2),R=n(1),o=n(3),w=n(43),r=Object.prototype.hasOwnProperty,b=function(t){return 0===["value","type","squash","array","dynamic"].filter(r.bind(t||{})).length};(i=S=e.DefType||(e.DefType={}))[i.PATH=0]="PATH",i[i.SEARCH=1]="SEARCH",i[i.CONFIG=2]="CONFIG";var s=(a.prototype.isDefaultValue=function(t){return this.isOptional&&this.type.equals(this.value(),t)},a.prototype.value=function(t){var r=this;return t=function(t){for(var e=0,n=r.replace;e<n.length;e++){var i=n[e];if(i.from===t)return i.to}return t}(t),R.isUndefined(t)?function(){if(r._defaultValueCache)return r._defaultValueCache.defaultValue;if(!o.services.$injector)throw new Error("Injectable functions cannot be called at configuration time");var t=o.services.$injector.invoke(r.config.$$fn);if(null!=t&&!r.type.is(t))throw new Error("Default value ("+t+") for parameter '"+r.id+"' is not an instance of ParamType ("+r.type.name+")");return r.config.$$fn.__cacheable&&(r._defaultValueCache={defaultValue:t}),t}():this.type.$normalize(t)},a.prototype.isSearch=function(){return this.location===S.SEARCH},a.prototype.validates=function(t){if((R.isUndefined(t)||null===t)&&this.isOptional)return!0;var e=this.type.$normalize(t);if(!this.type.is(e))return!1;var n=this.type.encode(e);return!(R.isString(n)&&!this.type.pattern.exec(n))},a.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},a.values=function(t,e){void 0===e&&(e={});for(var n={},i=0,r=t;i<r.length;i++){var o=r[i];n[o.id]=o.value(e[o.id])}return n},a.changed=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),t.filter(function(t){return!t.type.equals(e[t.id],n[t.id])})},a.equals=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),0===a.changed(t,e,n).length},a.validates=function(t,e){return void 0===e&&(e={}),t.map(function(t){return t.validates(e[t.id])}).reduce($.allTrueR,!0)},a);function a(t,e,n,i,r){function o(){return s.value}var s;s=b(s=n)?{value:s}:s,o.__cacheable=!0,e=function(t,e,n,i,r){if(t.type&&e&&"string"!==e.name)throw new Error("Param '"+i+"' has two type configurations.");if(t.type&&e&&"string"===e.name&&r.type(t.type))return r.type(t.type);if(e)return e;if(t.type)return t.type instanceof w.ParamType?t.type:r.type(t.type);var o=n===S.CONFIG?"any":n===S.PATH?"path":n===S.SEARCH?"query":"string";return r.type(o)}(n=$.extend(s,{$$fn:R.isInjectable(s.value)?s.value:o}),e,i,t,r.paramTypes);var a,u,l=(a={array:i===S.SEARCH&&"auto"},u=t.match(/\[\]$/)?{array:!0}:{},$.extend(a,u,n).array);e=l?e.$asArray(l,i===S.SEARCH):e;var c,h,f,p,d,g,v,m=void 0!==n.value||i===S.SEARCH,y=R.isDefined(n.dynamic)?!!n.dynamic:!!e.dynamic,_=R.isDefined(n.raw)?!!n.raw:!!e.raw,E=function(t,e,n){var i=t.squash;if(!e||!1===i)return!1;if(!R.isDefined(i)||null==i)return n;if(!0===i||R.isString(i))return i;throw new Error("Invalid squash policy: '"+i+"'. Valid policies: false, true, or arbitrary string")}(n,m,r.defaultSquashPolicy()),x=(c=n,h=l,p=E,g=[{from:"",to:(f=m)||h?void 0:""},{from:null,to:f||h?void 0:""}],v=R.isArray(c.replace)?c.replace:[],R.isString(p)&&v.push({from:p,to:void 0}),d=$.map(v,T.prop("from")),$.filter(g,function(t){return-1===d.indexOf(t.from)}).concat(v)),C=R.isDefined(n.inherit)?!!n.inherit:!!e.inherit;$.extend(this,{id:t,type:e,location:i,isOptional:m,dynamic:y,raw:_,squash:E,replace:x,inherit:C,array:l,config:n})}e.Param=s},function(t,e,n){"use strict";t.exports=i;var a=n(157);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function p(t,e){m(t,0,t.children.length,e,t)}function m(t,e,n,i,r){(r=r||d(null)).minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],c(r,t.leaf?i(o):o);return r}function c(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function o(t,e){return t.minX-e.minX}function s(t,e){return t.minY-e.minY}function y(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function l(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,n,i,r){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(o=e+Math.ceil((n-e)/i/2)*i,a(t,o,e,n,r),s.push(e,o,o,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!l(t,e))return n;for(var r,o,s,a,u=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],l(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):f(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!l(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],l(t,s=e.leaf?n(o):o)){if(e.leaf||f(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i,r=this._build(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===r.height?this._splitRoot(this.data,r):(this.data.height<r.height&&(i=this.data,this.data=r,r=i),this._insert(r,this.data.height-r.height-1,!0)):this.data=r,this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),i=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(r=function(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}(t,s.children,e)))return s.children.splice(r,1),u.push(s),this._condense(u),this;o||s.leaf||!f(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(u.push(s),l.push(n),n=0,s=(i=s).children[0])}return this},toBBox:function(t){return t},compareMinX:o,compareMinY:s,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,s=this._maxEntries;if(o<=s)return p(r=d(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=d([])).leaf=!1,r.height=i;var a,u,l,c,h=Math.ceil(o/s),f=h*Math.ceil(Math.sqrt(s));for(g(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(g(t,a,l=Math.min(a+f-1,n),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),r.children.push(this._build(t,u,c,i-1));return p(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,u,l,c,h,f,p;i.push(e),!e.leaf&&i.length-1!==n;){for(c=h=1/0,r=0,o=e.children.length;r<o;r++)u=y(s=e.children[r]),f=t,p=s,(l=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),c(s,r);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=d(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,p(n,this.toBBox),p(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,p(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){for(var i,r,o,s,a,u,l,c,h,f,p,d,g=a=1/0,v=e;v<=n-e;v++)i=m(t,0,v,this.toBBox),r=m(t,v,n,this.toBBox),l=i,c=r,d=p=f=h=void 0,h=Math.max(l.minX,c.minX),f=Math.max(l.minY,c.minY),p=Math.min(l.maxX,c.maxX),d=Math.min(l.maxY,c.maxY),o=Math.max(0,p-h)*Math.max(0,d-f),s=y(i)+y(r),o<g?(g=o,u=v,a=s<a?s:a):o===g&&s<a&&(a=s,u=v);return u},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:o,r=t.leaf?this.compareMinY:s;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);for(var r,o=this.toBBox,s=m(t,0,e,o),a=m(t,n-e,n,o),u=h(s)+h(a),l=e;l<n-e;l++)r=t.children[l],c(s,t.leaf?o(r):r),u+=h(s);for(l=n-e-1;e<=l;l--)r=t.children[l],c(a,t.leaf?o(r):r),u+=h(a);return u},_adjustParentBBoxes:function(t,e,n){for(var i=n;0<=i;i--)c(e[i],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():p(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,n){var c=n(4),h=n(48).f,f=n(24),p=n(26),d=n(38),g=n(103),v=n(112);t.exports=function(t,e){var n,i,r,o,s=t.target,a=t.global,u=t.stat,l=a?c:u?c[s]||d(s,{}):(c[s]||{}).prototype;if(l)for(n in e){if(r=e[n],i=t.noTargetGet?(o=h(l,n))&&o.value:l[n],!v(a?n:s+(u?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;g(r,i)}(t.sham||i&&i.sham)&&f(r,"sham",!0),p(l,n,r,t)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o=n(0),s=n(6),a=n(2);(r=i=e.RejectType||(e.RejectType={}))[r.SUPERSEDED=2]="SUPERSEDED",r[r.ABORTED=3]="ABORTED",r[r.INVALID=4]="INVALID",r[r.IGNORED=5]="IGNORED",r[r.ERROR=6]="ERROR";var u=0,l=(c.prototype.toString=function(){var t,e=(t=this.detail)&&t.toString!==Object.prototype.toString?t.toString():s.stringify(t);return"Transition Rejection($id: "+this.$id+" type: "+this.type+", message: "+this.message+", detail: "+e+")"},c.prototype.toPromise=function(){return o.extend(o.silentRejection(this),{_transitionRejection:this})},c.isRejectionPromise=function(t){return t&&"function"==typeof t.then&&a.is(c)(t._transitionRejection)},c.superseded=function(t,e){var n=new c(i.SUPERSEDED,"The transition has been superseded by a different transition",t);return e&&e.redirected&&(n.redirected=!0),n},c.redirected=function(t){return c.superseded(t,{redirected:!0})},c.invalid=function(t){return new c(i.INVALID,"This transition is invalid",t)},c.ignored=function(t){return new c(i.IGNORED,"The transition was ignored",t)},c.aborted=function(t){return new c(i.ABORTED,"The transition has been aborted",t)},c.errored=function(t){return new c(i.ERROR,"The transition errored",t)},c.normalize=function(t){return a.is(c)(t)?t:c.errored(t)},c);function c(t,e,n){this.$id=u++,this.type=t,this.message=e,this.detail=n}e.Rejection=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(15),s=n(0),a=n(6),u=n(1),l=n(2),c=n(11),i=n(3),h=n(20),r=n(16),f={current:s.noop,transition:null,traceData:{},bind:null},p=(d.prototype.logError=function(t){this.transition.router.stateService.defaultErrorHandler()(t)},d.prototype.invokeHook=function(){var e=this,n=this.registeredHook;if(!n._deregistered){var t=this.getNotCurrentRejection();if(t)return t;var i=this.options;c.trace.traceHookInvocation(this,this.transition,i);var r=function(t){return n.eventType.getErrorHandler(e)(t)},o=function(t){return n.eventType.getResultHandler(e)(t)};try{var s=n.callback.call(i.bind,e.transition,e.stateContext);return!this.type.synchronous&&u.isPromise(s)?s.catch(function(t){return h.Rejection.normalize(t).toPromise()}).then(o,r):o(s)}catch(t){return r(h.Rejection.normalize(t))}finally{n.invokeLimit&&++n.invokeCount>=n.invokeLimit&&n.deregister()}}},d.prototype.handleHookResult=function(t){var e=this,n=this.getNotCurrentRejection();return n||(u.isPromise(t)?t.then(function(t){return e.handleHookResult(t)}):(c.trace.traceHookResult(t,this.transition,this.options),!1===t?h.Rejection.aborted("Hook aborted transition").toPromise():l.is(r.TargetState)(t)?h.Rejection.redirected(t).toPromise():void 0))},d.prototype.getNotCurrentRejection=function(){var t=this.transition.router;return t._disposed?h.Rejection.aborted("UIRouter instance #"+t.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?h.Rejection.aborted().toPromise():this.isSuperseded()?h.Rejection.superseded(this.options.current()).toPromise():void 0},d.prototype.toString=function(){var t=this.options,e=this.registeredHook,n=l.parse("traceData.hookType")(t)||"internal",i=l.parse("traceData.context.state.name")(t)||l.parse("traceData.context")(t)||"unknown",r=a.fnToString(e.callback);return n+" context: "+i+", "+a.maxLength(200,r)},d.chain=function(t,e){return t.reduce(function(t,e){return t.then(function(){return e.invokeHook()})},e||i.services.$q.when())},d.invokeHooks=function(t,e){for(var n=0;n<t.length;n++){var i=t[n].invokeHook();if(u.isPromise(i)){var r=t.slice(n+1);return d.chain(r,i).then(e)}}return e()},d.runAllHooks=function(t){t.forEach(function(t){return t.invokeHook()})},d.HANDLE_RESULT=function(e){return function(t){return e.handleHookResult(t)}},d.LOG_REJECTED_RESULT=function(e){return function(t){u.isPromise(t)&&t.catch(function(t){return e.logError(h.Rejection.normalize(t))})}},d.LOG_ERROR=function(e){return function(t){return e.logError(t)}},d.REJECT_ERROR=function(t){return function(t){return s.silentRejection(t)}},d.THROW_ERROR=function(t){return function(t){throw t}},d);function d(t,e,n,i){var r=this;this.transition=t,this.stateContext=e,this.registeredHook=n,this.options=i,this.isSuperseded=function(){return r.type.hookPhase===o.TransitionHookPhase.RUN&&!r.options.transition.isActive()},this.options=s.defaults(i,f),this.type=n.eventType}e.TransitionHook=p},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e(0),u=e(3),l=e(11),n=e(6),o=e(1),s=e(5);i.defaultResolvePolicy={when:"LAZY",async:"WAIT"};var r=(c.prototype.getPolicy=function(t){var e=this.policy||{},n=t&&t.resolvePolicy||{};return{when:e.when||n.when||i.defaultResolvePolicy.when,async:e.async||n.async||i.defaultResolvePolicy.async}},c.prototype.resolve=function(e,n){var i=this,t=u.services.$q,r=e.findNode(this),o=r&&r.state,s="RXWAIT"===this.getPolicy(o).async?function(t){var e=t.cache(1);return e.take(1).toPromise().then(function(){return e})}:a.identity;return this.promise=t.when().then(function(){return t.all(e.getDependencies(i).map(function(t){return t.get(e,n)}))}).then(function(t){return i.resolveFn.apply(null,t)}).then(s).then(function(t){return i.data=t,i.resolved=!0,l.trace.traceResolvableResolved(i,n),i.data})},c.prototype.get=function(t,e){return this.promise||this.resolve(t,e)},c.prototype.toString=function(){return"Resolvable(token: "+n.stringify(this.token)+", requires: ["+this.deps.map(n.stringify)+"])"},c.prototype.clone=function(){return new c(this)},c.fromData=function(t,e){return new c(t,function(){return e},null,null,e)},c);function c(t,e,n,i,r){if(this.resolved=!1,this.promise=void 0,t instanceof c)a.extend(this,t);else if(o.isFunction(e)){if(s.isNullOrUndefined(t))throw new Error("new Resolvable(): token argument is required");if(!o.isFunction(e))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=t,this.policy=i,this.resolveFn=e,this.deps=n||[],this.data=r,this.resolved=void 0!==r,this.promise=this.resolved?u.services.$q.when(this.data):void 0}else if(o.isObject(t)&&t.token&&o.isFunction(t.resolveFn)){return new c(t.token,t.resolveFn,t.deps,t.policy,t.data)}}i.Resolvable=r},function(t,e,n){"use strict";var i=n(19),r=n(61).map,o=n(118),s=n(65),a=o("map"),u=s("map");i({target:"Array",proto:!0,forced:!a||!u},{map:function(t,e){return r(this,t,1<arguments.length?e:void 0)}})},function(t,e,n){var i=n(13),r=n(37),o=n(49);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(14);t.exports=function(t){if(!i(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var a=n(4),u=n(24),l=n(12),c=n(38),i=n(53),r=n(99),o=r.get,h=r.enforce,f=String(String).split("String");(t.exports=function(t,e,n,i){var r=!!i&&!!i.unsafe,o=!!i&&!!i.enumerable,s=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof e||l(n,"name")||u(n,"name",e),h(n).source=f.join("string"==typeof e?e:"")),t!==a?(r?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:u(t,e,n)):o?t[e]=n:c(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&o(this).source||i(this)})},function(t,e,n){var i=n(4),r=n(55),o=n(12),s=n(56),a=n(63),u=n(117),l=r("wks"),c=i.Symbol,h=u?c:c&&c.withoutSetter||s;t.exports=function(t){return o(l,t)||(a&&o(c,t)?l[t]=c[t]:l[t]=h("Symbol."+t)),l[t]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.prototype.matches=function(t){return this.regexp.test("."+t)},r.is=function(t){return!!/[!,*]+/.exec(t)},r.fromString=function(t){return r.is(t)?new r(t):null},r);function r(t){this.text=t,this.glob=t.split(".");var e=this.text.split(".").map(function(t){return"**"===t?"(?:|(?:\\.[^.]*)*)":"*"===t?"\\.[^.]*":"\\."+t}).join("");this.regexp=new RegExp("^"+e+"$")}e.Glob=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),s=n(3),i=n(6),l=n(0),o=n(1),c=n(2),a=n(15),u=n(21),h=n(41),f=n(66),p=n(30),d=n(17),g=n(22),v=n(31),m=c.prop("self"),y=(_.prototype.onBefore=function(t,e,n){},_.prototype.onStart=function(t,e,n){},_.prototype.onExit=function(t,e,n){},_.prototype.onRetain=function(t,e,n){},_.prototype.onEnter=function(t,e,n){},_.prototype.onFinish=function(t,e,n){},_.prototype.onSuccess=function(t,e,n){},_.prototype.onError=function(t,e,n){},_.prototype.createTransitionHookRegFns=function(){var e=this;this.router.transitionService._pluginapi._getEvents().filter(function(t){return t.hookPhase!==a.TransitionHookPhase.CREATE}).forEach(function(t){return h.makeEvent(e,e.router.transitionService,t)})},_.prototype.getHooks=function(t){return this._registeredHooks[t]},_.prototype.applyViewConfigs=function(t){var e=this._treeChanges.entering.map(function(t){return t.state});p.PathUtils.applyViewConfigs(t.transitionService.$view,this._treeChanges.to,e)},_.prototype.$from=function(){return l.tail(this._treeChanges.from).state},_.prototype.$to=function(){return l.tail(this._treeChanges.to).state},_.prototype.from=function(){return this.$from().self},_.prototype.to=function(){return this.$to().self},_.prototype.targetState=function(){return this._targetState},_.prototype.is=function(t){return t instanceof _?this.is({to:t.$to().name,from:t.$from().name}):!(t.to&&!h.matchState(this.$to(),t.to)||t.from&&!h.matchState(this.$from(),t.from))},_.prototype.params=function(t){return void 0===t&&(t="to"),Object.freeze(this._treeChanges[t].map(c.prop("paramValues")).reduce(l.mergeR,{}))},_.prototype.injector=function(e,t){void 0===t&&(t="to");var n=this._treeChanges[t];return e&&(n=p.PathUtils.subPath(n,function(t){return t.state===e||t.state.name===e})),new v.ResolveContext(n).injector()},_.prototype.getResolveTokens=function(t){return void 0===t&&(t="to"),new v.ResolveContext(this._treeChanges[t]).getTokens()},_.prototype.addResolvable=function(t,e){void 0===e&&(e=""),t=c.is(g.Resolvable)(t)?t:new g.Resolvable(t);var n="string"==typeof e?e:e.name,i=this._treeChanges.to,r=l.find(i,function(t){return t.state.name===n});new v.ResolveContext(i).addResolvables([t],r.state)},_.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},_.prototype.originalTransition=function(){var t=this.redirectedFrom();return t&&t.originalTransition()||this},_.prototype.options=function(){return this._options},_.prototype.entering=function(){return l.map(this._treeChanges.entering,c.prop("state")).map(m)},_.prototype.exiting=function(){return l.map(this._treeChanges.exiting,c.prop("state")).map(m).reverse()},_.prototype.retained=function(){return l.map(this._treeChanges.retained,c.prop("state")).map(m)},_.prototype.views=function(t,e){void 0===t&&(t="entering");var n=this._treeChanges[t];return(n=e?n.filter(c.propEq("state",e)):n).map(c.prop("views")).filter(l.identity).reduce(l.unnestR,[])},_.prototype.treeChanges=function(t){return t?this._treeChanges[t]:this._treeChanges},_.prototype.redirect=function(t){for(var e=1,n=this;null!=(n=n.redirectedFrom());)if(20<++e)throw new Error("Too many consecutive Transition redirects (20+)");var i={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==t.options().location&&(i.location="replace");var r=l.extend({},this.options(),t.options(),i);t=t.withOptions(r,!0);var o,s=this.router.transitionService.create(this._treeChanges.from,t),a=this._treeChanges.entering,u=s._treeChanges.entering;return p.PathUtils.matching(u,a,p.PathUtils.nonDynamicParams).filter(c.not((o=t.options().reloadState,function(t){return o&&t.state.includes[o.name]}))).forEach(function(t,e){t.resolvables=a[e].resolvables}),s},_.prototype._changedParams=function(){var t=this._treeChanges;if(!(this._options.reload||t.exiting.length||t.entering.length||t.to.length!==t.from.length||l.arrayTuples(t.to,t.from).map(function(t){return t[0].state!==t[1].state}).reduce(l.anyTrueR,!1))){var e=t.to.map(function(t){return t.paramSchema}),n=[t.to,t.from].map(function(t){return t.map(function(t){return t.paramValues})}),i=n[0],r=n[1];return l.arrayTuples(e,i,r).map(function(t){var e=t[0],n=t[1],i=t[2];return d.Param.changed(e,n,i)}).reduce(l.unnestR,[])}},_.prototype.dynamic=function(){var t=this._changedParams();return!!t&&t.map(function(t){return t.dynamic}).reduce(l.anyTrueR,!1)},_.prototype.ignored=function(){return!!this._ignoredReason()},_.prototype._ignoredReason=function(){function t(t,e){if(t.length===e.length){var n=p.PathUtils.matching(t,e);return t.length===n.filter(function(t){return!i||!t.state.includes[i.name]}).length}}var e=this.router.globals.transition,i=this._options.reloadState,n=this.treeChanges(),r=e&&e.treeChanges();return r&&t(r.to,n.to)&&t(r.exiting,n.exiting)?"SameAsPending":0===n.exiting.length&&0===n.entering.length&&t(n.from,n.to)?"SameAsCurrent":void 0},_.prototype.run=function(){function e(t){return n._hookBuilder.buildHooksForPhase(t)}var n=this,i=u.TransitionHook.runAllHooks,t=e(a.TransitionHookPhase.BEFORE);return u.TransitionHook.invokeHooks(t,function(){var t=n.router.globals;return t.lastStartedTransitionId=n.$id,t.transition=n,t.transitionHistory.enqueue(n),r.trace.traceTransitionStart(n),s.services.$q.when(void 0)}).then(function(){var t=e(a.TransitionHookPhase.RUN);return u.TransitionHook.invokeHooks(t,function(){return s.services.$q.when(void 0)})}).then(function(){r.trace.traceSuccess(n.$to(),n),n.success=!0,n._deferred.resolve(n.to()),i(e(a.TransitionHookPhase.SUCCESS))},function(t){r.trace.traceError(t,n),n.success=!1,n._deferred.reject(t),n._error=t,i(e(a.TransitionHookPhase.ERROR))}),this.promise},_.prototype.valid=function(){return!this.error()||void 0!==this.success},_.prototype.abort=function(){o.isUndefined(this.success)&&(this._aborted=!0)},_.prototype.error=function(){var t=this.$to();if(t.self.abstract)return"Cannot transition to abstract state '"+t.name+"'";var e=t.parameters(),n=this.params(),i=e.filter(function(t){return!t.validates(n[t.id])});return i.length?"Param values not valid for state '"+t.name+"'. Invalid params: [ "+i.map(function(t){return t.id}).join(", ")+" ]":!1===this.success?this._error:void 0},_.prototype.toString=function(){function t(t){return null!==t["#"]&&void 0!==t["#"]?t:l.omit(t,["#"])}var e=this.from(),n=this.to();return"Transition#"+this.$id+"( '"+(o.isObject(e)?e.name:e)+"'"+i.stringify(t(this._treeChanges.from.map(c.prop("paramValues")).reduce(l.mergeR,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(o.isObject(n)?n.name:n)+"'"+i.stringify(t(this.params()))+" )"},_.diToken=_);function _(t,e,n){var i=this;if(this._deferred=s.services.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new f.HookBuilder(this),this.isActive=function(){return i.router.globals.transition===i},this.router=n,!(this._targetState=e).valid())throw new Error(e.error());this._options=l.extend({current:c.val(this)},e.options()),this.$id=n.transitionService._transitionCount++;var r=p.PathUtils.buildToPath(t,e);this._treeChanges=p.PathUtils.treeChanges(t,r,this._options.reloadState),this.createTransitionHookRegFns();var o=this._hookBuilder.buildHooksForPhase(a.TransitionHookPhase.CREATE);u.TransitionHook.invokeHooks(o,function(){return null}),this.applyViewConfigs(n)}e.Transition=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=n(0),f=n(2),i=n(16),p=n(42),r=(d.makeTargetState=function(t,e){var n=h.tail(e).state;return new i.TargetState(t,n,e.map(f.prop("paramValues")).reduce(h.mergeR,{}),{})},d.buildPath=function(t){var e=t.params();return t.$state().path.map(function(t){return new p.PathNode(t).applyRawParams(e)})},d.buildToPath=function(t,e){var n=d.buildPath(e);return e.options().inherit?d.inheritParams(t,n,Object.keys(e.params())):n},d.applyViewConfigs=function(r,o,e){o.filter(function(t){return h.inArray(e,t.state)}).forEach(function(e){var t=h.values(e.state.views||{}),n=d.subPath(o,function(t){return t===e}),i=t.map(function(t){return r.createViewConfig(n,t)});e.views=i.reduce(h.unnestR,[])})},d.inheritParams=function(u,t,l){void 0===l&&(l=[]);var c=u.map(function(t){return t.paramSchema}).reduce(h.unnestR,[]).filter(function(t){return!t.inherit}).map(f.prop("id"));return t.map(function(t){var e,n,i,r=h.extend({},t&&t.paramValues),o=h.pick(r,l),r=h.omit(r,l),s=h.omit((e=u,n=t.state,i=h.find(e,f.propEq("state",n)),h.extend({},i&&i.paramValues)||{}),c),a=h.extend(r,s,o);return new p.PathNode(t.state).applyRawParams(a)})},d.treeChanges=function(t,i,e){for(var n,r,o,s,a,u=0,l=Math.min(t.length,i.length);u<l&&t[u].state!==e&&(n=t[u],r=i[u],n.equals(r,d.nonDynamicParams));)u++;s=(o=t).slice(0,u),a=o.slice(u);var c=s.map(function(t,e){var n=p.PathNode.clone(t);return n.paramValues=i[e].paramValues,n}),h=i.slice(u);return{from:o,to:c.concat(h),retained:s,exiting:a,entering:h}},d.matching=function(t,e,r){var o=!1;return h.arrayTuples(t,e).reduce(function(t,e){var n=e[0],i=e[1];return(o=o||!n.equals(i,r))?t:t.concat(n)},[])},d.equals=function(t,e,n){return t.length===e.length&&d.matching(t,e,n).length===t.length},d.subPath=function(t,e){var n=h.find(t,e),i=t.indexOf(n);return-1===i?void 0:t.slice(0,i+1)},d.nonDynamicParams=function(t){return t.state.parameters({inherit:!1}).filter(function(t){return!t.dynamic})},d.paramValues=function(t){return t.reduce(function(t,e){return h.extend(t,e.paramValues)},{})},d);function d(){}e.PathUtils=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),h=n(2),i=n(11),r=n(3),s=n(67),a=n(22),u=n(30),l=n(6),c=n(5),f=s.resolvePolicies.when,p=[f.EAGER,f.LAZY],d=[f.EAGER];e.NATIVE_INJECTOR_TOKEN="Native Injector";var g=(v.prototype.getTokens=function(){return this._path.reduce(function(t,e){return t.concat(e.resolvables.map(function(t){return t.token}))},[]).reduce(o.uniqR,[])},v.prototype.getResolvable=function(e){var t=this._path.map(function(t){return t.resolvables}).reduce(o.unnestR,[]).filter(function(t){return t.token===e});return o.tail(t)},v.prototype.getPolicy=function(t){var e=this.findNode(t);return t.getPolicy(e.state)},v.prototype.subContext=function(e){return new v(u.PathUtils.subPath(this._path,function(t){return t.state===e}))},v.prototype.addResolvables=function(t,e){var n=o.find(this._path,h.propEq("state",e)),i=t.map(function(t){return t.token});n.resolvables=n.resolvables.filter(function(t){return-1===i.indexOf(t.token)}).concat(t)},v.prototype.resolvePath=function(t,a){var u=this;void 0===t&&(t="LAZY");var l=(o.inArray(p,t)?t:"LAZY")===s.resolvePolicies.when.EAGER?d:p;function c(e,n){return function(t){return o.inArray(e,u.getPolicy(t)[n])}}i.trace.traceResolvePath(this._path,t,a);var e=this._path.reduce(function(t,e){function n(e){return e.get(s,a).then(function(t){return{token:e.token,value:t}})}var i=e.resolvables.filter(c(l,"when")),r=i.filter(c(["NOWAIT"],"async")),o=i.filter(h.not(c(["NOWAIT"],"async"))),s=u.subContext(e.state);return r.forEach(n),t.concat(o.map(n))},[]);return r.services.$q.all(e)},v.prototype.injector=function(){return this._injector||(this._injector=new m(this))},v.prototype.findNode=function(e){return o.find(this._path,function(t){return o.inArray(t.resolvables,e)})},v.prototype.getDependencies=function(e){var i=this,n=this.findNode(e),r=(u.PathUtils.subPath(this._path,function(t){return t===n})||this._path).reduce(function(t,e){return t.concat(e.resolvables)},[]).filter(function(t){return t!==e});return e.deps.map(function(e){var t=r.filter(function(t){return t.token===e});if(t.length)return o.tail(t);var n=i.injector().getNative(e);if(c.isUndefined(n))throw new Error("Could not find Dependency Injection token: "+l.stringify(e));return new a.Resolvable(e,function(){return n},[],n)})},v);function v(t){this._path=t}e.ResolveContext=g;var m=(y.prototype.get=function(t){var e=this.context.getResolvable(t);if(e){if("NOWAIT"===this.context.getPolicy(e).async)return e.get(this.context);if(!e.resolved)throw new Error("Resolvable async .get() not complete:"+l.stringify(e.token));return e.data}return this.getNative(t)},y.prototype.getAsync=function(t){var e=this.context.getResolvable(t);return e?e.get(this.context):r.services.$q.when(this.native.get(t))},y.prototype.getNative=function(t){return this.native&&this.native.get(t)},y);function y(t){this.context=t,this.native=this.get(e.NATIVE_INJECTOR_TOKEN)||r.services.$injector}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var x=n(0),C=n(2),S=n(1),u=n(17),l=n(6);function v(t,e){var n=["",""],i=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return i;switch(e.squash){case!1:n=["(",")"+(e.isOptional?"?":"")];break;case!0:i=i.replace(/\/$/,""),n=["(?:/(",")|/)?"];break;default:n=["("+e.squash+"|",")?"]}return i+n[0]+e.type.pattern.source+n[1]}var c=l.splitOnDelim("/"),i=(m.prototype.append=function(t){return this._children.push(t),t._cache={path:this._cache.path.concat(t),parent:this,pattern:null},t},m.prototype.isRoot=function(){return this._cache.path[0]===this},m.prototype.toString=function(){return this.pattern},m.prototype.exec=function(t,i,e,n){var r=this;void 0===i&&(i={}),void 0===n&&(n={});var o,s,a,u=(o=this._cache,a=function(){return new RegExp(["^",x.unnest(r._cache.path.map(C.prop("_compiled"))).join(""),!1===r.config.strict?"/?":"","$"].join(""),r.config.caseInsensitive?"i":void 0)},(o[s="pattern"]=o[s]||a()).exec(t));if(!u)return null;var l=this.parameters(),c=l.filter(function(t){return!t.isSearch()}),h=l.filter(function(t){return t.isSearch()}),f=this._cache.path.map(function(t){return t._segments.length-1}).reduce(function(t,e){return t+e}),p={};if(f!==u.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var d,g,v=0;v<f;v++){for(var m=c[v],y=u[v+1],_=0;_<m.replace.length;_++)m.replace[_].from===y&&(y=m.replace[_].to);y&&!0===m.array&&(g=d=void 0,d=E(y).split(/-(?!\\)/),g=x.map(d,E),y=x.map(g,function(t){return t.replace(/\\-/g,"-")}).reverse()),S.isDefined(y)&&(y=m.type.decode(y)),p[m.id]=m.value(y)}function E(t){return t.split("").reverse().join("")}return h.forEach(function(t){for(var e=i[t.id],n=0;n<t.replace.length;n++)t.replace[n].from===e&&(e=t.replace[n].to);S.isDefined(e)&&(e=t.type.decode(e)),p[t.id]=t.value(e)}),e&&(p["#"]=e),p},m.prototype.parameters=function(t){return void 0===t&&(t={}),!1===t.inherit?this._params:x.unnest(this._cache.path.map(function(t){return t._params}))},m.prototype.parameter=function(i,t){var r=this;void 0===t&&(t={});var e=this._cache.parent;return function(){for(var t=0,e=r._params;t<e.length;t++){var n=e[t];if(n.id===i)return n}}()||!1!==t.inherit&&e&&e.parameter(i,t)||null},m.prototype.validates=function(i){return i=i||{},this.parameters().filter(function(t){return i.hasOwnProperty(t.id)}).map(function(t){return n=i[(e=t).id],!e||e.validates(n);var e,n}).reduce(x.allTrueR,!0)},m.prototype.format=function(s){void 0===s&&(s={});var t=this._cache.path,e=t.map(m.pathSegmentsAndParams).reduce(x.unnestR,[]).map(function(t){return S.isString(t)?t:i(t)}),n=t.map(m.queryParams).reduce(x.unnestR,[]).map(i);if(e.concat(n).filter(function(t){return!1===t.isValid}).length)return null;function i(t){var e=t.value(s[t.id]),n=t.validates(e),i=t.isDefaultValue(e),r=!!i&&t.squash,o=t.type.encode(e);return{param:t,value:e,isValid:n,isDefaultValue:i,squash:r,encoded:o}}var r=e.reduce(function(t,e){if(S.isString(e))return t+e;var n=e.squash,i=e.encoded,r=e.param;return!0===n?t.match(/\/$/)?t.slice(0,-1):t:S.isString(n)?t+n:!1!==n||null==i?t:S.isArray(i)?t+x.map(i,m.encodeDashes).join("-"):r.raw?t+i:t+encodeURIComponent(i)},""),o=n.map(function(t){var e=t.param,n=t.squash,i=t.encoded,r=t.isDefaultValue;if(!(null==i||r&&!1!==n)&&(S.isArray(i)||(i=[i]),0!==i.length))return e.raw||(i=x.map(i,encodeURIComponent)),i.map(function(t){return e.id+"="+t})}).filter(x.identity).reduce(x.unnestR,[]).join("&");return r+(o?"?"+o:"")+(s["#"]?"#"+s["#"]:"")},m.encodeDashes=function(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})},m.pathSegmentsAndParams=function(t){var e=t._segments,n=t._params.filter(function(t){return t.location===u.DefType.PATH});return x.arrayTuples(e,n.concat(void 0)).reduce(x.unnestR,[]).filter(function(t){return""!==t&&S.isDefined(t)})},m.queryParams=function(t){return t._params.filter(function(t){return t.location===u.DefType.SEARCH})},m.compare=function(t,e){function n(t){return t._cache.weights=t._cache.weights||((e=t)._cache.segments=e._cache.segments||e._cache.path.map(m.pathSegmentsAndParams).reduce(x.unnestR,[]).reduce(l.joinNeighborsR,[]).map(function(t){return S.isString(t)?c(t):t}).reduce(x.unnestR,[])).map(function(t){return"/"===t?1:S.isString(t)?2:t instanceof u.Param?3:void 0});var e}var i=n(t),r=n(e);!function(t,e,n){for(var i=Math.max(t.length,e.length);t.length<i;)t.push(n);for(;e.length<i;)e.push(n)}(i,r,0);for(var o,s=x.arrayTuples(i,r),a=0;a<s.length;a++)if(0!=(o=s[a][0]-s[a][1]))return o;return 0},m.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,m);function m(o,s,t,e){var a=this;this.config=e,this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=o,this.config=x.defaults(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:x.identity});for(var n,i,r=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,u=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l=0,c=[],h=function(t){if(!m.nameValidator.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+o+"'");if(x.find(a._params,C.propEq("id",t)))throw new Error("Duplicate parameter name '"+t+"' in pattern '"+o+"'")},f=function(t,e){var n,i=t[2]||t[3],r=e?t[4]:t[4]||("*"===t[1]?"[\\s\\S]*":null);return{id:i,regexp:r,cfg:a.config.params[i],segment:o.substring(l,t.index),type:r?s.type(r)||(n=r,x.inherit(s.type(e?"query":"path"),{pattern:new RegExp(n,a.config.caseInsensitive?"i":void 0)})):null}};(n=r.exec(o))&&!(0<=(i=f(n,!1)).segment.indexOf("?"));)h(i.id),this._params.push(t.fromPath(i.id,i.type,this.config.paramMap(i.cfg,!1))),this._segments.push(i.segment),c.push([i.segment,x.tail(this._params)]),l=r.lastIndex;var p=(g=o.substring(l)).indexOf("?");if(0<=p){var d=g.substring(p),g=g.substring(0,p);if(0<d.length)for(l=0;n=u.exec(d);)h((i=f(n,!0)).id),this._params.push(t.fromSearch(i.id,i.type,this.config.paramMap(i.cfg,!0))),l=r.lastIndex}this._segments.push(g),this._compiled=c.map(function(t){return v.apply(null,t)}).concat(v(g))}e.UrlMatcher=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),r=n(45),o=(s.prototype.url=function(e,t){return void 0===t&&(t=!0),i.isDefined(e)&&e!==this._get()&&(this._set(null,null,e,t),this.fireAfterUpdate&&this._listeners.forEach(function(t){return t({url:e})})),r.buildUrl(this)},s.prototype.onChange=function(t){var e=this;return this._listeners.push(t),function(){return i.removeFrom(e._listeners,t)}},s.prototype.dispose=function(t){i.deregAll(this._listeners)},s);function s(t,e){var n=this;this.fireAfterUpdate=e,this._listener=function(e){return n._listeners.forEach(function(t){return t(e)})},this._listeners=[],this.hash=function(){return r.parseUrl(n._get()).hash},this.path=function(){return r.parseUrl(n._get()).path},this.search=function(){return r.getParams(r.parseUrl(n._get()).search)},this._location=i.root.location,this._history=i.root.history}e.BaseLocationServices=o},function(t,e,n){var i=n(50),r=n(36);t.exports=function(t){return i(r(t))}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var i=n(13),r=n(52),o=n(25),s=n(51),a=Object.defineProperty;e.f=i?a:function(t,e,n){if(o(t),e=s(e,!0),o(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(4),r=n(24);t.exports=function(e,n){try{r(i,e,n)}catch(t){i[e]=n}return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(2),o=n(28),s=n(1),a=(u.create=function(t){t=u.isStateClass(t)?new t:t;var e=i.inherit(i.inherit(t,u.prototype));return t.$$state=function(){return e},e.self=t,e.__stateObjectCache={nameGlob:o.Glob.fromString(e.name)},e},u.prototype.is=function(t){return this===t||this.self===t||this.fqn()===t},u.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var t=this.parent.fqn();return t?t+"."+this.name:this.name},u.prototype.root=function(){return this.parent&&this.parent.root()||this},u.prototype.parameters=function(e){return((e=i.defaults(e,{inherit:!0,matchingKeys:null})).inherit&&this.parent&&this.parent.parameters()||[]).concat(i.values(this.params)).filter(function(t){return!e.matchingKeys||e.matchingKeys.hasOwnProperty(t.id)})},u.prototype.parameter=function(t,e){return void 0===e&&(e={}),this.url&&this.url.parameter(t,e)||i.find(i.values(this.params),r.propEq("id",t))||e.inherit&&this.parent&&this.parent.parameter(t)},u.prototype.toString=function(){return this.fqn()},u.isStateClass=function(t){return s.isFunction(t)&&!0===t.__uiRouterState},u.isState=function(t){return s.isObject(t.__stateObjectCache)},u);function u(t){return u.create(t||{})}e.StateObject=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.prototype.enqueue=function(t){var e=this._items;return e.push(t),this._limit&&e.length>this._limit&&e.shift(),t},r.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},r.prototype.clear=function(){var t=this._items;return this._items=[],t},r.prototype.size=function(){return this._items.length},r.prototype.remove=function(t){var e=this._items.indexOf(t);return-1<e&&this._items.splice(e,1)[0]},r.prototype.peekTail=function(){return this._items[this._items.length-1]},r.prototype.peekHead=function(){if(this.size())return this._items[0]},r);function r(t,e){void 0===t&&(t=[]),void 0===e&&(e=null),this._items=t,this._limit=e}e.Queue=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),i=n(1),l=n(15),o=n(28);function r(t,e){var r=i.isString(e)?[e]:e;return!!(i.isFunction(r)?r:function(t){for(var e=r,n=0;n<e.length;n++){var i=new o.Glob(e[n]);if(i&&i.matches(t.name)||!i&&e[n]===t.name)return!0}return!1})(t)}e.matchState=r;var c=(s.prototype._matchingNodes=function(t,e){if(!0===e)return t;var n=t.filter(function(t){return r(t.state,e)});return n.length?n:null},s.prototype._getDefaultMatchCriteria=function(){return u.map(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},s.prototype._getMatchingNodes=function(o){var s=this,a=u.extend(this._getDefaultMatchCriteria(),this.matchCriteria);return u.values(this.tranSvc._pluginapi._getPathTypes()).reduce(function(t,e){var n=e.scope===l.TransitionHookScope.STATE,i=o[e.name]||[],r=n?i:[u.tail(i)];return t[e.name]=s._matchingNodes(r,a[e.name]),t},{})},s.prototype.matches=function(t){var e=this._getMatchingNodes(t);return u.values(e).every(u.identity)?e:null},s.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},s);function s(t,e,n,i,r,o){void 0===o&&(o={}),this.tranSvc=t,this.eventType=e,this.callback=n,this.matchCriteria=i,this.removeHookFromRegistry=r,this.invokeCount=0,this._deregistered=!1,this.priority=o.priority||0,this.bind=o.bind||null,this.invokeLimit=o.invokeLimit}e.RegisteredHook=c,e.makeEvent=function(t,r,o){var s=(t._registeredHooks=t._registeredHooks||{})[o.name]=[],a=u.removeFrom(s);function e(t,e,n){void 0===n&&(n={});var i=new c(r,o,e,t,a,n);return s.push(i),i.deregister.bind(i)}return t[o.name]=e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=n(17),s=(a.prototype.applyRawParams=function(i){return this.paramValues=this.paramSchema.reduce(function(t,e){return r.applyPairs(t,[(n=e).id,n.value(i[n.id])]);var n},{}),this},a.prototype.parameter=function(t){return r.find(this.paramSchema,i.propEq("id",t))},a.prototype.equals=function(t,e){var n=this.diff(t,e);return n&&0===n.length},a.prototype.diff=function(t,e){if(this.state!==t.state)return!1;var n=e?e(this):this.paramSchema;return o.Param.changed(n,this.paramValues,t.paramValues)},a.clone=function(t){return new a(t)},a);function a(t){var e,n;t instanceof a?(e=t,this.state=e.state,this.paramSchema=e.paramSchema.slice(),this.paramValues=r.extend({},e.paramValues),this.resolvables=e.resolvables.slice(),this.views=e.views&&e.views.slice()):(n=t,this.state=n,this.paramSchema=n.parameters({inherit:!1}),this.paramValues={},this.resolvables=n.resolvables.map(function(t){return t.clone()}))}e.PathNode=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),c=n(1),i=(r.prototype.is=function(t,e){return!0},r.prototype.encode=function(t,e){return t},r.prototype.decode=function(t,e){return t},r.prototype.equals=function(t,e){return t==e},r.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},r.prototype.toString=function(){return"{ParamType:"+this.name+"}"},r.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},r.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new o(this,t)},r);function r(t){this.pattern=/.*/,this.inherit=!0,l.extend(this,t)}function o(i,o){var r=this;function s(t){return c.isArray(t)?t:c.isDefined(t)?[t]:[]}function a(i,r){return function(t){if(c.isArray(t)&&0===t.length)return t;var e=s(t),n=l.map(e,i);return!0===r?0===l.filter(n,function(t){return!t}).length:function(t){switch(t.length){case 0:return;case 1:return"auto"===o?t[0]:t;default:return t}}(n)}}function u(o){return function(t,e){var n=s(t),i=s(e);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++)if(!o(n[r],i[r]))return!1;return!0}}["encode","decode","equals","$normalize"].forEach(function(t){var e=i[t].bind(i),n="equals"===t?u:a;r[t]=n(e)}),l.extend(this,{dynamic:i.dynamic,name:i.name,pattern:i.pattern,inherit:i.inherit,is:a(i.is.bind(i),!0),$arrayMode:o})}e.ParamType=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),r=n(29),l=n(41),o=n(130),s=n(131),a=n(132),u=n(133),c=n(134),h=n(135),f=n(136),p=n(82),d=n(83),g=n(21),v=n(1),m=n(0),y=n(2),_=n(137),E=n(138);e.defaultTransOpts={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"};var x=(C.prototype.onCreate=function(t,e,n){},C.prototype.onBefore=function(t,e,n){},C.prototype.onStart=function(t,e,n){},C.prototype.onExit=function(t,e,n){},C.prototype.onRetain=function(t,e,n){},C.prototype.onEnter=function(t,e,n){},C.prototype.onFinish=function(t,e,n){},C.prototype.onSuccess=function(t,e,n){},C.prototype.onError=function(t,e,n){},C.prototype.dispose=function(t){m.values(this._registeredHooks).forEach(function(e){return e.forEach(function(t){t._deregistered=!0,m.removeFrom(e,t)})})},C.prototype.create=function(t,e){return new r.Transition(t,e,this._router)},C.prototype._defineCoreEvents=function(){var t=i.TransitionHookPhase,e=g.TransitionHook,n=this._criteriaPaths;this._defineEvent("onCreate",t.CREATE,0,n.to,!1,e.LOG_REJECTED_RESULT,e.THROW_ERROR,!0),this._defineEvent("onBefore",t.BEFORE,0,n.to),this._defineEvent("onStart",t.RUN,0,n.to),this._defineEvent("onExit",t.RUN,100,n.exiting,!0),this._defineEvent("onRetain",t.RUN,200,n.retained),this._defineEvent("onEnter",t.RUN,300,n.entering),this._defineEvent("onFinish",t.RUN,400,n.to),this._defineEvent("onSuccess",t.SUCCESS,0,n.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0),this._defineEvent("onError",t.ERROR,0,n.to,!1,e.LOG_REJECTED_RESULT,e.LOG_ERROR,!0)},C.prototype._defineCorePaths=function(){var t=i.TransitionHookScope.STATE,e=i.TransitionHookScope.TRANSITION;this._definePathType("to",e),this._definePathType("from",e),this._definePathType("exiting",t),this._definePathType("retained",t),this._definePathType("entering",t)},C.prototype._defineEvent=function(t,e,n,i,r,o,s,a){void 0===r&&(r=!1),void 0===o&&(o=g.TransitionHook.HANDLE_RESULT),void 0===s&&(s=g.TransitionHook.REJECT_ERROR),void 0===a&&(a=!1);var u=new d.TransitionEventType(t,e,n,i,r,o,s,a);this._eventTypes.push(u),l.makeEvent(this,this,u)},C.prototype._getEvents=function(e){return(v.isDefined(e)?this._eventTypes.filter(function(t){return t.hookPhase===e}):this._eventTypes.slice()).sort(function(t,e){var n=t.hookPhase-e.hookPhase;return 0==n?t.hookOrder-e.hookOrder:n})},C.prototype._definePathType=function(t,e){this._criteriaPaths[t]={name:t,scope:e}},C.prototype._getPathTypes=function(){return this._criteriaPaths},C.prototype.getHooks=function(t){return this._registeredHooks[t]},C.prototype._registerCoreTransitionHooks=function(){var t=this._deregisterHookFns;t.addCoreResolves=o.registerAddCoreResolvables(this),t.ignored=_.registerIgnoredTransitionHook(this),t.invalid=E.registerInvalidTransitionHook(this),t.redirectTo=s.registerRedirectToHook(this),t.onExit=a.registerOnExitHook(this),t.onRetain=a.registerOnRetainHook(this),t.onEnter=a.registerOnEnterHook(this),t.eagerResolve=u.registerEagerResolvePath(this),t.lazyResolve=u.registerLazyResolveState(this),t.resolveAll=u.registerResolveRemaining(this),t.loadViews=c.registerLoadEnteringViews(this),t.activateViews=c.registerActivateViews(this),t.updateGlobals=h.registerUpdateGlobalState(this),t.updateUrl=f.registerUpdateUrl(this),t.lazyLoad=p.registerLazyLoadHook(this)},C);function C(t){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=t,this.$view=t.viewService,this._deregisterHookFns={},this._pluginapi=m.createProxyFunctions(y.val(this),{},y.val(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks()}e.TransitionService=x},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(5);e.keyValsToObjectR=function(t,e){var n=e[0],i=e[1];return t.hasOwnProperty(n)?s.isArray(t[n])?t[n].push(i):t[n]=[t[n],i]:t[n]=i,t},e.getParams=function(t){return t.split("&").filter(s.identity).map(s.splitEqual).reduce(e.keyValsToObjectR,{})},e.parseUrl=function(t){function e(t){return t||""}var n=s.splitHash(t).map(e),i=n[0],r=n[1],o=s.splitQuery(i).map(e);return{path:o[0],search:o[1],hash:r,url:t}},e.buildUrl=function(t){var e=t.path(),n=t.search(),i=t.hash(),r=Object.keys(n).map(function(e){var t=n[e];return(s.isArray(t)?t:[t]).map(function(t){return e+"="+t})}).reduce(s.unnestR,[]).join("&");return e+(r?"?"+r:"")+(i?"#"+i:"")},e.locationPluginFactory=function(i,r,o,s){return function(t){var e=t.locationService=new o(t),n=t.locationConfig=new s(t,r);return{name:i,service:e,configuration:n,dispose:function(t){t.dispose(e),t.dispose(n)}}}}},function(t,e,n){var i={};i[n(27)("toStringTag")]="z",t.exports="[object z]"===String(i)},function(t,e){var n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i=n(13),r=n(97),o=n(49),s=n(34),a=n(51),u=n(12),l=n(52),c=Object.getOwnPropertyDescriptor;e.f=i?c:function(t,e){if(t=s(t),e=a(e,!0),l)try{return c(t,e)}catch(t){}if(u(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(10),r=n(35),o="".split;t.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==r(t)?o.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(14);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(13),r=n(10),o=n(98);t.exports=!i&&!r(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(54),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(t){return r.call(t)}),t.exports=i.inspectSource},function(t,e,n){var i=n(4),r=n(38),o="__core-js_shared__",s=i[o]||r(o,{});t.exports=s},function(t,e,n){var i=n(102),r=n(54);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+i).toString(36)}},function(t,e){t.exports={}},function(t,e,n){function i(t){return"function"==typeof t?t:void 0}var r=n(105),o=n(4);t.exports=function(t,e){return arguments.length<2?i(r[t])||i(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},function(t,e,n){var i=n(60),r=Math.min;t.exports=function(t){return 0<t?r(i(t),9007199254740991):0}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?i:n)(t)}},function(t,e,n){function i(p){var d=1==p,g=2==p,v=3==p,m=4==p,y=6==p,_=5==p||y;return function(t,e,n,i){for(var r,o,s=C(t),a=x(s),u=E(e,n,3),l=S(a.length),c=0,h=i||$,f=d?h(t,l):g?h(t,0):void 0;c<l;c++)if((_||c in a)&&(o=u(r=a[c],c,s),p))if(d)f[c]=o;else if(o)switch(p){case 3:return!0;case 5:return r;case 6:return c;case 2:T.call(f,r)}else if(m)return!1;return y?-1:v||m?m:f}}var E=n(113),x=n(50),C=n(114),S=n(59),$=n(115),T=[].push;t.exports={forEach:i(0),map:i(1),filter:i(2),some:i(3),every:i(4),find:i(5),findIndex:i(6)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var i=n(10);t.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},function(t,e,n){var i=n(58);t.exports=i("navigator","userAgent")||""},function(t,e,n){function s(t){throw t}var a=n(13),u=n(10),l=n(12),c=Object.defineProperty,h={};t.exports=function(t,e){if(l(h,t))return h[t];var n=[][t],i=!!l(e=e||{},"ACCESSORS")&&e.ACCESSORS,r=l(e,0)?e[0]:s,o=l(e,1)?e[1]:void 0;return h[t]=!!n&&!u(function(){if(i&&!a)return!0;var t={length:-1};i?c(t,1,{enumerable:!0,get:s}):t[1]=1,n.call(t,r,o)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),r=n(1),l=n(15),c=n(21),i=(o.prototype.buildHooksForPhase=function(t){var e=this;return this.transition.router.transitionService._pluginapi._getEvents(t).map(function(t){return e.buildHooks(t)}).reduce(u.unnestR,[]).filter(u.identity)},o.prototype.buildHooks=function(o){var s=this.transition,t=s.treeChanges(),e=this.getMatchingHooks(o,t);if(!e)return[];var a={transition:s,current:s.options().current};return e.map(function(r){return r.matches(t)[o.criteriaMatchPath.name].map(function(t){var e=u.extend({bind:r.bind,traceData:{hookType:o.name,context:t}},a),n=o.criteriaMatchPath.scope===l.TransitionHookScope.STATE?t.state.self:null,i=new c.TransitionHook(s,n,r,e);return{hook:r,node:t,transitionHook:i}})}).reduce(u.unnestR,[]).sort(function(r){return void 0===r&&(r=!1),function(t,e){var n=r?-1:1,i=(t.node.state.path.length-e.node.state.path.length)*n;return 0!=i?i:e.hook.priority-t.hook.priority}}(o.reverseSort)).map(function(t){return t.transitionHook})},o.prototype.getMatchingHooks=function(e,n){var t=e.hookPhase===l.TransitionHookPhase.CREATE,i=this.transition.router.transitionService;return(t?[i]:[this.transition,i]).map(function(t){return t.getHooks(e.name)}).filter(u.assertPredicate(r.isArray,"broken event named: "+e.name)).reduce(u.unnestR,[]).filter(function(t){return t.matches(n)})},o);function o(t){this.transition=t}e.HookBuilder=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolvePolicies={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(1),o=n(2),s=n(3),a=n(43),u=(l.prototype.dispose=function(){this.types={}},l.prototype.type=function(t,e,n){if(!r.isDefined(e))return this.types[t];if(this.types.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return this.types[t]=new a.ParamType(i.extend({name:t},e)),n&&(this.typeQueue.push({name:t,def:n}),this.enqueue||this._flushTypeQueue()),this},l.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var t=this.typeQueue.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");i.extend(this.types[t.name],s.services.$injector.invoke(t.def))}},l);function l(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=i.pick(l.prototype,["hash","string","query","path","int","bool","date","json","any"]);this.types=i.inherit(i.map(this.defaultTypes,function(t,e){return new a.ParamType(i.extend({name:e},t))}),{})}function c(t){function e(t){return null!=t?t.toString():t}var n={encode:e,decode:e,is:o.is(String),pattern:/.*/,equals:function(t,e){return t==e}};return i.extend({},n,t)}e.ParamTypes=u,i.extend(u.prototype,{string:c({}),path:c({pattern:/[^/]*/}),query:c({}),hash:c({inherit:!1}),int:c({decode:function(t){return parseInt(t,10)},is:function(t){return!r.isNullOrUndefined(t)&&this.decode(t.toString())===t},pattern:/-?\d+/}),bool:c({encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:o.is(Boolean),pattern:/0|1/}),date:c({encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):void 0},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):void 0},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(n,i){return["getFullYear","getMonth","getDate"].reduce(function(t,e){return t&&n[e]()===i[e]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:c({encode:i.toJson,decode:i.fromJson,is:o.is(Object),equals:i.equals,pattern:/[^/]*/}),any:c({encode:i.identity,decode:i.identity,is:function(){return!0},equals:i.equals})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),i=(r.prototype.$inherit=function(t,e,n){var i,r=l.ancestors(e,n),o={},s=[];for(var a in r)if(r[a]&&r[a].params&&(i=Object.keys(r[a].params)).length)for(var u in i)0<=s.indexOf(i[u])||(s.push(i[u]),o[i[u]]=this[i[u]]);return l.extend({},o,t)},r);function r(t){void 0===t&&(t={}),l.extend(this,t)}e.StateParams=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),l=n(1),c=n(6),h=n(2),f=n(22),p=n(3);function a(t){return t.name}function d(t){return t.self.$$state=function(){return t},t.self}function g(t){return t.parent&&t.parent.data&&(t.data=t.self.data=u.inherit(t.parent.data,t.data)),t.data}function v(o,s){return function(t){var n=t;n&&n.url&&n.name&&n.name.match(/\.\*\*$/)&&(n.url+="{remainder:any}");var e=function(t){if(!l.isString(t))return!1;var e="^"===t.charAt(0);return{val:e?t.substring(1):t,root:e}}(n.url),i=t.parent,r=e?o.compile(e.val,{params:t.params||{},paramMap:function(t,e){return!1===n.reloadOnSearch&&e&&(t=u.extend(t||{},{dynamic:!0})),t}}):n.url;if(!r)return null;if(!o.isMatcher(r))throw new Error("Invalid url '"+r+"' in state '"+t+"'");return e&&e.root?r:(i&&i.navigable||s()).url.append(r)}}function m(t){return t.parent?t.parent.path.concat(t):[t]}function y(t){var e=t.parent?u.extend({},t.parent.includes):{};return e[t.name]=!0,e}function _(t){function e(t){return t.provide||t.token}var n,i,r=h.pattern([[h.prop("resolveFn"),function(t){return new f.Resolvable(e(t),t.resolveFn,t.deps,t.policy)}],[h.prop("useFactory"),function(t){return new f.Resolvable(e(t),t.useFactory,t.deps||t.dependencies,t.policy)}],[h.prop("useClass"),function(t){return new f.Resolvable(e(t),function(){return new t.useClass},[],t.policy)}],[h.prop("useValue"),function(t){return new f.Resolvable(e(t),function(){return t.useValue},[],t.policy,t.useValue)}],[h.prop("useExisting"),function(t){return new f.Resolvable(e(t),u.identity,[t.useExisting],t.policy)}]]),o=h.pattern([[h.pipe(h.prop("val"),l.isString),function(t){return new f.Resolvable(t.token,u.identity,[t.val],t.policy)}],[h.pipe(h.prop("val"),l.isArray),function(t){return new f.Resolvable(t.token,u.tail(t.val),t.val.slice(0,-1),t.policy)}],[h.pipe(h.prop("val"),l.isFunction),function(t){return new f.Resolvable(t.token,t.val,(e=t.val,n=p.services.$injector,e.$inject||n&&n.annotate(e,n.strictDi)||"deferred"),t.policy);var e,n}]]),s=h.pattern([[h.is(f.Resolvable),function(t){return t}],[function(t){return!(!t.token||!t.resolveFn)},r],[function(t){return!(!t.provide&&!t.token||!(t.useValue||t.useFactory||t.useExisting||t.useClass))},r],[function(t){return!!(t&&t.val&&(l.isString(t.val)||l.isArray(t.val)||l.isFunction(t.val)))},o],[h.val(!0),function(t){throw new Error("Invalid resolve value: "+c.stringify(t))}]]),a=t.resolve;return(l.isArray(a)?a:(n=a,i=t.resolvePolicy||{},Object.keys(n||{}).map(function(t){return{token:t,val:n[t],deps:void 0,policy:i[t]}}))).map(s)}e.resolvablesBuilder=_;var i=(r.prototype.builder=function(t,e){var n=this.builders,i=n[t]||[];return l.isString(t)&&!l.isDefined(e)?1<i.length?i:i[0]:l.isString(t)&&l.isFunction(e)?(n[t]=i,n[t].push(e),function(){return n[t].splice(n[t].indexOf(e,1))&&null}):void 0},r.prototype.build=function(t){var e,n=this.matcher,i=this.builders,r=this.parentName(t);if(r&&!n.find(r,void 0,!1))return null;for(var o in i)i.hasOwnProperty(o)&&(e=i[o].reduce(function(e,n){return function(t){return n(t,e)}},u.noop),t[o]=e(t));return t},r.prototype.parentName=function(t){var e=t.name||"",n=e.split(".");if("**"===n.pop()&&n.pop(),n.length){if(t.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+e+")");return n.join(".")}return t.parent?l.isString(t.parent)?t.parent:t.parent.name:""},r.prototype.name=function(t){var e=t.name;if(-1!==e.indexOf(".")||!t.parent)return e;var n=l.isString(t.parent)?t.parent:t.parent.name;return n?n+"."+e:e},r);function r(e,t){this.matcher=e;function n(){return e.find("")}function i(t){return""===t.name}var r,o,s=this;this.builders={name:[a],self:[d],parent:[function(t){return i(t)?null:e.find(s.parentName(t))||n()}],data:[g],url:[v(t,n)],navigable:[(o=i,function(t){return!o(t)&&t.url?t:t.parent?t.parent.navigable:null})],params:[(r=t.paramFactory,function(t){var e=t.url&&t.url.parameters({inherit:!1})||[],n=u.values(u.mapObj(u.omit(t.params||{},e.map(h.prop("id"))),function(t,e){return r.fromConfig(e,null,t)}));return e.concat(n).map(function(t){return[t.id,t]}).reduce(u.applyPairs,{})})],views:[],path:[m],includes:[y],resolvables:[_]}}e.StateBuilder=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),u=n(0),i=(r.prototype.isRelative=function(t){return 0===(t=t||"").indexOf(".")||0===t.indexOf("^")},r.prototype.find=function(t,e,n){if(void 0===n&&(n=!0),t||""===t){var i=a.isString(t),r=i?t:t.name;this.isRelative(r)&&(r=this.resolvePath(r,e));var o=this._states[r];if(o&&(i||!(i||o!==t&&o.self!==t)))return o;if(i&&n){var s=u.values(this._states).filter(function(t){return t.__stateObjectCache.nameGlob&&t.__stateObjectCache.nameGlob.matches(r)});return 1<s.length&&console.log("stateMatcher.find: Found multiple matches for "+r+" using glob: ",s.map(function(t){return t.name})),s[0]}}},r.prototype.resolvePath=function(t,e){if(!e)throw new Error("No reference point given for path '"+t+"'");for(var n=this.find(e),i=t.split("."),r=0,o=i.length,s=n;r<o;r++)if(""!==i[r]||0!==r){if("^"!==i[r])break;if(!s.parent)throw new Error("Path '"+t+"' not valid for state '"+n.name+"'");s=s.parent}else s=n;var a=i.slice(r).join(".");return s.name+(s.name&&a?".":"")+a},r);function r(t){this._states=t}e.StateMatcher=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),s=n(39),a=n(2),i=(u.prototype.dispose=function(){this.queue=[]},u.prototype.register=function(t){var e=this.queue,n=s.StateObject.create(t),i=n.name;if(!o.isString(i))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(i)||r.inArray(e.map(a.prop("name")),i))throw new Error("State '"+i+"' is already defined");return e.push(n),this.flush(),n},u.prototype.flush=function(){for(var e=this,t=this.queue,n=this.states,i=this.builder,r=[],o=[],s={},a=function(t){return e.states.hasOwnProperty(t)&&e.states[t]};0<t.length;){var u=t.shift(),l=u.name,c=i.build(u),h=o.indexOf(u);if(c){var f=a(l);if(f&&f.name===l)throw new Error("State '"+l+"' is already defined");var p=a(l+".**");p&&this.$registry.deregister(p),n[l]=u,this.attachRoute(u),0<=h&&o.splice(h,1),r.push(u)}else{var d=s[l];if(s[l]=t.length,0<=h&&d===t.length)return t.push(u),n;h<0&&o.push(u),t.push(u)}}return r.length&&this.listeners.forEach(function(t){return t("registered",r.map(function(t){return t.self}))}),n},u.prototype.attachRoute=function(t){!t.abstract&&t.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(t))},u);function u(t,e,n,i,r){this.$registry=t,this.$urlRouter=e,this.states=n,this.builder=i,this.listeners=r,this.queue=[],this.matcher=t.matcher}e.StateQueueManager=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(71),r=n(70),o=n(72),s=n(0),a=n(2),u=(l.prototype._registerRoot=function(){(this._root=this.stateQueue.register({name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0})).navigable=null},l.prototype.dispose=function(){var e=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(t){return e.get(t)&&e.deregister(t)})},l.prototype.onStatesChanged=function(t){return this.listeners.push(t),function(){s.removeFrom(this.listeners)(t)}.bind(this)},l.prototype.root=function(){return this._root},l.prototype.register=function(t){return this.stateQueue.register(t)},l.prototype._deregisterTree=function(t){var n=this,i=this.get().map(function(t){return t.$$state()}),r=function(e){var t=i.filter(function(t){return-1!==e.indexOf(t.parent)});return 0===t.length?t:t.concat(r(t))},e=r([t]),o=[t].concat(e).reverse();return o.forEach(function(t){var e=n._router.urlRouter;e.rules().filter(a.propEq("state",t)).forEach(e.removeRule.bind(e)),delete n.states[t.name]}),o},l.prototype.deregister=function(t){var e=this.get(t);if(!e)throw new Error("Can't deregister state; not found: "+t);var n=this._deregisterTree(e.$$state());return this.listeners.forEach(function(t){return t("deregistered",n.map(function(t){return t.self}))}),n},l.prototype.get=function(t,e){var n=this;if(0===arguments.length)return Object.keys(this.states).map(function(t){return n.states[t].self});var i=this.matcher.find(t,e);return i&&i.self||null},l.prototype.decorator=function(t,e){return this.builder.builder(t,e)},l);function l(t){this._router=t,this.states={},this.listeners=[],this.matcher=new i.StateMatcher(this.states),this.builder=new r.StateBuilder(this.matcher,t.urlMatcherFactory),this.stateQueue=new o.StateQueueManager(this,t.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}e.StateRegistry=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=n(0),a=n(1),c=n(40),f=n(3),p=n(30),i=n(42),d=n(44),g=n(20),v=n(16),u=n(17),l=n(28),m=n(31),o=n(82),r=n(2),s=(Object.defineProperty(y.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),y.prototype.dispose=function(){this.defaultErrorHandler(h.noop),this.invalidCallbacks=[]},y.prototype._handleInvalidTargetState=function(t,n){function i(){return e.transitionHistory.peekTail()}var r=this,o=p.PathUtils.makeTargetState(this.router.stateRegistry,t),e=this.router.globals,s=i(),a=new c.Queue(this.invalidCallbacks.slice()),u=new m.ResolveContext(t).injector(),l=function(t){if(t instanceof v.TargetState){var e=t;return(e=r.target(e.identifier(),e.params(),e.options())).valid()?i()!==s?g.Rejection.superseded().toPromise():r.transitionTo(e.identifier(),e.params(),e.options()):g.Rejection.invalid(e.error()).toPromise()}};return function e(){var t=a.dequeue();return void 0===t?g.Rejection.invalid(n.error()).toPromise():f.services.$q.when(t(n,o,u)).then(l).then(function(t){return t||e()})}()},y.prototype.onInvalid=function(t){return this.invalidCallbacks.push(t),function(){h.removeFrom(this.invalidCallbacks)(t)}.bind(this)},y.prototype.reload=function(t){return this.transitionTo(this.current,this.params,{reload:!a.isDefined(t)||t,inherit:!1,notify:!1})},y.prototype.go=function(t,e,n){var i={relative:this.$current,inherit:!0},r=h.defaults(n,i,d.defaultTransOpts);return this.transitionTo(t,e,r)},y.prototype.target=function(t,e,n){if(void 0===n&&(n={}),a.isObject(n.reload)&&!n.reload.name)throw new Error("Invalid reload state object");var i=this.router.stateRegistry;if(n.reloadState=!0===n.reload?i.root():i.matcher.find(n.reload,n.relative),n.reload&&!n.reloadState)throw new Error("No such reload state '"+(a.isString(n.reload)?n.reload:n.reload.name)+"'");return new v.TargetState(this.router.stateRegistry,t,e,n)},y.prototype.getCurrentPath=function(){var t=this,e=this.router.globals.successfulTransitions.peekTail();return e?e.treeChanges().to:[new i.PathNode(t.router.stateRegistry.root())]},y.prototype.transitionTo=function(t,e,n){var o=this;void 0===e&&(e={}),void 0===n&&(n={});var s=this.router,a=s.globals;n=h.defaults(n,d.defaultTransOpts),n=h.extend(n,{current:function(){return a.transition}});var i=this.target(t,e,n),r=this.getCurrentPath();if(!i.exists())return this._handleInvalidTargetState(r,i);if(!i.valid())return h.silentRejection(i.error());var u=function(r){return function(t){if(t instanceof g.Rejection){var e=s.globals.lastStartedTransitionId===r.$id;if(t.type===g.RejectType.IGNORED)return e&&s.urlRouter.update(),f.services.$q.when(a.current);var n=t.detail;if(t.type===g.RejectType.SUPERSEDED&&t.redirected&&n instanceof v.TargetState){var i=r.redirect(n);return i.run().catch(u(i))}if(t.type===g.RejectType.ABORTED)return e&&s.urlRouter.update(),f.services.$q.reject(t)}return o.defaultErrorHandler()(t),f.services.$q.reject(t)}},l=this.router.transitionService.create(r,i),c=l.run().catch(u(l));return h.silenceUncaughtInPromise(c),h.extend(c,{transition:l})},y.prototype.is=function(t,e,n){n=h.defaults(n,{relative:this.$current});var i=this.router.stateRegistry.matcher.find(t,n.relative);if(a.isDefined(i)){if(this.$current!==i)return!1;if(!e)return!0;var r=i.parameters({inherit:!0,matchingKeys:e});return u.Param.equals(r,u.Param.values(r,e),this.params)}},y.prototype.includes=function(t,e,n){n=h.defaults(n,{relative:this.$current});var i=a.isString(t)&&l.Glob.fromString(t);if(i){if(!i.matches(this.$current.name))return!1;t=this.$current.name}var r=this.router.stateRegistry.matcher.find(t,n.relative),o=this.$current.includes;if(a.isDefined(r)){if(!a.isDefined(o[r.name]))return!1;if(!e)return!0;var s=r.parameters({inherit:!0,matchingKeys:e});return u.Param.equals(s,u.Param.values(s,e),this.params)}},y.prototype.href=function(t,e,n){var i={lossy:!0,inherit:!0,absolute:!1,relative:this.$current};n=h.defaults(n,i),e=e||{};var r=this.router.stateRegistry.matcher.find(t,n.relative);if(!a.isDefined(r))return null;n.inherit&&(e=this.params.$inherit(e,this.$current,r));var o=r&&n.lossy?r.navigable:r;return o&&void 0!==o.url&&null!==o.url?this.router.urlRouter.href(o.url,e,{absolute:n.absolute}):null},y.prototype.defaultErrorHandler=function(t){return this._defaultErrorHandler=t||this._defaultErrorHandler},y.prototype.get=function(t,e){var n=this.router.stateRegistry;return 0===arguments.length?n.get():n.get(t,e||this.$current)},y.prototype.lazyLoad=function(t,e){var n=this.get(t);if(!n||!n.lazyLoad)throw new Error("Can not lazy load "+t);var i=this.getCurrentPath(),r=p.PathUtils.makeTargetState(this.router.stateRegistry,i);return e=e||this.router.transitionService.create(i,r),o.lazyLoadState(e,n)},y);function y(t){this.router=t,this.invalidCallbacks=[],this._defaultErrorHandler=function(t){t instanceof Error&&t.stack?(console.error(t),console.error(t.stack)):t instanceof g.Rejection?(console.error(t.toString()),t.detail&&t.detail.stack&&console.error(t.detail.stack)):console.error(t)};var e=Object.keys(y.prototype).filter(r.not(h.inArray(["current","$current","params","transition"])));h.createProxyFunctions(r.val(y.prototype),this,r.val(this),e)}e.StateService=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(76),r=n(77),o=n(44),s=n(79),a=n(73),u=n(74),l=n(80),c=n(0),h=n(1),f=n(81),p=n(11),d=0,g=(v.prototype.disposable=function(t){this._disposables.push(t)},v.prototype.dispose=function(t){var e=this;t&&h.isFunction(t.dispose)?t.dispose(this):(this._disposed=!0,this._disposables.slice().forEach(function(t){try{"function"==typeof t.dispose&&t.dispose(e),c.removeFrom(e._disposables,t)}catch(t){}}))},v.prototype.plugin=function(t,e){void 0===e&&(e={});var n=new t(this,e);if(!n.name)throw new Error("Required property `name` missing on plugin: "+n);return this._disposables.push(n),this._plugins[n.name]=n},v.prototype.getPlugin=function(t){return t?this._plugins[t]:c.values(this._plugins)},v);function v(t,e){void 0===t&&(t=f.UrlService.locationServiceStub),void 0===e&&(e=f.UrlService.locationConfigStub),this.locationService=t,this.locationConfig=e,this.$id=d++,this._disposed=!1,this._disposables=[],this.trace=p.trace,this.viewService=new s.ViewService,this.transitionService=new o.TransitionService(this),this.globals=new l.UIRouterGlobals,this.urlMatcherFactory=new i.UrlMatcherFactory,this.urlRouter=new r.UrlRouter(this),this.stateRegistry=new a.StateRegistry(this),this.stateService=new u.StateService(this),this.urlService=new f.UrlService(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(t),this.disposable(e)}e.UIRouter=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),s=n(32),a=n(17),u=n(68),i=(l.prototype.caseInsensitive=function(t){return this._isCaseInsensitive=o.isDefined(t)?t:this._isCaseInsensitive},l.prototype.strictMode=function(t){return this._isStrictMode=o.isDefined(t)?t:this._isStrictMode},l.prototype.defaultSquashPolicy=function(t){if(o.isDefined(t)&&!0!==t&&!1!==t&&!o.isString(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=o.isDefined(t)?t:this._defaultSquashPolicy},l.prototype.compile=function(t,e){return new s.UrlMatcher(t,this.paramTypes,this.paramFactory,this._getConfig(e))},l.prototype.isMatcher=function(n){if(!o.isObject(n))return!1;var i=!0;return r.forEach(s.UrlMatcher.prototype,function(t,e){o.isFunction(t)&&(i=i&&o.isDefined(n[e])&&o.isFunction(n[e]))}),i},l.prototype.type=function(t,e,n){var i=this.paramTypes.type(t,e,n);return o.isDefined(e)?this:i},l.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},l.prototype.dispose=function(){this.paramTypes.dispose()},l);function l(){var i=this;this.paramTypes=new u.ParamTypes,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this._getConfig=function(t){return r.extend({strict:i._isStrictMode,caseInsensitive:i._isCaseInsensitive},t)},this.paramFactory={fromConfig:function(t,e,n){return new a.Param(t,e,n,a.DefType.CONFIG,i)},fromPath:function(t,e,n){return new a.Param(t,e,n,a.DefType.PATH,i)},fromSearch:function(t,e,n){return new a.Param(t,e,n,a.DefType.SEARCH,i)}},r.extend(this,{UrlMatcher:s.UrlMatcher,Param:a.Param})}e.UrlMatcherFactory=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),s=n(1),h=n(32),a=n(2),i=n(78),l=n(16),f=n(5);var r=function(t,e){var n,i,r,o,s,a,u,l,c=(n=t,(e.priority||0)-(n.priority||0));return 0!==c?c:(i=e,0!==(c=((r={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1})[t.type]||0)-(r[i.type]||0))?c:(s=e,0!==(c=(o=t).urlMatcher&&s.urlMatcher?h.UrlMatcher.compare(o.urlMatcher,s.urlMatcher):0)?c:(u=e,(l={STATE:!0,URLMATCHER:!0})[(a=t).type]&&l[u.type]?0:(a.$id||0)-(u.$id||0))))},o=(c.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},c.prototype.sort=function(t){this._rules=this.stableSort(this._rules,this._sortFn=t||this._sortFn),this._sorted=!0},c.prototype.ensureSorted=function(){this._sorted||this.sort()},c.prototype.stableSort=function(t,i){var e=t.map(function(t,e){return{elem:t,idx:e}});return e.sort(function(t,e){var n=i(t.elem,e.elem);return 0===n?t.idx-e.idx:n}),e.map(function(t){return t.elem})},c.prototype.match=function(t){var e=this;this.ensureSorted(),t=u.extend({path:"",search:{},hash:""},t);var n=this.rules();this._otherwiseFn&&n.push(this._otherwiseFn);for(var i,r,o=0;o<n.length&&(!a||0===this._sortFn(n[o],a.rule));o++)var s=(i=n[o],r=void 0,(r=i.match(t,e._router))&&{match:r,rule:i,weight:i.matchPriority(r)}),a=!a||s&&s.weight>a.weight?s:a;return a},c.prototype.sync=function(t){var e,n,i,r,o;t&&t.defaultPrevented||(e=this._router,n=e.urlService,i=e.stateService,r={path:n.path(),search:n.search(),hash:n.hash()},o=this.match(r),a.pattern([[s.isString,function(t){return n.url(t,!0)}],[l.TargetState.isDef,function(t){return i.go(t.state,t.params,t.options)}],[a.is(l.TargetState),function(t){return i.go(t.state(),t.params(),t.options())}]])(o&&o.rule.handler(o.match,r,e)))},c.prototype.listen=function(t){var e=this;if(!1!==t)return this._stopFn=this._stopFn||this._router.urlService.onChange(function(t){return e.sync(t)});this._stopFn&&this._stopFn(),delete this._stopFn},c.prototype.update=function(t){var e=this._router.locationService;t?this.location=e.url():e.url()!==this.location&&e.url(this.location,!0)},c.prototype.push=function(t,e,n){var i=n&&!!n.replace;this._router.urlService.url(t.format(e||{}),i)},c.prototype.href=function(t,e,n){var i=t.format(e);if(null==i)return null;n=n||{absolute:!1};var r,o,s,a,u=this._router.urlService.config,l=u.html5Mode();if(l||null===i||(i="#"+u.hashPrefix()+i),r=i,o=l,s=n.absolute,i="/"===(a=u.baseHref())?r:o?f.stripLastPathElement(a)+r:s?a.slice(1)+r:r,!n.absolute||!i)return i;var c=!l&&i?"/":"",h=80===(h=u.port())||443===h?"":":"+h;return[u.protocol(),"://",u.host(),h,c,i].join("")},c.prototype.rule=function(t){var e=this;if(!i.UrlRuleFactory.isUrlRule(t))throw new Error("invalid rule");return t.$id=this._id++,t.priority=t.priority||0,this._rules.push(t),this._sorted=!1,function(){return e.removeRule(t)}},c.prototype.removeRule=function(t){u.removeFrom(this._rules,t)},c.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},c.prototype.otherwise=function(t){var e=p(t);this._otherwiseFn=this.urlRuleFactory.create(a.val(!0),e),this._sorted=!1},c.prototype.initial=function(t){var e=p(t);this.rule(this.urlRuleFactory.create(function(t,e){return 0===e.globals.transitionHistory.size()&&!!/^\/?$/.exec(t.path)},e))},c.prototype.when=function(t,e,n){var i=this.urlRuleFactory.create(t,e);return s.isDefined(n&&n.priority)&&(i.priority=n.priority),this.rule(i),i},c.prototype.deferIntercept=function(t){void 0===t&&(t=!0),this.interceptDeferred=t},c);function c(t){this._sortFn=r,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=t,this.urlRuleFactory=new i.UrlRuleFactory(t),u.createProxyFunctions(a.val(c.prototype),this,a.val(this))}function p(t){if(!(s.isFunction(t)||s.isString(t)||a.is(l.TargetState)(t)||l.TargetState.isDef(t)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return s.isFunction(t)?t:a.val(t)}e.UrlRouter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(32),s=n(1),a=n(0),u=n(2),i=(r.prototype.compile=function(t){return this.router.urlMatcherFactory.compile(t)},r.prototype.create=function(t,e){var n=this,i=u.pattern([[s.isString,function(t){return i(n.compile(t))}],[u.is(o.UrlMatcher),function(t){return n.fromUrlMatcher(t,e)}],[s.isState,function(t){return n.fromState(t,n.router)}],[u.is(RegExp),function(t){return n.fromRegExp(t,e)}],[s.isFunction,function(t){return new l(t,e)}]]),r=i(t);if(!r)throw new Error("invalid 'what' in when()");return r},r.prototype.fromUrlMatcher=function(n,e){var t=e;s.isString(e)&&(e=this.router.urlMatcherFactory.compile(e)),u.is(o.UrlMatcher)(e)&&(t=function(t){return e.format(t)});var i={urlMatcher:n,matchPriority:function(e){var t=n.parameters().filter(function(t){return t.isOptional});return t.length?t.filter(function(t){return e[t.id]}).length/t.length:1e-6},type:"URLMATCHER"};return a.extend(new l(function(t){var e=n.exec(t.path,t.search,t.hash);return n.validates(e)&&e},t),i)},r.prototype.fromState=function(i,r){var t={state:i,type:"STATE"};return a.extend(this.fromUrlMatcher(i.url,function(t){var e=r.stateService,n=r.globals;e.href(i,t)!==e.href(n.current,n.params)&&e.transitionTo(i,t,{inherit:!0,source:"url"})}),t)},r.prototype.fromRegExp=function(e,t){if(e.global||e.sticky)throw new Error("Rule RegExp must not be global or sticky");var n=s.isString(t)?function(n){return t.replace(/\$(\$|\d{1,2})/,function(t,e){return n["$"===e?0:Number(e)]})}:t,i={regexp:e,type:"REGEXP"};return a.extend(new l(function(t){return e.exec(t.path)},n),i)},r.isUrlRule=function(e){return e&&["type","match","handler"].every(function(t){return s.isDefined(e[t])})},r);function r(t){this.router=t}e.UrlRuleFactory=i;var l=function(t,e){var n=this;this.match=t,this.type="RAW",this.matchPriority=function(t){return 0-n.$id},this.handler=e||a.identity};e.BaseUrlRule=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),u=n(2),s=n(1),c=n(11),i=(h.prototype._rootViewContext=function(t){return this._rootContext=t||this._rootContext},h.prototype._viewConfigFactory=function(t,e){this._viewConfigFactories[t]=e},h.prototype.createViewConfig=function(t,e){var n=this._viewConfigFactories[e.$type];if(!n)throw new Error("ViewService: No view config factory registered for type "+e.$type);var i=n(t,e);return s.isArray(i)?i:[i]},h.prototype.deactivateViewConfig=function(t){c.trace.traceViewServiceEvent("<- Removing",t),l.removeFrom(this._viewConfigs,t)},h.prototype.activateViewConfig=function(t){c.trace.traceViewServiceEvent("-> Registering",t),this._viewConfigs.push(t)},h.prototype.sync=function(){var n=this,i=this._uiViews.map(function(t){return[t.fqn,t]}).reduce(l.applyPairs,{});function r(t){for(var e=t.viewDecl.$context,n=0;++n&&e.parent;)e=e.parent;return n}var o=u.curry(function(t,e,n,i){return e*(t(n)-t(i))}),t=this._uiViews.sort(o(function(t){var e=function(t){return t&&t.parent?e(t.parent)+1:1};return 1e4*t.fqn.split(".").length+e(t.creationContext)},1)).map(function(t){var e=n._viewConfigs.filter(h.matches(i,t));return 1<e.length&&e.sort(o(r,-1)),{uiView:t,viewConfig:e[0]}}),e=t.map(function(t){return t.viewConfig}),s=this._viewConfigs.filter(function(t){return l.inArray(e,t)}).map(function(t){return{uiView:void 0,viewConfig:t}}),a=t.concat(s);t.forEach(function(t){-1!==n._uiViews.indexOf(t.uiView)&&t.uiView.configUpdated(t.viewConfig)}),this._listeners.forEach(function(t){return t(a)}),c.trace.traceViewSync(a)},h.prototype.registerUIView=function(e){c.trace.traceViewServiceUIViewEvent("-> Registering",e);var t=this._uiViews;return t.filter(function(t){return t.fqn===e.fqn&&t.$type===e.$type}).length&&c.trace.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",e),t.push(e),this.sync(),function(){-1!==t.indexOf(e)?(c.trace.traceViewServiceUIViewEvent("<- Deregistering",e),l.removeFrom(t)(e)):c.trace.traceViewServiceUIViewEvent("Tried removing non-registered uiView",e)}},h.prototype.available=function(){return this._uiViews.map(u.prop("fqn"))},h.prototype.active=function(){return this._uiViews.filter(u.prop("$config")).map(u.prop("name"))},h.normalizeUIViewTarget=function(t,e){void 0===e&&(e="");var n=e.split("@"),i=n[0]||"$default",r=s.isString(n[1])?n[1]:"^",o=/^(\^(?:\.\^)*)\.(.*$)/.exec(i);return o&&(r=o[1],i=o[2]),"!"===i.charAt(0)&&(i=i.substr(1),r=""),/^(\^(?:\.\^)*)$/.exec(r)?r=r.split(".").reduce(function(t,e){return t.parent},t).name:"."===r&&(r=t.name),{uiViewName:i,uiViewContextAnchor:r}},h.matches=function(a,u){return function(t){if(u.$type!==t.viewDecl.$type)return!1;var e=t.viewDecl,n=e.$uiViewName.split("."),i=u.fqn.split(".");if(!l.equals(n,i.slice(0-n.length)))return!1;var r=1-n.length||void 0,o=i.slice(0,r).join("."),s=a[o].creationContext;return e.$uiViewContextAnchor===(s&&s.name)}},h);function h(){var e=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._listeners=[],this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return e._uiViews},_activeViewConfigs:function(){return e._viewConfigs},_onSync:function(t){return e._listeners.push(t),function(){return l.removeFrom(e._listeners,t)}}}}e.ViewService=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(69),r=n(40),o=(s.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},s);function s(){this.params=new i.StateParams,this.lastStartedTransitionId=-1,this.transitionHistory=new r.Queue([],1),this.successfulTransitions=new r.Queue([],1)}e.UIRouterGlobals=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(t){return t.reduce(function(t,e){return t[e]=r.notImplemented(e),t},{dispose:s.noop})}var r=n(3),s=n(0),a=["url","path","search","hash","onChange"],u=["port","protocol","host","baseHref","html5Mode","hashPrefix"],l=["type","caseInsensitive","strictMode","defaultSquashPolicy"],c=["sort","when","initial","otherwise","rules","rule","removeRule"],h=["deferIntercept","listen","sync","match"],o=(f.prototype.url=function(t,e,n){},f.prototype.path=function(){},f.prototype.search=function(){},f.prototype.hash=function(){},f.prototype.onChange=function(t){},f.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},f.prototype.dispose=function(){},f.prototype.sync=function(t){},f.prototype.listen=function(t){},f.prototype.deferIntercept=function(t){},f.prototype.match=function(t){},f.locationServiceStub=i(a),f.locationConfigStub=i(u),f);function f(t,e){void 0===e&&(e=!0),this.router=t,this.rules={},this.config={};function n(){return t.locationService}s.createProxyFunctions(n,this,n,a,e);function i(){return t.locationConfig}s.createProxyFunctions(i,this.config,i,u,e);function r(){return t.urlMatcherFactory}s.createProxyFunctions(r,this.config,r,l);function o(){return t.urlRouter}s.createProxyFunctions(o,this.rules,o,c),s.createProxyFunctions(o,this,o,h)}e.UrlService=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(s){var a=s.router,t=s.entering().filter(function(t){return!!t.$$state().lazyLoad}).map(function(t){return o(s,t)});return r.services.$q.all(t).then(function(){if("url"!==s.originalTransition().options().source){var t=s.targetState();return a.stateService.target(t.identifier(),t.params(),t.options())}var e=a.urlService,n=e.match(e.parts()),i=n&&n.rule;if(i&&"STATE"===i.type){var r=i.state,o=n.match;return a.stateService.target(r,o,s.options())}a.urlService.sync()})}var r=n(3);function o(e,n){var i=n.$$state().lazyLoad,t=i._promise;return t||(t=i._promise=r.services.$q.when(i(e,n)).then(function(t){t&&Array.isArray(t.states)&&t.states.forEach(function(t){return e.router.stateRegistry.register(t)});return t}).then(function(t){return delete n.lazyLoad,delete n.$$state().lazyLoad,delete i._promise,t},function(t){return delete i._promise,r.services.$q.reject(t)})),t}e.registerLazyLoadHook=function(t){return t.onBefore({entering:function(t){return!!t.lazyLoad}},i)},e.lazyLoadState=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(t,e,n,i,r,o,s,a){void 0===r&&(r=!1),void 0===o&&(o=u.TransitionHook.HANDLE_RESULT),void 0===s&&(s=u.TransitionHook.REJECT_ERROR),void 0===a&&(a=!1),this.name=t,this.hookPhase=e,this.hookOrder=n,this.criteriaMatchPath=i,this.reverseSort=r,this.getResultHandler=o,this.getErrorHandler=s,this.synchronous=a}var u=n(21);e.TransitionEventType=i},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e(5);n.$q={when:function(n){return new Promise(function(t,e){return t(n)})},reject:function(n){return new Promise(function(t,e){e(n)})},defer:function(){var n={};return n.promise=new Promise(function(t,e){n.resolve=t,n.reject=e}),n},all:function(t){if(i.isArray(t))return Promise.all(t);if(i.isObject(t)){var e=Object.keys(t).map(function(e){return t[e].then(function(t){return{key:e,val:t}})});return n.$q.all(e).then(function(t){return t.reduce(function(t,e){return t[e.key]=e.val,t},{})})}}}},function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var u=e(5),l={},n=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,i=/([^\s,]+)/g;a.$injector={get:function(t){return l[t]},has:function(t){return null!=a.$injector.get(t)},invoke:function(t,e,n){var i=u.extend({},l,n||{}),r=a.$injector.annotate(t),o=u.assertPredicate(function(t){return i.hasOwnProperty(t)},function(t){return"DI can't find injectable: '"+t+"'"}),s=r.filter(o).map(function(t){return i[t]});return u.isFunction(t)?t.apply(e,s):t.slice(-1)[0].apply(e,s)},annotate:function(t){if(!u.isInjectable(t))throw new Error("Not an injectable function: "+t);if(t&&t.$inject)return t.$inject;if(u.isArray(t))return t.slice(0,-1);var e=t.toString().replace(n,"");return e.slice(e.indexOf("(")+1,e.indexOf(")")).match(i)||[]}}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(5),a=n(33),u=(o=a.BaseLocationServices,r(l,o),l.prototype._get=function(){return s.trimHashVal(this._location.hash)},l.prototype._set=function(t,e,n,i){this._location.hash=n},l.prototype.dispose=function(t){o.prototype.dispose.call(this,t),s.root.removeEventListener("hashchange",this._listener)},l);function l(t){var e=o.call(this,t,!1)||this;return s.root.addEventListener("hashchange",e._listener,!1),e}e.HashLocationService=u},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(33),a=(o=s.BaseLocationServices,r(u,o),u.prototype._get=function(){return this._url},u.prototype._set=function(t,e,n,i){this._url=n},u);function u(t){return o.call(this,t,!0)||this}e.MemoryLocationService=a},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(33),a=n(5),u=(o=s.BaseLocationServices,r(l,o),l.prototype._getBasePrefix=function(){return a.stripLastPathElement(this._config.baseHref())},l.prototype._get=function(){var t=this._location,e=t.pathname,n=t.hash,i=t.search,i=a.splitQuery(i)[1],n=a.splitHash(n)[1],r=this._getBasePrefix(),o=e===this._config.baseHref(),s=e.substr(0,r.length)===r;return(e=o?"/":s?e.substring(r.length):e)+(i?"?"+i:"")+(n?"#"+n:"")},l.prototype._set=function(t,e,n,i){var r=this._getBasePrefix(),o=n&&"/"!==n[0]?"/":"",s=""===n||"/"===n?this._config.baseHref():r+o+n;i?this._history.replaceState(t,e,s):this._history.pushState(t,e,s)},l.prototype.dispose=function(t){o.prototype.dispose.call(this,t),a.root.removeEventListener("popstate",this._listener)},l);function l(t){var e=o.call(this,t,!0)||this;return e._config=t.urlService.config,a.root.addEventListener("popstate",e._listener,!1),e}e.PushStateLocationService=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(){var e=this;this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return e._port},this.protocol=function(){return e._protocol},this.host=function(){return e._host},this.baseHref=function(){return e._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(t){return r.isDefined(t)?e._hashPrefix=t:e._hashPrefix},this.dispose=o.noop}var r=n(1),o=n(0);e.MemoryLocationConfig=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=(o.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},o.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},o.prototype.host=function(){return location.hostname},o.prototype.html5Mode=function(){return this._isHtml5},o.prototype.hashPrefix=function(t){return i.isDefined(t)?this._hashPrefix=t:this._hashPrefix},o.prototype.baseHref=function(t){return i.isDefined(t)?this._baseHref=t:i.isDefined(this._baseHref)?this._baseHref:this.applyDocumentBaseHref()},o.prototype.applyDocumentBaseHref=function(){var t=document.getElementsByTagName("base")[0];return this._baseHref=t?t.href.substr(location.origin.length):location.pathname||"/"},o.prototype.dispose=function(){},o);function o(t,e){void 0===e&&(e=!1),this._isHtml5=e,this._baseHref=void 0,this._hashPrefix=""}e.BrowserLocationConfig=r},function(t,e,n){},function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,e,n){t.exports=function(){return new Worker(n.p+"ccaf33cb34f76c186b32.worker.js")}},function(t,e,n){"use strict";var c=n(171);function i(t){return new r(t)}function r(t){this.options=o(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function h(t){return{type:"Feature",properties:u(t),geometry:{type:"Point",coordinates:[360*(t.x-.5),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n}function u(t){var e=t.numPoints,n=1e4<=e?Math.round(e/1e3)+"k":1e3<=e?Math.round(e/100)/10+"k":e;return o(o({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function f(t){return t/360+.5}function p(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:1<n?1:n}function o(t,e){for(var n in e)t[n]=e[n];return t}function d(t){return t.x}function g(t){return t.y}t.exports=i,t.exports.default=i,r.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;for(var i,r,o,s=[],a=0;a<t.length;a++)t[a].geometry&&s.push((i=t[a],r=a,o=void 0,{x:f((o=i.geometry.coordinates)[0]),y:p(o[1]),zoom:1/0,id:r,parentId:-1}));this.trees[this.options.maxZoom+1]=c(s,d,g,this.options.nodeSize,Float32Array),e&&console.timeEnd(n);for(var u=this.options.maxZoom;u>=this.options.minZoom;u--){var l=+Date.now(),s=this._cluster(s,u);this.trees[u]=c(s,d,g,this.options.nodeSize,Float32Array),e&&console.log("z%d: %d clusters in %dms",u,s.length,Date.now()-l)}return e&&console.timeEnd("total time"),this},getClusters:function(t,e){if(t[0]>t[2]){var n=this.getClusters([t[0],t[1],180,t[3]],e),i=this.getClusters([-180,t[1],t[2],t[3]],e);return n.concat(i)}for(var r=this.trees[this._limitZoom(e)],o=r.range(f(t[0]),p(t[3]),f(t[2]),p(t[1])),s=[],a=0;a<o.length;a++){var u=r.points[o[a]];s.push(u.numPoints?h(u):this.points[u.id])}return s},getChildren:function(t){var e=t>>5,n=t%32,i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);var o=r.points[e];if(!o)throw new Error(i);for(var s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=r.within(o.x,o.y,s),u=[],l=0;l<a.length;l++){var c=r.points[a[l]];c.parentId===t&&u.push(c.numPoints?h(c):this.points[c.id])}if(0===u.length)throw new Error(i);return u},getLeaves:function(t,e,n){e=e||10,n=n||0;var i=[];return this._appendLeaves(i,t,e,n,0),i},getTile:function(t,e,n){var i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options.extent,s=this.options.radius/o,a=(n-s)/r,u=(n+1+s)/r,l={features:[]};return this._addTileFeatures(i.range((e-s)/r,a,(e+1+s)/r,u),i.points,e,n,r,l),0===e&&this._addTileFeatures(i.range(1-s/r,a,1,u),i.points,r,n,r,l),e===r-1&&this._addTileFeatures(i.range(0,a,s/r,u),i.points,-1,n,r,l),l.features.length?l:null},getClusterExpansionZoom:function(t){for(var e=t%32-1;e<this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,i,r){for(var o=this.getChildren(e),s=0;s<o.length;s++){var a=o[s].properties;if(a&&a.cluster?r+a.point_count<=i?r+=a.point_count:r=this._appendLeaves(t,a.cluster_id,n,i,r):r<i?r++:t.push(o[s]),t.length===n)break}return r},_addTileFeatures:function(t,e,n,i,r,o){for(var s=0;s<t.length;s++){var a=e[t[s]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(a.x*r-n)),Math.round(this.options.extent*(a.y*r-i))]],tags:a.numPoints?u(a):this.points[a.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],i=this.options.radius/(this.options.extent*Math.pow(2,e)),r=0;r<t.length;r++){var o=t[r];if(!(o.zoom<=e)){o.zoom=e;var s=this.trees[e+1],a=s.within(o.x,o.y,i),u=o.numPoints||1,l=o.x*u,c=o.y*u,h=null;this.options.reduce&&(h=this.options.initial(),this._accumulate(h,o));for(var f=(r<<5)+(e+1),p=0;p<a.length;p++){var d,g=s.points[a[p]];g.zoom<=e||(g.zoom=e,d=g.numPoints||1,l+=g.x*d,c+=g.y*d,u+=d,g.parentId=f,this.options.reduce&&this._accumulate(h,g))}1===u?n.push(o):(o.parentId=f,n.push({x:l/u,y:c/u,zoom:1/0,id:f,parentId:-1,numPoints:u,properties:h}))}}return n},_accumulate:function(t,e){var n=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,n)}}},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!i.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:i},function(t,e,n){var i=n(4),r=n(14),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,e,n){var i,r,o,s,a,u,l,c,h=n(100),f=n(4),p=n(14),d=n(24),g=n(12),v=n(101),m=n(57),y=f.WeakMap;l=h?(i=new y,r=i.get,o=i.has,s=i.set,a=function(t,e){return s.call(i,t,e),e},u=function(t){return r.call(i,t)||{}},function(t){return o.call(i,t)}):(m[c=v("state")]=!0,a=function(t,e){return d(t,c,e),e},u=function(t){return g(t,c)?t[c]:{}},function(t){return g(t,c)}),t.exports={set:a,get:u,has:l,enforce:function(t){return l(t)?u(t):a(t,{})},getterFor:function(n){return function(t){var e;if(!p(t)||(e=u(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}}},function(t,e,n){var i=n(4),r=n(53),o=i.WeakMap;t.exports="function"==typeof o&&/native code/.test(r(o))},function(t,e,n){var i=n(55),r=n(56),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},function(t,e){t.exports=!1},function(t,e,n){var a=n(12),u=n(104),l=n(48),c=n(37);t.exports=function(t,e){for(var n=u(e),i=c.f,r=l.f,o=0;o<n.length;o++){var s=n[o];a(t,s)||i(t,s,r(e,s))}}},function(t,e,n){var i=n(58),r=n(106),o=n(111),s=n(25);t.exports=i("Reflect","ownKeys")||function(t){var e=r.f(s(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var i=n(4);t.exports=i},function(t,e,n){var i=n(107),r=n(110).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var s=n(12),a=n(34),u=n(108).indexOf,l=n(57);t.exports=function(t,e){var n,i=a(t),r=0,o=[];for(n in i)!s(l,n)&&s(i,n)&&o.push(n);for(;e.length>r;)s(i,n=e[r++])&&(~u(o,n)||o.push(n));return o}},function(t,e,n){function i(a){return function(t,e,n){var i,r=u(t),o=l(r.length),s=c(n,o);if(a&&e!=e){for(;s<o;)if((i=r[s++])!=i)return!0}else for(;s<o;s++)if((a||s in r)&&r[s]===e)return a||s||0;return!a&&-1}}var u=n(34),l=n(59),c=n(109);t.exports={includes:i(!0),indexOf:i(!1)}},function(t,e,n){var i=n(60),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){function i(t,e){var n=a[s(t)];return n==l||n!=u&&("function"==typeof e?r(e):!!e)}var r=n(10),o=/#|\.prototype\./,s=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},a=i.data={},u=i.NATIVE="N",l=i.POLYFILL="P";t.exports=i},function(t,e,n){var o=n(62);t.exports=function(i,r,t){if(o(i),void 0===r)return i;switch(t){case 0:return function(){return i.call(r)};case 1:return function(t){return i.call(r,t)};case 2:return function(t,e){return i.call(r,t,e)};case 3:return function(t,e,n){return i.call(r,t,e,n)}}return function(){return i.apply(r,arguments)}}},function(t,e,n){var i=n(36);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i=n(14),r=n(116),o=n(27)("species");t.exports=function(t,e){var n;return r(t)&&("function"==typeof(n=t.constructor)&&(n===Array||r(n.prototype))||i(n)&&null===(n=n[o]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var i=n(35);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(63);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var i=n(10),r=n(27),o=n(119),s=r("species");t.exports=function(e){return 51<=o||!i(function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(t,e,n){var i,r,o=n(4),s=n(64),a=o.process,u=a&&a.versions,l=u&&u.v8;l?r=(i=l.split("."))[0]+i[1]:s&&(!(i=s.match(/Edge\/(\d+)/))||74<=i[1])&&(i=s.match(/Chrome\/(\d+)/))&&(r=i[1]),t.exports=r&&+r},function(t,e,n){"use strict";var i=n(19),r=n(121);i({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},function(t,e,n){"use strict";var i=n(61).forEach,r=n(122),o=n(65),s=r("forEach"),a=o("forEach");t.exports=s&&a?[].forEach:function(t,e){return i(this,t,1<arguments.length?e:void 0)}},function(t,e,n){"use strict";var i=n(10);t.exports=function(t,e){var n=[][t];return!!n&&i(function(){n.call(null,e||function(){throw 1},1)})}},function(t,e,n){
/**
 * State-based routing for AngularJS 1.x
 * This bundle requires the ui-router-core.js bundle from the @uirouter/core package.
 * @version v1.0.12
 * @link https://ui-router.github.io
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t,R){"use strict";var n=angular,w=t&&t.module?t:n;function i(){var n=null;return function(t,e){n=n||R.services.$injector.get("$templateFactory");return[new b(t,e,n)]}}var u=function(t,n){return t.reduce(function(t,e){return t||R.isDefined(n[e])},false)};function r(i){if(!i.parent)return{};var t=["templateProvider","templateUrl","template","notify","async"],e=["controller","controllerProvider","controllerAs","resolveAs"],r=["component","bindings","componentProvider"],o=t.concat(e),n=r.concat(o);if(R.isDefined(i.views)&&u(n,i)){throw new Error("State '"+i.name+"' has a 'views' object. "+'It cannot also have "view properties" at the state level.  '+"Move the following properties into a view (in the 'views' object): "+(" "+n.filter(function(t){return R.isDefined(i[t])}).join(", ")))}var s={},a=i.views||{$default:R.pick(i,n)};R.forEach(a,function(t,e){e=e||"$default";if(R.isString(t))t={component:t};t=R.extend({},t);if(u(r,t)&&u(o,t)){throw new Error("Cannot combine: "+r.join("|")+" with: "+o.join("|")+" in stateview: '"+e+"@"+i.name+"'")}t.resolveAs=t.resolveAs||"$resolve";t.$type="ng1";t.$context=i;t.$name=e;var n=R.ViewService.normalizeUIViewTarget(t.$context,t.$name);t.$uiViewName=n.uiViewName;t.$uiViewContextAnchor=n.uiViewContextAnchor;s[e]=t});return s}var o=0,b=function(){function t(t,e,n){var i=this;this.path=t;this.viewDecl=e;this.factory=n;this.$id=o++;this.loaded=false;this.getTemplate=function(t,e){return i.component?i.factory.makeComponentTemplate(t,e,i.component,i.viewDecl.bindings):i.template}}t.prototype.load=function(){var e=this;var t=R.services.$q;var n=new R.ResolveContext(this.path);var i=this.path.reduce(function(t,e){return R.extend(t,e.paramValues)},{});var r={template:t.when(this.factory.fromConfig(this.viewDecl,i,n)),controller:t.when(this.getController(n))};return t.all(r).then(function(t){R.trace.traceViewServiceEvent("Loaded",e);e.controller=t.controller;R.extend(e,t.template);return e})};t.prototype.getController=function(t){var e=this.viewDecl.controllerProvider;if(!R.isInjectable(e))return this.viewDecl.controller;var n=R.services.$injector.annotate(e);var i=R.isArray(e)?R.tail(e):e;var r=new R.Resolvable("",i,n);return r.get(t)};return t}(),s=function(){function t(){var i=this;this._useHttp=w.version.minor<3;this.$get=["$http","$templateCache","$injector",function(t,e,n){i.$templateRequest=n.has&&n.has("$templateRequest")&&n.get("$templateRequest");i.$http=t;i.$templateCache=e;return i}]}t.prototype.useHttpService=function(t){this._useHttp=t};t.prototype.fromConfig=function(t,e,n){var i="<ui-view></ui-view>";var r=function(t){return R.services.$q.when(t).then(function(t){return{template:t}})};var o=function(t){return R.services.$q.when(t).then(function(t){return{component:t}})};return R.isDefined(t.template)?r(this.fromString(t.template,e)):R.isDefined(t.templateUrl)?r(this.fromUrl(t.templateUrl,e)):R.isDefined(t.templateProvider)?r(this.fromProvider(t.templateProvider,e,n)):R.isDefined(t.component)?o(t.component):R.isDefined(t.componentProvider)?o(this.fromComponentProvider(t.componentProvider,e,n)):r(i)};t.prototype.fromString=function(t,e){return R.isFunction(t)?t(e):t};t.prototype.fromUrl=function(t,e){if(R.isFunction(t))t=t(e);if(t==null)return null;if(this._useHttp){return this.$http.get(t,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(t){return t.data})}return this.$templateRequest(t)};t.prototype.fromProvider=function(t,e,n){var i=R.services.$injector.annotate(t);var r=R.isArray(t)?R.tail(t):t;var o=new R.Resolvable("",r,i);return o.get(n)};t.prototype.fromComponentProvider=function(t,e,n){var i=R.services.$injector.annotate(t);var r=R.isArray(t)?R.tail(t):t;var o=new R.Resolvable("",r,i);return o.get(n)};t.prototype.makeComponentTemplate=function(l,c,t,h){h=h||{};var f=w.version.minor>=3?"::":"";var p=function(t){var e=R.kebobString(t);return/^(x|data)-/.exec(e)?"x-"+e:e};var e=function(t){var e=t.name,n=t.type;var i=p(e);if(l.attr(i)&&!h[e])return i+"='"+l.attr(i)+"'";var r=h[e]||e;if(n==="@")return i+"='{{"+f+"$resolve."+r+"}}'";if(n==="&"){var o=c.getResolvable(r);var s=o&&o.data;var a=s&&R.services.$injector.annotate(s)||[];var u=R.isArray(s)?"["+(s.length-1)+"]":"";return i+"='$resolve."+r+u+"("+a.join(",")+")'"}return i+"='"+f+"$resolve."+r+"'"};var n=a(t).map(e).join(" ");var i=p(t);return"<"+i+" "+n+"></"+i+">"};return t}();function a(t){var e=R.services.$injector.get(t+"Directive");if(!e||!e.length)throw new Error("Unable to find component named '"+t+"'");return e.map(l).reduce(R.unnestR,[])}var l=function(t){if(R.isObject(t.bindToController))return c(t.bindToController);return c(t.scope)},c=function(e){return Object.keys(e||{}).map(function(t){return[t,/^([=<@&])[?]?(.*)/.exec(e[t])]}).filter(function(t){return R.isDefined(t)&&R.isArray(t[1])}).map(function(t){return{name:t[1][2]||t[0],type:t[1][1]}})},h=function(){function n(t,e){this.stateRegistry=t;this.stateService=e;R.createProxyFunctions(R.val(n.prototype),this,R.val(this))}n.prototype.decorator=function(t,e){return this.stateRegistry.decorator(t,e)||this};n.prototype.state=function(t,e){if(R.isObject(t)){e=t}else{e.name=t}this.stateRegistry.register(e);return this};n.prototype.onInvalid=function(t){return this.stateService.onInvalid(t)};return n}(),f=function(r){return function t(e,n){var o=e[r];var s=r==="onExit"?"from":"to";function i(t,e){var n=new R.ResolveContext(t.treeChanges(s));var i=n.subContext(e.$$state());var r=R.extend(O(i),{$state$:e,$transition$:t});return R.services.$injector.invoke(o,this,r)}return o?i:undefined}},p=function(){function t(t){this._urlListeners=[];this.$locationProvider=t;var e=R.val(t);R.createProxyFunctions(e,this,e,["hashPrefix"])}t.prototype.dispose=function(){};t.prototype.onChange=function(t){var e=this;this._urlListeners.push(t);return function(){return R.removeFrom(e._urlListeners)(t)}};t.prototype.html5Mode=function(){var t=this.$locationProvider.html5Mode();t=R.isObject(t)?t.enabled:t;return t&&this.$sniffer.history};t.prototype.url=function(t,e,n){if(e===void 0){e=false}if(R.isDefined(t))this.$location.url(t);if(e)this.$location.replace();if(n)this.$location.state(n);return this.$location.url()};t.prototype._runtimeServices=function(t,e,n,i){var r=this;this.$location=e;this.$sniffer=n;t.$on("$locationChangeSuccess",function(e){return r._urlListeners.forEach(function(t){return t(e)})});var o=R.val(e);var s=R.val(i);R.createProxyFunctions(o,this,o,["replace","path","search","hash"]);R.createProxyFunctions(o,this,o,["port","protocol","host"]);R.createProxyFunctions(s,this,s,["baseHref"])};t.monkeyPatchPathParameterType=function(t){var e=t.urlMatcherFactory.type("path");e.encode=function(t){return t!=null?t.toString().replace(/(~|\/)/g,function(t){return{"~":"~~","/":"~2F"}[t]}):t};e.decode=function(t){return t!=null?t.toString().replace(/(~~|~2F)/g,function(t){return{"~~":"~","~2F":"/"}[t]}):t}};return t}(),d=function(){function n(t){this._router=t;this._urlRouter=t.urlRouter}n.prototype.$get=function(){var t=this._urlRouter;t.update(true);if(!t.interceptDeferred)t.listen();return t};n.prototype.rule=function(t){var e=this;if(!R.isFunction(t))throw new Error("'rule' must be a function");var n=function(){return t(R.services.$injector,e._router.locationService)};var i=new R.BaseUrlRule(n,R.identity);this._urlRouter.rule(i);return this};n.prototype.otherwise=function(t){var e=this;var n=this._urlRouter;if(R.isString(t)){n.otherwise(t)}else if(R.isFunction(t)){n.otherwise(function(){return t(R.services.$injector,e._router.locationService)})}else{throw new Error("'rule' must be a string or function")}return this};n.prototype.when=function(t,e){if(R.isArray(e)||R.isFunction(e)){e=n.injectableHandler(this._router,e)}this._urlRouter.when(t,e);return this};n.injectableHandler=function(e,n){return function(t){return R.services.$injector.invoke(n,null,{$match:t,$stateParams:e.globals.params})}};n.prototype.deferIntercept=function(t){this._urlRouter.deferIntercept(t)};return n}();w.module("ui.router.angular1",[]);var g=w.module("ui.router.init",[]),v=w.module("ui.router.util",["ng","ui.router.init"]),m=w.module("ui.router.router",["ui.router.util"]),y=w.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),_=w.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),E=w.module("ui.router.compat",["ui.router"]),x=null;function C(t){x=this.router=new R.UIRouter;x.stateProvider=new h(x.stateRegistry,x.stateService);x.stateRegistry.decorator("views",r);x.stateRegistry.decorator("onExit",f("onExit"));x.stateRegistry.decorator("onRetain",f("onRetain"));x.stateRegistry.decorator("onEnter",f("onEnter"));x.viewService._pluginapi._viewConfigFactory("ng1",i());var s=x.locationService=x.locationConfig=new p(t);p.monkeyPatchPathParameterType(x);x["router"]=x;x["$get"]=e;e.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"];function e(t,e,n,i,r,o){s._runtimeServices(i,t,n,e);delete x["router"];delete x["$get"];return x}return x}C.$inject=["$locationProvider"];var S=function(n){return["$uiRouterProvider",function(t){var e=t.router[n];e["$get"]=function(){return e};return e}]};function $(e,t,n){R.services.$injector=e;R.services.$q=t;n.stateRegistry.get().map(function(t){return t.$$state().resolvables}).reduce(R.unnestR,[]).filter(function(t){return t.deps==="deferred"}).forEach(function(t){return t.deps=e.annotate(t.resolveFn,e.strictDi)})}$.$inject=["$injector","$q","$uiRouter"];var T=function(t){return t.urlRouterProvider=new d(t)},I=function(){return R.extend(x.stateProvider,{$get:function(){return x.stateService}})};function A(t){t.$watch(function(){R.trace.approximateDigests++})}A.$inject=["$rootScope"],g.provider("$uiRouter",C),m.provider("$urlRouter",["$uiRouterProvider",T]),v.provider("$urlService",S("urlService")),v.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return x.urlMatcherFactory}]),v.provider("$templateFactory",function(){return new s}),y.provider("$stateRegistry",S("stateRegistry")),y.provider("$uiRouterGlobals",S("globals")),y.provider("$transitions",S("transitionService")),y.provider("$state",["$uiRouterProvider",I]),y.factory("$stateParams",["$uiRouter",function(t){return t.globals.params}]),_.factory("$view",function(){return x.viewService}),_.service("$trace",function(){return R.trace}),_.run(A),v.run(["$urlMatcherFactory",function(t){}]),y.run(["$state",function(t){}]),m.run(["$urlRouter",function(t){}]),g.run($);var O=function(i){var t=i.getTokens().filter(R.isString);var e=t.map(function(t){var e=i.getResolvable(t);var n=i.getPolicy(e).async;return[t,n==="NOWAIT"?e.promise:e.data]});return e.reduce(R.applyPairs,{})},P,L,M,D;function F(t){var e=t.match(/^\s*({[^}]*})\s*$/),n;if(e)t="("+e[1]+")";n=t.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/);if(!n||n.length!==4)throw new Error("Invalid state ref '"+t+"'");return{state:n[1]||null,paramExpr:n[3]||null}}function k(t){var e=t.parent().inheritedData("$uiView");var n=R.parse("$cfg.path")(e);return n?R.tail(n).state.name:undefined}function N(t,e,n){var i=n.uiState||t.current.name;var r=R.extend(j(e,t),n.uiStateOpts||{});var o=t.href(i,n.uiStateParams,r);return{uiState:i,uiStateParams:n.uiStateParams,uiStateOpts:r,href:o}}function U(t){var e=Object.prototype.toString.call(t.prop("href"))==="[object SVGAnimatedString]";var n=t[0].nodeName==="FORM";return{attr:n?"action":e?"xlink:href":"href",isAnchor:t.prop("tagName").toUpperCase()==="A",clickable:!n}}function G(o,s,a,u,l){return function(t){var e=t.which||t.button,n=l();if(!(e>1||t.ctrlKey||t.metaKey||t.shiftKey||o.attr("target"))){var i=a(function(){s.go(n.uiState,n.uiStateParams,n.uiStateOpts)});t.preventDefault();var r=u.isAnchor&&!n.href?1:0;t.preventDefault=function(){if(r--<=0)a.cancel(i)}}}}function j(t,e){return{relative:k(t)||e.$current,inherit:true,source:"sref"}}function V(r,t,o,e){var s;if(e){s=e.events}if(!R.isArray(s)){s=["click"]}var n=r.on?"on":"bind";for(var i=0,a=s;i<a.length;i++){var u=a[i];r[n](u,o)}t.$on("$destroy",function(){var t=r.off?"off":"unbind";for(var e=0,n=s;e<n.length;e++){var i=n[e];r[t](i,o)}})}function B(i){var t=function(t,e,n){return i.is(t,e,n)};t.$stateful=true;return t}function W(i){var t=function(t,e,n){return i.includes(t,e,n)};t.$stateful=true;return t}function H(m,y,_,t,E,e){var x=R.parse("viewDecl.controllerAs");var C=R.parse("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(t){var v=t.html();t.empty();return function(e,n){var t=n.data("$uiView");if(!t){n.html(v);m(n.contents())(e);return}var i=t.$cfg||{viewDecl:{},getTemplate:R.noop};var r=i.path&&new R.ResolveContext(i.path);n.html(i.getTemplate(n,r)||v);R.trace.traceUIViewFill(t.$uiView,n.html());var o=m(n.contents());var s=i.controller;var a=x(i);var u=C(i);var l=r&&O(r);e[u]=l;if(s){var c=y(s,R.extend({},l,{$scope:e,$element:n}));if(a){e[a]=c;e[a][u]=l}n.data("$ngControllerController",c);n.children().data("$ngControllerController",c);z(E,_,c,e,i)}if(R.isString(i.viewDecl.component)){var h=i.viewDecl.component;var f=R.kebobString(h);var p=new RegExp("^(x-|data-)?"+f+"$","i");var d=function(){var t=[].slice.call(n[0].children).filter(function(t){return t&&t.tagName&&p.exec(t.tagName)});return t&&w.element(t).data("$"+h+"Controller")};var g=e.$watch(d,function(t){if(!t)return;z(E,_,t,e,i);g()})}o(e)}}}}P=["$uiRouter","$timeout",function t(f,p){var d=f.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(t,e,n,i){var r=U(e);var o=i[1]||i[0];var s=null;var a;var u={};var l=function(){return N(d,e,u)};var c=F(n.uiSref);u.uiState=c.state;u.uiStateOpts=n.uiSrefOpts?t.$eval(n.uiSrefOpts):{};function h(){var t=l();if(s)s();if(o)s=o.$$addStateInfo(t.uiState,t.uiStateParams);if(t.href!=null)n.$set(r.attr,t.href)}if(c.paramExpr){t.$watch(c.paramExpr,function(t){u.uiStateParams=R.extend({},t);h()},true);u.uiStateParams=R.extend({},t.$eval(c.paramExpr))}h();t.$on("$destroy",f.stateRegistry.onStatesChanged(h));t.$on("$destroy",f.transitionService.onSuccess({},h));if(!r.clickable)return;a=G(e,d,p,r,l);V(e,t,a,u.uiStateOpts)}}}],L=["$uiRouter","$timeout",function t(p,d){var g=p.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,t,i,e){var r=U(t);var o=e[1]||e[0];var s=null;var a;var u={};var l=function(){return N(g,t,u)};var c=["uiState","uiStateParams","uiStateOpts"];var h=c.reduce(function(t,e){return t[e]=R.noop,t},{});function f(){var t=l();if(s)s();if(o)s=o.$$addStateInfo(t.uiState,t.uiStateParams);if(t.href!=null)i.$set(r.attr,t.href)}c.forEach(function(e){u[e]=i[e]?n.$eval(i[e]):null;i.$observe(e,function(t){h[e]();h[e]=n.$watch(t,function(t){u[e]=t;f()},true)})});f();n.$on("$destroy",p.stateRegistry.onStatesChanged(f));n.$on("$destroy",p.transitionService.onSuccess({},f));if(!r.clickable)return;a=G(t,g,d,r,l);V(t,n,a,u.uiStateOpts)}}}],M=["$state","$stateParams","$interpolate","$uiRouter",function t(f,e,n,s){return{restrict:"A",controller:["$scope","$element","$attrs",function(u,l,t){var c=[],h,i;h=n(t.uiSrefActiveEq||"",false)(u);try{i=u.$eval(t.uiSrefActive)}catch(t){}i=i||n(t.uiSrefActive||"",false)(u);if(R.isObject(i)){R.forEach(i,function(t,e){if(R.isString(t)){var n=F(t);r(n.state,u.$eval(n.paramExpr),e)}})}this.$$addStateInfo=function(t,e){if(R.isObject(i)&&c.length>0){return}var n=r(t,e,i);o();return n};function e(t){t.promise.then(o,R.noop)}u.$on("$stateChangeSuccess",o);u.$on("$destroy",s.transitionService.onStart({},e));if(s.globals.transition){e(s.globals.transition)}function r(t,e,n){var i=f.get(t,k(l));var r={state:i||{name:t},params:e,activeClass:n};c.push(r);return function t(){R.removeFrom(c)(r)}}function o(){var e=function(t){return t.split(/\s/).filter(R.identity)};var t=function(t){return t.map(function(t){return t.activeClass}).map(e).reduce(R.unnestR,[])};var n=t(c).concat(e(h)).reduce(R.uniqR,[]);var i=t(c.filter(function(t){return f.includes(t.state.name,t.params)}));var r=!!c.filter(function(t){return f.is(t.state.name,t.params)}).length;var o=r?e(h):[];var s=i.concat(o).reduce(R.uniqR,[]);var a=n.filter(function(t){return!R.inArray(s,t)});u.$evalAsync(function(){s.forEach(function(t){return l.addClass(t)});a.forEach(function(t){return l.removeClass(t)})})}o()}]}}],w.module("ui.router.state").directive("uiSref",P).directive("uiSrefActive",M).directive("uiSrefActiveEq",M).directive("uiState",L),B.$inject=["$state"],W.$inject=["$state"],w.module("ui.router.state").filter("isState",B).filter("includedByState",W),D=["$view","$animate","$uiViewScroll","$interpolate","$q",function t(s,i,_,E,x){function C(t,e){return{enter:function(t,e,n){if(w.version.minor>2){i.enter(t,null,e).then(n)}else{i.enter(t,null,e,n)}},leave:function(t,e){if(w.version.minor>2){i.leave(t).then(e)}else{i.leave(t,e)}}}}function S(t,e){return t===e}var $={$cfg:{viewDecl:{$context:s._pluginapi._rootViewContext()}},$uiView:{}};var T={count:0,restrict:"ECA",terminal:true,priority:400,transclude:"element",compile:function(t,e,y){return function(a,u,t){var e,l,c,n,h=t["onload"]||"",f=t["autoscroll"],p=C(t,a),d=undefined,i=u.inheritedData("$uiView")||$,g=E(t["uiView"]||t["name"]||"")(a)||"$default";var v={$type:"ng1",id:T.count++,name:g,fqn:i.$uiView.fqn?i.$uiView.fqn+"."+g:g,config:null,configUpdated:r,get creationContext(){var t=R.parse("$cfg.viewDecl.$context")(i);var e=R.parse("$uiView.creationContext")(i);return t||e}};R.trace.traceUIViewEvent("Linking",v);function r(t){if(t&&!(t instanceof b))return;if(S(d,t))return;R.trace.traceUIViewConfigUpdated(v,t&&t.viewDecl&&t.viewDecl.$context);d=t;o(t)}u.data("$uiView",{$uiView:v});o();n=s.registerUIView(v);a.$on("$destroy",function(){R.trace.traceUIViewEvent("Destroying/Unregistering",v);n()});function m(){if(e){R.trace.traceUIViewEvent("Removing (previous) el",e.data("$uiView"));e.remove();e=null}if(c){R.trace.traceUIViewEvent("Destroying scope",v);c.$destroy();c=null}if(l){var t=l.data("$uiViewAnim");R.trace.traceUIViewEvent("Animate out",t);p.leave(l,function(){t.$$animLeave.resolve();e=null});e=l;l=null}}function o(t){var e=a.$new();var n=x.defer(),i=x.defer();var r={$cfg:t,$uiView:v};var o={$animEnter:n.promise,$animLeave:i.promise,$$animLeave:i};e.$emit("$viewContentLoading",g);var s=y(e,function(e){e.data("$uiViewAnim",o);e.data("$uiView",r);p.enter(e,u,function t(){n.resolve();if(c)c.$emit("$viewContentAnimationEnded");if(R.isDefined(f)&&!f||a.$eval(f)){_(e)}});m()});l=s;c=e;c.$emit("$viewContentLoaded",t||d);c.$eval(h)}}}};return T}],H.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var q=typeof w.module("ui.router")["component"]==="function",X=0;function z(i,t,u,e,n){if(R.isFunction(u.$onInit)&&!(n.viewDecl.component&&q)){u.$onInit()}var l=R.tail(n.path).state.self;var r={bind:u};if(R.isFunction(u.uiOnParamsChanged)){var o=new R.ResolveContext(n.path);var c=o.getResolvable("$transition$").data;var s=function(t){if(t===c||t.exiting().indexOf(l)!==-1)return;var n=t.params("to");var i=t.params("from");var e=t.treeChanges().to.map(function(t){return t.paramSchema}).reduce(R.unnestR,[]);var r=t.treeChanges().from.map(function(t){return t.paramSchema}).reduce(R.unnestR,[]);var o=e.filter(function(t){var e=r.indexOf(t);return e===-1||!r[e].type.equals(n[t.id],i[t.id])});if(o.length){var s=o.map(function(t){return t.id});var a=R.filter(n,function(t,e){return s.indexOf(e)!==-1});u.uiOnParamsChanged(a,t)}};e.$on("$destroy",t.onSuccess({},s,r))}if(R.isFunction(u.uiCanExit)){var a=X++;var h="_uiCanExitIds";var f=function(t){return!!t&&(t[h]&&t[h][a]===true||f(t.redirectedFrom()))};var p=function(t){var e,n=t[h]=t[h]||{};if(!f(t)){e=i.when(u.uiCanExit(t));e.then(function(t){return n[a]=t!==false})}return e};var d={exiting:l.name};e.$on("$destroy",t.onBefore(d,p,r))}}function Y(){var n=false;this.useAnchorScroll=function(){n=true};this.$get=["$anchorScroll","$timeout",function(t,e){if(n){return t}return function(t){return e(function(){t[0].scrollIntoView()},0,false)}}]}w.module("ui.router.state").directive("uiView",D),w.module("ui.router.state").directive("uiView",H),w.module("ui.router.state").provider("$uiViewScroll",Y);var K="ui.router";e["default"]=K,e.core=R,e.watchDigests=A,e.getLocals=O,e.getNg1ViewConfigFactory=i,e.ng1ViewsBuilder=r,e.Ng1ViewConfig=b,e.StateProvider=h,e.UrlRouterProvider=d,Object.keys(R).forEach(function(t){e[t]=R[t]}),Object.defineProperty(e,"__esModule",{value:true})}(e,n(9),n(125))},function(t,e){
/**
 * @license AngularJS v1.7.9
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(mt){"use strict";var c={objectMaxDepth:5,urlErrorParamsEnabled:!0};function t(t){if(!wt(t))return c;O(t.objectMaxDepth)&&(c.objectMaxDepth=l(t.objectMaxDepth)?t.objectMaxDepth:NaN),O(t.urlErrorParamsEnabled)&&Lt(t.urlErrorParamsEnabled)&&(c.urlErrorParamsEnabled=t.urlErrorParamsEnabled)}function l(t){return R(t)&&0<t}function b(s,a){a=a||Error;var u="https://errors.angularjs.org/1.7.9/",t=u.replace(".","\\.")+"[\\s\\S]*",l=new RegExp(t,"g");return function(){var t,e,n=arguments[0],i=arguments[1],r="["+(s?s+":":"")+n+"] ",o=Ut(arguments,2).map(function(t){return gt(t,c.objectMaxDepth)});if(r+=i.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1);return e<o.length?o[e].replace(l,""):t}),r+="\n"+u+(s?s+"/":"")+n,c.urlErrorParamsEnabled)for(e=0,t="?";e<o.length;e++,t="&")r+=t+"p"+e+"="+encodeURIComponent(o[e]);return new a(r)}}var yt,_t,e,m,o=/^\/(.+)\/([a-z]*)$/,h="validity",Et=Object.prototype.hasOwnProperty,$=function(t){return bt(t)?t.toLowerCase():t},f=function(t){return bt(t)?t.toUpperCase():t},s=[].slice,i=[].splice,n=[].push,y=Object.prototype.toString,p=Object.getPrototypeOf,d=b("ng"),_=mt.angular||(mt.angular={}),r=0;function D(t){if(null!=t&&!L(t)){if(It(t)||bt(t)||_t&&t instanceof _t)return 1;var e="length"in Object(t)&&t.length;return R(e)&&(0<=e&&e-1 in t||"function"==typeof t.item)}}function xt(t,e,n){if(t)if(Ot(t))for(r in t)"prototype"!==r&&"length"!==r&&"name"!==r&&t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else if(It(t)||D(t))for(var i="object"!=typeof t,r=0,o=t.length;r<o;r++)(i||r in t)&&e.call(n,t[r],r,t);else if(t.forEach&&t.forEach!==xt)t.forEach(e,n,t);else if(T(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)Et.call(t,r)&&e.call(n,t[r],r,t);return t}function a(t,e,n){for(var i=Object.keys(t).sort(),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function E(n){return function(t,e){n(e,t)}}function u(){return++r}function g(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function v(t,e,n){for(var i=t.$$hashKey,r=0,o=e.length;r<o;++r){var s=e[r];if(wt(s)||Ot(s))for(var a=Object.keys(s),u=0,l=a.length;u<l;u++){var c=a[u],h=s[c];n&&wt(h)?w(h)?t[c]=new Date(h.valueOf()):P(h)?t[c]=new RegExp(h):h.nodeName?t[c]=h.cloneNode(!0):N(h)?t[c]=h.clone():"__proto__"!==c&&(wt(t[c])||(t[c]=It(h)?[]:{}),v(t[c],[h],!0)):t[c]=h}}return g(t,i),t}function Ct(t){return v(t,s.call(arguments,1),!1)}function x(t){return v(t,s.call(arguments,1),!0)}function C(t){return parseInt(t,10)}yt=mt.document.documentMode;var I=Number.isNaN||function(t){return t!=t};function St(t,e){return Ct(Object.create(t),e)}function $t(){}function Tt(t){return t}function A(t){return function(){return t}}function S(t){return Ot(t.toString)&&t.toString!==y}function Rt(t){return void 0===t}function O(t){return void 0!==t}function wt(t){return null!==t&&"object"==typeof t}function T(t){return null!==t&&"object"==typeof t&&!p(t)}function bt(t){return"string"==typeof t}function R(t){return"number"==typeof t}function w(t){return"[object Date]"===y.call(t)}function It(t){return Array.isArray(t)||t instanceof Array}function At(t){switch(y.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return 1;default:return t instanceof Error}}function Ot(t){return"function"==typeof t}function P(t){return"[object RegExp]"===y.call(t)}function L(t){return t&&t.window===t}function Pt(t){return t&&t.$evalAsync&&t.$watch}function Lt(t){return"boolean"==typeof t}function M(t){return t&&Ot(t.then)}$t.$inject=[],Tt.$inject=[];var F=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var Mt=function(t){return bt(t)?t.trim():t},k=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function N(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function Dt(t){return $(t.nodeName||t[0]&&t[0].nodeName)}function U(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function Ft(t,e){var n=t.indexOf(e);return 0<=n&&t.splice(n,1),n}function G(t,n,e){var i,r,o=[],s=[];if(e=l(e)?e:NaN,n){if((r=n)&&R(r.length)&&F.test(y.call(r))||(i=n,"[object ArrayBuffer]"===y.call(i)))throw d("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===n)throw d("cpi","Can't copy! Source and destination are identical.");return It(n)?n.length=0:xt(n,function(t,e){"$$hashKey"!==e&&delete n[e]}),o.push(t),s.push(n),a(t,n,e)}return u(t,e);function a(t,e,n){if(--n<0)return"...";var i,r=e.$$hashKey;if(It(t))for(var o=0,s=t.length;o<s;o++)e.push(u(t[o],n));else if(T(t))for(i in t)e[i]=u(t[i],n);else if(t&&"function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&(e[i]=u(t[i],n));else for(i in t)Et.call(t,i)&&(e[i]=u(t[i],n));return g(e,r),e}function u(t,e){if(!wt(t))return t;var n=o.indexOf(t);if(-1!==n)return s[n];if(L(t)||Pt(t))throw d("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var i=!1,r=function(t){switch(y.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(u(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e;case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(Ot(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===r&&(r=It(t)?[]:Object.create(p(t)),i=!0),o.push(t),s.push(r),i?a(t,r,e):r}}function kt(t,e){return t===e||t!=t&&e!=e}function Nt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,i,r,o=typeof t;if(o==typeof e&&"object"==o){if(!It(t)){if(w(t))return!!w(e)&&kt(t.getTime(),e.getTime());if(P(t))return!!P(e)&&t.toString()===e.toString();if(Pt(t)||Pt(e)||L(t)||L(e)||It(e)||w(e)||P(e))return!1;for(i in r=Wt(),t)if("$"!==i.charAt(0)&&!Ot(t[i])){if(!Nt(t[i],e[i]))return!1;r[i]=!0}for(i in e)if(!(i in r)&&"$"!==i.charAt(0)&&O(e[i])&&!Ot(e[i]))return!1;return!0}if(!It(e))return!1;if((n=t.length)===e.length){for(i=0;i<n;i++)if(!Nt(t[i],e[i]))return!1;return!0}}return!1}var j=function(){var t,e;return O(j.rules)||((t=mt.document.querySelector("[ng-csp]")||mt.document.querySelector("[data-ng-csp]"))?(e=t.getAttribute("ng-csp")||t.getAttribute("data-ng-csp"),j.rules={noUnsafeEval:!e||-1!==e.indexOf("no-unsafe-eval"),noInlineStyle:!e||-1!==e.indexOf("no-inline-style")}):j.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}),j.rules},V=function(){if(O(V.name_))return V.name_;for(var t,e,n,i=et.length,r=0;r<i;++r)if(e=et[r],t=mt.document.querySelector("["+e.replace(":","\\:")+"jq]")){n=t.getAttribute(e+"jq");break}return V.name_=n};function B(t,e,n){return t.concat(s.call(e,n))}function Ut(t,e){return s.call(t,e||0)}function Gt(t,e){var n=2<arguments.length?Ut(arguments,2):[];return!Ot(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,B(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function W(t,e){var n=e;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?n=void 0:L(e)?n="$WINDOW":e&&mt.document===e?n="$DOCUMENT":Pt(e)&&(n="$SCOPE"),n}function H(t,e){if(!Rt(t))return R(e)||(e=e?2:null),JSON.stringify(t,W,e)}function q(t){return bt(t)?JSON.parse(t):t}var X=/:/g;function z(t,e){t=t.replace(X,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return I(n)?e:n}function Y(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function K(t,e,n){n=n?-1:1;var i=t.getTimezoneOffset();return Y(t,n*(z(e,i)-i))}function jt(t){t=_t(t).clone().empty();var e=_t("<div></div>").append(t).html();try{return t[0].nodeType===qt?$(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(t,e){return"<"+$(e)})}catch(t){return $(e)}}function Z(t){try{return decodeURIComponent(t)}catch(t){}}function J(t){var r={};return xt((t||"").split("&"),function(t){var e,n,i;t&&(n=t=t.replace(/\+/g,"%20"),-1!==(e=t.indexOf("="))&&(n=t.substring(0,e),i=t.substring(e+1)),O(n=Z(n))&&(i=!O(i)||Z(i),Et.call(r,n)?It(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i))}),r}function Q(t){return tt(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function tt(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var et=["ng-","data-ng-","ng:","x-ng-"];var nt=function(n){var t=n.currentScript;if(!t)return!0;if(!(t instanceof mt.HTMLScriptElement||t instanceof mt.SVGScriptElement))return!1;var e=t.attributes;return[e.getNamedItem("src"),e.getNamedItem("href"),e.getNamedItem("xlink:href")].every(function(t){if(!t)return!0;if(!t.value)return!1;var e=n.createElement("a");if(e.href=t.value,n.location.origin===e.origin)return!0;switch(e.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(mt.document);function it(i,t){var r,o,e={};if(xt(et,function(t){var e=t+"app";!r&&i.hasAttribute&&i.hasAttribute(e)&&(o=(r=i).getAttribute(e))}),xt(et,function(t){var e,n=t+"app";!r&&(e=i.querySelector("["+n.replace(":","\\:")+"]"))&&(o=(r=e).getAttribute(n))}),r){if(!nt)return void mt.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");e.strictDi=null!==function(t,e){for(var n,i=et.length,r=0;r<i;++r)if(n=et[r]+e,bt(n=t.getAttribute(n)))return n;return null}(r,"strict-di"),t(r,o?[o]:[],e)}}function rt(n,i,r){wt(r)||(r={});r=Ct({strictDi:!1},r);function e(){if((n=_t(n)).injector()){var t=n[0]===mt.document?"document":jt(n);throw d("btstrpd","App already bootstrapped with this element '{0}'",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}(i=i||[]).unshift(["$provide",function(t){t.value("$rootElement",n)}]),r.debugInfoEnabled&&i.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),i.unshift("ng");var e=Qe(i,r.strictDi);return e.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply(function(){e.data("$injector",i),n(e)(t)})}]),e}var t=/^NG_ENABLE_DEBUG_INFO!/,o=/^NG_DEFER_BOOTSTRAP!/;if(mt&&t.test(mt.name)&&(r.debugInfoEnabled=!0,mt.name=mt.name.replace(t,"")),mt&&!o.test(mt.name))return e();mt.name=mt.name.replace(o,""),_.resumeBootstrap=function(t){return xt(t,function(t){i.push(t)}),e()},Ot(_.resumeDeferredBootstrap)&&_.resumeDeferredBootstrap()}function ot(){mt.name="NG_ENABLE_DEBUG_INFO!"+mt.name,mt.location.reload()}function st(t){var e=_.element(t).injector();if(!e)throw d("test","no injector found for element argument to getTestability");return e.get("$$testability")}var at=/[A-Z]/g;function Vt(t,n){return n=n||"_",t.replace(at,function(t,e){return(e?n:"")+t.toLowerCase()})}var ut=!1;function Bt(t,e,n){if(!t)throw d("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function lt(t,e,n){return n&&It(t)&&(t=t[t.length-1]),Bt(Ot(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function ct(t,e){if("hasOwnProperty"===t)throw d("badname","hasOwnProperty is not a valid {0} name",e)}function ht(t){for(var e,n=t[0],i=t[t.length-1],r=1;n!==i&&(n=n.nextSibling);r++)!e&&t[r]===n||(e=e||_t(s.call(t,0,r))).push(n);return e||t}function Wt(){return Object.create(null)}function ft(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!S(t)||It(t)||w(t)?H(t):t.toString()}return t}var Ht=1,qt=3,Xt=8,zt=9,pt=11;function dt(t,e){if(It(t)){e=e||[];for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}else if(wt(t))for(var r in e=e||{},t)"$"===r.charAt(0)&&"$"===r.charAt(1)||(e[r]=t[r]);return e||t}function gt(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):Rt(t)?"undefined":"string"!=typeof t?(n=t,r=[],l(i=e)&&(n=_.copy(n,null,i)),JSON.stringify(n,function(t,e){if(wt(e=W(t,e))){if(0<=r.indexOf(e))return"...";r.push(e)}return e})):t;var n,i,r}var vt={full:"1.7.9",major:1,minor:7,dot:9,codeName:"pollution-eradication"};fe.expando="ng339";var Yt=fe.cache={},Kt=1;fe._data=function(t){return this.cache[t[this.expando]]||{}};var Zt=/-([a-z])/g,Jt=/^-ms-/,Qt={mouseleave:"mouseout",mouseenter:"mouseover"},te=b("jqLite");function ee(t,e){return e.toUpperCase()}function ne(t){return t.replace(Zt,ee)}var ie=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,re=/<|&#?\w+;/,oe=/<([\w:-]+)/,se=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ae={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ue(t){return!re.test(t)}function le(t){var e=t.nodeType;return e===Ht||!e||e===zt}function ce(t,e){var n,i,r,o,s=e.createDocumentFragment(),a=[];if(ue(t))a.push(e.createTextNode(t));else{for(n=s.appendChild(e.createElement("div")),i=(oe.exec(t)||["",""])[1].toLowerCase(),r=ae[i]||ae._default,n.innerHTML=r[1]+t.replace(se,"<$1></$2>")+r[2],o=r[0];o--;)n=n.lastChild;a=B(a,n.childNodes),(n=s.firstChild).textContent=""}return s.textContent="",s.innerHTML="",xt(a,function(t){s.appendChild(t)}),s}ae.optgroup=ae.option,ae.tbody=ae.tfoot=ae.colgroup=ae.caption=ae.thead,ae.th=ae.td;var he=mt.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function fe(t){if(t instanceof fe)return t;var e,n,i,r;if(bt(t)&&(t=Mt(t),e=!0),!(this instanceof fe)){if(e&&"<"!==t.charAt(0))throw te("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new fe(t)}e?$e(this,(n=t,i=i||mt.document,(r=ie.exec(n))?[i.createElement(r[1])]:(r=ce(n,i))?r.childNodes:[])):Ot(t)?Ie(t):$e(this,t)}function pe(t){return t.cloneNode(!0)}function de(t,e){!e&&le(t)&&_t.cleanData([t]),t.querySelectorAll&&_t.cleanData(t.querySelectorAll("*"))}function ge(t){var e;for(e in t)return;return 1}function ve(t){var e=t.ng339,n=e&&Yt[e],i=n&&n.events,r=n&&n.data;r&&!ge(r)||i&&!ge(i)||(delete Yt[e],t.ng339=void 0)}function me(n,t,i,e){if(O(e))throw te("offargs","jqLite#off() does not support the `selector` argument");var r=_e(n),o=r&&r.events,s=r&&r.handle;if(s){if(t){var a=function(t){var e=o[t];O(i)&&Ft(e||[],i),O(i)&&e&&0<e.length||(n.removeEventListener(t,s),delete o[t])};xt(t.split(" "),function(t){a(t),Qt[t]&&a(Qt[t])})}else for(t in o)"$destroy"!==t&&n.removeEventListener(t,s),delete o[t];ve(n)}}function ye(t,e){var n=t.ng339,i=n&&Yt[n];i&&(e?delete i.data[e]:i.data={},ve(t))}function _e(t,e){var n=t.ng339,i=n&&Yt[n];return e&&!i&&(t.ng339=n=++Kt,i=Yt[n]={events:{},data:{},handle:void 0}),i}function Ee(t,e,n){if(le(t)){var i,r=O(n),o=!r&&e&&!wt(e),s=!e,a=_e(t,!o),u=a&&a.data;if(r)u[ne(e)]=n;else{if(s)return u;if(o)return u&&u[ne(e)];for(i in e)u[ne(i)]=e[i]}}}function xe(t,e){return!!t.getAttribute&&-1<(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")}function Ce(t,e){var n,i;e&&t.setAttribute&&(n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),i=n,xt(e.split(" "),function(t){t=Mt(t),i=i.replace(" "+t+" "," ")}),i!==n&&t.setAttribute("class",Mt(i)))}function Se(t,e){var n,i;e&&t.setAttribute&&(n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),i=n,xt(e.split(" "),function(t){t=Mt(t),-1===i.indexOf(" "+t+" ")&&(i+=t+" ")}),i!==n&&t.setAttribute("class",Mt(i)))}function $e(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;i<n;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function Te(t,e){return Re(t,"$"+(e||"ngController")+"Controller")}function Re(t,e,n){t.nodeType===zt&&(t=t.documentElement);for(var i=It(e)?e:[e];t;){for(var r=0,o=i.length;r<o;r++)if(O(n=_t.data(t,i[r])))return n;t=t.parentNode||t.nodeType===pt&&t.host}}function we(t){for(de(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function be(t,e){e||de(t);var n=t.parentNode;n&&n.removeChild(t)}function Ie(t){function e(){mt.document.removeEventListener("DOMContentLoaded",e),mt.removeEventListener("load",e),t()}"complete"===mt.document.readyState?mt.setTimeout(t):(mt.document.addEventListener("DOMContentLoaded",e),mt.addEventListener("load",e))}var Ae=fe.prototype={ready:Ie,toString:function(){var e=[];return xt(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(t){return _t(0<=t?this[t]:this[this.length+t])},length:0,push:n,sort:[].sort,splice:[].splice},Oe={};xt("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Oe[$(t)]=t});var Pe={};xt("input,select,option,textarea,button,form,details".split(","),function(t){Pe[t]=!0});var Le={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Me(t,e){var n=Oe[e.toLowerCase()];return n&&Pe[Dt(t)]&&n}function De(t,e){if(Rt(e)){var n=t.nodeType;return n===Ht||n===qt?t.textContent:""}t.textContent=e}function Fe(a,u){function t(t,e){t.isDefaultPrevented=function(){return t.defaultPrevented};var n,i=u[e||t.type],r=i?i.length:0;if(r){Rt(t.immediatePropagationStopped)&&(n=t.stopImmediatePropagation,t.stopImmediatePropagation=function(){t.immediatePropagationStopped=!0,t.stopPropagation&&t.stopPropagation(),n&&n.call(t)}),t.isImmediatePropagationStopped=function(){return!0===t.immediatePropagationStopped};var o=i.specialHandlerWrapper||ke;1<r&&(i=dt(i));for(var s=0;s<r;s++)t.isImmediatePropagationStopped()||o(a,t,i[s])}}return t.elem=a,t}function ke(t,e,n){n.call(t,e)}function Ne(t,e,n){var i=e.relatedTarget;i&&(i===t||he.call(t,i))||n.call(t,e)}function Ue(){this.$get=function(){return Ct(fe,{hasClass:function(t,e){return t.attr&&(t=t[0]),xe(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Se(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),Ce(t,e)}})}}function Ge(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var i=typeof t;return n="function"==i||"object"==i&&null!==t?t.$$hashKey=i+":"+(e||u)():i+":"+t}xt({data:Ee,removeData:ye,hasData:function(t){for(var e in Yt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)ye(t[e]),me(t[e])}},function(t,e){fe[e]=t}),xt({data:Ee,inheritedData:Re,scope:function(t){return _t.data(t,"$scope")||Re(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return _t.data(t,"$isolateScope")||_t.data(t,"$isolateScopeNoTemplate")},controller:Te,injector:function(t){return Re(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:xe,css:function(t,e,n){if(e=ne(e.replace(Jt,"ms-")),!O(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var i,r=t.nodeType;if(r!==qt&&2!==r&&r!==Xt&&t.getAttribute){var o=$(e),s=Oe[o];if(!O(n))return i=t.getAttribute(e),s&&null!==i&&(i=o),null===i?void 0:i;null===n||!1===n&&s?t.removeAttribute(e):t.setAttribute(e,s?o:n)}},prop:function(t,e,n){if(!O(n))return t[e];t[e]=n},text:(De.$dv="",De),val:function(t,e){if(Rt(e)){if(t.multiple&&"select"===Dt(t)){var n=[];return xt(t.options,function(t){t.selected&&n.push(t.value||t.text)}),n}return t.value}t.value=e},html:function(t,e){if(Rt(e))return t.innerHTML;de(t,!0),t.innerHTML=e},empty:we},function(l,t){fe.prototype[t]=function(t,e){var n,i,r=this.length;if(l!==we&&Rt(2===l.length&&l!==xe&&l!==Te?t:e)){if(wt(t)){for(n=0;n<r;n++)if(l===Ee)l(this[n],t);else for(i in t)l(this[n],i,t[i]);return this}for(var o=Rt(u=l.$dv)?Math.min(r,1):r,s=0;s<o;s++)var a=l(this[s],t,e),u=u?u+a:a;return u}for(n=0;n<r;n++)l(this[n],t,e);return this}}),xt({removeData:ye,on:function(r,t,o,e){if(O(e))throw te("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(le(r))for(var n=_e(r,!0),s=n.events,a=(a=n.handle)||(n.handle=Fe(r,s)),i=0<=t.indexOf(" ")?t.split(" "):[t],u=i.length,l=function(t,e,n){var i=s[t];i||((i=s[t]=[]).specialHandlerWrapper=e,"$destroy"===t||n||r.addEventListener(t,a)),i.push(o)};u--;)t=i[u],Qt[t]?(l(Qt[t],Ne),l(t,void 0,!0)):l(t)},off:me,one:function(e,n,i){(e=_t(e)).on(n,function t(){e.off(n,i),e.off(n,t)}),e.on(n,i)},replaceWith:function(e,t){var n,i=e.parentNode;de(e),xt(new fe(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(t){var e=[];return xt(t.childNodes,function(t){t.nodeType===Ht&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Ht||n===pt)for(var i=0,r=(e=new fe(e)).length;i<r;i++){var o=e[i];t.appendChild(o)}},prepend:function(e,t){var n;e.nodeType===Ht&&(n=e.firstChild,xt(new fe(t),function(t){e.insertBefore(t,n)}))},wrap:function(t,e){var n,i,r;n=t,i=_t(e).eq(0).clone()[0],(r=n.parentNode)&&r.replaceChild(i,n),i.appendChild(n)},remove:be,detach:function(t){be(t,!0)},after:function(t,e){var n=t,i=t.parentNode;if(i)for(var r=0,o=(e=new fe(e)).length;r<o;r++){var s=e[r];i.insertBefore(s,n.nextSibling),n=s}},addClass:Se,removeClass:Ce,toggleClass:function(n,t,i){t&&xt(t.split(" "),function(t){var e=i;Rt(e)&&(e=!xe(n,t)),(e?Se:Ce)(n,t)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==pt?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:pe,triggerHandler:function(e,t,n){var i,r,o,s=t.type||t,a=_e(e),u=a&&a.events,l=u&&u[s];l&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:$t,type:s,target:e},t.type&&(i=Ct(i,t)),r=dt(l),o=n?[i].concat(n):[i],xt(r,function(t){i.isImmediatePropagationStopped()||t.apply(e,o)}))}},function(s,t){fe.prototype[t]=function(t,e,n){for(var i,r=0,o=this.length;r<o;r++)Rt(i)?O(i=s(this[r],t,e,n))&&(i=_t(i)):$e(i,s(this[r],t,e,n));return O(i)?i:this}}),fe.prototype.bind=fe.prototype.on,fe.prototype.unbind=fe.prototype.off;var je=Object.create(null);function Ve(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Ve.prototype={_idx:function(t){return t!==this._lastKey&&(this._lastKey=t,this._lastIndex=this._keys.indexOf(t)),this._lastIndex},_transformKey:function(t){return I(t)?je:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},has:function(t){return t=this._transformKey(t),-1!==this._idx(t)},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Be=Ve,We=[function(){this.$get=[function(){return Be}]}],He=/^([^(]+?)=>/,qe=/^[^(]*\(\s*([^)]*)\)/m,Xe=/,/,ze=/^\s*(_?)(\S+?)\1\s*$/,Ye=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ke=b("$injector");function Ze(t){return Function.prototype.toString.call(t)}function Je(t){var e=Ze(t).replace(Ye,"");return e.match(He)||e.match(qe)}function Qe(t,l){l=!0===l;var r={},s="Provider",a=[],o=new Be,c={$provide:{provider:f(p),factory:f(d),service:f(function(t,e){return d(t,["$injector",function(t){return t.instantiate(e)}])}),value:f(function(t,e){return d(t,A(e),!1)}),constant:f(function(t,e){ct(t,"constant"),c[t]=e,n[t]=e}),decorator:function(t,e){var n=u.get(t+s),i=n.$get;n.$get=function(){var t=h.invoke(i,n);return h.invoke(e,null,{$delegate:t})}}}},u=c.$injector=v(c,function(t,e){throw _.isString(e)&&a.push(e),Ke("unpr","Unknown provider: {0}",a.join(" <- "))}),n={},e=v(n,function(t,e){var n=u.get(t+s,e);return h.invoke(n.$get,n,void 0,t)}),h=e;c["$injector"+s]={$get:A(e)},h.modules=u.modules=Wt();var i=g(t);return(h=e.get("$injector")).strictDi=l,xt(i,function(t){t&&h.invoke(t)}),h.loadNewModules=function(t){xt(g(t),function(t){t&&h.invoke(t)})},h;function f(n){return function(t,e){if(!wt(t))return n(t,e);xt(t,E(n))}}function p(t,e){if(ct(t,"service"),(Ot(e)||It(e))&&(e=u.instantiate(e)),!e.$get)throw Ke("pget","Provider '{0}' must define $get factory method.",t);return c[t+s]=e}function d(t,e,n){return p(t,{$get:!1!==n?(i=t,r=e,function(){var t=h.invoke(r,this);if(Rt(t))throw Ke("undef","Provider '{0}' must return a value from $get factory method.",i);return t}):e});var i,r}function g(t){Bt(Rt(t)||It(t),"modulesToLoad","not an array");var n,i=[];return xt(t,function(e){if(!o.get(e)){o.set(e,!0);try{bt(e)?(n=m(e),h.modules[e]=n,i=i.concat(g(n.requires)).concat(n._runBlocks),t(n._invokeQueue),t(n._configBlocks)):Ot(e)||It(e)?i.push(u.invoke(e)):lt(e,"module")}catch(t){throw It(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),Ke("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}function t(t){for(var e=0,n=t.length;e<n;e++){var i=t[e],r=u.get(i[0]);r[i[1]].apply(r,i[2])}}}),i}function v(n,i){function u(e,t){if(n.hasOwnProperty(e)){if(n[e]===r)throw Ke("cdep","Circular dependency found: {0}",e+" <- "+a.join(" <- "));return n[e]}try{return a.unshift(e),n[e]=r,n[e]=i(e,t),n[e]}catch(t){throw n[e]===r&&delete n[e],t}finally{a.shift()}}function o(t,e,n){for(var i=[],r=Qe.$$annotate(t,l,n),o=0,s=r.length;o<s;o++){var a=r[o];if("string"!=typeof a)throw Ke("itkn","Incorrect injection token! Expected service name as string, got {0}",a);i.push(e&&e.hasOwnProperty(a)?e[a]:u(a,n))}return i}return{invoke:function(t,e,n,i){"string"==typeof n&&(i=n,n=null);var r=o(t,n,i);return It(t)&&(t=t[t.length-1]),function(t){if(!yt&&"function"==typeof t){var e=t.$$ngIsClass;return Lt(e)||(e=t.$$ngIsClass=/^class\b/.test(Ze(t))),e}}(t)?(r.unshift(null),new(Function.prototype.bind.apply(t,r))):t.apply(e,r)},instantiate:function(t,e,n){var i=It(t)?t[t.length-1]:t,r=o(t,e,n);return r.unshift(null),new(Function.prototype.bind.apply(i,r))},get:u,annotate:Qe.$$annotate,has:function(t){return c.hasOwnProperty(t+s)||n.hasOwnProperty(t)}}}}function tn(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(o,r,s){var a=o.document;function u(t){var e,n,i,r;t?(t.scrollIntoView(),(e=(Ot(r=l.yOffset)?r=r():N(r)?(i=r[0],r="fixed"!==o.getComputedStyle(i).position?0:i.getBoundingClientRect().bottom):R(r)||(r=0),r))&&(n=t.getBoundingClientRect().top,o.scrollBy(0,n-e))):o.scrollTo(0,0)}function l(t){var e,n,i;(t=bt(t)?t:R(t)?t.toString():r.hash())?(e=a.getElementById(t))?u(e):(n=a.getElementsByName(t),i=null,Array.prototype.some.call(n,function(t){if("a"===Dt(t))return i=t,!0}),(e=i)?u(e):"top"===t&&u(null)):u(null)}return t&&s.$watch(function(){return r.hash()},function(t,e){var n,i;t===e&&""===t||(n=function(){s.$evalAsync(l)},"complete"===(i=i||mt).document.readyState?i.setTimeout(n):_t(i).on("load",n))}),l}]}Qe.$$annotate=function(t,e,n){var i,r,o;if("function"==typeof t){if(!(i=t.$inject)){if(i=[],t.length){if(e)throw bt(n)&&n||(n=t.name||((o=Je(t))?"function("+(o[1]||"").replace(/[\s\r\n]+/," ")+")":"fn")),Ke("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);xt(Je(t)[1].split(Xe),function(t){t.replace(ze,function(t,e,n){i.push(n)})})}t.$inject=i}}else It(t)?(lt(t[r=t.length-1],"fn"),i=t.slice(0,r)):lt(t,"fn",!0);return i};var en=b("$animate"),nn=1,rn="ng-animate";function on(t,e){return t||e?t?e?(It(t)&&(t=t.join(" ")),It(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function sn(t){return wt(t)?t:{}}function an(){this.$get=$t}function un(){var g=new Be,v=[];this.$get=["$$AnimateRunner","$rootScope",function(h,f){return{enabled:$t,on:$t,off:$t,pin:$t,push:function(t,e,n,i){var r,o,s,a,u,l;i&&i(),(n=n||{}).from&&t.css(n.from),n.to&&t.css(n.to),(n.addClass||n.removeClass)&&(r=t,o=n.addClass,s=n.removeClass,a=g.get(r)||{},u=p(a,o,!0),l=p(a,s,!1),(u||l)&&(g.set(r,a),v.push(r),1===v.length&&f.$$postDigest(d)));var c=new h;return c.complete(),c}};function p(e,t,n){var i=!1;return t&&xt(t=bt(t)?t.split(" "):It(t)?t:[],function(t){t&&(i=!0,e[t]=n)}),i}function d(){xt(v,function(t){var n,i,r,e=g.get(t);e&&(n=function(t){bt(t)&&(t=t.split(" "));var e=Wt();return xt(t,function(t){t.length&&(e[t]=!0)}),e}(t.attr("class")),r=i="",xt(e,function(t,e){t!==!!n[e]&&(t?i+=(i.length?" ":"")+e:r+=(r.length?" ":"")+e)}),xt(t,function(t){i&&Se(t,i),r&&Ce(t,r)}),g.delete(t))}),v.length=0}}]}function ln(){this.$get=["$$rAF",function(e){var n=[];function i(t){n.push(t),1<n.length||e(function(){for(var t=0;t<n.length;t++)n[t]();n=[]})}return function(){var e=!1;return i(function(){e=!0}),function(t){e?t():i(t)}}}]}function cn(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,n,i,r){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){i()?r(t,0,!1):e(t)},this._state=0}return o.chain=function(t,n){var i=0;!function e(){if(i===t.length)return void n(!0);t[i](function(t){!1!==t?(i++,e()):n(!1)})}()},o.all=function(e,n){var i=0,r=!0;function o(t){r=r&&t,++i===e.length&&n(r)}xt(e,function(t){t.done(o)})},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:$t,getPromise:function(){var t;return this.promise||((t=this).promise=e(function(e,n){t.done(function(t){(!1===t?n:e)()})})),this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(e){2!==this._state&&(xt(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=2)}},o}]}function hn(){this.$get=["$$rAF","$q","$$AnimateRunner",function(s,t,a){return function(t,e){var n=e||{};n.$$prepared||(n=G(n)),n.cleanupStyles&&(n.from=n.to=null),n.from&&(t.css(n.from),n.from=null);var i,r=new a;return{start:o,end:o};function o(){return s(function(){!function(){n.addClass&&(t.addClass(n.addClass),n.addClass=null);n.removeClass&&(t.removeClass(n.removeClass),n.removeClass=null);n.to&&(t.css(n.to),n.to=null)}(),i||r.complete(),i=!0}),r}}}]}var fn=["$provide",function(i){var r=this,e=null,n=null;this.$$registeredAnimations=Object.create(null),this.register=function(t,e){if(t&&"."!==t.charAt(0))throw en("notcsel","Expecting class selector starting with '.' got '{0}'.",t);var n=t+"-animation";r.$$registeredAnimations[t.substr(1)]=n,i.factory(n,e)},this.customFilter=function(t){return 1===arguments.length&&(n=Ot(t)?t:null),n},this.classNameFilter=function(t){if(1===arguments.length&&((e=t instanceof RegExp?t:null)&&new RegExp("[(\\s|\\/)]"+rn+"[(\\s|\\/)]").test(e.toString())))throw e=null,en("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',rn);return e},this.$get=["$$animateQueue",function(o){function r(t,e,n){var i;n&&(!(i=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===nn)return n}}(n))||i.parentNode||i.previousElementSibling||(n=null)),n?n.after(t):e.prepend(t)}return{on:o.on,off:o.off,pin:o.pin,enabled:o.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(t,e,n,i){return e=e&&_t(e),n=n&&_t(n),r(t,e=e||n.parent(),n),o.push(t,"enter",sn(i))},move:function(t,e,n,i){return e=e&&_t(e),n=n&&_t(n),r(t,e=e||n.parent(),n),o.push(t,"move",sn(i))},leave:function(t,e){return o.push(t,"leave",sn(e),function(){t.remove()})},addClass:function(t,e,n){return(n=sn(n)).addClass=on(n.addclass,e),o.push(t,"addClass",n)},removeClass:function(t,e,n){return(n=sn(n)).removeClass=on(n.removeClass,e),o.push(t,"removeClass",n)},setClass:function(t,e,n,i){return(i=sn(i)).addClass=on(i.addClass,e),i.removeClass=on(i.removeClass,n),o.push(t,"setClass",i)},animate:function(t,e,n,i,r){return(r=sn(r)).from=r.from?Ct(r.from,e):e,r.to=r.to?Ct(r.to,n):n,i=i||"ng-inline-animate",r.tempClasses=on(r.tempClasses,i),o.push(t,"animate",r)}}}]}];function pn(a,t,e,u,n){var l=this,c=a.location,h=a.history,r=a.setTimeout,i=a.clearTimeout,o={},s=n(e);l.isMock=!1,l.$$completeOutstandingRequest=s.completeTask,l.$$incOutstandingRequestCount=s.incTaskCount,l.notifyWhenNoOutstandingRequests=s.notifyWhenNoPendingTasks;var f,p,d=c.href,g=t.find("base"),v=null,m=u.history?function(){try{return h.state}catch(t){}}:$t;C(),l.url=function(t,e,n){if(Rt(n)&&(n=null),c!==a.location&&(c=a.location),h!==a.history&&(h=a.history),t){var i=p===n;if(t=pr(t).href,d===t&&(!u.history||i))return l;var r=d&&hi(d)===hi(t);return d=t,p=n,!u.history||r&&i?(r||(v=t),e?c.replace(t):r?c.hash=-1===(s=(o=t).indexOf("#"))?"":o.substr(s):c.href=t,c.href!==t&&(v=t)):(h[e?"replaceState":"pushState"](n,"",t),C()),v=v&&t,l}return(v||c.href).replace(/#$/,"");var o,s},l.state=function(){return f};var y=[],_=!1;function E(){v=null,S()}var x=null;function C(){Nt(f=Rt(f=m())?null:f,x)&&(f=x),p=x=f}function S(){var t=p;C(),d===l.url()&&t===f||(d=l.url(),p=f,xt(y,function(t){t(l.url(),f)}))}l.onUrlChange=function(t){return _||(u.history&&_t(a).on("popstate",E),_t(a).on("hashchange",E),_=!0),y.push(t),t},l.$$applicationDestroyed=function(){_t(a).off("hashchange popstate",E)},l.$$checkUrlChange=S,l.baseHref=function(){var t=g.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},l.defer=function(t,e,n){var i;return e=e||0,n=n||s.DEFAULT_TASK_TYPE,s.incTaskCount(n),i=r(function(){delete o[i],s.completeTask(t,n)},e),o[i]=n,i},l.defer.cancel=function(t){if(o.hasOwnProperty(t)){var e=o[t];return delete o[t],i(t),s.completeTask($t,e),!0}return!1}}function dn(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(t,e,n,i,r){return new pn(t,i,e,n,r)}]}function gn(){this.$get=function(){var h={};function t(t,e){if(t in h)throw b("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var n=0,i=Ct({},e,{id:t}),r=Wt(),o=e&&e.capacity||Number.MAX_VALUE,s=Wt(),a=null,u=null;return h[t]={put:function(t,e){if(!Rt(e))return o<Number.MAX_VALUE&&l(s[t]||(s[t]={key:t})),t in r||n++,r[t]=e,o<n&&this.remove(u.key),e},get:function(t){if(o<Number.MAX_VALUE){var e=s[t];if(!e)return;l(e)}return r[t]},remove:function(t){if(o<Number.MAX_VALUE){var e=s[t];if(!e)return;e===a&&(a=e.p),e===u&&(u=e.n),c(e.n,e.p),delete s[t]}t in r&&(delete r[t],n--)},removeAll:function(){r=Wt(),n=0,s=Wt(),a=u=null},destroy:function(){s=i=r=null,delete h[t]},info:function(){return Ct({},i,{size:n})}};function l(t){t!==a&&(u?u===t&&(u=t.n):u=t,c(t.n,t.p),c(t,a),(a=t).n=null)}function c(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return t.info=function(){var n={};return xt(h,function(t,e){n[e]=t.info()}),n},t.get=function(t){return h[t]},t}}function vn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var mn=b("$compile");var yn=new function(){};function _n(n,e){var j={},V="Directive",B=/^\s*directive:\s*([\w-]+)\s+(.*)$/,W=/(([\w-]+)(?::([^;]+))?;?)/,dt=function(t){for(var e={},n=t.split(","),i=0;i<n.length;i++)e[n[i]]=!0;return e}("ngSrc,ngSrcset,src,srcset"),f=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,gt=/^(on[a-z]+|formaction)$/,a=Wt();function p(t,i,r){var o=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,s=Wt();return xt(t,function(t,e){if((t=t.trim())in a)s[e]=a[t];else{var n=t.match(o);if(!n)throw mn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",i,e,t,r?"controller bindings definition":"isolate scope definition");s[e]={mode:n[1][0],collection:"*"===n[2],optional:"?"===n[3],attrName:n[4]||e},n[4]&&(a[t]=s[e])}}),s}this.directive=function t(u,e){return Bt(u,"name"),ct(u,"directive"),bt(u)?(function(t){var e=t.charAt(0);if(!e||e!==$(e))throw mn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw mn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(u),Bt(e,"directiveFactory"),j.hasOwnProperty(u)||(j[u]=[],n.factory(u+V,["$injector","$exceptionHandler",function(o,s){var a=[];return xt(j[u],function(t,e){try{var n=o.invoke(t);Ot(n)?n={compile:A(n)}:!n.compile&&n.link&&(n.compile=A(n.link)),n.priority=n.priority||0,n.index=e,n.name=n.name||u,n.require=(!It(r=(i=n).require||i.controller&&i.name)&&wt(r)&&xt(r,function(t,e){var n=t.match(f);t.substring(n[0].length)||(r[e]=n[0]+e)}),r),n.restrict=function(t,e){if(t&&(!bt(t)||!/[EACM]/.test(t)))throw mn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(n.restrict,u),n.$$moduleName=t.$$moduleName,a.push(n)}catch(t){s(t)}var i,r}),a}])),j[u].push(e)):xt(u,E(t)),this},this.component=function t(e,r){if(!bt(e))return xt(e,E(Gt(this,t))),this;var o=r.controller||function(){};function n(i){function t(n){return Ot(n)||It(n)?function(t,e){return i.invoke(n,this,{$element:t,$attrs:e})}:n}var e=r.template||r.templateUrl?r.template:"",n={controller:o,controllerAs:function(t,e){if(e&&bt(e))return e;if(bt(t)){var n=wn.exec(t);if(n)return n[3]}}(r.controller)||r.controllerAs||"$ctrl",template:t(e),templateUrl:t(r.templateUrl),transclude:r.transclude,scope:{},bindToController:r.bindings||{},restrict:"E",require:r.require};return xt(r,function(t,e){"$"===e.charAt(0)&&(n[e]=t)}),n}return xt(r,function(t,e){"$"===e.charAt(0)&&(n[e]=t,Ot(o)&&(o[e]=t))}),n.$inject=["$injector"],this.directive(e,n)},this.aHrefSanitizationWhitelist=function(t){return O(t)?(e.aHrefSanitizationWhitelist(t),this):e.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return O(t)?(e.imgSrcSanitizationWhitelist(t),this):e.imgSrcSanitizationWhitelist()};var i=!0,h=!(this.debugInfoEnabled=function(t){return O(t)?(i=t,this):i});this.strictComponentBindingsEnabled=function(t){return O(t)?(h=t,this):h};var d=10;this.onChangesTtl=function(t){return arguments.length?(d=t,this):d};var g=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(g=t,this):g};var v=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(v=t,this):v};var vt=Wt();function t(e,t){xt(t,function(t){vt[t.toLowerCase()]=e})}this.addPropertySecurityContext=function(t,e,n){var i=t.toLowerCase()+"|"+e.toLowerCase();if(i in vt&&vt[i]!==n)throw mn("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",t,e,vt[i],n);return vt[i]=n,this},t(Yi.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),t(Yi.CSS,["*|style"]),t(Yi.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),t(Yi.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),t(Yi.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"]),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(I,A,H,q,O,X,P,L,r){var o,u=/^\w/,l=mt.document.createElement("div"),M=g,D=v,t=d;function s(){try{if(!--t)throw o=void 0,mn("infchng","{0} $onChanges() iterations reached. Aborting!\n",d);P.$apply(function(){for(var t=0,e=o.length;t<e;++t)try{o[t]()}catch(t){H(t)}o=void 0})}finally{t++}}function c(t,e){if(!t)return t;if(!bt(t))throw mn("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',e,t.toString());for(var n="",i=Mt(t),r=/\s/.test(i)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,o=i.split(r),s=Math.floor(o.length/2),a=0;a<s;a++){var u=2*a;n+=L.getTrustedMediaUrl(Mt(o[u])),n+=" "+Mt(o[1+u])}var l=Mt(o[2*a]).split(/\s/);return n+=L.getTrustedMediaUrl(Mt(l[0])),2===l.length&&(n+=" "+Mt(l[1])),n}function z(t,e){if(e)for(var n,i=Object.keys(e),r=0,o=i.length;r<o;r++)this[n=i[r]]=e[n];else this.$attr={};this.$$element=t}function Y(t,e){try{t.addClass(e)}catch(t){}}z.prototype={$normalize:Sn,$addClass:function(t){t&&0<t.length&&r.addClass(this.$$element,t)},$removeClass:function(t){t&&0<t.length&&r.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=$n(t,e);n&&n.length&&r.addClass(this.$$element,n);var i=$n(e,t);i&&i.length&&r.removeClass(this.$$element,i)},$set:function(t,e,n,i){var r=Me(this.$$element[0],t),o=Le[t],s=t;r?(this.$$element.prop(t,e),i=r):o&&(this[o]=e,s=o),this[t]=e,i?this.$attr[t]=i:(i=this.$attr[t])||(this.$attr[t]=i=Vt(t,"-")),"img"===Dt(this.$$element)&&"srcset"===t&&(this[t]=e=c(e,"$set('srcset', value)")),!1!==n&&(null===e||Rt(e)?this.$$element.removeAttr(i):u.test(i)?r&&!1===e?this.$$element.removeAttr(i):this.$$element.attr(i,e):function(t,e,n){l.innerHTML="<span "+e+">";var i=l.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,t.attributes.setNamedItem(r)}(this.$$element[0],i,e));var a=this.$$observers;a&&xt(a[s],function(t){try{t(e)}catch(t){H(t)}})},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=Wt()),r=i[t]||(i[t]=[]);return r.push(e),P.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(t)||Rt(n[t])||e(n[t])}),function(){Ft(r,e)}}};var e=A.startSymbol(),n=A.endSymbol(),K="{{"===e&&"}}"===n?Tt:function(t){return t.replace(/\{\{/g,e).replace(/}}/g,n)},F=/^ng(Attr|Prop|On)([A-Z].*)$/,k=/^(.+)Start$/;return Z.$$addBindingInfo=i?function(t,e){var n=t.data("$binding")||[];It(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:$t,Z.$$addBindingClass=i?function(t){Y(t,"ng-binding")}:$t,Z.$$addScopeInfo=i?function(t,e,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(r,e)}:$t,Z.$$addScopeClass=i?function(t,e){Y(t,e?"ng-isolate-scope":"ng-scope")}:$t,Z.$$createComment=function(t,e){var n="";return i&&(n=" "+(t||"")+": ",e&&(n+=e+" ")),mt.document.createComment(n)},Z;function Z(c,t,e,n,h){c instanceof _t||(c=_t(c));var f=J(c,t,c,e,n,h);Z.$$addScopeClass(c);var p=null;return function(t,e,n){if(!c)throw mn("multilink","This element has already been linked.");Bt(t,"scope"),h&&h.needsNewScope&&(t=t.$parent.$new());var i,r,o,s=(n=n||{}).parentBoundTranscludeFn,a=n.transcludeControllers,u=n.futureParentElement;if(s&&s.$$boundTransclude&&(s=s.$$boundTransclude),p||(r=(i=u)&&i[0],p=r&&"foreignobject"!==Dt(r)&&y.call(r).match(/SVG/)?"svg":"html"),o="html"!==p?_t(lt(p,_t("<div></div>").append(c).html())):e?Ae.clone.call(c):c,a)for(var l in a)o.data("$"+l+"Controller",a[l].instance);return Z.$$addScopeInfo(o,t),e&&e(o,t),f&&f(t,o,o,s),e||(c=f=null),o}}function J(t,d,e,n,i,r){for(var o,s,a,u,l,c,g,v=[],h=It(t)||t instanceof _t,f=0;f<t.length;f++)o=new z,11===yt&&function(t,e,n){var i,r=t[e],o=r.parentNode;if(r.nodeType!==qt)return;for(;(i=o?r.nextSibling:t[e+1])&&i.nodeType===qt;)r.nodeValue=r.nodeValue+i.nodeValue,i.parentNode&&i.parentNode.removeChild(i),n&&i===t[e+1]&&t.splice(e+1,1)}(t,f,h),(a=(s=tt(t[f],[],o,0===f?n:void 0,i)).length?rt(s,t[f],o,d,e,null,[],[],r):null)&&a.scope&&Z.$$addScopeClass(o.$$element),l=a&&a.terminal||!(u=t[f].childNodes)||!u.length?null:J(u,a?(a.transcludeOnThisElement||!a.templateOnThisElement)&&a.transclude:d),(a||l)&&(v.push(f,a,l),c=!0,g=g||a),r=null;return c?function(t,e,n,i){var r,o,s,a,u,l,c,h,f;if(g){var p=e.length;for(f=new Array(p),u=0;u<v.length;u+=3)c=v[u],f[c]=e[c]}else f=e;for(u=0,l=v.length;u<l;)s=f[v[u++]],r=v[u++],o=v[u++],r?(r.scope?(a=t.$new(),Z.$$addScopeInfo(_t(s),a)):a=t,h=r.transcludeOnThisElement?Q(t,r.transclude,i):!r.templateOnThisElement&&i?i:!i&&d?Q(t,d):null,r(o,a,s,n,h)):o&&o(t,s.childNodes,void 0,i)}:null}function Q(o,s,a){function t(t,e,n,i,r){return t||((t=o.$new(!1,r)).$$transcluded=!0),s(t,e,{parentBoundTranscludeFn:a,transcludeControllers:n,futureParentElement:i})}var e=t.$$slots=Wt();for(var n in s.$$slots)s.$$slots[n]?e[n]=Q(o,s.$$slots[n],a):e[n]=null;return t}function tt(t,e,n,i,r){var o,s,a,u,l,c,h,f,p=t.nodeType,d=n.$attr;switch(p){case Ht:N(e,Sn(s=Dt(t)),"E",i,r);for(var g,v=t.attributes,m=0,y=v&&v.length;m<y;m++){var _,E,x,C=!1,S=!1,$=!1,T=!1,R=!1,w=(E=v[m]).name,b=E.value;(g=(x=Sn(w.toLowerCase())).match(F))?($="Attr"===g[1],T="Prop"===g[1],R="On"===g[1],w=w.replace(xn,"").toLowerCase().substr(4+g[1].length).replace(/_(.)/g,function(t,e){return e.toUpperCase()})):(_=x.match(k))&&function(t){if(j.hasOwnProperty(t))for(var e=I.get(t+V),n=0,i=e.length;n<i;n++)if(e[n].multiElement)return!0;return!1}(_[1])&&(S=(C=w).substr(0,w.length-5)+"end",w=w.substr(0,w.length-6)),T||R?(n[x]=b,d[x]=E.name,T?function(t,e,n,o){if(gt.test(o))throw mn("nodomevents","Property bindings for HTML DOM event properties are disallowed");var i=Dt(t),r=function(t,e){var n=e.toLowerCase();return vt[t+"|"+n]||vt["*|"+n]}(i,o),s=Tt;"srcset"!==o||"img"!==i&&"source"!==i?r&&(s=L.getTrusted.bind(L,r)):s=G;e.push({priority:100,compile:function(t,e){var i=O(e[n]),r=O(e[n],function(t){return L.valueOf(t)});return{pre:function(e,n){function t(){var t=i(e);n[0][o]=s(t)}t(),e.$watch(r,t)}}}})}(t,e,x,w):(h=x,f=w,e.push(Bo(O,P,H,h,f,!1)))):(d[x=Sn(w.toLowerCase())]=w,!$&&n.hasOwnProperty(x)||(n[x]=b,Me(t,x)&&(n[x]=!0)),function(t,e,o,s,n){var i=Dt(t),a=function(t,e){if("srcdoc"===e)return L.HTML;{if("src"===e||"ngSrc"===e)return-1===["img","video","audio","source","track"].indexOf(t)?L.RESOURCE_URL:L.MEDIA_URL;if("xlinkHref"===e)return"image"===t?L.MEDIA_URL:"a"===t?L.URL:L.RESOURCE_URL;if("form"===t&&"action"===e||"base"===t&&"href"===e||"link"===t&&"href"===e)return L.RESOURCE_URL;if("a"===t&&("href"===e||"ngHref"===e))return L.URL}}(i,s),r=!n,u=dt[s]||n,l=A(o,r,a,u);if(!l)return;if("multiple"===s&&"select"===i)throw mn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",jt(t));if(gt.test(s))throw mn("nodomevents","Interpolations for HTML DOM event attributes are disallowed");e.push({priority:100,compile:function(){return{pre:function(t,e,n){var i=n.$$observers||(n.$$observers=Wt()),r=n[s];r!==o&&(l=r&&A(r,!0,a,u),o=r),l&&(n[s]=l(t),(i[s]||(i[s]=[])).$$inter=!0,(n.$$observers&&n.$$observers[s].$$scope||t).$watch(l,function(t,e){"class"===s&&t!==e?n.$updateClass(t,e):n.$set(s,t)}))}}}})}(t,e,b,x,$),N(e,x,"A",i,r,C,S))}if("input"===s&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!D)break;if(wt(a=t.className)&&(a=a.animVal),bt(a)&&""!==a)for(;o=W.exec(a);)N(e,x=Sn(o[2]),"C",i,r)&&(n[x]=Mt(o[3])),a=a.substr(o.index+o[0].length);break;case qt:u=e,l=t.nodeValue,(c=A(l,!0))&&u.push({priority:0,compile:function(t){var e=t.parent(),i=!!e.length;return i&&Z.$$addBindingClass(e),function(t,e){var n=e.parent();i||Z.$$addBindingClass(n),Z.$$addBindingInfo(n,c.expressions),t.$watch(c,function(t){e[0].nodeValue=t})}}});break;case Xt:if(!M)break;!function(t,e,n,i,r){try{var o,s=B.exec(t.nodeValue);s&&(o=Sn(s[1]),N(e,o,"M",i,r)&&(n[o]=Mt(s[2])))}catch(t){}}(t,e,n,i,r)}return e.sort(U),e}function et(t,e,n){var i=[],r=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw mn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType===Ht&&(t.hasAttribute(e)&&r++,t.hasAttribute(n)&&r--),i.push(t),t=t.nextSibling}while(0<r);else i.push(t);return _t(i)}function nt(o,s,a){return function(t,e,n,i,r){return e=et(e[0],s,a),o(t,e,n,i,r)}}function it(t,e,n,i,r,o){var s;return t?Z(e,n,i,r,o):function(){return s||(s=Z(e,n,i,r,o),e=n=o=null),s.apply(this,arguments)}}function rt(t,E,x,e,n,i,C,S,r){r=r||{};for(var o,s,a,u,l,c=-Number.MAX_VALUE,$=r.newScopeDirective,T=r.controllerDirectives,R=r.newIsolateScopeDirective,w=r.templateDirective,h=r.nonTlbTranscludeDirective,f=!1,p=!1,b=r.hasElementTranscludeDirective,d=x.$$element=_t(E),g=i,v=e,m=!1,y=!1,_=0,I=t.length;_<I;_++){var A=(o=t[_]).$$start,O=o.$$end;if(A&&(d=et(E,A,O)),a=void 0,c>o.priority)break;if((l=o.scope)&&(o.templateUrl||(wt(l)?(ut("new/isolated scope",R||$,o,d),R=o):ut("new/isolated scope",R,o,d)),$=$||o),s=o.name,!m&&(o.replace&&(o.templateUrl||o.template)||o.transclude&&!o.$$tlb)){for(var P,L=_+1;P=t[L++];)if(P.transclude&&!P.$$tlb||P.replace&&(P.templateUrl||P.template)){y=!0;break}m=!0}if(!o.templateUrl&&o.controller&&(T=T||Wt(),ut("'"+s+"' controller",T[s],o,d),T[s]=o),l=o.transclude)if(f=!0,o.$$tlb||(ut("transclusion",h,o,d),h=o),"element"===l)b=!0,c=o.priority,a=d,d=x.$$element=_t(Z.$$createComment(s,x[s])),E=d[0],ct(n,Ut(a),E),v=it(y,a,e,c,g&&g.name,{nonTlbTranscludeDirective:h});else{var M=Wt();if(wt(l)){a=mt.document.createDocumentFragment();var D,F=Wt(),k=Wt();for(var N in xt(l,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,F[t]=e,M[e]=null,k[e]=n}),xt(d.contents(),function(t){var e=F[Sn(Dt(t))];e?(k[e]=!0,M[e]=M[e]||mt.document.createDocumentFragment(),M[e].appendChild(t)):a.appendChild(t)}),xt(k,function(t,e){if(!t)throw mn("reqslot","Required transclusion slot `{0}` was not filled.",e)}),M){M[N]&&(D=_t(M[N].childNodes),M[N]=it(y,D,e))}a=_t(a.childNodes)}else a=_t(pe(E)).contents();d.empty(),(v=it(y,a,e,void 0,void 0,{needsNewScope:o.$$isolateScope||o.$$newScope})).$$slots=M}if(o.template)if(p=!0,ut("template",w,o,d),l=Ot((w=o).template)?o.template(d,x):o.template,l=K(l),o.replace){if(g=o,a=ue(l)?[]:Tn(lt(o.templateNamespace,Mt(l))),E=a[0],1!==a.length||E.nodeType!==Ht)throw mn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",s,"");ct(n,d,E);var U={$attr:{}},G=tt(E,[],U),j=t.splice(_+1,t.length-(_+1));(R||$)&&st(G,R,$),t=t.concat(G).concat(j),at(x,U),I=t.length}else d.html(l);if(o.templateUrl)p=!0,ut("template",w,o,d),(w=o).replace&&(g=o),W=function(f,p,d,g,v,m,y,_){var E,x,C=[],S=p[0],$=f.shift(),T=St($,{templateUrl:null,transclude:null,replace:null,$$originalDirective:$}),R=Ot($.templateUrl)?$.templateUrl(p,d):$.templateUrl,w=$.templateNamespace;return p.empty(),q(R).then(function(t){var n,e,i,r;if(t=K(t),$.replace){if(i=ue(t)?[]:Tn(lt(w,Mt(t))),n=i[0],1!==i.length||n.nodeType!==Ht)throw mn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",$.name,R);e={$attr:{}},ct(g,p,n);var o=tt(n,[],e);wt($.scope)&&st(o,!0),f=o.concat(f),at(d,e)}else n=S,p.html(t);for(f.unshift(T),E=rt(f,n,d,v,p,$,m,y,_),xt(g,function(t,e){t===n&&(g[e]=p[0])}),x=J(p[0].childNodes,v);C.length;){var s,a=C.shift(),u=C.shift(),l=C.shift(),c=C.shift(),h=p[0];a.$$destroyed||(u!==S&&(s=u.className,_.hasElementTranscludeDirective&&$.replace||(h=pe(n)),ct(l,_t(u),h),Y(_t(h),s)),r=E.transcludeOnThisElement?Q(a,E.transclude,c):c,E(x,a,h,g,r))}C=null}).catch(function(t){At(t)&&H(t)}),function(t,e,n,i,r){var o=r;e.$$destroyed||(C?C.push(e,n,i,o):(E.transcludeOnThisElement&&(o=Q(e,E.transclude,r)),E(x,e,n,i,o)))}}(t.splice(_,t.length-_),d,x,n,f&&v,C,S,{controllerDirectives:T,newScopeDirective:$!==o&&$,newIsolateScopeDirective:R,templateDirective:w,nonTlbTranscludeDirective:h}),I=t.length;else if(o.compile)try{u=o.compile(d,x,v);var V=o.$$originalDirective||o;Ot(u)?B(null,Gt(V,u),A,O):u&&B(Gt(V,u.pre),Gt(V,u.post),A,O)}catch(t){H(t,jt(d))}o.terminal&&(W.terminal=!0,c=Math.max(c,o.priority))}return W.scope=$&&!0===$.scope,W.transcludeOnThisElement=f,W.templateOnThisElement=p,W.transclude=v,r.hasElementTranscludeDirective=b,W;function B(t,e,n,i){t&&(n&&(t=nt(t,n,i)),t.require=o.require,t.directiveName=s,R!==o&&!o.$$isolateScope||(t=ht(t,{isolateScope:!0})),C.push(t)),e&&(n&&(e=nt(e,n,i)),e.require=o.require,e.directiveName=s,R!==o&&!o.$$isolateScope||(e=ht(e,{isolateScope:!0})),S.push(e))}function W(t,e,n,i,s){var r,o,a,u,l,c,h,f,p,d;for(var g in E===n?f=(p=x).$$element:p=new z(f=_t(n),x),l=e,R?u=e.$new(!0):$&&(l=e.$parent),s&&((h=function(t,e,n,i){var r;Pt(t)||(i=n,n=e,e=t,t=void 0);b&&(r=c);n=n||(b?f.parent():f);{if(!i)return s(t,e,r,n,_);var o=s.$$slots[i];if(o)return o(t,e,r,n,_);if(Rt(o))throw mn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,jt(f))}}).$$boundTransclude=s,h.isSlotFilled=function(t){return!!s.$$slots[t]}),T&&(c=function(t,e,n,i,r,o,s){var a=Wt();for(var u in i){var l=i[u],c={$scope:l===s||l.$$isolateScope?r:o,$element:t,$attrs:e,$transclude:n},h=l.controller;"@"===h&&(h=e[l.name]);var f=X(h,c,!0,l.controllerAs);a[l.name]=f,t.data("$"+l.name+"Controller",f.instance)}return a}(f,p,h,T,u,e,R)),R&&(Z.$$addScopeInfo(f,u,!0,!(w&&(w===R||w===R.$$originalDirective))),Z.$$addScopeClass(f,!0),u.$$isolateBindings=R.$$isolateBindings,(d=pt(e,p,u,u.$$isolateBindings,R)).removeWatches&&u.$on("$destroy",d.removeWatches)),c){var v=T[g],m=c[g],y=v.$$bindings.bindToController;m.instance=m(),f.data("$"+v.name+"Controller",m.instance),m.bindingInfo=pt(l,p,m.instance,y,v)}for(xt(T,function(t,e){var n=t.require;t.bindToController&&!It(n)&&wt(n)&&Ct(c[e].instance,ot(e,n,f,c))}),xt(c,function(t){var e=t.instance;if(Ot(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){H(t)}if(Ot(e.$onInit))try{e.$onInit()}catch(t){H(t)}Ot(e.$doCheck)&&(l.$watch(function(){e.$doCheck()}),e.$doCheck()),Ot(e.$onDestroy)&&l.$on("$destroy",function(){e.$onDestroy()})}),r=0,o=C.length;r<o;r++)ft(a=C[r],a.isolateScope?u:e,f,p,a.require&&ot(a.directiveName,a.require,f,c),h);var _=e;for(R&&(R.template||null===R.templateUrl)&&(_=u),t&&t(_,n.childNodes,void 0,s),r=S.length-1;0<=r;r--)ft(a=S[r],a.isolateScope?u:e,f,p,a.require&&ot(a.directiveName,a.require,f,c),h);xt(c,function(t){var e=t.instance;Ot(e.$postLink)&&e.$postLink()})}}function ot(n,t,i,r){if(bt(t)){var e,o,s=t.match(f),a=t.substring(s[0].length),u=s[1]||s[3],l="?"===s[2];if("^^"===u?i=i.parent():o=(o=r&&r[a])&&o.instance,o||(e="$"+a+"Controller",o="^^"===u&&i[0]&&i[0].nodeType===zt?null:u?i.inheritedData(e):i.data(e)),!o&&!l)throw mn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,n)}else if(It(t)){o=[];for(var c=0,h=t.length;c<h;c++)o[c]=ot(n,t[c],i,r)}else wt(t)&&(o={},xt(t,function(t,e){o[e]=ot(n,t,i,r)}));return o||null}function st(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i]=St(t[i],{$$isolateScope:e,$$newScope:n})}function N(t,e,n,i,r,o,s){if(e!==r){var a=null;if(j.hasOwnProperty(e))for(var u=I.get(e+V),l=0,c=u.length;l<c;l++){var h,f=u[l];(Rt(i)||i>f.priority)&&-1!==f.restrict.indexOf(n)&&(o&&(f=St(f,{$$start:o,$$end:s})),f.$$bindings||(h=f.$$bindings=function(t,e){var n={isolateScope:null,bindToController:null};if(wt(t.scope)&&(!0===t.bindToController?(n.bindToController=p(t.scope,e,!0),n.isolateScope={}):n.isolateScope=p(t.scope,e,!1)),wt(t.bindToController)&&(n.bindToController=p(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw mn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}(f,f.name),wt(h.isolateScope)&&(f.$$isolateBindings=h.isolateScope)),t.push(f),a=f)}return a}}function at(n,i){var r=i.$attr,o=n.$attr;xt(n,function(t,e){"$"!==e.charAt(0)&&(i[e]&&i[e]!==t&&(t.length?t+=("style"===e?";":" ")+i[e]:t=i[e]),n.$set(e,t,!0,r[e]))}),xt(i,function(t,e){n.hasOwnProperty(e)||"$"===e.charAt(0)||(n[e]=t,"class"!==e&&"style"!==e&&(o[e]=r[e]))})}function U(t,e){var n=e.priority-t.priority;return 0!=n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function ut(t,e,n,i){function r(t){return t?" (module: "+t+")":""}if(e)throw mn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,r(e.$$moduleName),n.name,r(n.$$moduleName),t,jt(i))}function lt(t,e){switch(t=$(t||"html")){case"svg":case"math":var n=mt.document.createElement("div");return n.innerHTML="<"+t+">"+e+"</"+t+">",n.childNodes[0].childNodes;default:return e}}function G(t){return c(L.valueOf(t),"ng-prop-srcset")}function ct(t,e,n){var i,r=e[0],o=e.length,s=r.parentNode;if(t)for(h=0,i=t.length;h<i;h++)if(t[h]===r){t[h++]=n;for(var a=h,u=a+o-1,l=t.length;a<l;a++,u++)u<l?t[a]=t[u]:delete t[a];t.length-=o-1,t.context===r&&(t.context=n);break}s&&s.replaceChild(n,r);for(var c=mt.document.createDocumentFragment(),h=0;h<o;h++)c.appendChild(e[h]);for(_t.hasData(r)&&(_t.data(n,_t.data(r)),_t(r).off("$destroy")),_t.cleanData(c.querySelectorAll("*")),h=1;h<o;h++)delete e[h];e[0]=n,e.length=1}function ht(t,e){return Ct(function(){return t.apply(null,arguments)},t,e)}function ft(t,e,n,i,r,o){try{t(e,n,i,r,o)}catch(t){H(t,jt(n))}}function _(t,e){if(h)throw mn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function pt(f,p,d,t,g){var i,v=[],m={};function y(t,e,n){Ot(d.$onChanges)&&!kt(e,n)&&(o||(f.$$postDigest(s),o=[]),i||(i={},o.push(r)),i[t]&&(n=i[t].previousValue),i[t]=new En(n,e))}function r(){d.$onChanges(i),i=void 0}return xt(t,function(t,n){var e,i,r,o,s,a=t.attrName,u=t.optional;switch(t.mode){case"@":u||Et.call(p,a)||(_(a,g.name),d[n]=p[a]=void 0),s=p.$observe(a,function(t){var e;(bt(t)||Lt(t))&&(e=d[n],y(n,t,e),d[n]=t)}),p.$$observers[a].$$scope=f,bt(e=p[a])?d[n]=A(e)(f):Lt(e)&&(d[n]=e),m[n]=new En(yn,d[n]),v.push(s);break;case"=":if(!Et.call(p,a)){if(u)break;_(a,g.name),p[a]=void 0}if(u&&!p[a])break;i=O(p[a]),o=i.literal?Nt:kt,r=i.assign||function(){throw e=d[n]=i(f),mn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",p[a],a,g.name)},e=d[n]=i(f);var l=function(t){return o(t,d[n])||(o(t,e)?r(f,t=d[n]):d[n]=t),e=t};l.$stateful=!0,s=t.collection?f.$watchCollection(p[a],l):f.$watch(O(p[a],l),null,i.literal),v.push(s);break;case"<":if(!Et.call(p,a)){if(u)break;_(a,g.name),p[a]=void 0}if(u&&!p[a])break;var c=(i=O(p[a])).literal,h=d[n]=i(f);m[n]=new En(yn,d[n]),s=f[t.collection?"$watchCollection":"$watch"](i,function(t,e){if(e===t){if(e===h||c&&Nt(e,h))return;e=h}y(n,t,e),d[n]=t}),v.push(s);break;case"&":if(u||Et.call(p,a)||_(a,g.name),(i=p.hasOwnProperty(a)?O(p[a]):$t)===$t&&u)break;d[n]=function(t){return i(f,t)}}}),{initialChanges:m,removeWatches:v.length&&function(){for(var t=0,e=v.length;t<e;++t)v[t]()}}}}]}function En(t,e){this.previousValue=t,this.currentValue=e}_n.$inject=["$provide","$$sanitizeUriProvider"],En.prototype.isFirstChange=function(){return this.previousValue===yn};var xn=/^((?:x|data)[:\-_])/i,Cn=/[:\-_]+(.)/g;function Sn(t){return t.replace(xn,"").replace(Cn,function(t,e,n){return n?e.toUpperCase():e})}function $n(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/);t:for(var o=0;o<i.length;o++){for(var s=i[o],a=0;a<r.length;a++)if(s===r[a])continue t;n+=(0<n.length?" ":"")+s}return n}function Tn(t){var e=(t=_t(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(n.nodeType===Xt||n.nodeType===qt&&""===n.nodeValue.trim())&&i.call(t,e,1)}return t}var Rn=b("$controller"),wn=/^(\S+)(\s+as\s+([\w$]+))?$/;function bn(){var h={};this.has=function(t){return h.hasOwnProperty(t)},this.register=function(t,e){ct(t,"controller"),wt(t)?Ct(h,t):h[t]=e},this.$get=["$injector",function(l){return function(e,n,t,i){var r,o,s;if(t=!0===t,i&&bt(i)&&(s=i),bt(e)){if(!(r=e.match(wn)))throw Rn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",e);if(o=r[1],s=s||r[3],!(e=h.hasOwnProperty(o)?h[o]:function(t,e,n){if(!e)return t;for(var i,r=e.split("."),o=t,s=r.length,a=0;a<s;a++)i=r[a],t=t&&(o=t)[i];return!n&&Ot(t)?Gt(o,t):t}(n.$scope,o,!0)))throw Rn("ctrlreg","The controller with the name '{0}' is not registered.",o);lt(e,o,!0)}if(t){var a=(It(e)?e[e.length-1]:e).prototype,u=Object.create(a||null);return s&&c(n,s,u,o||e.name),Ct(function(){var t=l.invoke(e,u,n,o);return t!==u&&(wt(t)||Ot(t))&&(u=t,s&&c(n,s,u,o||e.name)),u},{instance:u,identifier:s})}return u=l.instantiate(e,n,o),s&&c(n,s,u,o||e.name),u};function c(t,e,n,i){if(!t||!wt(t.$scope))throw b("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,e);t.$scope[e]=n}}]}function In(){this.$get=["$window",function(t){return _t(t.document)}]}function An(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],i=n&&n.hidden;function r(){i=n.hidden}return t.on("visibilitychange",r),e.$on("$destroy",function(){t.off("visibilitychange",r)}),function(){return i}}]}function On(){this.$get=["$log",function(n){return function(t,e){n.error.apply(n,arguments)}}]}function Pn(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof _t&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]}var Ln="application/json",Mn={"Content-Type":Ln+";charset=utf-8"},Dn=/^\[|^\{(?!\{)/,Fn={"[":/]$/,"{":/}$/},kn=/^\)]\}',?\n/,Nn=b("$http");function Un(t){return wt(t)?w(t)?t.toISOString():H(t):t}function Gn(){this.$get=function(){return function(t){if(!t)return"";var n=[];return a(t,function(t,e){null===t||Rt(t)||Ot(t)||(It(t)?xt(t,function(t){n.push(tt(e)+"="+tt(Un(t)))}):n.push(tt(e)+"="+tt(Un(t))))}),n.join("&")}}}function jn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function n(t,i,r){It(t)?xt(t,function(t,e){n(t,i+"["+(wt(t)?e:"")+"]")}):wt(t)&&!w(t)?a(t,function(t,e){n(t,i+(r?"":"[")+e+(r?"":"]"))}):(Ot(t)&&(t=t()),e.push(tt(i)+"="+(null==t?"":tt(Un(t)))))}(t,"",!0),e.join("&")}}}function Vn(e,t){if(bt(e)){var n=e.replace(kn,"").trim();if(n){var i=t("Content-Type"),r=i&&0===i.indexOf(Ln);if(r||(s=(o=n).match(Dn))&&Fn[s[0]].test(o))try{e=q(n)}catch(t){if(!r)return e;throw Nn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',e,t)}}}var o,s;return e}function Bn(t){var e,n=Wt();function i(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return bt(t)?xt(t.split("\n"),function(t){e=t.indexOf(":"),i($(Mt(t.substr(0,e))),Mt(t.substr(e+1)))}):wt(t)&&xt(t,function(t,e){i($(e),Mt(t))}),n}function Wn(n){var i;return function(t){if(i=i||Bn(n),t){var e=i[$(t)];return void 0===e&&(e=null),e}return i}}function Hn(e,n,i,t){return Ot(t)?t(e,n,i):(xt(t,function(t){e=t(e,n,i)}),e)}function qn(t){return 200<=t&&t<300}function Xn(){var C=this.defaults={transformResponse:[Vn],transformRequest:[function(t){return wt(t)&&(i=t,"[object File]"!==y.call(i))&&(n=t,"[object Blob]"!==y.call(n))&&(e=t,"[object FormData]"!==y.call(e))?H(t):t;var e,n,i}],headers:{common:{Accept:"application/json, text/plain, */*"},post:dt(Mn),put:dt(Mn),patch:dt(Mn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},S=!1;this.useApplyAsync=function(t){return O(t)?(S=!!t,this):S};var e=this.interceptors=[],i=this.xsrfWhitelistedOrigins=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(a,d,g,t,v,m,u,y){var _=t("$http");C.paramSerializer=bt(C.paramSerializer)?u.get(C.paramSerializer):C.paramSerializer;var l=[];xt(e,function(t){l.unshift(bt(t)?u.get(t):u.invoke(t))});var n,E=(n=[hr].concat(i.map(pr)),function(t){var e=pr(t);return n.some(dr.bind(null,e))});function x(t){if(!wt(t))throw b("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);if(!bt(y.valueOf(t.url)))throw b("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",t.url);var n=Ct({method:"get",transformRequest:C.transformRequest,transformResponse:C.transformResponse,paramSerializer:C.paramSerializer,jsonpCallbackParam:C.jsonpCallbackParam},t);n.headers=function(t){var e,n,i,r=C.headers,o=Ct({},t.headers);r=Ct({},r.common,r[$(t.method)]);t:for(e in r){for(i in n=$(e),o)if($(i)===n)continue t;o[e]=r[e]}return function(t,n){var i,r={};return xt(t,function(t,e){Ot(t)?null!=(i=t(n))&&(r[e]=i):r[e]=t}),r}(o,dt(t))}(t),n.method=f(n.method),n.paramSerializer=bt(n.paramSerializer)?u.get(n.paramSerializer):n.paramSerializer,a.$$incOutstandingRequestCount("$http");var e=[],i=[],r=m.resolve(n);return xt(l,function(t){(t.request||t.requestError)&&e.unshift(t.request,t.requestError),(t.response||t.responseError)&&i.push(t.response,t.responseError)}),r=o(r,e),r=(r=o(r=r.then(function(t){var n=t.headers,e=Hn(t.data,Wn(n),void 0,t.transformRequest);Rt(e)&&xt(n,function(t,e){"content-type"===$(e)&&delete n[e]});Rt(t.withCredentials)&&!Rt(C.withCredentials)&&(t.withCredentials=C.withCredentials);return function(o,t){var s,e,a=m.defer(),n=a.promise,i=o.headers,r="jsonp"===$(o.method),u=o.url;r?u=y.getTrustedResourceUrl(u):bt(u)||(u=y.valueOf(u));u=function(t,e){0<e.length&&(t+=(-1===t.indexOf("?")?"?":"&")+e);return t}(u,o.paramSerializer(o.params)),r&&(u=function(n,i){var t=n.split("?");if(2<t.length)throw Nn("badjsonp",'Illegal use more than one "?", in url, "{1}"',n);return xt(J(t[1]),function(t,e){if("JSON_CALLBACK"===t)throw Nn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',n);if(e===i)throw Nn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',i,n)}),n+=(-1===n.indexOf("?")?"?":"&")+i+"=JSON_CALLBACK"}(u,o.jsonpCallbackParam));x.pendingRequests.push(o),n.then(p,p),!o.cache&&!C.cache||!1===o.cache||"GET"!==o.method&&"JSONP"!==o.method||(s=wt(o.cache)?o.cache:wt(C.cache)?C.cache:_);s&&(O(e=s.get(u))?M(e)?e.then(f,f):It(e)?h(e[1],e[0],dt(e[2]),e[3],e[4]):h(e,200,{},"OK","complete"):s.put(u,n));{var l;Rt(e)&&((l=E(o.url)?g()[o.xsrfCookieName||C.xsrfCookieName]:void 0)&&(i[o.xsrfHeaderName||C.xsrfHeaderName]=l),d(o.method,u,t,function(t,e,n,i,r){s&&(qn(t)?s.put(u,[t,e,Bn(n),i,r]):s.remove(u));function o(){h(e,t,n,i,r)}S?v.$applyAsync(o):(o(),v.$$phase||v.$apply())},i,o.timeout,o.withCredentials,o.responseType,c(o.eventHandlers),c(o.uploadEventHandlers)))}return n;function c(t){if(t){var e={};return xt(t,function(n,t){e[t]=function(t){function e(){n(t)}S?v.$applyAsync(e):v.$$phase?e():v.$apply(e)}}),e}}function h(t,e,n,i,r){(qn(e=-1<=e?e:0)?a.resolve:a.reject)({data:t,status:e,headers:Wn(n),config:o,statusText:i,xhrStatus:r})}function f(t){h(t.data,t.status,dt(t.headers()),t.statusText,t.xhrStatus)}function p(){var t=x.pendingRequests.indexOf(o);-1!==t&&x.pendingRequests.splice(t,1)}}(t,e).then(s,s)}),i)).finally(function(){a.$$completeOutstandingRequest($t,"$http")});function o(t,e){for(var n=0,i=e.length;n<i;){var r=e[n++],o=e[n++];t=t.then(r,o)}return e.length=0,t}function s(t){var e=Ct({},t);return e.data=Hn(t.data,t.headers,t.status,n.transformResponse),qn(t.status)?e:m.reject(e)}}return x.pendingRequests=[],function(t){xt(arguments,function(n){x[n]=function(t,e){return x(Ct({},e||{},{method:n,url:t}))}})}("get","delete","head","jsonp"),function(t){xt(arguments,function(i){x[i]=function(t,e,n){return x(Ct({},n||{},{method:i,url:t,data:e}))}})}("post","put","patch"),x.defaults=C,x}]}function zn(){this.$get=function(){return function(){return new mt.XMLHttpRequest}}}function Yn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,i){return y=i,_=(m=t).defer,E=e,x=n[0],function(t,i,e,r,n,o,s,a,u,l){if(i=i||m.url(),"jsonp"===$(t))var c=E.createCallback(i),h=function(t,i,r){t=t.replace("JSON_CALLBACK",i);var o=x.createElement("script"),s=null;return o.type="text/javascript",o.src=t,o.async=!0,s=function(t){o.removeEventListener("load",s),o.removeEventListener("error",s),x.body.removeChild(o),o=null;var e=-1,n="unknown";t&&("load"!==t.type||E.wasCalled(i)||(t={type:"error"}),n=t.type,e="error"===t.type?404:200),r&&r(e,n)},o.addEventListener("load",s),o.addEventListener("error",s),x.body.appendChild(o),s}(i,c,function(t,e){var n=200===t&&E.getResponse(c);v(r,t,n,"",e,"complete"),E.removeCallback(c)});else{var f=y(t,i),p=!1;if(f.open(t,i,!0),xt(n,function(t,e){O(t)&&f.setRequestHeader(e,t)}),f.onload=function(){var t=f.statusText||"",e="response"in f?f.response:f.responseText,n=1223===f.status?204:f.status;0===n&&(n=e?200:"file"===pr(i).protocol?404:0),v(r,n,e,f.getAllResponseHeaders(),t,"complete")},f.onerror=function(){v(r,-1,null,null,"","error")},f.ontimeout=function(){v(r,-1,null,null,"","timeout")},f.onabort=function(){v(r,-1,null,null,"",p?"timeout":"abort")},xt(u,function(t,e){f.addEventListener(e,t)}),xt(l,function(t,e){f.upload.addEventListener(e,t)}),s&&(f.withCredentials=!0),a)try{f.responseType=a}catch(t){if("json"!==a)throw t}f.send(Rt(e)?null:e)}var d;function g(t){p="timeout"===t,h&&h(),f&&f.abort()}function v(t,e,n,i,r,o){O(d)&&_.cancel(d),h=f=null,t(e,n,i,r,o)}0<o?d=_(function(){g("timeout")},o):M(o)&&o.then(function(){g(O(o.$$timeoutId)?"timeout":"abort")})};var m,y,_,E,x}]}var Kn=_.$interpolateMinErr=b("$interpolate");function Zn(){var R="{{",w="}}";this.startSymbol=function(t){return t?(R=t,this):R},this.endSymbol=function(t){return t?(w=t,this):w},this.$get=["$parse","$exceptionHandler","$sce",function(_,E,x){var C=R.length,S=w.length,e=new RegExp(R.replace(/./g,t),"g"),n=new RegExp(w.replace(/./g,t),"g");function t(t){return"\\\\\\"+t}function $(t){return t.replace(e,R).replace(n,w)}function T(t,e,n,i){var r=t.$watch(function(t){return r(),i(t)},e,n);return r}function i(r,t,i,o){var s=i===x.URL||i===x.MEDIA_URL;if(!r.length||-1===r.indexOf(R)){if(t)return;var e=$(r);s&&(e=x.getTrusted(i,e));var n=A(e);return n.exp=r,n.expressions=[],n.$$watchDelegate=T,n}o=!!o;for(var a,u,l,c,h=0,f=[],p=r.length,d=[],g=[];h<p;){if(-1===(a=r.indexOf(R,h))||-1===(u=r.indexOf(w,a+C))){h!==p&&d.push($(r.substring(h)));break}h!==a&&d.push($(r.substring(h,a))),l=r.substring(a+C,u),f.push(l),h=u+S,g.push(d.length),d.push("")}c=1===d.length&&1===g.length;var v=s&&c?void 0:function(t){try{return t=i&&!s?x.getTrusted(i,t):x.valueOf(t),o&&!O(t)?t:ft(t)}catch(t){E(Kn.interr(r,t))}},m=f.map(function(t){return _(t,v)});if(!t||f.length){var y=function(t){for(var e=0,n=f.length;e<n;e++){if(o&&Rt(t[e]))return;d[g[e]]=t[e]}return s?x.getTrusted(i,c?d[0]:d.join("")):(i&&1<d.length&&Kn.throwNoconcat(r),d.join(""))};return Ct(function(t){var e=0,n=f.length,i=new Array(n);try{for(;e<n;e++)i[e]=m[e](t);return y(i)}catch(t){E(Kn.interr(r,t))}},{exp:r,expressions:f,$$watchDelegate:function(i,r){var o;return i.$watchGroup(m,function(t,e){var n=y(t);r.call(this,n,t!==e?o:n,i),o=n})}})}}return i.startSymbol=function(){return R},i.endSymbol=function(){return w},i}]}Kn.throwNoconcat=function(t){throw Kn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Kn.interr=function(t,e){return Kn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Jn=b("$interval");function Qn(){this.$get=["$$intervalFactory","$window",function(t,r){function i(t){r.clearInterval(t),delete o[t]}var o={},e=t(function(t,e,n){var i=r.setInterval(t,e);return o[i]=n,i},i);return e.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw Jn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!o.hasOwnProperty(t.$$intervalId))return!1;var e=t.$$intervalId,n=o[e];return Wi(n.promise),n.reject("canceled"),i(e),!0},e}]}function ti(){this.$get=["$browser","$q","$$q","$rootScope",function(p,d,g,v){return function(h,f){return function(t,e,n,i){var r=4<arguments.length,o=r?Ut(arguments,4):[],s=0,a=O(i)&&!i,u=(a?g:d).defer(),l=u.promise;function c(){r?t.apply(null,o):t(s)}return n=O(n)?n:0,l.$$intervalId=h(function(){a?p.defer(c):v.$evalAsync(c),u.notify(s++),0<n&&n<=s&&(u.resolve(s),f(l.$$intervalId)),a||v.$apply()},e,u,a),l}}}]}function ei(){this.$get=function(){var o=_.callbacks,s={};return{createCallback:function(t){var e,n="_"+(o.$$counter++).toString(36),i="angular.callbacks."+n,r=((e=function(t){e.data=t,e.called=!0}).id=n,e);return s[i]=o[n]=r,i},wasCalled:function(t){return s[t].called},getResponse:function(t){return s[t].data},removeCallback:function(t){var e=s[t];delete o[e.id],delete s[t]}}}}var ni=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,ii={http:80,https:443,ftp:21},ri=b("$location");function oi(t,e,n){var i,r=(i=[],xt(e,function(t,e){It(t)?xt(t,function(t){i.push(tt(e,!0)+(!0===t?"":"="+tt(t,!0)))}):i.push(tt(e,!0)+(!0===t?"":"="+tt(t,!0)))}),i.length?i.join("&"):""),o=n?"#"+Q(n):"";return function(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=Q(e[n].replace(/%2F/g,"/"));return e.join("/")}(t)+(r?"?"+r:"")+o}function si(t,e){var n=pr(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=C(n.port)||ii[n.protocol]||null}var ai=/^\s*[\\/]{2,}/;function ui(t,e,n){if(ai.test(t))throw ri("badpath",'Invalid url "{0}".',t);var i="/"!==t.charAt(0);i&&(t="/"+t);var r=pr(t),o=i&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname;e.$$path=function(t,e){for(var n=t.split("/"),i=n.length;i--;)n[i]=decodeURIComponent(n[i]),e&&(n[i]=n[i].replace(/\//g,"%2F"));return n.join("/")}(o,n),e.$$search=J(r.search),e.$$hash=decodeURIComponent(r.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function li(t,e){return t.slice(0,e.length)===e}function ci(t,e){if(li(e,t))return e.substr(t.length)}function hi(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function fi(o,s,a){this.$$html5=!0,a=a||"",si(o,this),this.$$parse=function(t){var e=ci(s,t);if(!bt(e))throw ri("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,s);ui(e,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(t){return s+t.substr(1)},this.$$parseLinkUrl=function(t,e){return e&&"#"===e[0]?(this.hash(e.slice(1)),!0):(O(n=ci(o,t))?(i=n,r=a&&O(n=ci(a,n))?s+(ci("/",n)||n):o+i):O(n=ci(s,t))?r=s+n:s===t+"/"&&(r=s),r&&this.$$parse(r),!!r);var n,i,r}}function pi(i,r,o){si(i,this),this.$$parse=function(t){var e,n=ci(i,t)||ci(r,t);Rt(n)||"#"!==n.charAt(0)?this.$$html5?e=n:(e="",Rt(n)&&(i=t,this.replace())):Rt(e=ci(o,n))&&(e=n),ui(e,this,!1),this.$$path=function(t,e,n){var i,r=/^\/[A-Z]:(\/.*)/;li(e,n)&&(e=e.replace(n,""));if(r.exec(e))return t;return(i=r.exec(t))?i[1]:t}(this.$$path,e,i),this.$$compose()},this.$$normalizeUrl=function(t){return i+(t?o+t:"")},this.$$parseLinkUrl=function(t,e){return hi(i)===hi(t)&&(this.$$parse(t),!0)}}function di(r,o,s){this.$$html5=!0,pi.apply(this,arguments),this.$$parseLinkUrl=function(t,e){return e&&"#"===e[0]?(this.hash(e.slice(1)),!0):(r===hi(t)?n=t:(i=ci(o,t))?n=r+s+i:o===t+"/"&&(n=o),n&&this.$$parse(n),!!n);var n,i},this.$$normalizeUrl=function(t){return r+s+t}}var gi={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){this.$$url=oi(this.$$path,this.$$search,this.$$hash),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:vi("$$absUrl"),url:function(t){if(Rt(t))return this.$$url;var e=ni.exec(t);return!e[1]&&""!==t||this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:vi("$$protocol"),host:vi("$$host"),port:vi("$$port"),path:mi("$$path",function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(n,t){switch(arguments.length){case 0:return this.$$search;case 1:if(bt(n)||R(n))n=n.toString(),this.$$search=J(n);else{if(!wt(n))throw ri("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");xt(n=G(n,{}),function(t,e){null==t&&delete n[e]}),this.$$search=n}break;default:Rt(t)||null===t?delete this.$$search[n]:this.$$search[n]=t}return this.$$compose(),this},hash:mi("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function vi(t){return function(){return this[t]}}function mi(e,n){return function(t){return Rt(t)?this[e]:(this[e]=n(t),this.$$compose(),this)}}function yi(){var m="!",y={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return O(t)?(m=t,this):m},this.html5Mode=function(t){return Lt(t)?(y.enabled=t,this):wt(t)?(Lt(t.enabled)&&(y.enabled=t.enabled),Lt(t.requireBase)&&(y.requireBase=t.requireBase),(Lt(t.rewriteLinks)||bt(t.rewriteLinks))&&(y.rewriteLinks=t.rewriteLinks),this):y},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(a,u,l,o,t){var e,n,i,r=u.baseHref(),s=u.url();if(y.enabled){if(!r&&y.requireBase)throw ri("nobase","$location in HTML5 mode requires a <base> tag to be present!");n=(i=s).substring(0,i.indexOf("/",i.indexOf("//")+2))+(r||"/"),e=l.history?fi:di}else n=hi(s),e=pi;var c,h,f=(c=n).substr(0,hi(c).lastIndexOf("/")+1);(h=new e(n,f,"#"+m)).$$parseLinkUrl(s,s),h.$$state=u.state();var p=/^\s*(javascript|mailto):/i;function d(t,e,n){var i=h.url(),r=h.$$state;try{u.url(t,e,n),h.$$state=u.state()}catch(t){throw h.url(i),h.$$state=r,t}}o.on("click",function(t){var e=y.rewriteLinks;if(e&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var n,i,r=_t(t.target);"a"!==Dt(r[0]);)if(r[0]===o[0]||!(r=r.parent())[0])return;bt(e)&&Rt(r.attr(e))||(n=r.prop("href"),i=r.attr("href")||r.attr("xlink:href"),wt(n)&&"[object SVGAnimatedString]"===n.toString()&&(n=pr(n.animVal).href),p.test(n)||!n||r.attr("target")||t.isDefaultPrevented()||h.$$parseLinkUrl(n,i)&&(t.preventDefault(),h.absUrl()!==u.url()&&a.$apply()))}}),h.absUrl()!==s&&u.url(h.absUrl(),!0);var g=!0;return u.onUrlChange(function(i,r){li(i,f)?(a.$evalAsync(function(){var t,e=h.absUrl(),n=h.$$state;h.$$parse(i),h.$$state=r,t=a.$broadcast("$locationChangeStart",i,e,r,n).defaultPrevented,h.absUrl()===i&&(t?(h.$$parse(e),h.$$state=n,d(e,!1,n)):(g=!1,v(e,n)))}),a.$$phase||a.$digest()):t.location.href=i}),a.$watch(function(){var n,t,i,r,o,e,s;(g||h.$$urlUpdatedByLocation)&&(h.$$urlUpdatedByLocation=!1,n=u.url(),t=h.absUrl(),i=u.state(),r=h.$$replace,o=!((e=n)===(s=t)||pr(e).href===pr(s).href)||h.$$html5&&l.history&&i!==h.$$state,(g||o)&&(g=!1,a.$evalAsync(function(){var t=h.absUrl(),e=a.$broadcast("$locationChangeStart",t,n,h.$$state,i).defaultPrevented;h.absUrl()===t&&(e?(h.$$parse(n),h.$$state=i):(o&&d(t,r,i===h.$$state?null:h.$$state),v(n,i)))}))),h.$$replace=!1}),h;function v(t,e){a.$broadcast("$locationChangeSuccess",h.absUrl(),t,h.$$state,e)}}]}function _i(){var i=!0,o=this;this.debugEnabled=function(t){return O(t)?(i=t,this):i},this.$get=["$window",function(n){var t,r=yt||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:(t=e("debug"),function(){i&&t.apply(o,arguments)})};function e(t){var e=n.console||{},i=e[t]||e.log||$t;return function(){var n=[];return xt(arguments,function(t){var e;n.push((At(e=t)&&(e.stack&&r?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e))}),Function.prototype.apply.call(i,e,n)}}}]}xt([di,pi,fi],function(e){e.prototype=Object.create(gi),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==fi||!this.$$html5)throw ri("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=Rt(t)?null:t,this.$$urlUpdatedByLocation=!0,this}});var Ei=b("$parse"),xi={}.constructor.prototype.valueOf;function Ci(t){return t+""}var Si=Wt();xt("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){Si[t]=!0});var $i={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Ti=function(t){this.options=t};Ti.prototype={constructor:Ti,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e,n,i,r,o,s,a=this.text.charAt(this.index);'"'===a||"'"===a?this.readString(a):this.isNumber(a)||"."===a&&this.isNumber(this.peek())?this.readNumber():this.isIdentifierStart(this.peekMultichar())?this.readIdent():this.is(a,"(){}[].,;:?")?(this.tokens.push({index:this.index,text:a}),this.index++):this.isWhitespace(a)?this.index++:(n=(e=a+this.peek())+this.peek(2),i=Si[a],r=Si[e],o=Si[n],i||r||o?(s=o?n:r?e:a,this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length):this.throwError("Unexpected next character ",this.index,this.index+1))}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||""===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return 55296<=n&&n<=56319&&56320<=i&&i<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var i=O(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw Ei("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,i,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=$(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o,s=this.text.charAt(this.index);if(i+=s,r)"u"===s?((o=this.text.substring(this.index+1,this.index+5)).match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))):n+=$i[s]||s,r=!1;else if("\\"===s)r=!0;else{if(s===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=s}this.index++}this.throwError("Unterminated quote",e)}};var Ri=function(t,e){this.lexer=t,this.options=e};function wi(t,e){return void 0!==t?t:e}function bi(t,e){return void 0===t?e:void 0===e?t:t+e}Ri.Program="Program",Ri.ExpressionStatement="ExpressionStatement",Ri.AssignmentExpression="AssignmentExpression",Ri.ConditionalExpression="ConditionalExpression",Ri.LogicalExpression="LogicalExpression",Ri.BinaryExpression="BinaryExpression",Ri.UnaryExpression="UnaryExpression",Ri.CallExpression="CallExpression",Ri.MemberExpression="MemberExpression",Ri.Identifier="Identifier",Ri.Literal="Literal",Ri.ArrayExpression="ArrayExpression",Ri.Property="Property",Ri.ObjectExpression="ObjectExpression",Ri.ThisExpression="ThisExpression",Ri.LocalsExpression="LocalsExpression",Ri.NGValueParameter="NGValueParameter",Ri.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Ri.Program,body:t}},expressionStatement:function(){return{type:Ri.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Li(t))throw Ei("lval","Trying to assign a value to a non l-value");t={type:Ri.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:Ri.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Ri.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Ri.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:Ri.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:Ri.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:Ri.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:Ri.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Ri.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=G(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Ri.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:Ri.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:Ri.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:Ri.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:Ri.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)for(;t.push(this.filterChain()),this.expect(","););return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Ri.Identifier,name:t.text}},constant:function(){return{type:Ri.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Ri.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:Ri.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:Ri.ObjectExpression,properties:e}},throwError:function(t,e){throw Ei("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw Ei("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw Ei("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],s=o.text;if(s===e||s===n||s===i||s===r||!e&&!n&&!i&&!r)return o}return!1},expect:function(t,e,n,i){var r=this.peek(t,e,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{this:{type:Ri.ThisExpression},$locals:{type:Ri.LocalsExpression}}};var Ii=1,Ai=2;function Oi(t,e,n){var i,r,o,s,a,u=t.isPure=function(t,e){switch(t.type){case Ri.MemberExpression:if(t.computed)return!1;break;case Ri.UnaryExpression:return Ii;case Ri.BinaryExpression:return"+"!==t.operator&&Ii;case Ri.CallExpression:return!1}return void 0===e?Ai:e}(t,n);switch(t.type){case Ri.Program:i=!0,xt(t.body,function(t){Oi(t.expression,e,u),i=i&&t.expression.constant}),t.constant=i;break;case Ri.Literal:t.constant=!0,t.toWatch=[];break;case Ri.UnaryExpression:Oi(t.argument,e,u),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Ri.BinaryExpression:Oi(t.left,e,u),Oi(t.right,e,u),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Ri.LogicalExpression:Oi(t.left,e,u),Oi(t.right,e,u),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Ri.ConditionalExpression:Oi(t.test,e,u),Oi(t.alternate,e,u),Oi(t.consequent,e,u),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Ri.Identifier:t.constant=!1,t.toWatch=[t];break;case Ri.MemberExpression:Oi(t.object,e,u),t.computed&&Oi(t.property,e,u),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case Ri.CallExpression:o=!!t.filter&&(s=e,a=t.callee.name,!s(a).$stateful),i=o,r=[],xt(t.arguments,function(t){Oi(t,e,u),i=i&&t.constant,r.push.apply(r,t.toWatch)}),t.constant=i,t.toWatch=o?r:[t];break;case Ri.AssignmentExpression:Oi(t.left,e,u),Oi(t.right,e,u),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Ri.ArrayExpression:i=!0,r=[],xt(t.elements,function(t){Oi(t,e,u),i=i&&t.constant,r.push.apply(r,t.toWatch)}),t.constant=i,t.toWatch=r;break;case Ri.ObjectExpression:i=!0,r=[],xt(t.properties,function(t){Oi(t.value,e,u),i=i&&t.value.constant,r.push.apply(r,t.value.toWatch),t.computed&&(Oi(t.key,e,!1),i=i&&t.key.constant,r.push.apply(r,t.key.toWatch))}),t.constant=i,t.toWatch=r;break;case Ri.ThisExpression:case Ri.LocalsExpression:t.constant=!1,t.toWatch=[]}}function Pi(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length||n[0]!==e?n:void 0}}function Li(t){return t.type===Ri.Identifier||t.type===Ri.MemberExpression}function Mi(t){if(1===t.body.length&&Li(t.body[0].expression))return{type:Ri.AssignmentExpression,left:t.body[0].expression,right:{type:Ri.NGValueParameter},operator:"="}}function Di(t){this.$filter=t}function Fi(t){this.$filter=t}function ki(t,e,n){this.ast=new Ri(t,n),this.astCompiler=new(n.csp?Fi:Di)(e)}function Ni(t){return Ot(t.valueOf)?t.valueOf():xi.call(t)}function Ui(){var a,u,l=Wt(),c={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){c[t]=e},this.setIdentifierFns=function(t,e){return a=t,u=e,this},this.$get=["$filter",function(r){var o={csp:j().noUnsafeEval,literals:G(c),isIdentifierStart:Ot(a)&&a,isIdentifierContinue:Ot(u)&&u};return t.$$getAst=function(t){return new ki(new Ti(o),r,o).getAst(t).ast},t;function t(t,e){var n,i;switch(typeof t){case"string":return t=t.trim(),(i=l[n=t])||(i=new ki(new Ti(o),r,o).parse(t),l[n]=d(i)),s(i,e);case"function":return s(t,e);default:return s($t,e)}}function f(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Ni(t))&&!n)&&(t===e||t!=t&&e!=e)}function e(t,e,n,o,i){var s;if(1===(a=o.inputs).length){var r=f,a=a[0];return t.$watch(function(t){var e=a(t);return f(e,r,a.isPure)||(s=o(t,void 0,void 0,[e]),r=e&&Ni(e)),s},e,n,i)}for(var u=[],l=[],c=0,h=a.length;c<h;c++)u[c]=f,l[c]=null;return t.$watch(function(t){for(var e=!1,n=0,i=a.length;n<i;n++){var r=a[n](t);(e=e||!f(r,u[n],a[n].isPure))&&(l[n]=r,u[n]=r&&Ni(r))}return e&&(s=o(t,void 0,void 0,l)),s},e,n,i)}function n(t,e,n,i,r){var o,s,a=i.literal?p:O,u=i.$$intercepted||i,l=i.$$interceptor||Tt,c=i.inputs&&!u.inputs;return f.literal=i.literal,f.constant=i.constant,f.inputs=i.inputs,d(f),o=t.$watch(f,e,n,r);function h(){a(s)&&o()}function f(t,e,n,i){return s=c&&i?i[0]:u(t,e,n,i),a(s)&&t.$$postDigest(h),l(s)}}function p(t){var e=!0;return xt(t,function(t){O(t)||(e=!1)}),e}function i(t,e,n,i){var r=t.$watch(function(t){return r(),i(t)},e,n);return r}function d(t){return t.constant?t.$$watchDelegate=i:t.oneTime?t.$$watchDelegate=n:t.inputs&&(t.$$watchDelegate=e),t}function s(o,s){if(!s)return o;function t(t){return n(e(t))}var e,n;o.$$interceptor&&(e=o.$$interceptor,n=s,t.$stateful=e.$stateful||n.$stateful,t.$$pure=e.$$pure&&n.$$pure,s=t,o=o.$$intercepted);function i(t,e,n,i){var r=a&&i?i[0]:o(t,e,n,i);return s(r)}var a=!1;return i.$$intercepted=o,i.$$interceptor=s,i.literal=o.literal,i.oneTime=o.oneTime,i.constant=o.constant,s.$stateful||(a=!o.inputs,i.inputs=o.inputs?o.inputs:[o],s.$$pure||(i.inputs=i.inputs.map(function(e){return e.isPure===Ai?function(t){return e(t)}:e}))),d(i)}}]}function Gi(){var n=!0;this.$get=["$rootScope","$exceptionHandler",function(e,t){return Vi(function(t){e.$evalAsync(t)},t,n)}],this.errorOnUnhandledRejections=function(t){return O(t)?(n=t,this):n}}function ji(){var n=!0;this.$get=["$browser","$exceptionHandler",function(e,t){return Vi(function(t){e.defer(t)},t,n)}],this.errorOnUnhandledRejections=function(t){return O(t)?(n=t,this):n}}function Vi(s,a,u){var n=b("$q",TypeError),l=0,i=[];function r(){return new t}function t(){var e=this.promise=new o;this.resolve=function(t){f(e,t)},this.reject=function(t){p(e,t)},this.notify=function(t){g(e,t)}}function o(){this.$$state={status:0}}function c(){for(;!l&&i.length;){var t,e=i.shift();e.pur||(Bi(e),t="Possibly unhandled rejection: "+gt(e.value),At(e.value)?a(e.value,t):a(t))}}function h(t){!u||t.pending||2!==t.status||t.pur||(0===l&&0===i.length&&s(c),i.push(t)),!t.processScheduled&&t.pending&&(t.processScheduled=!0,++l,s(function(){!function(t){var e,n,i=t.pending;t.processScheduled=!1,t.pending=void 0;try{for(var r=0,o=i.length;r<o;++r){Bi(t),n=i[r][0],e=i[r][t.status];try{Ot(e)?f(n,e(t.value)):(1===t.status?f:p)(n,t.value)}catch(t){p(n,t),t&&!0===t.$$passToExceptionHandler&&a(t)}}}finally{--l,u&&0===l&&s(c)}}(t)}))}function f(t,e){t.$$state.status||(e===t?d(t,n("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):function e(n,t){var i;var r=!1;try{(wt(t)||Ot(t))&&(i=t.then),Ot(i)?(n.$$state.status=-1,i.call(t,o,s,a)):(n.$$state.value=t,n.$$state.status=1,h(n.$$state))}catch(t){s(t)}function o(t){r||(r=!0,e(n,t))}function s(t){r||(r=!0,d(n,t))}function a(t){g(n,t)}}(t,e))}function p(t,e){t.$$state.status||d(t,e)}function d(t,e){t.$$state.value=e,t.$$state.status=2,h(t.$$state)}function g(t,r){var o=t.$$state.pending;t.$$state.status<=0&&o&&o.length&&s(function(){for(var t,e,n=0,i=o.length;n<i;n++){e=o[n][0],t=o[n][3];try{g(e,Ot(t)?t(r):r)}catch(t){a(t)}}})}function v(t){var e=new o;return p(e,t),e}function m(t,e,n){var i=null;try{Ot(n)&&(i=n())}catch(t){return v(t)}return M(i)?i.then(function(){return e(t)},v):e(t)}function y(t,e,n,i){var r=new o;return f(r,t),r.then(e,n,i)}Ct(o.prototype,{then:function(t,e,n){if(Rt(t)&&Rt(e)&&Rt(n))return this;var i=new o;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),0<this.$$state.status&&h(this.$$state),i},catch:function(t){return this.then(null,t)},finally:function(e,t){return this.then(function(t){return m(t,_,e)},function(t){return m(t,v,e)},t)}});var _=y;function e(t){if(!Ot(t))throw n("norslvr","Expected resolverFn, got '{0}'",t);var e=new o;return t(function(t){f(e,t)},function(t){p(e,t)}),e}return e.prototype=o.prototype,e.defer=r,e.reject=v,e.when=y,e.resolve=_,e.all=function(t){var n=new o,i=0,r=It(t)?[]:{};return xt(t,function(t,e){i++,y(t).then(function(t){r[e]=t,--i||f(n,r)},function(t){p(n,t)})}),0===i&&f(n,r),n},e.race=function(t){var e=r();return xt(t,function(t){y(t).then(e.resolve,e.reject)}),e.promise},e}function Bi(t){t.pur=!0}function Wi(t){t.$$state&&Bi(t.$$state)}function Hi(){this.$get=["$window","$timeout",function(t,n){var i=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,e=!!i,o=e?function(t){var e=i(t);return function(){r(e)}}:function(t){var e=n(t,16.66,!1);return function(){n.cancel(e)}};return o.supported=e,o}]}function qi(){var $=10,T=b("$rootScope"),R=null,w=null;this.digestTtl=function(t){return arguments.length&&($=t),$},this.$get=["$exceptionHandler","$parse","$browser",function(p,d,g){function r(t){t.currentScope.$$destroyed=!0}function o(){this.$id=u(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,(this.$root=this).$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}o.prototype={constructor:o,$new:function(t,e){var n;function i(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=u(),this.$$ChildScope=null,this.$$suspended=!1}return e=e||this,t?(n=new o).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=(i.prototype=this,i)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,!t&&e===this||n.$on("$destroy",r),n},$watch:function(t,e,n,i){var r=d(t),o=Ot(e)?e:$t;if(r.$$watchDelegate)return r.$$watchDelegate(this,o,n,r,t);var s=this,a=s.$$watchers,u={fn:o,last:C,get:r,exp:i||t,eq:!!n};return R=null,a||((a=s.$$watchers=[]).$$digestWatchIndex=-1),a.unshift(u),a.$$digestWatchIndex++,l(this,1),function(){var t=Ft(a,u);0<=t&&(l(s,-1),t<a.$$digestWatchIndex&&a.$$digestWatchIndex--),R=null}},$watchGroup:function(e,i){var r=new Array(e.length),o=new Array(e.length),s=[],a=this,u=!1,n=!0;if(!e.length){var t=!0;return a.$evalAsync(function(){t&&i(o,o,a)}),function(){t=!1}}if(1===e.length)return this.$watch(e[0],function(t,e,n){o[0]=t,r[0]=e,i(o,t===e?o:r,n)});function l(){u=!1;try{n?(n=!1,i(o,o,a)):i(o,r,a)}finally{for(var t=0;t<e.length;t++)r[t]=o[t]}}return xt(e,function(t,e){var n=a.$watch(t,function(t){o[e]=t,u||(u=!0,a.$evalAsync(l))});s.push(n)}),function(){for(;s.length;)s.shift()()}},$watchCollection:function(t,n){p.$$pure=d(t).literal,p.$stateful=!p.$$pure;var s,a,i,r=this,o=1<n.length,u=0,e=d(t,p),l=[],c={},h=!0,f=0;function p(t){var e,n,i,r;if(!Rt(s=t)){if(wt(s))if(D(s)){a!==l&&(f=(a=l).length=0,u++),e=s.length,f!==e&&(u++,a.length=f=e);for(var o=0;o<e;o++)r=a[o],i=s[o],r!=r&&i!=i||r===i||(u++,a[o]=i)}else{for(n in a!==c&&(a=c={},f=0,u++),e=0,s)Et.call(s,n)&&(e++,i=s[n],r=a[n],n in a?r!=r&&i!=i||r===i||(u++,a[n]=i):(f++,a[n]=i,u++));if(e<f)for(n in u++,a)Et.call(s,n)||(f--,delete a[n])}else a!==s&&(a=s,u++);return u}}return this.$watch(e,function(){if(h?(h=!1,n(s,s,r)):n(s,i,r),o)if(wt(s))if(D(s)){i=new Array(s.length);for(var t=0;t<s.length;t++)i[t]=s[t]}else for(var e in i={},s)Et.call(s,e)&&(i[e]=s[e]);else i=s})},$digest:function(){var t,e,n,i,r,o,s,a,u,l=$,c=m.length?v:this,h=[];E("$digest"),g.$$checkUrlChange(),this===v&&null!==w&&(g.defer.cancel(w),S()),R=null;do{r=!1,s=c;for(var f=0;f<m.length;f++){try{(0,(u=m[f]).fn)(u.scope,u.locals)}catch(t){p(t)}R=null}m.length=0;t:do{if(i=!s.$$suspended&&s.$$watchers)for(i.$$digestWatchIndex=i.length;i.$$digestWatchIndex--;)try{if(t=i[i.$$digestWatchIndex])if((e=(0,t.get)(s))===(n=t.last)||(t.eq?Nt(e,n):I(e)&&I(n))){if(t===R){r=!1;break t}}else r=!0,(R=t).last=t.eq?G(e,null):e,(0,t.fn)(e,n===C?e:n,s),l<5&&(h[a=4-l]||(h[a]=[]),h[a].push({msg:Ot(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,newVal:e,oldVal:n}))}catch(t){p(t)}if(!(o=!s.$$suspended&&s.$$watchersCount&&s.$$childHead||s!==c&&s.$$nextSibling))for(;s!==c&&!(o=s.$$nextSibling);)s=s.$parent}while(s=o);if((r||m.length)&&!l--)throw x(),T("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",$,h)}while(r||m.length);for(x();_<y.length;)try{y[_++]()}catch(t){p(t)}y.length=_=0,g.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===v&&g.$$applicationDestroyed(),l(this,-this.$$watchersCount),this.$$listenerCount)s(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=$t,this.$on=this.$watch=this.$watchGroup=function(){return $t},this.$$listeners={},this.$$nextSibling=null,function t(e){9===yt&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return d(t)(this,e)},$evalAsync:function(t,e){v.$$phase||m.length||g.defer(function(){m.length&&v.$digest()},null,"$evalAsync"),m.push({scope:this,fn:d(t),locals:e})},$$postDigest:function(t){y.push(t)},$apply:function(t){try{E("$apply");try{return this.$eval(t)}finally{x()}}catch(t){p(t)}finally{try{v.$digest()}catch(t){throw p(t),t}}},$applyAsync:function(t){var e=this;t&&n.push(function(){e.$eval(t)}),t=d(t),null===w&&(w=g.defer(function(){v.$apply(S)},null,"$applyAsync"))},$on:function(e,n){var i=this.$$listeners[e];i||(this.$$listeners[e]=i=[]),i.push(n);for(var t=this;t.$$listenerCount[e]||(t.$$listenerCount[e]=0),t.$$listenerCount[e]++,t=t.$parent;);var r=this;return function(){var t=i.indexOf(n);-1!==t&&(delete i[t],s(r,1,e))}},$emit:function(t,e){var n,i,r,o=[],s=this,a=!1,u={name:t,targetScope:s,stopPropagation:function(){a=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},l=B([u],arguments,1);do{for(n=s.$$listeners[t]||o,u.currentScope=s,i=0,r=n.length;i<r;i++)if(n[i])try{n[i].apply(null,l)}catch(t){p(t)}else n.splice(i,1),i--,r--;if(a)break;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(t,e){var n=this,i=this,r={name:t,targetScope:this,preventDefault:function(){r.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return r;for(var o,s,a,u=B([r],arguments,1);n=i;){for(s=0,a=(o=(r.currentScope=n).$$listeners[t]||[]).length;s<a;s++)if(o[s])try{o[s].apply(null,u)}catch(t){p(t)}else o.splice(s,1),s--,a--;if(!(i=n.$$listenerCount[t]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(i=n.$$nextSibling);)n=n.$parent}return r.currentScope=null,r}};var v=new o,m=v.$$asyncQueue=[],y=v.$$postDigestQueue=[],n=v.$$applyAsyncQueue=[],_=0;return v;function E(t){if(v.$$phase)throw T("inprog","{0} already in progress",v.$$phase);v.$$phase=t}function x(){v.$$phase=null}function l(t,e){for(;t.$$watchersCount+=e,t=t.$parent;);}function s(t,e,n){for(;t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n],t=t.$parent;);}function C(){}function S(){for(;n.length;)try{n.shift()()}catch(t){p(t)}w=null}}]}function Xi(){var r=/^\s*(https?|s?ftp|mailto|tel|file):/,o=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return O(t)?(r=t,this):r},this.imgSrcSanitizationWhitelist=function(t){return O(t)?(o=t,this):o},this.$get=function(){return function(t,e){var n=e?o:r,i=pr(t&&t.trim()).href;return""===i||i.match(n)?t:"unsafe:"+i}}}Di.prototype={compile:function(t){var r=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Oi(t,r.$filter);var e,n,i="";this.stage="assign",(e=Mi(t))&&(this.state.computing="assign",n=this.nextId(),this.recurse(e,n),this.return_(n),i="fn.assign="+this.generateFunction("assign","s,v,l"));var o=Pi(t.body);r.stage="inputs",xt(o,function(t,e){var n="fn"+e;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var i=r.nextId();r.recurse(t,i),r.return_(i),r.state.inputs.push({name:n,isPure:t.isPure}),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(t);var s='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+i+this.watchFns()+"return fn;",a=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,Ci,wi,bi);return this.state=this.stage=void 0,a},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return xt(t,function(t){e.push("var "+t.name+"="+n.generateFunction(t.name,"s")),t.isPure&&e.push(t.name,".isPure="+JSON.stringify(t.isPure)+";")}),t.length&&e.push("fn.inputs=["+t.map(function(t){return t.name}).join(",")+"];"),e.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var n=[],i=this;return xt(this.state.filters,function(t,e){n.push(t+"=$filter("+i.escape(e)+")")}),n.length?"var "+n.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(n,e,t,i,r,o){var s,a,u,l,c,h=this;if(i=i||$t,!o&&O(n.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",n.watchId)),this.lazyRecurse(n,e,t,i,r,!0));switch(n.type){case Ri.Program:xt(n.body,function(t,e){h.recurse(t.expression,void 0,void 0,function(t){a=t}),e!==n.body.length-1?h.current().body.push(a,";"):h.return_(a)});break;case Ri.Literal:l=this.escape(n.value),this.assign(e,l),i(e||l);break;case Ri.UnaryExpression:this.recurse(n.argument,void 0,void 0,function(t){a=t}),l=n.operator+"("+this.ifDefined(a,0)+")",this.assign(e,l),i(l);break;case Ri.BinaryExpression:this.recurse(n.left,void 0,void 0,function(t){s=t}),this.recurse(n.right,void 0,void 0,function(t){a=t}),l="+"===n.operator?this.plus(s,a):"-"===n.operator?this.ifDefined(s,0)+n.operator+this.ifDefined(a,0):"("+s+")"+n.operator+"("+a+")",this.assign(e,l),i(l);break;case Ri.LogicalExpression:e=e||this.nextId(),h.recurse(n.left,e),h.if_("&&"===n.operator?e:h.not(e),h.lazyRecurse(n.right,e)),i(e);break;case Ri.ConditionalExpression:e=e||this.nextId(),h.recurse(n.test,e),h.if_(e,h.lazyRecurse(n.alternate,e),h.lazyRecurse(n.consequent,e)),i(e);break;case Ri.Identifier:e=e||this.nextId(),t&&(t.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",n.name)+"?l:s"),t.computed=!1,t.name=n.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",n.name)),function(){h.if_("inputs"===h.stage||"s",function(){r&&1!==r&&h.if_(h.isNull(h.nonComputedMember("s",n.name)),h.lazyAssign(h.nonComputedMember("s",n.name),"{}")),h.assign(e,h.nonComputedMember("s",n.name))})},e&&h.lazyAssign(e,h.nonComputedMember("l",n.name))),i(e);break;case Ri.MemberExpression:s=t&&(t.context=this.nextId())||this.nextId(),e=e||this.nextId(),h.recurse(n.object,s,void 0,function(){h.if_(h.notNull(s),function(){n.computed?(a=h.nextId(),h.recurse(n.property,a),h.getStringValue(a),r&&1!==r&&h.if_(h.not(h.computedMember(s,a)),h.lazyAssign(h.computedMember(s,a),"{}")),l=h.computedMember(s,a),h.assign(e,l),t&&(t.computed=!0,t.name=a)):(r&&1!==r&&h.if_(h.isNull(h.nonComputedMember(s,n.property.name)),h.lazyAssign(h.nonComputedMember(s,n.property.name),"{}")),l=h.nonComputedMember(s,n.property.name),h.assign(e,l),t&&(t.computed=!1,t.name=n.property.name))},function(){h.assign(e,"undefined")}),i(e)},!!r);break;case Ri.CallExpression:e=e||this.nextId(),n.filter?(a=h.filter(n.callee.name),u=[],xt(n.arguments,function(t){var e=h.nextId();h.recurse(t,e),u.push(e)}),l=a+"("+u.join(",")+")",h.assign(e,l),i(e)):(a=h.nextId(),s={},u=[],h.recurse(n.callee,a,s,function(){h.if_(h.notNull(a),function(){xt(n.arguments,function(t){h.recurse(t,n.constant?void 0:h.nextId(),void 0,function(t){u.push(t)})}),l=s.name?h.member(s.context,s.name,s.computed)+"("+u.join(",")+")":a+"("+u.join(",")+")",h.assign(e,l)},function(){h.assign(e,"undefined")}),i(e)}));break;case Ri.AssignmentExpression:a=this.nextId(),s={},this.recurse(n.left,void 0,s,function(){h.if_(h.notNull(s.context),function(){h.recurse(n.right,a),l=h.member(s.context,s.name,s.computed)+n.operator+a,h.assign(e,l),i(e||l)})},1);break;case Ri.ArrayExpression:u=[],xt(n.elements,function(t){h.recurse(t,n.constant?void 0:h.nextId(),void 0,function(t){u.push(t)})}),l="["+u.join(",")+"]",this.assign(e,l),i(e||l);break;case Ri.ObjectExpression:c=!(u=[]),xt(n.properties,function(t){t.computed&&(c=!0)}),c?(e=e||this.nextId(),this.assign(e,"{}"),xt(n.properties,function(t){t.computed?(s=h.nextId(),h.recurse(t.key,s)):s=t.key.type===Ri.Identifier?t.key.name:""+t.key.value,a=h.nextId(),h.recurse(t.value,a),h.assign(h.member(e,s,t.computed),a)})):(xt(n.properties,function(e){h.recurse(e.value,n.constant?void 0:h.nextId(),void 0,function(t){u.push(h.escape(e.key.type===Ri.Identifier?e.key.name:""+e.key.value)+":"+t)})}),l="{"+u.join(",")+"}",this.assign(e,l)),i(e||l);break;case Ri.ThisExpression:this.assign(e,"s"),i(e||"s");break;case Ri.LocalsExpression:this.assign(e,"l"),i(e||"l");break;case Ri.NGValueParameter:this.assign(e,"v"),i(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),i[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){var i;!0===t?e():((i=this.current().body).push("if(",t,"){"),e(),i.push("}"),n&&(i.push("else{"),n(),i.push("}")))},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,i,r,o){var s=this;return function(){s.recurse(t,e,n,i,r,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(bt(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(R(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw Ei("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},Fi.prototype={compile:function(t){var e,i,r=this;Oi(t,r.$filter),(e=Mi(t))&&(i=this.recurse(e));var o,n=Pi(t.body);n&&(o=[],xt(n,function(t,e){var n=r.recurse(t);n.isPure=t.isPure,t.input=n,o.push(n),t.watchId=e}));var s=[];xt(t.body,function(t){s.push(r.recurse(t.expression))});var a=0===t.body.length?$t:1===t.body.length?s[0]:function(e,n){var i;return xt(s,function(t){i=t(e,n)}),i};return i&&(a.assign=function(t,e,n){return i(t,n,e)}),o&&(a.inputs=o),a},recurse:function(t,u,e){var s,l,c,n=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Ri.Literal:return this.value(t.value,u);case Ri.UnaryExpression:return l=this.recurse(t.argument),this["unary"+t.operator](l,u);case Ri.BinaryExpression:case Ri.LogicalExpression:return s=this.recurse(t.left),l=this.recurse(t.right),this["binary"+t.operator](s,l,u);case Ri.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),u);case Ri.Identifier:return n.identifier(t.name,u,e);case Ri.MemberExpression:return s=this.recurse(t.object,!1,!!e),t.computed||(l=t.property.name),t.computed&&(l=this.recurse(t.property)),t.computed?this.computedMember(s,l,u,e):this.nonComputedMember(s,l,u,e);case Ri.CallExpression:return c=[],xt(t.arguments,function(t){c.push(n.recurse(t))}),t.filter&&(l=this.$filter(t.callee.name)),t.filter||(l=this.recurse(t.callee,!0)),t.filter?function(t,e,n,i){for(var r=[],o=0;o<c.length;++o)r.push(c[o](t,e,n,i));var s=l.apply(void 0,r,i);return u?{context:void 0,name:void 0,value:s}:s}:function(t,e,n,i){var r,o=l(t,e,n,i);if(null!=o.value){for(var s=[],a=0;a<c.length;++a)s.push(c[a](t,e,n,i));r=o.value.apply(o.context,s)}return u?{value:r}:r};case Ri.AssignmentExpression:return s=this.recurse(t.left,!0,1),l=this.recurse(t.right),function(t,e,n,i){var r=s(t,e,n,i),o=l(t,e,n,i);return r.context[r.name]=o,u?{value:o}:o};case Ri.ArrayExpression:return c=[],xt(t.elements,function(t){c.push(n.recurse(t))}),function(t,e,n,i){for(var r=[],o=0;o<c.length;++o)r.push(c[o](t,e,n,i));return u?{value:r}:r};case Ri.ObjectExpression:return c=[],xt(t.properties,function(t){t.computed?c.push({key:n.recurse(t.key),computed:!0,value:n.recurse(t.value)}):c.push({key:t.key.type===Ri.Identifier?t.key.name:""+t.key.value,computed:!1,value:n.recurse(t.value)})}),function(t,e,n,i){for(var r={},o=0;o<c.length;++o)c[o].computed?r[c[o].key(t,e,n,i)]=c[o].value(t,e,n,i):r[c[o].key]=c[o].value(t,e,n,i);return u?{value:r}:r};case Ri.ThisExpression:return function(t){return u?{value:t}:t};case Ri.LocalsExpression:return function(t,e){return u?{value:e}:e};case Ri.NGValueParameter:return function(t,e,n){return u?{value:n}:n}}},"unary+":function(o,s){return function(t,e,n,i){var r=O(r=o(t,e,n,i))?+r:0;return s?{value:r}:r}},"unary-":function(o,s){return function(t,e,n,i){var r=O(r=o(t,e,n,i))?-r:-0;return s?{value:r}:r}},"unary!":function(o,s){return function(t,e,n,i){var r=!o(t,e,n,i);return s?{value:r}:r}},"binary+":function(o,s,a){return function(t,e,n,i){var r=bi(o(t,e,n,i),s(t,e,n,i));return a?{value:r}:r}},"binary-":function(a,u,l){return function(t,e,n,i){var r=a(t,e,n,i),o=u(t,e,n,i),s=(O(r)?r:0)-(O(o)?o:0);return l?{value:s}:s}},"binary*":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)*s(t,e,n,i);return a?{value:r}:r}},"binary/":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)/s(t,e,n,i);return a?{value:r}:r}},"binary%":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)%s(t,e,n,i);return a?{value:r}:r}},"binary===":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)===s(t,e,n,i);return a?{value:r}:r}},"binary!==":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)!==s(t,e,n,i);return a?{value:r}:r}},"binary==":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)==s(t,e,n,i);return a?{value:r}:r}},"binary!=":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)!=s(t,e,n,i);return a?{value:r}:r}},"binary<":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)<s(t,e,n,i);return a?{value:r}:r}},"binary>":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)>s(t,e,n,i);return a?{value:r}:r}},"binary<=":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)<=s(t,e,n,i);return a?{value:r}:r}},"binary>=":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)>=s(t,e,n,i);return a?{value:r}:r}},"binary&&":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)&&s(t,e,n,i);return a?{value:r}:r}},"binary||":function(o,s,a){return function(t,e,n,i){var r=o(t,e,n,i)||s(t,e,n,i);return a?{value:r}:r}},"ternary?:":function(o,s,a,u){return function(t,e,n,i){var r=(o(t,e,n,i)?s:a)(t,e,n,i);return u?{value:r}:r}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(s,a,u){return function(t,e,n,i){var r=e&&s in e?e:t;u&&1!==u&&r&&null==r[s]&&(r[s]={});var o=r?r[s]:void 0;return a?{context:r,name:s,value:o}:o}},computedMember:function(a,u,l,c){return function(t,e,n,i){var r,o,s=a(t,e,n,i);return null!=s&&(r=u(t,e,n,i),r+="",c&&1!==c&&s&&!s[r]&&(s[r]={}),o=s[r]),l?{context:s,name:r,value:o}:o}},nonComputedMember:function(s,a,u,l){return function(t,e,n,i){var r=s(t,e,n,i);l&&1!==l&&r&&null==r[a]&&(r[a]={});var o=null!=r?r[a]:void 0;return u?{context:r,name:a,value:o}:o}},inputs:function(r,o){return function(t,e,n,i){return i?i[o]:r(t,e,n)}}},ki.prototype={constructor:ki,parse:function(t){var e,n=this.getAst(t),i=this.astCompiler.compile(n.ast);return i.literal=0===(e=n.ast).body.length||1===e.body.length&&(e.body[0].expression.type===Ri.Literal||e.body[0].expression.type===Ri.ArrayExpression||e.body[0].expression.type===Ri.ObjectExpression),i.constant=n.ast.constant,i.oneTime=n.oneTime,i},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var zi=b("$sce"),Yi={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Ki=/_([a-z])/g;function Zi(t){return t.replace(Ki,ee)}function Ji(t){var e=[];return O(t)&&xt(t,function(t){e.push(function(t){if("self"===t)return t;if(bt(t)){if(-1<t.indexOf("***"))throw zi("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=k(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(P(t))return new RegExp("^"+t.source+"$");throw zi("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function Qi(){this.SCE_CONTEXTS=Yi;var a=["self"],u=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(a=Ji(t)),a},this.resourceUrlBlacklist=function(t){return arguments.length&&(u=Ji(t)),u},this.$get=["$injector","$$sanitizeUri",function(t,i){var r=function(){throw zi("unsafe","Attempting to use an unsafe value in a safe context.")};function o(t,e){return"self"===t?dr(e,hr)||dr(e,mt.document.baseURI?mt.document.baseURI:(lr||((lr=mt.document.createElement("a")).href=".",lr=lr.cloneNode(!1)),lr.href)):t.exec(e.href)}function e(t){function e(t){this.$$unwrapTrustedValue=function(){return t}}return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}t.has("$sanitize")&&(r=t.get("$sanitize"));var n=e(),s={};return s[Yi.HTML]=e(n),s[Yi.CSS]=e(n),s[Yi.MEDIA_URL]=e(n),s[Yi.URL]=e(s[Yi.MEDIA_URL]),s[Yi.JS]=e(n),s[Yi.RESOURCE_URL]=e(s[Yi.URL]),{trustAs:function(t,e){var n=s.hasOwnProperty(t)?s[t]:null;if(!n)throw zi("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||Rt(e)||""===e)return e;if("string"!=typeof e)throw zi("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(t,e){if(null===e||Rt(e)||""===e)return e;var n=s.hasOwnProperty(t)?s[t]:null;if(n&&e instanceof n)return e.$$unwrapTrustedValue();if(Ot(e.$$unwrapTrustedValue)&&(e=e.$$unwrapTrustedValue()),t===Yi.MEDIA_URL||t===Yi.URL)return i(e.toString(),t===Yi.MEDIA_URL);if(t===Yi.RESOURCE_URL){if(function(t){for(var e=pr(t.toString()),n=!1,i=0,r=a.length;i<r;i++)if(o(a[i],e)){n=!0;break}if(n)for(i=0,r=u.length;i<r;i++)if(o(u[i],e)){n=!1;break}return n}(e))return e;throw zi("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",e.toString())}if(t===Yi.HTML)return r(e);throw zi("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof n?t.$$unwrapTrustedValue():t}}}]}function tr(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(i,t){if(e&&yt<8)throw zi("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=dt(Yi);r.isEnabled=function(){return e},r.trustAs=t.trustAs,r.getTrusted=t.getTrusted,r.valueOf=t.valueOf,e||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=Tt),r.parseAs=function(e,t){var n=i(t);return n.literal&&n.constant?n:i(t,function(t){return r.getTrusted(e,t)})};var o=r.parseAs,s=r.getTrusted,a=r.trustAs;return xt(Yi,function(e,t){var n=$(t);r[Zi("parse_as_"+n)]=function(t){return o(e,t)},r[Zi("get_trusted_"+n)]=function(t){return s(e,t)},r[Zi("trust_as_"+n)]=function(t){return a(e,t)}}),r}]}function er(){this.$get=["$window","$document",function(t,e){var n={},i=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,r=C((/android (\d+)/.exec($((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},a=s.body&&s.body.style,u=!1,l=!1;return a&&(u=!!("transition"in a||"webkitTransition"in a),l=!!("animation"in a||"webkitAnimation"in a)),{history:!(!i||r<4||o),hasEvent:function(t){return("input"!==t||!yt)&&(Rt(n[t])&&(e=s.createElement("div"),n[t]="on"+t in e),n[t]);var e},csp:j(),transitions:u,animations:l,android:r}}]}function nr(){this.$get=A(function(t){return new ir(t)})}function ir(s){var a={},i=[],u=this.ALL_TASKS_TYPE="$$all$$",l=this.DEFAULT_TASK_TYPE="$$default$$";function c(){var t=i.pop();return t&&t.cb}function h(t){for(var e=i.length-1;0<=e;--e){var n=i[e];if(n.type===t)return i.splice(e,1),n.cb}}this.completeTask=function(t,e){e=e||l;try{t()}finally{!function(t){a[t=t||l]&&(a[t]--,a[u]--)}(e);var n=a[e],i=a[u];if(!i||!n)for(var r,o=i?h:c;r=o(e);)try{r()}catch(t){s.error(t)}}},this.incTaskCount=function(t){a[t=t||l]=(a[t]||0)+1,a[u]=(a[u]||0)+1},this.notifyWhenNoPendingTasks=function(t,e){a[e=e||u]?i.push({type:e,cb:t}):t()}}var rr=b("$templateRequest");function or(){var l;this.httpOptions=function(t){return t?(l=t,this):l},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(i,r,o,s,a){function u(e,n){u.totalPendingRequests++,bt(e)&&!Rt(r.get(e))||(e=a.getTrustedResourceUrl(e));var t=o.defaults&&o.defaults.transformResponse;return It(t)?t=t.filter(function(t){return t!==Vn}):t===Vn&&(t=null),o.get(e,Ct({cache:r,transformResponse:t},l)).finally(function(){u.totalPendingRequests--}).then(function(t){return r.put(e,t.data)},function(t){n||(t=rr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",e,t.status,t.statusText),i(t));return s.reject(t)})}return u.totalPendingRequests=0,u}]}function sr(){this.$get=["$rootScope","$browser","$location",function(e,n,i){var t={findBindings:function(t,n,i){var e=t.getElementsByClassName("ng-binding"),r=[];return xt(e,function(e){var t=_.element(e).data("$binding");t&&xt(t,function(t){i?new RegExp("(^|\\s)"+k(n)+"(\\s|\\||$)").test(t)&&r.push(e):-1!==t.indexOf(n)&&r.push(e)})}),r},findModels:function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o="["+i[r]+"model"+(n?"=":"*=")+'"'+e+'"]',s=t.querySelectorAll(o);if(s.length)return s}},getLocation:function(){return i.url()},setLocation:function(t){t!==i.url()&&(i.url(t),e.$digest())},whenStable:function(t){n.notifyWhenNoOutstandingRequests(t)}};return t}]}var ar=b("$timeout");function ur(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(u,l,c,h,f){var p={};function t(t,e,n){Ot(t)||(n=e,e=t,t=$t);var i=Ut(arguments,3),r=O(n)&&!n,o=(r?h:c).defer(),s=o.promise,a=l.defer(function(){try{o.resolve(t.apply(null,i))}catch(t){o.reject(t),f(t)}finally{delete p[s.$$timeoutId]}r||u.$apply()},e,"$timeout");return s.$$timeoutId=a,p[a]=o,s}return t.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw ar("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!p.hasOwnProperty(t.$$timeoutId))return!1;var e=t.$$timeoutId,n=p[e];return Wi(n.promise),n.reject("canceled"),delete p[e],l.defer.cancel(e)},t}]}var lr,cr=mt.document.createElement("a"),hr=pr(mt.location.href);cr.href="http://[::1]";var fr="[::1]"===cr.hostname;function pr(t){if(!bt(t))return t;var e=t;yt&&(cr.setAttribute("href",e),e=cr.href),cr.setAttribute("href",e);var n=cr.hostname;return!fr&&-1<n.indexOf(":")&&(n="["+n+"]"),{href:cr.href,protocol:cr.protocol?cr.protocol.replace(/:$/,""):"",host:cr.host,search:cr.search?cr.search.replace(/^\?/,""):"",hash:cr.hash?cr.hash.replace(/^#/,""):"",hostname:n,port:cr.port,pathname:"/"===cr.pathname.charAt(0)?cr.pathname:"/"+cr.pathname}}function dr(t,e){return t=pr(t),e=pr(e),t.protocol===e.protocol&&t.host===e.host}function gr(){this.$get=A(mt)}function vr(t){var s=t[0]||{},a={},u="";function l(e){try{return decodeURIComponent(e)}catch(t){return e}}return function(){var t,e,n,i,r,o=function(t){try{return t.cookie||""}catch(t){return""}}(s);if(o!==u)for(t=(u=o).split("; "),a={},n=0;n<t.length;n++)0<(i=(e=t[n]).indexOf("="))&&(r=l(e.substring(0,i)),Rt(a[r])&&(a[r]=l(e.substring(i+1))));return a}}function mr(){this.$get=vr}function yr(i){var r="Filter";function o(t,e){if(wt(t)){var n={};return xt(t,function(t,e){n[e]=o(e,t)}),n}return i.factory(t+r,e)}this.register=o,this.$get=["$injector",function(e){return function(t){return e.get(t+r)}}],o("currency",Tr),o("date",kr),o("filter",_r),o("json",Nr),o("limitTo",jr),o("lowercase",Ur),o("number",Rr),o("orderBy",Br),o("uppercase",Gr)}function _r(){return function(t,e,n,i){if(!D(t)){if(null==t)return t;throw b("filter")("notarray","Expected array but received: {0}",t)}var r,o;switch(i=i||"$",xr(e)){case"function":r=e;break;case"boolean":case"null":case"number":case"string":o=!0;case"object":r=function(e,n,i,r){var o=wt(e)&&i in e;!0===n?n=Nt:Ot(n)||(n=function(t,e){return!Rt(t)&&(null===t||null===e?t===e:!(wt(e)||wt(t)&&!S(t))&&(t=$(""+t),e=$(""+e),-1!==t.indexOf(e)))});return function(t){return o&&!wt(t)?Er(t,e[i],n,i,!1):Er(t,e,n,i,r)}}(e,n,i,o);break;default:return t}return Array.prototype.filter.call(t,r)}}function Er(t,e,n,i,r,o){var s,a=xr(t),u=xr(e);if("string"===u&&"!"===e.charAt(0))return!Er(t,e.substring(1),n,i,r);if(It(t))return t.some(function(t){return Er(t,e,n,i,r)});switch(a){case"object":if(r){for(s in t)if(s.charAt&&"$"!==s.charAt(0)&&Er(t[s],e,n,i,!0))return!0;return!o&&Er(t,e,n,i,!1)}if("object"!==u)return n(t,e);for(s in e){var l=e[s];if(!Ot(l)&&!Rt(l)){var c=s===i;if(!Er(c?t:t[s],l,n,i,c,c))return!1}}return!0;case"function":return!1;default:return n(t,e)}}function xr(t){return null===t?"null":typeof t}vr.$inject=["$document"],yr.$inject=["$provide"];var Cr=22,Sr=".",$r="0";function Tr(t){var r=t.NUMBER_FORMATS;return function(t,e,n){Rt(e)&&(e=r.CURRENCY_SYM),Rt(n)&&(n=r.PATTERNS[1].maxFrac);var i=e?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:wr(t,r.PATTERNS[1],r.GROUP_SEP,r.DECIMAL_SEP,n).replace(i,e)}}function Rr(t){var n=t.NUMBER_FORMATS;return function(t,e){return null==t?t:wr(t,n.PATTERNS[0],n.GROUP_SEP,n.DECIMAL_SEP,e)}}function wr(t,e,n,i,r){if(!bt(t)&&!R(t)||isNaN(t))return"";var o,s=!isFinite(t),a=!1,u=Math.abs(t)+"",l="";if(s)l="";else{(function(t,e,n,i){var r=t.d,o=r.length-t.i,s=(e=Rt(e)?Math.min(Math.max(n,o),i):+e)+t.i,a=r[s];if(0<s){r.splice(Math.max(t.i,s));for(var u=s;u<r.length;u++)r[u]=0}else{o=Math.max(0,o),t.i=1,r.length=Math.max(1,s=e+1),r[0]=0;for(var l=1;l<s;l++)r[l]=0}if(5<=a)if(s-1<0){for(var c=0;s<c;c--)r.unshift(0),t.i++;r.unshift(1),t.i++}else r[s-1]++;for(;o<Math.max(0,e);o++)r.push(0);var h=r.reduceRight(function(t,e,n,i){return e+=t,i[n]=e%10,Math.floor(e/10)},0);h&&(r.unshift(h),t.i++)})(o=function(t){var e,n,i,r,o,s=0;for(-1<(n=t.indexOf(Sr))&&(t=t.replace(Sr,"")),0<(i=t.search(/e/i))?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;t.charAt(i)===$r;i++);if(i===(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)===$r;)o--;for(n-=i,e=[],r=0;i<=o;i++,r++)e[r]=+t.charAt(i)}return Cr<n&&(e=e.splice(0,Cr-1),s=n-1,n=1),{d:e,e:s,i:n}}(u),r,e.minFrac,e.maxFrac);for(var c=o.d,h=o.i,f=o.e,p=[],a=c.reduce(function(t,e){return t&&!e},!0);h<0;)c.unshift(0),h++;0<h?p=c.splice(h,c.length):(p=c,c=[0]);var d=[];for(c.length>=e.lgSize&&d.unshift(c.splice(-e.lgSize,c.length).join(""));c.length>e.gSize;)d.unshift(c.splice(-e.gSize,c.length).join(""));c.length&&d.unshift(c.join("")),l=d.join(n),p.length&&(l+=i+p.join("")),f&&(l+="e+"+f)}return t<0&&!a?e.negPre+l+e.negSuf:e.posPre+l+e.posSuf}function br(t,e,n,i){var r="";for((t<0||i&&t<=0)&&(i?t=1-t:(t=-t,r="-")),t=""+t;t.length<e;)t=$r+t;return n&&(t=t.substr(t.length-e)),r+t}function Ir(n,i,r,o,s){return r=r||0,function(t){var e=t["get"+n]();return(0<r||-r<e)&&(e+=r),0===e&&-12===r&&(e=12),br(e,i,o,s)}}function Ar(i,r,o){return function(t,e){var n=t["get"+i]();return e[f((o?"STANDALONE":"")+(r?"SHORT":"")+i)][n]}}function Or(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function Pr(r){return function(t){var e,n=Or(t.getFullYear()),i=(e=t,new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay())))-n;return br(1+Math.round(i/6048e5),r)}}function Lr(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}Tr.$inject=["$locale"];var Mr={yyyy:Ir("FullYear",4,0,!(Rr.$inject=["$locale"]),!0),yy:Ir("FullYear",2,0,!0,!0),y:Ir("FullYear",1,0,!1,!0),MMMM:Ar("Month"),MMM:Ar("Month",!0),MM:Ir("Month",2,1),M:Ir("Month",1,1),LLLL:Ar("Month",!1,!0),dd:Ir("Date",2),d:Ir("Date",1),HH:Ir("Hours",2),H:Ir("Hours",1),hh:Ir("Hours",2,-12),h:Ir("Hours",1,-12),mm:Ir("Minutes",2),m:Ir("Minutes",1),ss:Ir("Seconds",2),s:Ir("Seconds",1),sss:Ir("Milliseconds",3),EEEE:Ar("Day"),EEE:Ar("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var i=-1*n,r=0<=i?"+":"";return r+=br(Math[0<i?"floor":"ceil"](i/60),2)+br(Math.abs(i%60),2)},ww:Pr(2),w:Pr(1),G:Lr,GG:Lr,GGG:Lr,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Dr=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Fr=/^-?\d+$/;function kr(u){var h=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(e,t,n){var i,r,o="",s=[];if(t=t||"mediumDate",t=u.DATETIME_FORMATS[t]||t,bt(e)&&(e=(Fr.test(e)?C:function(t){var e;if(e=t.match(h)){var n=new Date(0),i=0,r=0,o=e[8]?n.setUTCFullYear:n.setFullYear,s=e[8]?n.setUTCHours:n.setHours;e[9]&&(i=C(e[9]+e[10]),r=C(e[9]+e[11])),o.call(n,C(e[1]),C(e[2])-1,C(e[3]));var a=C(e[4]||0)-i,u=C(e[5]||0)-r,l=C(e[6]||0),c=Math.round(1e3*parseFloat("0."+(e[7]||0)));return s.call(n,a,u,l,c),n}return t})(e)),R(e)&&(e=new Date(e)),!w(e)||!isFinite(e.getTime()))return e;for(;t;)t=(r=Dr.exec(t))?(s=B(s,r,1)).pop():(s.push(t),null);var a=e.getTimezoneOffset();return n&&(a=z(n,a),e=K(e,n,!0)),xt(s,function(t){i=Mr[t],o+=i?i(e,u.DATETIME_FORMATS,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),o}}function Nr(){return function(t,e){return Rt(e)&&(e=2),H(t,e)}}kr.$inject=["$locale"];var Ur=A($),Gr=A(f);function jr(){return function(t,e,n){return e=(Math.abs(Number(e))===1/0?Number:C)(e),I(e)?t:(R(t)&&(t=t.toString()),D(t)?(n=(n=!n||isNaN(n)?0:C(n))<0?Math.max(0,t.length+n):n,0<=e?Vr(t,n,n+e):0===n?Vr(t,e,t.length):Vr(t,Math.max(0,n+e),n)):t)}}function Vr(t,e,n){return bt(t)?t.slice(e,n):s.call(t,e,n)}function Br(u){return function(t,e,n,i){if(null==t)return t;if(!D(t))throw b("orderBy")("notarray","Expected array but received: {0}",t);It(e)||(e=[e]),0===e.length&&(e=["+"]);var o=e.map(function(t){var e,n=1,i=Tt;return Ot(t)?i=t:bt(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(i=u(t)).constant&&(e=i(),i=function(t){return t[e]})),{get:i,descending:n}}),s=n?-1:1,a=Ot(i)?i:c,r=Array.prototype.map.call(t,function(e,n){return{value:e,tieBreaker:{value:n,type:"number",index:n},predicateValues:o.map(function(t){return function(t,e){var n=typeof t;null===t?n="null":"object"===n&&(t=function(t){if(Ot(t.valueOf)&&l(t=t.valueOf()))return t;if(S(t)&&l(t=t.toString()))return t;return t}(t));return{value:t,type:n,index:e}}(t.get(e),n)})}});return r.sort(function(t,e){for(var n=0,i=o.length;n<i;n++){var r=a(t.predicateValues[n],e.predicateValues[n]);if(r)return r*o[n].descending*s}return(a(t.tieBreaker,e.tieBreaker)||c(t.tieBreaker,e.tieBreaker))*s}),t=r.map(function(t){return t.value})};function l(t){switch(typeof t){case"number":case"boolean":case"string":return 1;default:return}}function c(t,e){var n,i,r=0,o=t.type,s=e.type;return o===s?(n=t.value,i=e.value,"string"===o?(n=n.toLowerCase(),i=i.toLowerCase()):"object"===o&&(wt(n)&&(n=t.index),wt(i)&&(i=e.index)),n!==i&&(r=n<i?-1:1)):r="undefined"!==o&&("undefined"===s||"null"!==o&&("null"===s||o<s))?-1:1,r}}function Wr(t){return Ot(t)&&(t={link:t}),t.restrict=t.restrict||"AC",A(t)}Br.$inject=["$parse"];var Hr=A({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){var n;"a"===e[0].nodeName.toLowerCase()&&(n="[object SVGAnimatedString]"===y.call(e.prop("href"))?"xlink:href":"href",e.on("click",function(t){e.attr(n)||t.preventDefault()}))}}}),qr={};xt(Oe,function(t,i){var r,e;function o(t,e,n){t.$watch(n[r],function(t){n.$set(i,!!t)})}"multiple"!==t&&(r=Sn("ng-"+i),e="checked"===t?function(t,e,n){n.ngModel!==n[r]&&o(t,0,n)}:o,qr[r]=function(){return{restrict:"A",priority:100,link:e}})}),xt(Le,function(t,r){qr[r]=function(){return{priority:100,link:function(t,e,n){if("ngPattern"===r&&"/"===n.ngPattern.charAt(0)){var i=n.ngPattern.match(o);if(i)return void n.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(n[r],function(t){n.$set(r,t)})}}}}),xt(["src","srcset","href"],function(s){var a=Sn("ng-"+s);qr[a]=["$sce",function(o){return{priority:99,link:function(t,e,n){var i=s,r=s;"href"===s&&"[object SVGAnimatedString]"===y.call(e.prop("href"))&&(r="xlinkHref",n.$attr[r]="xlink:href",i=null),n.$set(a,o.getTrustedMediaUrl(n[a])),n.$observe(a,function(t){t?(n.$set(r,t),yt&&i&&e.prop(i,n[r])):"href"===s&&n.$set(r,null)})}}}]});var Xr={$addControl:$t,$getControls:A([]),$$renameControl:function(t,e){t.$name=e},$removeControl:$t,$setValidity:$t,$setDirty:$t,$setPristine:$t,$setSubmitted:$t,$$setSubmitted:$t},zr="ng-pending",Yr="ng-submitted";function Kr(t,e,n,i,r){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=r(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Xr,this.$$element=t,this.$$animate=i,to(this)}Kr.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Kr.prototype={$rollbackViewValue:function(){xt(this.$$controls,function(t){t.$rollbackViewValue()})},$commitViewValue:function(){xt(this.$$controls,function(t){t.$commitViewValue()})},$addControl:function(t){ct(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$getControls:function(){return dt(this.$$controls)},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],(this[e]=t).$name=e},$removeControl:function(n){n.$name&&this[n.$name]===n&&delete this[n.$name],xt(this.$pending,function(t,e){this.$setValidity(e,null,n)},this),xt(this.$error,function(t,e){this.$setValidity(e,null,n)},this),xt(this.$$success,function(t,e){this.$setValidity(e,null,n)},this),Ft(this.$$controls,n),n.$$parentForm=Xr},$setDirty:function(){this.$$animate.removeClass(this.$$element,Zo),this.$$animate.addClass(this.$$element,Jo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Zo,Jo+" "+Yr),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,xt(this.$$controls,function(t){t.$setPristine()})},$setUntouched:function(){xt(this.$$controls,function(t){t.$setUntouched()})},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==Xr;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,Yr),this.$submitted=!0,xt(this.$$controls,function(t){t.$$setSubmitted&&t.$$setSubmitted()})}},eo({clazz:Kr,set:function(t,e,n){var i=t[e];i?-1===i.indexOf(n)&&i.push(n):t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(Ft(i,n),0===i.length&&delete t[e])}});function Zr(n){return["$timeout","$parse",function(u,e){return{name:"form",restrict:n?"EAC":"E",require:["form","^^?form"],controller:Kr,compile:function(t,e){t.addClass(Zo).addClass(Yo);var a=e.name?"name":!(!n||!e.ngForm)&&"ngForm";return{pre:function(e,t,n,i){var r,o=i[0];"action"in n||(r=function(t){e.$apply(function(){o.$commitViewValue(),o.$setSubmitted()}),t.preventDefault()},t[0].addEventListener("submit",r),t.on("$destroy",function(){u(function(){t[0].removeEventListener("submit",r)},0,!1)})),(i[1]||o.$$parentForm).$addControl(o);var s=a?l(o.$name):$t;a&&(s(e,o),n.$observe(a,function(t){o.$name!==t&&(s(e,void 0),o.$$parentForm.$$renameControl(o,t),(s=l(o.$name))(e,o))})),t.on("$destroy",function(){o.$$parentForm.$removeControl(o),s(e,void 0),Ct(o,Xr)})}}}};function l(t){return""===t?e('this[""]').assign:e(t).assign||$t}}]}var Jr=Zr(),Qr=Zr(!0);function to(t){t.$$classCache={},t.$$classCache[Ko]=!(t.$$classCache[Yo]=t.$$element.hasClass(Yo))}function eo(t){var e=t.clazz,r=t.set,o=t.unset;function s(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function a(t,e,n){e=e?"-"+Vt(e,"-"):"",s(t,Yo+e,!0===n),s(t,Ko+e,!1===n)}e.prototype.$setValidity=function(t,e,n){var i;(Rt(e)?function(t,e,n,i){t[e]||(t[e]={});r(t[e],n,i)}:function(t,e,n,i){t[e]&&o(t[e],n,i);no(t[e])&&(t[e]=void 0)})(this,"$pending",t,n),Lt(e)?e?(o(this.$error,t,n),r(this.$$success,t,n)):(r(this.$error,t,n),o(this.$$success,t,n)):(o(this.$error,t,n),o(this.$$success,t,n)),this.$pending?(s(this,zr,!0),this.$valid=this.$invalid=void 0,a(this,"",null)):(s(this,zr,!1),this.$valid=no(this.$error),this.$invalid=!this.$valid,a(this,"",this.$valid)),a(this,t,i=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,i,this)}}function no(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var io=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ro=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,oo=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,so=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,ao=/^(\d{4,})-(\d{2})-(\d{2})$/,uo=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,lo=/^(\d{4,})-W(\d\d)$/,co=/^(\d{4,})-(\d\d)$/,ho=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,fo="keydown wheel mousedown",po=Wt();xt("date,datetime-local,month,time,week".split(","),function(t){po[t]=!0});var go={text:function(t,e,n,i,r,o){mo(0,e,n,i,r,o),vo(i)},date:_o("date",ao,yo(ao,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":_o("datetimelocal",uo,yo(uo,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:_o("time",ho,yo(ho,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:_o("week",lo,function(t,e){if(w(t))return t;if(bt(t)){lo.lastIndex=0;var n=lo.exec(t);if(n){var i=+n[1],r=+n[2],o=0,s=0,a=0,u=0,l=Or(i),c=7*(r-1);return e&&(o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),u=e.getMilliseconds()),new Date(i,0,l.getDate()+c,o,s,a,u)}}return NaN},"yyyy-Www"),month:_o("month",co,yo(co,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,i,r,o,s,a){var u;{var l;Eo(0,e,0,i,"number"),xo(i),mo(0,e,n,i,r,o),(O(n.min)||n.ngMin)&&(l=n.min||a(n.ngMin)(t),u=Co(l),i.$validators.min=function(t,e){return i.$isEmpty(e)||Rt(u)||u<=e},n.$observe("min",function(t){t!==l&&(u=Co(t),l=t,i.$validate())}))}{var c,h;(O(n.max)||n.ngMax)&&(c=n.max||a(n.ngMax)(t),h=Co(c),i.$validators.max=function(t,e){return i.$isEmpty(e)||Rt(h)||e<=h},n.$observe("max",function(t){t!==c&&(h=Co(t),c=t,i.$validate())}))}{var f,p;(O(n.step)||n.ngStep)&&(f=n.step||a(n.ngStep)(t),p=Co(f),i.$validators.step=function(t,e){return i.$isEmpty(e)||Rt(p)||To(e,u||0,p)},n.$observe("step",function(t){t!==f&&(p=Co(t),f=t,i.$validate())}))}},url:function(t,e,n,i,r,o){mo(0,e,n,i,r,o),vo(i),i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||ro.test(n)}},email:function(t,e,n,i,r,o){mo(0,e,n,i,r,o),vo(i),i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||oo.test(n)}},radio:function(t,n,i,r){var o=!i.ngTrim||"false"!==Mt(i.ngTrim);Rt(i.name)&&n.attr("name",u());n.on("change",function(t){var e;n[0].checked&&(e=i.value,o&&(e=Mt(e)),r.$setViewValue(e,t&&t.type))}),r.$render=function(){var t=i.value;o&&(t=Mt(t)),n[0].checked=t===r.$viewValue},i.$observe("value",r.$render)},range:function(t,i,r,n,e,o){Eo(0,i,0,n,"range"),xo(n),mo(0,i,r,n,e,o);var s=n.$$hasNativeValidators&&"range"===i[0].type,a=s?0:void 0,u=s?100:void 0,l=s?1:void 0,c=i[0].validity,h=O(r.min),f=O(r.max),p=O(r.step),d=n.$render;n.$render=s&&O(c.rangeUnderflow)&&O(c.rangeOverflow)?function(){d(),n.$setViewValue(i.val())}:d,h&&(a=Co(r.min),n.$validators.min=s?function(){return!0}:function(t,e){return n.$isEmpty(e)||Rt(a)||a<=e},g("min",function(t){if(a=Co(t),I(n.$modelValue))return;{var e;s?((e=i.val())<a&&(e=a,i.val(e)),n.$setViewValue(e)):n.$validate()}}));f&&(u=Co(r.max),n.$validators.max=s?function(){return!0}:function(t,e){return n.$isEmpty(e)||Rt(u)||e<=u},g("max",function(t){if(u=Co(t),I(n.$modelValue))return;{var e;s?(e=i.val(),u<e&&(i.val(u),e=u<a?a:u),n.$setViewValue(e)):n.$validate()}}));p&&(l=Co(r.step),n.$validators.step=s?function(){return!c.stepMismatch}:function(t,e){return n.$isEmpty(e)||Rt(l)||To(e,a||0,l)},g("step",function(t){if(l=Co(t),I(n.$modelValue))return;s?n.$viewValue!==i.val()&&n.$setViewValue(i.val()):n.$validate()}));function g(t,e){i.attr(t,r[t]);var n=r[t];r.$observe(t,function(t){t!==n&&e(n=t)})}},checkbox:function(t,e,n,i,r,o,s,a){var u=Ro(a,t,"ngTrueValue",n.ngTrueValue,!0),l=Ro(a,t,"ngFalseValue",n.ngFalseValue,!1);e.on("change",function(t){i.$setViewValue(e[0].checked,t&&t.type)}),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return!1===t},i.$formatters.push(function(t){return Nt(t,u)}),i.$parsers.push(function(t){return t?u:l})},hidden:$t,button:$t,submit:$t,reset:$t,file:$t};function vo(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function mo(t,i,r,o,e,s){var a,u,l=$(i[0].type);e.android||(a=!1,i.on("compositionstart",function(){a=!0}),i.on("compositionupdate",function(t){!Rt(t.data)&&""!==t.data||(a=!1)}),i.on("compositionend",function(){a=!1,c()}));var n,c=function(t){var e,n;u&&(s.defer.cancel(u),u=null),a||(e=i.val(),n=t&&t.type,"password"===l||r.ngTrim&&"false"===r.ngTrim||(e=Mt(e)),(o.$viewValue!==e||""===e&&o.$$hasNativeValidators)&&o.$setViewValue(e,n))};e.hasEvent("input")?i.on("input",c):(n=function(t,e,n){u=u||s.defer(function(){u=null,e&&e.value===n||c(t)})},i.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||n(t,this,this.value)}),e.hasEvent("paste")&&i.on("paste cut drop",n)),i.on("change",c),po[l]&&o.$$hasNativeValidators&&l===r.type&&i.on(fo,function(t){var e,n,i;u||(e=this[h],n=e.badInput,i=e.typeMismatch,u=s.defer(function(){u=null,e.badInput===n&&e.typeMismatch===i||c(t)}))}),o.$render=function(){var t=o.$isEmpty(o.$viewValue)?"":o.$viewValue;i.val()!==t&&i.val(t)}}function yo(o,s){return function(t,e){var n,i;if(w(t))return t;if(bt(t)){if('"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substring(1,t.length-1)),io.test(t))return new Date(t);if(o.lastIndex=0,n=o.exec(t)){n.shift(),i=e?{yyyy:e.getFullYear(),MM:e.getMonth()+1,dd:e.getDate(),HH:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds(),sss:e.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},xt(n,function(t,e){e<s.length&&(i[s[e]]=+t)});var r=new Date(i.yyyy,i.MM-1,i.dd,i.HH,i.mm,i.ss||0,1e3*i.sss||0);return i.yyyy<100&&r.setFullYear(i.yyyy),r}}return NaN}}function _o(y,_,E,x){return function(t,e,n,r,i,o,s,a){Eo(0,e,0,r,y),mo(0,e,n,r,i,o);var u,l,c,h,f,p,d="time"===y||"datetimelocal"===y;function g(t){return t&&(!t.getTime||t.getTime()===t.getTime())}function v(t){return O(t)&&!w(t)?m(t)||void 0:t}function m(t,e){var n=r.$options.getOption("timezone");l&&l!==n&&(e=Y(e,z(l)));var i=E(t,e);return!isNaN(i)&&n&&(i=K(i,n)),i}r.$parsers.push(function(t){return r.$isEmpty(t)?null:_.test(t)?m(t,u):void(r.$$parserName=y)}),r.$formatters.push(function(t){if(t&&!w(t))throw ns("datefmt","Expected `{0}` to be a date",t);if(g(t)){u=t;var e=r.$options.getOption("timezone");return e&&(u=K(u,l=e,!0)),function(t,e){var n=x;d&&bt(r.$options.getOption("timeSecondsFormat"))&&(n=x.replace("ss.sss",r.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var i=s("date")(t,n,e);d&&r.$options.getOption("timeStripZeroSeconds")&&(i=i.replace(/(?::00)?(?:\.000)?$/,""));return i}(t,e)}return l=u=null,""}),(O(n.min)||n.ngMin)&&(c=n.min||a(n.ngMin)(t),h=v(c),r.$validators.min=function(t){return!g(t)||Rt(h)||E(t)>=h},n.$observe("min",function(t){t!==c&&(h=v(t),c=t,r.$validate())})),(O(n.max)||n.ngMax)&&(f=n.max||a(n.ngMax)(t),p=v(f),r.$validators.max=function(t){return!g(t)||Rt(p)||E(t)<=p},n.$observe("max",function(t){t!==f&&(p=v(t),f=t,r.$validate())}))}}function Eo(t,n,e,i,r){var o=n[0];(i.$$hasNativeValidators=wt(o.validity))&&i.$parsers.push(function(t){var e=n.prop(h)||{};if(!e.badInput&&!e.typeMismatch)return t;i.$$parserName=r})}function xo(e){e.$parsers.push(function(t){return e.$isEmpty(t)?null:so.test(t)?parseFloat(t):void(e.$$parserName="number")}),e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!R(t))throw ns("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t})}function Co(t){return O(t)&&!R(t)&&(t=parseFloat(t)),I(t)?void 0:t}function So(t){return(0|t)===t}function $o(t){var e=t.toString(),n=e.indexOf(".");if(-1!==n)return e.length-n-1;if(-1<t&&t<1){var i=/e-(\d+)$/.exec(e);if(i)return Number(i[1])}return 0}function To(t,e,n){var i,r,o,s,a,u=Number(t),l=!So(u),c=!So(e),h=!So(n);return(l||c||h)&&(i=l?$o(u):0,r=c?$o(e):0,o=h?$o(n):0,s=Math.max(i,r,o),u*=a=Math.pow(10,s),e*=a,n*=a,l&&(u=Math.round(u)),c&&(e=Math.round(e)),h&&(n=Math.round(n))),(u-e)%n==0}function Ro(t,e,n,i,r){var o;if(O(i)){if(!(o=t(i)).constant)throw ns("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(e)}return r}function wo(){var o={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(t){this.setAttribute("value",t)}};return{restrict:"E",priority:200,compile:function(t,e){if("hidden"===$(e.type))return{pre:function(t,e,n,i){var r=e[0];r.parentNode&&r.parentNode.insertBefore(r,r.nextSibling),Object.defineProperty&&Object.defineProperty(r,"value",o)}}}}}function bo(){function i(t,e,n){var i=O(n)?n:9===yt?"":null;t.prop("value",i),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(t,e){return Ao.test(e.ngValue)?function(t,e,n){i(e,n,t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){i(e,n,t)})}}}}var Io=["$browser","$sniffer","$filter","$parse",function(r,o,s,a){return{restrict:"E",require:["?ngModel"],link:{pre:function(t,e,n,i){i[0]&&(go[$(n.type)]||go.text)(t,e,n,i[0],o,r,s,a)}}}}],Ao=/^(true|false|\d+)$/,Oo=["$compile",function(i){return{restrict:"AC",compile:function(t){return i.$$addBindingClass(t),function(t,e,n){i.$$addBindingInfo(e,n.ngBind),e=e[0],t.$watch(n.ngBind,function(t){e.textContent=ft(t)})}}}}],Po=["$interpolate","$compile",function(r,o){return{compile:function(t){return o.$$addBindingClass(t),function(t,e,n){var i=r(e.attr(n.$attr.ngBindTemplate));o.$$addBindingInfo(e,i.expressions),e=e[0],n.$observe("ngBindTemplate",function(t){e.textContent=Rt(t)?"":t})}}}}],Lo=["$sce","$parse","$compile",function(o,n,s){return{restrict:"A",compile:function(t,e){var i=n(e.ngBindHtml),r=n(e.ngBindHtml,function(t){return o.valueOf(t)});return s.$$addBindingClass(t),function(e,n,t){s.$$addBindingInfo(n,t.ngBindHtml),e.$watch(r,function(){var t=i(e);n.html(o.getTrustedHtml(t)||"")})}}}}],Mo=A({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function Do(s,a){var c;return s="ngClass"+s,["$parse",function(o){return{restrict:"AC",link:function(t,e,u){var n,i=e.data("$classCounts"),r=!0;function l(t,e){var n=[];return xt(t,function(t){(0<e||i[t])&&(i[t]=(i[t]||0)+e,i[t]===+(0<e)&&n.push(t))}),n.join(" ")}i||(i=Wt(),e.data("$classCounts",i)),"ngClass"!==s&&(c=c||o("$index",function(t){return 1&t}),t.$watch(c,function(t){(t===a?function(t){t=l(f(t),1),u.$addClass(t)}:function(t){t=l(f(t),-1),u.$removeClass(t)})(n);r=t})),t.$watch(o(u[s],p),function(t){r===a&&function(t,e){var n=f(t),i=f(e),r=h(n,i),o=h(i,n),s=l(r,-1),a=l(o,1);u.$addClass(a),u.$removeClass(s)}(n,t);n=t})}}}];function h(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var i=0;i<t.length;i++){for(var r=t[i],o=0;o<e.length;o++)if(r===e[o])continue t;n.push(r)}return n}function f(t){return t&&t.split(" ")}function p(e){if(!e)return e;var t=e;return It(e)?t=e.map(p).join(" "):wt(e)?t=Object.keys(e).filter(function(t){return e[t]}).join(" "):bt(e)||(t=e+""),t}}var Fo=Do("",!0),ko=Do("Odd",0),No=Do("Even",1),Uo=Wr({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Go=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],jo={},Vo={blur:!0,focus:!0};function Bo(n,r,o,s,a,u){return{restrict:"A",compile:function(t,e){var i=n(e[s]);return function(n,t){t.on(a,function(t){function e(){i(n,{$event:t})}if(r.$$phase)if(u)n.$evalAsync(e);else try{e()}catch(t){o(t)}else n.$apply(e)})}}}}xt("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(i){var r=Sn("ng-"+i);jo[r]=["$parse","$rootScope","$exceptionHandler",function(t,e,n){return Bo(t,e,n,r,i,Vo[i])}]});function Wo(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,i){var r=n.ngList||", ",o="false"!==n.ngTrim,s=o?Mt(r):r;i.$parsers.push(function(t){if(!Rt(t)){var e=[];return t&&xt(t.split(s),function(t){t&&e.push(o?Mt(t):t)}),e}}),i.$formatters.push(function(t){if(It(t))return t.join(r)}),i.$isEmpty=function(t){return!t||!t.length}}}}var Ho=["$animate","$compile",function(u,l){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(t,n,i,e,r){var o,s,a;t.$watch(i.ngIf,function(t){t?s||r(function(t,e){s=e,t[t.length++]=l.$$createComment("end ngIf",i.ngIf),o={clone:t},u.enter(t,n.parent(),n)}):(a&&(a.remove(),a=null),s&&(s.$destroy(),s=null),o&&(a=ht(o.clone),u.leave(a).done(function(t){!1!==t&&(a=null)}),o=null))})}}}],qo=["$templateRequest","$anchorScroll","$animate",function(v,m,y){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:_.noop,compile:function(t,e){var n=e.ngInclude||e.src,d=e.onload||"",g=e.autoscroll;return function(s,a,t,u,l){function c(){e&&(e.remove(),e=null),h&&(h.$destroy(),h=null),f&&(y.leave(f).done(function(t){!1!==t&&(e=null)}),e=f,f=null)}var h,e,f,p=0;s.$watch(n,function(i){function r(t){!1===t||!O(g)||g&&!s.$eval(g)||m()}var o=++p;i?(v(i,!0).then(function(t){var e,n;s.$$destroyed||o===p&&(e=s.$new(),u.template=t,n=l(e,function(t){c(),y.enter(t,null,a).done(r)}),f=n,(h=e).$emit("$includeContentLoaded",i),s.$eval(d))},function(){s.$$destroyed||o===p&&(c(),s.$emit("$includeContentError",i))}),s.$emit("$includeContentRequested",i)):(c(),u.template=null)})}}}}],Xo=["$compile",function(r){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(t,e,n,i){if(y.call(e[0]).match(/SVG/))return e.empty(),void r(ce(i.template,mt.document).childNodes)(t,function(t){e.append(t)},{futureParentElement:e});e.html(i.template),r(e.contents())(t)}}}],zo=Wr({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Yo="ng-valid",Ko="ng-invalid",Zo="ng-pristine",Jo="ng-dirty",Qo="ng-untouched",ts="ng-touched",es="ng-not-empty",ns=b("ngModel");function is(t,e,n,i,r,o,s,a,u){var l;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=u(n.name||"",!1)(t),this.$$parentForm=Xr,this.$options=rs,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=r(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$rootScope=t.$root,this.$$attr=n,this.$$element=i,this.$$animate=o,this.$$timeout=s,this.$$parse=r,this.$$q=a,this.$$exceptionHandler=e,to(this),(l=this).$$scope.$watch(function(t){var e=l.$$ngModelGet(t);return e===l.$modelValue||l.$modelValue!=l.$modelValue&&e!=e||l.$$setModelValue(e),e})}is.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],is.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var n=this.$$parse(this.$$attr.ngModel+"()"),i=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var e=this.$$parsedNgModel(t);return Ot(e)&&(e=n(t)),e},this.$$ngModelSet=function(t,e){Ot(this.$$parsedNgModel(t))?i(t,{$$$p:e}):this.$$parsedNgModelAssign(t,e)}}else if(!this.$$parsedNgModel.assign)throw ns("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,jt(this.$$element))},$render:$t,$isEmpty:function(t){return Rt(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,es),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,es))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Jo),this.$$animate.addClass(this.$$element,Zo)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Zo),this.$$animate.addClass(this.$$element,Jo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Qo,ts)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,ts,Qo)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){var t,e,n,i,r,o;I(this.$modelValue)||(t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,i=this.$modelValue,r=this.$options.getOption("allowInvalid"),(o=this).$$runValidators(e,t,function(t){r||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==i&&o.$$writeModelToScope())}))},$$runValidators:function(i,r,e){this.$$currentValidationRunId++;var o,s,a,n=this.$$currentValidationRunId,u=this;function l(t,e){n===u.$$currentValidationRunId&&u.$setValidity(t,e)}function t(t){n===u.$$currentValidationRunId&&e(t)}!function(){var t=u.$$parserName;{if(!Rt(u.$$parserValid))return u.$$parserValid||(xt(u.$validators,function(t,e){l(e,null)}),xt(u.$asyncValidators,function(t,e){l(e,null)})),l(t,u.$$parserValid),u.$$parserValid;l(t,null)}return!0}()?t(!1):(o=!0,xt(u.$validators,function(t,e){var n=Boolean(t(i,r));o=o&&n,l(e,n)}),o||(xt(u.$asyncValidators,function(t,e){l(e,null)}),0)?(s=[],a=!0,xt(u.$asyncValidators,function(t,e){var n=t(i,r);if(!M(n))throw ns("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",n);l(e,void 0),s.push(n.then(function(){l(e,!0)},function(){l(e,a=!1)}))}),s.length?u.$$q.all(s).then(function(){t(a)},$t):t(!0)):t(!1))},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var e=this.$$lastCommittedViewValue,n=this;if(this.$$parserValid=!Rt(e)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var t=0;t<this.$parsers.length;t++)if(Rt(e=this.$parsers[t](e))){this.$$parserValid=!1;break}I(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var i=this.$modelValue,r=this.$options.getOption("allowInvalid");function o(){n.$modelValue!==i&&n.$$writeModelToScope()}this.$$rawModelValue=e,r&&(this.$modelValue=e,o()),this.$$runValidators(e,this.$$lastCommittedViewValue,function(t){r||(n.$modelValue=t?e:void 0,o())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),xt(this.$viewChangeListeners,function(t){try{t()}catch(t){this.$$exceptionHandler(t)}},this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");R(e[t])?e=e[t]:R(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:R(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;0<e?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},e):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,$t))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},eo({clazz:is,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var rs,os=["$rootScope",function(s){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:is,priority:1,compile:function(t){return t.addClass(Zo).addClass(Qo).addClass(Yo),{pre:function(t,e,n,i){var r=i[0],o=i[1]||r.$$parentForm,s=i[2];s&&(r.$options=s.$options),r.$$initGetterSetters(),o.$addControl(r),n.$observe("name",function(t){r.$name!==t&&r.$$parentForm.$$renameControl(r,t)}),t.$on("$destroy",function(){r.$$parentForm.$removeControl(r)})},post:function(t,e,n,i){var r=i[0];function o(){r.$setTouched()}r.$$setUpdateOnEvents(),e.on("blur",function(){r.$touched||(s.$$phase?t.$evalAsync(o):t.$apply(o))})}}}}}],ss=/(\s+|^)default(\s+|$)/;function as(t){this.$$options=t}as.prototype={getOption:function(t){return this.$$options[t]},createChild:function(n){var i=!1;return xt(n=Ct({},n),function(t,e){"$inherit"===t?"*"===e?i=!0:(n[e]=this.$$options[e],"updateOn"===e&&(n.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===e&&(n.updateOnDefault=!1,n[e]=Mt(t.replace(ss,function(){return n.updateOnDefault=!0," "})))},this),i&&(delete n["*"],ls(n,this.$$options)),ls(n,rs.$$options),new as(n)}},rs=new as({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});function us(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:rs,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}}function ls(n,t){xt(t,function(t,e){O(n[e])||(n[e]=t)})}var cs=Wr({terminal:!0,priority:1e3}),hs=b("ngOptions"),fs=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ps=["$compile","$document","$parse",function(v,m,u){function y(t,e,h){var f=t.match(fs);if(!f)throw hs("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,jt(e));function p(t,e){return v(t,x(t,e))}var n=f[5]||f[7],i=f[6],r=/ as /.test(f[0])&&f[1],d=f[9],o=u(f[2]?f[1]:n),g=r&&u(r)||o,s=d&&u(d),v=d?function(t,e){return s(h,e)}:function(t){return Ge(t)},m=u(f[2]||f[1]),y=u(f[3]||""),_=u(f[4]||""),E=u(f[8]),a={},x=i?function(t,e){return a[i]=e,a[n]=t,a}:function(t){return a[n]=t,a};function C(t,e,n,i,r){this.selectValue=t,this.viewValue=e,this.label=n,this.group=i,this.disabled=r}function S(t){var e;if(!i&&D(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:d,getTrackByValue:p,getWatchables:u(E,function(t){for(var e=[],n=S(t=t||[]),i=n.length,r=0;r<i;r++){var o,s,a=t===n?r:n[r],u=t[a],l=x(u,a),c=v(u,l);e.push(c),(f[2]||f[1])&&(o=m(h,l),e.push(o)),f[4]&&(s=_(h,l),e.push(s))}return e}),getOptions:function(){for(var t=[],e={},n=E(h)||[],i=S(n),r=i.length,o=0;o<r;o++){var s=n===i?o:i[o],a=x(n[s],s),u=g(h,a),l=v(u,a),c=new C(l,u,m(h,a),y(h,a),_(h,a));t.push(c),e[l]=c}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[p(t)]},getViewValueFromOption:function(t){return d?G(t.viewValue):t.viewValue}}}}}var _=mt.document.createElement("option"),E=mt.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,i){i[0].registerOption=$t},post:function(t,o,e,n){for(var s=n[0],a=n[1],u=e.multiple,i=0,r=o.children(),l=r.length;i<l;i++)if(""===r[i].value){s.hasEmptyOption=!0,s.emptyOption=r.eq(i);break}o.empty();var c,h=!!s.emptyOption;_t(_.cloneNode(!1)).val("?");var f=y(e.ngOptions,o,t),p=m[0].createDocumentFragment();function d(t,e){var n=_.cloneNode(!1);e.appendChild(n),function(t,e){(t.element=e).disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label);e.value=t.selectValue}(t,n)}function g(t){var e=c.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}s.generateUnknownOptionValue=function(t){return"?"},u?(s.writeValue=function(t){var e;c&&(e=t&&t.map(g)||[],c.items.forEach(function(t){t.element.selected&&!U(e,t)&&(t.element.selected=!1)}))},s.readValue=function(){var t=o.val()||[],n=[];return xt(t,function(t){var e=c.selectValueMap[t];e&&!e.disabled&&n.push(c.getViewValueFromOption(e))}),n},f.trackBy&&t.$watchCollection(function(){if(It(a.$viewValue))return a.$viewValue.map(function(t){return f.getTrackByValue(t)})},function(){a.$render()})):(s.writeValue=function(t){var e,n;c&&(e=o[0].options[o[0].selectedIndex],n=c.getOptionFromViewValue(t),e&&e.removeAttribute("selected"),n?(o[0].value!==n.selectValue&&(s.removeUnknownOption(),o[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):s.selectUnknownOrEmptyOption(t))},s.readValue=function(){var t=c.selectValueMap[o.val()];return t&&!t.disabled?(s.unselectEmptyOption(),s.removeUnknownOption(),c.getViewValueFromOption(t)):null},f.trackBy&&t.$watch(function(){return f.getTrackByValue(a.$viewValue)},function(){a.$render()})),h&&(v(s.emptyOption)(t),o.prepend(s.emptyOption),s.emptyOption[0].nodeType===Xt?(s.hasEmptyOption=!1,s.registerOption=function(t,e){""===e.val()&&(s.hasEmptyOption=!0,s.emptyOption=e,s.emptyOption.removeClass("ng-scope"),a.$render(),e.on("$destroy",function(){var t=s.$isEmptyOptionSelected();s.hasEmptyOption=!1,s.emptyOption=void 0,t&&a.$render()}))}):s.emptyOption.removeClass("ng-scope")),t.$watchCollection(f.getWatchables,function(){var t=c&&s.readValue();if(c)for(var e=c.items.length-1;0<=e;e--){var n=c.items[e];O(n.group)?be(n.element.parentNode):be(n.element)}c=f.getOptions();var i={};{var r;c.items.forEach(function(t){var e;O(t.group)?((e=i[t.group])||(e=E.cloneNode(!1),p.appendChild(e),e.label=null===t.group?"null":t.group,i[t.group]=e),d(t,e)):d(t,p)}),o[0].appendChild(p),a.$render(),a.$isEmpty(t)||(r=s.readValue(),(f.trackBy||u?Nt(t,r):t===r)||(a.$setViewValue(r),a.$render()))}})}}}}],ds=["$locale","$interpolate","$log",function(d,g,v){var m=/{}/g,y=/^when(Minus)?(.+)$/;return{link:function(r,o,s){var a,t=s.count,u=s.$attr.when&&o.attr(s.$attr.when),l=s.offset||0,c=r.$eval(u)||{},h={},e=g.startSymbol(),n=g.endSymbol(),i=e+t+"-"+l+n,f=_.noop;function p(t){o.text(t||"")}xt(s,function(t,e){var n,i=y.exec(e);i&&(n=(i[1]?"-":"")+$(i[2]),c[n]=o.attr(s.$attr[e]))}),xt(c,function(t,e){h[e]=g(t.replace(m,i))}),r.$watch(t,function(t){var e,n=parseFloat(t),i=I(n);i||n in c||(n=d.pluralCat(n-l)),n===a||i&&I(a)||(f(),Rt(e=h[n])?(null!=t&&v.debug("ngPluralize: no rule defined for '"+n+"' in "+u),f=$t,p()):f=r.$watch(e,p),a=n)})}}}],gs=b("ngRef"),vs=["$parse",function(e){return{priority:-1,restrict:"A",compile:function(t,r){var o=Sn(Dt(t)),s=e(r.ngRef),a=s.assign||function(){throw gs("nonassign",'Expression in ngRef="{0}" is non-assignable!',r.ngRef)};return function(t,e,n){var i;if(n.hasOwnProperty("ngRefRead")){if("$element"===n.ngRefRead)i=e;else if(!(i=e.data("$"+n.ngRefRead+"Controller")))throw gs("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',n.ngRefRead,r.ngRef)}else i=e.data("$"+o+"Controller");a(t,i=i||e),e.on("$destroy",function(){s(t)===i&&a(t,null)})}}}}],ms=["$parse","$animate","$compile",function(a,I,u){function A(t,e,n,i,r,o,s){t[n]=i,r&&(t[r]=o),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))}function O(t,e,n){return Ge(n)}function P(t,e){return e}var L="$$NG_REMOVED",M=b("ngRepeat");return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(t,e){var C=e.ngRepeat,S=u.$$createComment("end ngRepeat",C),n=C.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!n)throw M("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",C);var i=n[1],r=n[2],$=n[3],o=n[4];if(!(n=i.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw M("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",i);var T,s,R,w=n[3]||n[1],b=n[2];if($&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test($)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test($)))throw M("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",$);return o&&(T={$id:Ge},s=a(o),R=function(t,e,n,i){return b&&(T[b]=e),T[w]=n,T.$index=i,s(t,T)}),function(y,_,t,e,E){var x=Wt();y.$watchCollection(r,function(t){var i,e,n,r,o,s,a,u,l,c,h,f,p,d=_[0],g=Wt();if($&&(y[$]=t),D(t))l=t,u=R||O;else for(var v in u=R||P,l=[],t)Et.call(t,v)&&"$"!==v.charAt(0)&&l.push(v);for(r=l.length,h=new Array(r),i=0;i<r;i++)if(o=t===l?i:l[i],s=t[o],a=u(y,o,s,i),x[a])c=x[a],delete x[a],g[a]=c,h[i]=c;else{if(g[a])throw xt(h,function(t){t&&t.scope&&(x[t.id]=t)}),M("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",C,a,s);h[i]={id:a,scope:void 0,clone:void 0},g[a]=!0}for(var m in T&&(T[w]=void 0),x){if(f=ht((c=x[m]).clone),I.leave(f),f[0].parentNode)for(i=0,e=f.length;i<e;i++)f[i][L]=!0;c.scope.$destroy()}for(i=0;i<r;i++)if(o=t===l?i:l[i],s=t[o],(c=h[i]).scope){for(n=d;(n=n.nextSibling)&&n[L];);c.clone[0]!==n&&I.move(ht(c.clone),null,d),d=(p=c).clone[p.clone.length-1],A(c.scope,i,w,s,b,o,r)}else E(function(t,e){c.scope=e;var n=S.cloneNode(!1);t[t.length++]=n,I.enter(t,null,d),d=n,c.clone=t,g[c.id]=c,A(c.scope,i,w,s,b,o,r)});x=g})}}}}],ys="ng-hide-animate",_s=["$animate",function(i){return{restrict:"A",multiElement:!0,link:function(t,e,n){t.$watch(n.ngShow,function(t){i[t?"removeClass":"addClass"](e,"ng-hide",{tempClasses:ys})})}}}],Es=["$animate",function(i){return{restrict:"A",multiElement:!0,link:function(t,e,n){t.$watch(n.ngHide,function(t){i[t?"addClass":"removeClass"](e,"ng-hide",{tempClasses:ys})})}}}],xs=Wr(function(t,n,e){t.$watchCollection(e.ngStyle,function(t,e){e&&t!==e&&xt(e,function(t,e){n.css(e,"")}),t&&n.css(t)})}),Cs=["$animate","$compile",function(l,c){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(t,e,n,r){var o,i=n.ngSwitch||n.on,s=[],a=[],u=[];t.$watch(i,function(t){for(var e,n;a.length;)l.cancel(a.pop());for(e=0,n=u.length;e<n;++e){var i=ht(s[e].clone);u[e].$destroy(),(a[e]=l.leave(i)).done(function(e,n){return function(t){!1!==t&&e.splice(n,1)}}(a,e))}s.length=0,u.length=0,(o=r.cases["!"+t]||r.cases["?"])&&xt(o,function(r){r.transclude(function(t,e){u.push(e);var n=r.element;t[t.length++]=c.$$createComment("end ngSwitchWhen");var i={clone:t};s.push(i),l.enter(t,n.parent(),n)})})})}}}],Ss=Wr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){xt(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(t,e,n){return n[e-1]!==t}),function(t){i.cases["!"+t]=i.cases["!"+t]||[],i.cases["!"+t].push({transclude:r,element:e})})}}),$s=Wr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:e})}}),Ts=b("ngTransclude"),Rs=["$compile",function(e){return{restrict:"EAC",compile:function(t){var a=e(t.contents());return t.empty(),function(t,n,e,i,r){if(!r)throw Ts("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",jt(n));e.ngTransclude===e.$attr.ngTransclude&&(e.ngTransclude="");var o=e.ngTransclude||e.ngTranscludeSlot;function s(){a(t,function(t){n.append(t)})}r(function(t,e){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];if(i.nodeType!==qt||i.nodeValue.trim())return!0}}(t)?n.append(t):(s(),e.$destroy())},null,o),o&&!r.isSlotFilled(o)&&s()}}}}],ws=["$templateCache",function(r){return{restrict:"E",terminal:!0,compile:function(t,e){var n,i;"text/ng-template"===e.type&&(n=e.id,i=t[0].text,r.put(n,i))}}}],bs={$setViewValue:$t,$render:$t};function Is(t,e){t.prop("selected",e),t.attr("selected",e)}function As(){return{restrict:"E",require:["select","?ngModel"],controller:ks,priority:1,link:{pre:function(t,e,n,i){var r=i[0],o=i[1];if(!o)return void(r.registerOption=$t);{var s,a;r.ngModelCtrl=o,e.on("change",function(){r.removeUnknownOption(),t.$apply(function(){o.$setViewValue(r.readValue())})}),n.multiple&&(r.multiple=!0,r.readValue=function(){var n=[];return xt(e.find("option"),function(t){var e;t.selected&&!t.disabled&&(e=t.value,n.push(e in r.selectValueMap?r.selectValueMap[e]:e))}),n},r.writeValue=function(n){xt(e.find("option"),function(t){var e=!!n&&(U(n,t.value)||U(n,r.selectValueMap[t.value]));e!==t.selected&&Is(_t(t),e)})},a=NaN,t.$watch(function(){a!==o.$viewValue||Nt(s,o.$viewValue)||(s=dt(o.$viewValue),o.$render()),a=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length})}},post:function(t,e,n,i){var r=i[1];if(!r)return;var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}}}var Os,Ps,Ls,Ms,Ds,Fs,ks=["$element","$scope",function(r,e){var a=this,i=new Be;a.selectValueMap={},a.ngModelCtrl=bs,a.multiple=!1,a.unknownOption=_t(mt.document.createElement("option")),a.hasEmptyOption=!1,a.emptyOption=void 0,a.renderUnknownOption=function(t){var e=a.generateUnknownOptionValue(t);a.unknownOption.val(e),r.prepend(a.unknownOption),Is(a.unknownOption,!0),r.val(e)},a.updateUnknownOption=function(t){var e=a.generateUnknownOptionValue(t);a.unknownOption.val(e),Is(a.unknownOption,!0),r.val(e)},a.generateUnknownOptionValue=function(t){return"? "+Ge(t)+" ?"},a.removeUnknownOption=function(){a.unknownOption.parent()&&a.unknownOption.remove()},a.selectEmptyOption=function(){a.emptyOption&&(r.val(""),Is(a.emptyOption,!0))},a.unselectEmptyOption=function(){a.hasEmptyOption&&Is(a.emptyOption,!1)},e.$on("$destroy",function(){a.renderUnknownOption=$t}),a.readValue=function(){var t=r.val(),e=t in a.selectValueMap?a.selectValueMap[t]:t;return a.hasOption(e)?e:null},a.writeValue=function(t){var e,n,i=r[0].options[r[0].selectedIndex];i&&Is(_t(i),!1),a.hasOption(t)?(a.removeUnknownOption(),e=Ge(t),r.val(e in a.selectValueMap?e:t),n=r[0].options[r[0].selectedIndex],Is(_t(n),!0)):a.selectUnknownOrEmptyOption(t)},a.addOption=function(t,e){var n;e[0].nodeType!==Xt&&(ct(t,'"option value"'),""===t&&(a.hasEmptyOption=!0,a.emptyOption=e),n=i.get(t)||0,i.set(t,n+1),u())},a.removeOption=function(t){var e=i.get(t);e&&(1===e?(i.delete(t),""===t&&(a.hasEmptyOption=!1,a.emptyOption=void 0)):i.set(t,e-1))},a.hasOption=function(t){return!!i.get(t)},a.$hasEmptyOption=function(){return a.hasEmptyOption},a.$isUnknownOptionSelected=function(){return r[0].options[0]===a.unknownOption[0]},a.$isEmptyOptionSelected=function(){return a.hasEmptyOption&&r[0].options[r[0].selectedIndex]===a.emptyOption[0]};var t=!(a.selectUnknownOrEmptyOption=function(t){null==t&&a.emptyOption?(a.removeUnknownOption(),a.selectEmptyOption()):a.unknownOption.parent().length?a.updateUnknownOption(t):a.renderUnknownOption(t)});function u(){t||(t=!0,e.$$postDigest(function(){t=!1,a.ngModelCtrl.$render()}))}var n=!1;function l(t){n||(n=!0,e.$$postDigest(function(){e.$$destroyed||(n=!1,a.ngModelCtrl.$setViewValue(a.readValue()),t&&a.ngModelCtrl.$render())}))}a.registerOption=function(t,i,r,e,n){var o,s;r.$attr.ngValue?r.$observe("value",function(t){var e,n=i.prop("selected");O(s)&&(a.removeOption(o),delete a.selectValueMap[s],e=!0),s=Ge(t),o=t,a.selectValueMap[s]=t,a.addOption(t,i),i.attr("value",s),e&&n&&l()}):e?r.$observe("value",function(t){var e;a.readValue();var n=i.prop("selected");O(o)&&(a.removeOption(o),e=!0),o=t,a.addOption(t,i),e&&n&&l()}):n?t.$watch(n,function(t,e){r.$set("value",t);var n=i.prop("selected");e!==t&&a.removeOption(e),a.addOption(t,i),e&&n&&l()}):a.addOption(r.value,i),r.$observe("disabled",function(t){("true"===t||t&&i.prop("selected"))&&(a.multiple?l(!0):(a.ngModelCtrl.$setViewValue(null),a.ngModelCtrl.$render()))}),i.on("$destroy",function(){var t=a.readValue(),e=r.value;a.removeOption(e),u(),(a.multiple&&t&&-1!==t.indexOf(e)||t===e)&&l(!0)})}}],Ns=["$interpolate",function(n){return{restrict:"E",priority:100,compile:function(t,e){var s,a;return O(e.ngValue)||(O(e.value)?s=n(e.value,!0):(a=n(t.text(),!0))||e.$set("value",t.text())),function(t,e,n){var i="$selectController",r=e.parent(),o=r.data(i)||r.parent().data(i);o&&o.registerOption(t,e,n,s,a)}}}}],Us=["$parse",function(o){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){var r;i&&(r=n.hasOwnProperty("required")||o(n.ngRequired)(t),n.ngRequired||(n.required=!0),i.$validators.required=function(t,e){return!r||!i.$isEmpty(e)},n.$observe("required",function(t){r!==t&&(r=t,i.$validate())}))}}}],Gs=["$parse",function(n){return{restrict:"A",require:"?ngModel",compile:function(t,e){var s,a;return e.ngPattern&&(s=e.ngPattern,a="/"===e.ngPattern.charAt(0)&&o.test(e.ngPattern)?function(){return e.ngPattern}:n(e.ngPattern)),function(t,n,e,i){var r,o;i&&(r=e.pattern,e.ngPattern?r=a(t):s=e.pattern,o=Bs(r,s,n),e.$observe("pattern",function(t){var e=o;o=Bs(t,s,n),(e&&e.toString())!==(o&&o.toString())&&i.$validate()}),i.$validators.pattern=function(t,e){return i.$isEmpty(e)||Rt(o)||o.test(e)})}}}}],js=["$parse",function(s){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){var r,o;i&&(r=n.maxlength||s(n.ngMaxlength)(t),o=Ws(r),n.$observe("maxlength",function(t){r!==t&&(o=Ws(t),r=t,i.$validate())}),i.$validators.maxlength=function(t,e){return o<0||i.$isEmpty(e)||e.length<=o})}}}],Vs=["$parse",function(s){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){var r,o;i&&(r=n.minlength||s(n.ngMinlength)(t),o=Ws(r)||-1,n.$observe("minlength",function(t){r!==t&&(o=Ws(t)||-1,r=t,i.$validate())}),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=o})}}}];function Bs(t,e,n){if(t){if(bt(t)&&(t=new RegExp("^"+t+"$")),!t.test)throw b("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",e,t,jt(n));return t}}function Ws(t){var e=C(t);return I(e)?-1:e}function Hs(t,e,n){return t[e]||(t[e]=n())}mt.angular.bootstrap?mt.console&&console.log("WARNING: Tried to load AngularJS more than once."):(ut||(Ps=V(),(e=Rt(Ps)?mt.jQuery:Ps?mt[Ps]:void 0)&&e.fn.on?Ct((_t=e).fn,{scope:Ae.scope,isolateScope:Ae.isolateScope,controller:Ae.controller,injector:Ae.injector,inheritedData:Ae.inheritedData}):_t=fe,Os=_t.cleanData,_t.cleanData=function(t){for(var e,n,i=0;null!=(n=t[i]);i++)(e=(_t._data(n)||{}).events)&&e.$destroy&&_t(n).triggerHandler("$destroy");Os(t)},_.element=_t,ut=!0),Ct(_,{errorHandlingConfig:t,bootstrap:rt,copy:G,extend:Ct,merge:x,equals:Nt,element:_t,forEach:xt,injector:Qe,noop:$t,bind:Gt,toJson:H,fromJson:q,identity:Tt,isUndefined:Rt,isDefined:O,isString:bt,isFunction:Ot,isObject:wt,isNumber:R,isElement:N,isArray:It,version:vt,isDate:w,callbacks:{$$counter:0},getTestability:st,reloadWithDebugInfo:ot,$$minErr:b,$$csp:j,$$encodeUriSegment:Q,$$encodeUriQuery:tt,$$lowercase:$,$$stringify:ft,$$uppercase:f}),Ls=mt,Ms=b("$injector"),Ds=b("ng"),(Fs=Hs(Ls,"angular",Object)).$$minErr=Fs.$$minErr||b,(m=Hs(Fs,"module",function(){var t={};return function(a,u,l){var c={};return function(t,e){if("hasOwnProperty"===t)throw Ds("badname","hasOwnProperty is not a valid {0} name",e)}(a,"module"),u&&t.hasOwnProperty(a)&&(t[a]=null),Hs(t,a,function(){if(!u)throw Ms("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",a);var o=[],t=[],e=[],n=i("$injector","invoke","push",t),s={_invokeQueue:o,_configBlocks:t,_runBlocks:e,info:function(t){if(O(t)){if(!wt(t))throw Ds("aobj","Argument '{0}' must be an object","value");return c=t,this}return c},requires:u,name:a,provider:r("$provide","provider"),factory:r("$provide","factory"),service:r("$provide","service"),value:i("$provide","value"),constant:i("$provide","constant","unshift"),decorator:r("$provide","decorator",t),animation:r("$animateProvider","register"),filter:r("$filterProvider","register"),controller:r("$controllerProvider","register"),directive:r("$compileProvider","directive"),component:r("$compileProvider","component"),config:n,run:function(t){return e.push(t),this}};return l&&n(l),s;function i(t,e,n,i){return i=i||o,function(){return i[n||"push"]([t,e,arguments]),s}}function r(n,i,r){return r=r||o,function(t,e){return e&&Ot(e)&&(e.$$moduleName=a),r.push([n,i,arguments]),s}}})}}))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Xi}),t.provider("$compile",_n).directive({a:Hr,input:Io,textarea:Io,form:Jr,script:ws,select:As,option:Ns,ngBind:Oo,ngBindHtml:Lo,ngBindTemplate:Po,ngClass:Fo,ngClassEven:No,ngClassOdd:ko,ngCloak:Uo,ngController:Go,ngForm:Qr,ngHide:Es,ngIf:Ho,ngInclude:qo,ngInit:zo,ngNonBindable:cs,ngPluralize:ds,ngRef:vs,ngRepeat:ms,ngShow:_s,ngStyle:xs,ngSwitch:Cs,ngSwitchWhen:Ss,ngSwitchDefault:$s,ngOptions:ps,ngTransclude:Rs,ngModel:os,ngList:Wo,ngChange:Mo,pattern:Gs,ngPattern:Gs,required:Us,ngRequired:Us,minlength:Vs,ngMinlength:Vs,maxlength:js,ngMaxlength:js,ngValue:bo,ngModelOptions:us}).directive({ngInclude:Xo,input:wo}).directive(qr).directive(jo),t.provider({$anchorScroll:tn,$animate:fn,$animateCss:hn,$$animateJs:an,$$animateQueue:un,$$AnimateRunner:cn,$$animateAsyncRun:ln,$browser:dn,$cacheFactory:gn,$controller:bn,$document:In,$$isDocumentHidden:An,$exceptionHandler:On,$filter:yr,$$forceReflow:Pn,$interpolate:Zn,$interval:Qn,$$intervalFactory:ti,$http:Xn,$httpParamSerializer:Gn,$httpParamSerializerJQLike:jn,$httpBackend:Yn,$xhrFactory:zn,$jsonpCallbacks:ei,$location:yi,$log:_i,$parse:Ui,$rootScope:qi,$q:Gi,$$q:ji,$sce:tr,$sceDelegate:Qi,$sniffer:er,$$taskTrackerFactory:nr,$templateCache:vn,$templateRequest:or,$$testability:sr,$timeout:ur,$window:gr,$$rAF:Hi,$$jqLite:Ue,$$Map:We,$$cookieReader:mr})}]).info({angularVersion:"1.7.9"}),_.module("ngLocale",[],["$provide",function(t){var r="one",o="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,e){var n=0|t,i=function(t,e){var n,i,r=e;void 0===r&&(r=Math.min((n=t,-1==(i=(n+="").indexOf("."))?0:n.length-i-1),3));var o=Math.pow(10,r);return{v:r,f:(t*o|0)%o}}(t,e);return 1==n&&0==i.v?r:o}})}]),_t(function(){it(mt.document,rt)}))}(window),window.angular.$$csp().noInlineStyle||window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(5)),i(e(126)),i(e(127)),i(e(128)),i(e(129)),i(e(139)),i(e(140)),i(e(141)),i(e(80)),i(e(75)),i(e(142)),i(e(145))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(17)),i(e(68)),i(e(69)),i(e(43))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(42)),i(e(30))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(67)),i(e(22)),i(e(31))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(70)),i(e(39)),i(e(71)),i(e(72)),i(e(73)),i(e(74)),i(e(16))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(29),r=n(75);function o(e){e.addResolvable({token:r.UIRouter,deps:[],resolveFn:function(){return e.router},data:e.router},""),e.addResolvable({token:i.Transition,deps:[],resolveFn:function(){return e},data:e},""),e.addResolvable({token:"$transition$",deps:[],resolveFn:function(){return e},data:e},""),e.addResolvable({token:"$stateParams",deps:[],resolveFn:function(){return e.params()},data:e.params()},""),e.entering().forEach(function(t){e.addResolvable({token:"$state$",deps:[],resolveFn:function(){return t},data:t},t)})}e.registerAddCoreResolvables=function(t){return t.onCreate({},o)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(e){var t=e.to().redirectTo;if(t){var n=e.router.stateService;return r.isFunction(t)?o.services.$q.when(t(e)).then(i):i(t)}function i(t){if(t)return t instanceof s.TargetState?t:r.isString(t)?n.target(t,e.params(),e.options()):t.state||t.params?n.target(t.state||e.to(),t.params||e.params(),e.options()):void 0}}var r=n(1),o=n(3),s=n(16);e.registerRedirectToHook=function(t){return t.onStart({to:function(t){return!!t.redirectTo}},i)}},function(t,e,n){"use strict";function i(n){return function(t,e){return(0,e.$$state()[n])(t,e)}}Object.defineProperty(e,"__esModule",{value:!0});var r=i("onExit");e.registerOnExitHook=function(t){return t.onExit({exiting:function(t){return!!t.onExit}},r)};var o=i("onRetain");e.registerOnRetainHook=function(t){return t.onRetain({retained:function(t){return!!t.onRetain}},o)};var s=i("onEnter");e.registerOnEnterHook=function(t){return t.onEnter({entering:function(t){return!!t.onEnter}},s)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(31),o=n(2);e.RESOLVE_HOOK_PRIORITY=1e3;function s(t){return new r.ResolveContext(t.treeChanges().to).resolvePath("EAGER",t).then(i.noop)}e.registerEagerResolvePath=function(t){return t.onStart({},s,{priority:e.RESOLVE_HOOK_PRIORITY})};function a(t,e){return new r.ResolveContext(t.treeChanges().to).subContext(e.$$state()).resolvePath("LAZY",t).then(i.noop)}e.registerLazyResolveState=function(t){return t.onEnter({entering:o.val(!0)},a,{priority:e.RESOLVE_HOOK_PRIORITY})};function u(t){return new r.ResolveContext(t.treeChanges().to).resolvePath("LAZY",t).then(i.noop)}e.registerResolveRemaining=function(t){return t.onFinish({},u,{priority:e.RESOLVE_HOOK_PRIORITY})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(t){var e=o.services.$q,n=t.views("entering");if(n.length)return e.all(n.map(function(t){return e.when(t.load())})).then(r.noop)}var r=n(0),o=n(3);e.registerLoadEnteringViews=function(t){return t.onFinish({},i)};function s(t){var e,n=t.views("entering"),i=t.views("exiting");(n.length||i.length)&&(e=t.router.viewService,i.forEach(function(t){return e.deactivateViewConfig(t)}),n.forEach(function(t){return e.activateViewConfig(t)}),e.sync())}e.registerActivateViews=function(t){return t.onSuccess({},s)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(t){function e(){n.transition===t&&(n.transition=null)}var n=t.router.globals;t.onSuccess({},function(){n.successfulTransitions.enqueue(t),n.$current=t.$to(),n.current=n.$current.self,r.copy(t.params(),n.params)},{priority:1e4}),t.promise.then(e,e)}var r=n(0);e.registerUpdateGlobalState=function(t){return t.onCreate({},i)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function i(t){var e,n=t.options(),i=t.router.stateService,r=t.router.urlRouter;"url"!==n.source&&n.location&&i.$current.navigable&&(e={replace:"replace"===n.location},r.push(i.$current.navigable.url,i.params,e)),r.update(!0)}e.registerUpdateUrl=function(t){return t.onSuccess({},i,{priority:9999})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=n(20);function o(t){var e=t._ignoredReason();if(e){i.trace.traceTransitionIgnored(t);var n=t.router.globals.transition;return"SameAsCurrent"===e&&n&&n.abort(),r.Rejection.ignored().toPromise()}}e.registerIgnoredTransitionHook=function(t){return t.onBefore({},o,{priority:-9999})}},function(t,e,n){"use strict";function i(t){if(!t.valid())throw new Error(t.error())}Object.defineProperty(e,"__esModule",{value:!0}),e.registerInvalidTransitionHook=function(t){return t.onBefore({},i,{priority:-1e4})}},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(15)),i(e(66)),i(e(41)),i(e(20)),i(e(29)),i(e(21)),i(e(83)),i(e(44))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(32)),i(e(76)),i(e(77)),i(e(78)),i(e(81))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}(e(79))},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}(e(143))},function(t,n,e){"use strict";function i(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}Object.defineProperty(n,"__esModule",{value:!0}),i(e(84)),i(e(85)),i(e(33)),i(e(86)),i(e(87)),i(e(88)),i(e(89)),i(e(90)),i(e(45)),i(e(144))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(90),r=n(86),o=n(45),s=n(88),a=n(87),u=n(89),l=n(85),c=n(84),h=n(3);e.servicesPlugin=function(t){return h.services.$injector=l.$injector,h.services.$q=c.$q,{name:"vanilla.services",$q:c.$q,$injector:l.$injector,dispose:function(){return null}}},e.hashLocationPlugin=o.locationPluginFactory("vanilla.hashBangLocation",!1,r.HashLocationService,i.BrowserLocationConfig),e.pushStateLocationPlugin=o.locationPluginFactory("vanilla.pushStateLocation",!0,s.PushStateLocationService,i.BrowserLocationConfig),e.memoryLocationPlugin=o.locationPluginFactory("vanilla.memoryLocation",!1,a.MemoryLocationService,u.MemoryLocationConfig)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(r.prototype.dispose=function(t){},r);function r(){}e.UIRouterPluginBase=i},function(t,e,n){n(147),t.exports="ngAnimate"},function(t,e){
/**
 * @license AngularJS v1.7.9
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(f,t){"use strict";var ct,ht,j=1,ft="-add",pt="-remove",dt="ng-",$="ng-animate",V="$$ngAnimateChildren",gt=void 0===f.ontransitionend&&void 0!==f.onwebkittransitionend?(ct="WebkitTransition","webkitTransitionEnd transitionend"):(ct="transition","transitionend"),vt=void 0===f.onanimationend&&void 0!==f.onwebkitanimationend?(ht="WebkitAnimation","webkitAnimationEnd animationend"):(ht="animation","animationend"),r="Duration",mt="TimingFunction",o="PlayState",n=ht+"Delay",yt=ht+r,i=ct+"Delay",e=ct+r,s=t.$$minErr("ng");function p(t,e,n){if(!t)throw s("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function T(t,e){return t||e?t?e?(kt(t)&&(t=t.join(" ")),kt(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function _t(t,n,i){var r="";return t=kt(t)?t:t&&Y(t)&&t.length?t.split(/\s+/):[],Ft(t,function(t,e){t&&0<t.length&&(r+=0<e?" ":"",r+=i?n+t:t+n)}),r}function B(t){if(t instanceof Z)switch(t.length){case 0:return t;case 1:if(t[0].nodeType===j)return t;break;default:return Z(d(t))}if(t.nodeType===j)return Z(t)}function d(t){if(!t[0])return t;for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===j)return n}}function W(u){return function(t,e){var n,i,r,o,s,a;e.addClass&&(n=u,i=t,r=e.addClass,Ft(i,function(t){n.addClass(t,r)}),e.addClass=null),e.removeClass&&(o=u,s=t,a=e.removeClass,Ft(s,function(t){o.removeClass(t,a)}),e.removeClass=null)}}function Et(t){var e;return(t=t||{}).$$prepared||(e=t.domOperation||Nt,t.domOperation=function(){t.$$domOperationFired=!0,e(),e=Nt},t.$$prepared=!0),t}function xt(t,e){Ct(t,e),St(t,e)}function Ct(t,e){e.from&&(t.css(e.from),e.from=null)}function St(t,e){e.to&&(t.css(e.to),e.to=null)}function H(t,e,n){var i=e.options||{},r=n.options||{},o=(i.addClass||"")+" "+(r.addClass||""),s=(i.removeClass||"")+" "+(r.removeClass||""),a=function(r,t,e){var n={};r=i(r),t=i(t),Ft(t,function(t,e){n[e]=1}),e=i(e),Ft(e,function(t,e){n[e]=1===n[e]?null:-1});var o={addClass:"",removeClass:""};function i(t){Y(t)&&(t=t.split(" "));var e={};return Ft(t,function(t){t.length&&(e[t]=!0)}),e}return Ft(n,function(t,e){var n,i;1===t?(n="addClass",i=!r[e]||r[e+pt]):-1===t&&(n="removeClass",i=r[e]||r[e+ft]),i&&(o[n].length&&(o[n]+=" "),o[n]+=e)}),o}(t.attr("class"),o,s);r.preparationClasses&&(i.preparationClasses=q(r.preparationClasses,i.preparationClasses),delete r.preparationClasses);var u=i.domOperation!==Nt?i.domOperation:null;return g(i,r),u&&(i.domOperation=u),a.addClass?i.addClass=a.addClass:i.addClass=null,a.removeClass?i.removeClass=a.removeClass:i.removeClass=null,e.addClass=i.addClass,e.removeClass=i.removeClass,i}function $t(t){return t instanceof Z?t[0]:t}function Tt(t,e){var n=e?"paused":"",i=ht+o;return Rt(t,[i,n]),[i,n]}function Rt(t,e){var n=e[0],i=e[1];t.style[n]=i}function q(t,e){return t?e?t+" "+e:t:e}var wt=function(t,e){var n=e?"-"+e+"s":"";return Rt(t,[i,n]),[i,n]},a=["$interpolate",function(o){return{link:function(t,e,n){var i=n.ngAnimateChildren;function r(t){t="on"===t||"true"===t,e.data(V,t)}Y(i)&&0===i.length?e.data(V,!0):(r(o(i)(t)),n.$observe("ngAnimateChildren",r))}}}],bt="$$animateCss",u={transitionDuration:e,transitionDelay:i,transitionProperty:ct+"Property",animationDuration:yt,animationDelay:n,animationIterationCount:ht+"IterationCount"},It={transitionDuration:e,transitionDelay:i,animationDuration:yt,animationDelay:n};function At(t,e){return[e?n:i,t+"s"]}function Ot(t,e,n){var s=Object.create(null),a=t.getComputedStyle(e)||{};return Ft(n,function(t,e){var n,i,r,o=a[t];o&&(("-"===(n=o.charAt(0))||"+"===n||0<=n)&&(i=0,r=o.split(/\s*,\s*/),Ft(r,function(t){"s"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t=parseFloat(t)||0,i=i?Math.max(t,i):t}),o=i),0===o&&(o=null),s[e]=o)}),s}function Pt(t){return 0===t||null!=t}function Lt(t,e){var n=ct,i=t+"s";return e?n+=r:i+=" linear all",[n,i]}function Mt(e,n,t){Ft(t,function(t){e[t]=X(e[t])?e[t]:n.style.getPropertyValue(t)})}var Dt,g,Ft,kt,X,v,x,z,Y,K,Z,Nt,l=["$animateProvider",function(t){this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$animateCache","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(tt,et,nt,it,rt,n,ot,e,st){var at=W(et);var i=[];function ut(t){i.push(t),e.waitUntilQuiet(function(){rt.flush();for(var t=n(),e=0;e<i.length;e++)i[e](t);i.length=0})}function lt(t,e,n,i){var r=function(t,e,n,i){var r=rt.get(e);r||"infinite"===(r=Ot(tt,t,i)).animationIterationCount&&(r.animationIterationCount=1);var o=n||0<r.transitionDuration||0<r.animationDuration;return rt.put(e,r,o),r}(t,n,i,u),o=r.animationDelay,s=r.transitionDelay;return r.maxDelay=o&&s?Math.max(o,s):o||s,r.maxDuration=Math.max(r.animationDuration*r.animationIterationCount,r.transitionDuration),r}return function(l,t){var c=t||{};c.$$prepared||(c=Et(Dt(c)));var h={},f=$t(l);if(!f||!f.parentNode||!st.enabled())return Z();var e,n,p,o,s,i,r,d,g,v,m=[],a=(l.attr("class"),n={},(e=c)&&(e.to||e.from)&&(n.to=e.to,n.from=e.from),n),y=[];if(0===c.duration||!ot.animations&&!ot.transitions)return Z();var _=c.event&&kt(c.event)?c.event.join(" "):c.event,u=_&&c.structural,E="",x="";u?E=_t(_,dt,!0):_&&(E=_),c.addClass&&(x+=_t(c.addClass,ft)),c.removeClass&&(x.length&&(x+=" "),x+=_t(c.removeClass,pt)),c.applyClassesEarly&&x.length&&at(l,c);var C=[E,x].join(" ").trim(),S=a.to&&0<Object.keys(a.to).length;if(!(0<(c.keyframeStyle||"").length)&&!S&&!C)return Z();var $,T,R,w,b,I,A,O,P,L,M,D,F,k=rt.cacheKey(f,_,c.addClass,c.removeClass);if(rt.containsCachedAnimationWithoutDuration(k))return C=null,Z();T=0<c.stagger?{transitionDelay:$=parseFloat(c.stagger),animationDelay:$,transitionDuration:0,animationDuration:0}:(R=f,w=C,I=It,P="stagger-"+(b=k),0<rt.count(b)&&((O=rt.get(P))||(A=_t(w,"-stagger"),et.addClass(R,A),(O=Ot(tt,R,I)).animationDuration=Math.max(O.animationDuration,0),O.transitionDuration=Math.max(O.transitionDuration,0),et.removeClass(R,A),rt.put(P,O,!0))),O||{}),c.$$skipPreparationClasses||et.addClass(l,C),c.transitionStyle&&(M=[ct,c.transitionStyle],Rt(f,M),m.push(M)),0<=c.duration&&(L=0<f.style[ct].length,D=Lt(c.duration,L),Rt(f,D),m.push(D)),c.keyframeStyle&&(F=[ht,c.keyframeStyle],Rt(f,F),m.push(F));var N=T?0<=c.staggerIndex?c.staggerIndex:rt.count(k):0,U=0===N;U&&!c.skipBlocking&&wt(f,9999);var G=lt(f,0,k,!u),j=G.maxDelay,V=Math.max(j,0),B=G.maxDuration,W={};if(W.hasTransitions=0<G.transitionDuration,W.hasAnimations=0<G.animationDuration,W.hasTransitionAll=W.hasTransitions&&"all"===G.transitionProperty,W.applyTransitionDuration=S&&(W.hasTransitions&&!W.hasTransitionAll||W.hasAnimations&&!W.hasTransitions),W.applyAnimationDuration=c.duration&&W.hasAnimations,W.applyTransitionDelay=Pt(c.delay)&&(W.applyTransitionDuration||W.hasTransitions),W.applyAnimationDelay=Pt(c.delay)&&W.hasAnimations,W.recalculateTimingStyles=0<x.length,(W.applyTransitionDuration||W.applyAnimationDuration)&&(B=c.duration?parseFloat(c.duration):B,W.applyTransitionDuration&&(W.hasTransitions=!0,G.transitionDuration=B,L=0<f.style[ct+"Property"].length,m.push(Lt(B,L))),W.applyAnimationDuration&&(W.hasAnimations=!0,G.animationDuration=B,m.push([yt,B+"s"]))),0===B&&!W.recalculateTimingStyles)return Z();var H,q=_t(C,"-active");return null!=c.delay&&("boolean"!=typeof c.delay&&(H=parseFloat(c.delay),V=Math.max(H,0)),W.applyTransitionDelay&&m.push(At(H)),W.applyAnimationDelay&&m.push(At(H,!0))),null==c.duration&&0<G.transitionDuration&&(W.recalculateTimingStyles=W.recalculateTimingStyles||U),d=1e3*V,g=1e3*B,c.skipBlocking||(W.blockTransition=0<G.transitionDuration,W.blockKeyframeAnimation=0<G.animationDuration&&0<T.animationDelay&&0===T.animationDuration),c.from&&(c.cleanupStyles&&Mt(h,f,Object.keys(c.from)),Ct(l,c)),W.blockTransition||W.blockKeyframeAnimation?K(B):c.skipBlocking||wt(f,!1),{$$willAnimate:!0,end:X,start:function(){if(!p)return i=new nt(r={end:X,cancel:z,resume:null,pause:null}),ut(Q),i}};function X(){Y()}function z(){Y(!0)}function Y(t){var e;p||s&&o||(o=!(p=!0),C&&!c.$$skipPreparationClasses&&et.removeClass(l,C),q&&et.removeClass(l,q),Tt(f,!1),wt(f,!1),Ft(m,function(t){f.style[t[0]]=""}),at(l,c),xt(l,c),Object.keys(h).length&&Ft(h,function(t,e){t?f.style.setProperty(e,t):f.style.removeProperty(e)}),c.onDone&&c.onDone(),y&&y.length&&l.off(y.join(" "),J),(e=l.data(bt))&&(it.cancel(e[0].timer),l.removeData(bt)),i&&i.complete(!t))}function K(t){W.blockTransition&&wt(f,t),W.blockKeyframeAnimation&&Tt(f,!!t)}function Z(){return i=new nt({end:X,cancel:z}),ut(Nt),Y(),{$$willAnimate:!1,start:function(){return i},end:X}}function J(t){t.stopPropagation();var e,n,i=t.originalEvent||t;i.target===f&&(e=i.$manualTimeStamp||Date.now(),n=parseFloat(i.elapsedTime.toFixed(3)),Math.max(e-v,0)>=d&&B<=n&&(s=!0,Y()))}function Q(){var t,e;function n(){if(!p){if(K(!1),Ft(m,function(t){var e=t[0],n=t[1];f.style[e]=n}),at(l,c),et.addClass(l,q),W.recalculateTimingStyles){if(f.getAttribute("class"),k=rt.cacheKey(f,_,c.addClass,c.removeClass),G=lt(f,0,k,!1),j=G.maxDelay,V=Math.max(j,0),0===(B=G.maxDuration))return void Y();W.hasTransitions=0<G.transitionDuration,W.hasAnimations=0<G.animationDuration}var t,e;W.applyAnimationDelay&&(j="boolean"!=typeof c.delay&&Pt(c.delay)?parseFloat(c.delay):j,V=Math.max(j,0),G.animationDelay=j,H=At(j,!0),m.push(H),f.style[H[0]]=H[1]),d=1e3*V,g=1e3*B,c.easing&&(e=c.easing,W.hasTransitions&&(t=ct+mt,m.push([t,e]),f.style[t]=e),W.hasAnimations&&(t=ht+mt,m.push([t,e]),f.style[t]=e)),G.transitionDuration&&y.push(gt),G.animationDuration&&y.push(vt),v=Date.now();var n,i,r=d+1.5*g,o=v+r,s=l.data(bt)||[],a=!0;s.length&&((a=o>(n=s[0]).expectedEndTime)?it.cancel(n.timer):s.push(Y)),a&&(i=it(u,r,!1),s[0]={timer:i,expectedEndTime:o},s.push(Y),l.data(bt,s)),y.length&&l.on(y.join(" "),J),c.to&&(c.cleanupStyles&&Mt(h,f,Object.keys(c.to)),St(l,c))}}function u(){var t=l.data(bt);if(t){for(var e=1;e<t.length;e++)t[e]();l.removeData(bt)}}p||(f.parentNode?(t=function(t){var e,n,i,r;s?o&&t&&(o=!1,Y()):(o=!t,G.animationDuration&&(e=Tt(f,o),o?m.push(e):(i=e,r=(n=m).indexOf(i),0<=i&&n.splice(r,1))))},(e=0<N&&(G.transitionDuration&&0===T.transitionDuration||G.animationDuration&&0===T.animationDuration)&&Math.max(T.animationDelay,T.transitionDelay))?it(n,Math.floor(e*N*1e3),!1):n(),r.resume=function(){t(!0)},r.pause=function(){t(!1)}):Y())}}}]}],c=["$$animationProvider",function(t){t.drivers.push("$$animateCssDriver");var y="ng-animate-shim",_="ng-anchor-out";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(f,t,p,e,n,i,r){if(!n.animations&&!n.transitions)return Nt;var o,d=r[0].body,s=$t(e),g=Z((o=s).parentNode&&11===o.parentNode.nodeType||d.contains(s)?s:d);return function(t){return t.from&&t.to?function(t,e,n){var i=a(t),r=a(e),o=[];if(Ft(n,function(t){var e=function(e,r){var o=Z($t(e).cloneNode(!0)),s=v(l(o));e.addClass(y),r.addClass(y),o.addClass("ng-anchor"),g.append(o);var i,t=function(){var t=f(o,{addClass:_,delay:!0,from:u(e)});return t.$$willAnimate?t:null}();if(!t&&!(i=c()))return h();var a=t||i;return{start:function(){var t,e=a.start();return e.done(function(){return e=null,!i&&(i=c())?((e=i.start()).done(function(){e=null,h(),t.complete()}),e):(h(),void t.complete())}),t=new p({end:n,cancel:n});function n(){e&&e.end()}}};function u(t){var n={},i=$t(t).getBoundingClientRect();return Ft(["width","height","top","left"],function(t){var e=i[t];switch(t){case"top":e+=d.scrollTop;break;case"left":e+=d.scrollLeft}n[t]=Math.floor(e)+"px"}),n}function l(t){return t.attr("class")||""}function c(){var t=v(l(r)),e=m(t,s),n=m(s,t),i=f(o,{to:u(r),addClass:"ng-anchor-in "+e,removeClass:_+" "+n,delay:!0});return i.$$willAnimate?i:null}function h(){o.remove(),e.removeClass(y),r.removeClass(y)}}(t.out,t.in);e&&o.push(e)}),!i&&!r&&0===o.length)return;return{start:function(){var e=[];i&&e.push(i.start()),r&&e.push(r.start()),Ft(o,function(t){e.push(t.start())});var n=new p({end:t,cancel:t});return p.all(e,function(t){n.complete(t)}),n;function t(){Ft(e,function(t){t.end()})}}}}(t.from,t.to,(t.classes,t.anchors)):a(t)};function v(t){return t.replace(/\bng-\S+\b/g,"")}function m(t,e){return Y(t)&&(t=t.split(" ")),Y(e)&&(e=e.split(" ")),t.filter(function(t){return-1===e.indexOf(t)}).join(" ")}function a(t){var e=t.element,n=t.options||{};t.structural&&(n.event=t.event,n.structural=!0,n.applyClassesEarly=!0,"leave"===t.event&&(n.onDone=n.domOperation)),n.preparationClasses&&(n.event=q(n.event,n.preparationClasses));var i=f(e,n);return i.$$willAnimate?i:null}}]}],h=["$animateProvider",function(E){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(m,y,t){var _=W(t);return function(t,e,n,i){var r=!1;3===arguments.length&&z(n)&&(i=n,n=null),i=Et(i),n||(n=t.attr("class")||"",i.addClass&&(n+=" "+i.addClass),i.removeClass&&(n+=" "+i.removeClass));var o,s,a,u,l,c=i.addClass,h=i.removeClass,f=function(t){t=kt(t)?t:t.split(" ");for(var e=[],n={},i=0;i<t.length;i++){var r=t[i],o=E.$$registeredAnimations[r];o&&!n[r]&&(e.push(m.get(o)),n[r]=!0)}return e}(n);if(f.length&&(u="leave"===e?(a="leave","afterLeave"):(a="before"+e.charAt(0).toUpperCase()+e.substr(1),e),"enter"!==e&&"move"!==e&&(o=v(t,e,i,f,a)),s=v(t,e,i,f,u)),o||s)return{$$willAnimate:!0,end:function(){return l?l.end():(d(),(l=new y).complete(!0)),l},start:function(){if(l)return l;var e;l=new y;var t=[];return o&&t.push(function(t){e=o(t)}),t.length?t.push(function(t){p(),t(!0)}):p(),s&&t.push(function(t){e=s(t)}),l.setHost({end:function(){i()},cancel:function(){i(!0)}}),y.chain(t,n),l;function n(t){d(),l.complete(t)}function i(t){r||((e||Nt)(t),n(t))}}};function p(){i.domOperation(),_(t,i)}function d(){r=!0,p(),xt(t,i)}function g(s,a,u,t,e){var n=[];return Ft(t,function(t){var o=t[e];o&&n.push(function(){function e(t){n||(n=!0,(r||Nt)(t),i.complete(!t))}var n=!1,i=new y({end:function(){e()},cancel:function(){e(!0)}}),r=function(t,e,n,i,r){var o;switch(n){case"animate":o=[e,i.from,i.to,r];break;case"setClass":o=[e,c,h,r];break;case"addClass":o=[e,c,r];break;case"removeClass":o=[e,h,r];break;default:o=[e,r]}o.push(i);var s=t.apply(t,o);if(s)if(x(s.start)&&(s=s.start()),s instanceof y)s.done(r);else if(x(s))return s;return Nt}(o,s,a,u,function(t){e(!1===t)});return i})}),n}function v(t,e,n,i,r){var o,s,a=g(t,e,n,i,r);if(0===a.length&&("beforeSetClass"===r?(o=g(t,"removeClass",n,i,"beforeRemoveClass"),s=g(t,"addClass",n,i,"beforeAddClass")):"setClass"===r&&(o=g(t,"removeClass",n,i,"removeClass"),s=g(t,"addClass",n,i,"addClass")),o&&(a=a.concat(o)),s&&(a=a.concat(s))),0!==a.length)return function(t){var n=[];return a.length&&Ft(a,function(t){n.push(t())}),n.length?y.all(n,t):t(),function(e){Ft(n,function(t){e?t.cancel():t.end()})}}}}}]}],m=["$$animationProvider",function(t){t.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(o,s){return function(t){if(t.from&&t.to){var i=e(t.from),r=e(t.to);if(!i&&!r)return;return{start:function(){var t=[];i&&t.push(i.start()),r&&t.push(r.start()),s.all(t,function(t){e.complete(t)});var e=new s({end:n(),cancel:n()});return e;function n(){return function(){Ft(t,function(t){t.end()})}}}}}return e(t)};function e(t){var e=t.element,n=t.event,i=t.options,r=t.classes;return o(e,n,r,i)}}]}],J="data-ng-animate",Q="$ngAnimatePin",y=["$animateProvider",function(h){var i=" ",r=this.rules={skip:[],cancel:[],join:[]};function N(t){return{addClass:t.addClass,removeClass:t.removeClass,from:t.from,to:t.to}}function s(t,e){if(t&&e){var n=function(t){if(!t)return null;var e=t.split(i),n=Object.create(null);return Ft(e,function(t){n[t]=!0}),n}(e);return t.split(i).some(function(t){return n[t]})}}function U(t,e,n){return r[t].some(function(t){return t(e,n)})}function G(t,e){var n=0<(t.addClass||"").length,i=0<(t.removeClass||"").length;return e?n&&i:n||i}r.join.push(function(t,e){return!t.structural&&G(t)}),r.skip.push(function(t,e){return!t.structural&&!G(t)}),r.skip.push(function(t,e){return"leave"===e.event&&t.structural}),r.skip.push(function(t,e){return e.structural&&2===e.state&&!t.structural}),r.cancel.push(function(t,e){return e.structural&&t.structural}),r.cancel.push(function(t,e){return 2===e.state&&t.structural}),r.cancel.push(function(t,e){if(e.structural)return!1;var n=t.addClass,i=t.removeClass,r=e.addClass,o=e.removeClass;return!(K(n)&&K(i)||K(r)&&K(o))&&(s(n,o)||s(i,r))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(_,E,x,C,t,S,$,e,n,i,T){var R=new t,w=new t,b=null;function r(t){w.delete(t.target)}function o(){return!0}var s=E.$watch(function(){return 0===e.totalPendingRequests},function(t){t&&(s(),E.$$postDigest(function(){E.$$postDigest(function(){null===b&&(b=!0)})}))}),I=Object.create(null),a=h.customFilter(),u=h.classNameFilter(),A=a||o,O=u?function(t,e){var n=[t.getAttribute("class"),e.addClass,e.removeClass].join(" ");return u.test(n)}:o,P=W(n);function L(t,e){return H(t,e,{})}var M=f.Node.prototype.contains||function(t){return this===t||!!(16&this.compareDocumentPosition(t))};function l(t,e,n){var i=d(e);return t.filter(function(t){return!(t.node===i&&(!n||t.callback===n))})}function D(t,e){"close"!==t||e.parentNode||c.off(e)}var c={on:function(t,e,n){var i=d(e);I[t]=I[t]||[],I[t].push({node:i,callback:n}),Z(e).on("$destroy",function(){R.get(i)||c.off(t,e,n)})},off:function(t,e,n){if(1!==arguments.length||Y(t)){var i=I[t];i&&(I[t]=1===arguments.length?null:l(i,e,n))}else for(var r in e=t,I)I[r]=l(I[r],e)},pin:function(t,e){p(v(t),"element","not an element"),p(v(e),"parentElement","not an element"),t.data(Q,e)},push:function(t,e,n,i){return(n=n||{}).domOperation=i,function(r,o,t){var s=Dt(t),l=B(r),c=$t(l),h=c&&c.parentNode;s=Et(s);var a=new $,e=function(){var e=!1;return function(t){e?t():E.$$postDigest(function(){e=!0,t()})}}();kt(s.addClass)&&(s.addClass=s.addClass.join(" "));s.addClass&&!Y(s.addClass)&&(s.addClass=null);kt(s.removeClass)&&(s.removeClass=s.removeClass.join(" "));s.removeClass&&!Y(s.removeClass)&&(s.removeClass=null);s.from&&!z(s.from)&&(s.from=null);s.to&&!z(s.to)&&(s.to=null);if(!(b&&c&&A(c,o,t)&&O(c,s)))return y(),a;var u=0<=["enter","move","leave"].indexOf(o),n=T(),i=n||w.get(c),f=!i&&R.get(c)||{},p=!!f.state;i||p&&1===f.state||(i=!function(t,e){var n,i=C[0].body,r=$t(x),o=t===i||"HTML"===t.nodeName,s=t===r,a=!1,u=w.get(t),l=Z.data(t,Q);l&&(e=$t(l));for(;e&&(s=s||e===r,e.nodeType===j);){var c,h=R.get(e)||{};if(!a){var f=w.get(e);if(!0===f&&!1!==u){u=!0;break}!1===f&&(u=!1),a=h.structural}if(!K(n)&&!0!==n||(c=Z.data(e,V),X(c)&&(n=c)),a&&!1===n)break;if((o=o||e===i)&&s)break;e=s||!(l=Z.data(e,Q))?e.parentNode:$t(l)}return(!a||n)&&!0!==u&&s&&o}(c,h));if(i)return n&&m(a,o,"start",N(s)),y(),n&&m(a,o,"close",N(s)),a;u&&function(t){var e=t.querySelectorAll("["+J+"]");Ft(e,function(t){var e=parseInt(t.getAttribute(J),10),n=R.get(t);if(n)switch(e){case 2:n.runner.end();case 1:R.delete(t)}})}(c);var d={structural:u,element:l,event:o,addClass:s.addClass,removeClass:s.removeClass,close:y,options:s,runner:a};if(p){if(U("skip",d,f))return 2===f.state?(y(),a):(H(l,f,d),f.runner);if(U("cancel",d,f))if(2===f.state)f.runner.end();else{if(!f.structural)return H(l,f,d),f.runner;f.close()}else if(U("join",d,f)){if(2!==f.state)return function(t,e,n){var i="";e&&(i=_t(e,dt,!0)),n.addClass&&(i=q(i,_t(n.addClass,ft))),n.removeClass&&(i=q(i,_t(n.removeClass,pt))),i.length&&(n.preparationClasses=i,t.addClass(i))}(l,u?o:null,s),o=d.event=f.event,s=H(l,f,d),f.runner;L(l,d)}}else L(l,d);var g=d.structural;g=g||("animate"===d.event&&0<Object.keys(d.options.to||{}).length||G(d));if(!g)return y(),F(c),a;var v=(f.counter||0)+1;return d.counter=v,k(c,1,d),E.$$postDigest(function(){l=B(r);var t=!(e=R.get(c)),e=e||{},n=0<(l.parent()||[]).length&&("animate"===e.event||e.structural||G(e));if(t||e.counter!==v||!n)return t&&(P(l,s),xt(l,s)),(t||u&&e.event!==o)&&(s.domOperation(),a.end()),void(n||F(c));o=!e.structural&&G(e,!0)?"setClass":e.event,k(c,2);var i=S(l,o,e.options);a.setHost(i),m(a,o,"start",N(s)),i.done(function(t){y(!t);var e=R.get(c);e&&e.counter===v&&F(c),m(a,o,"close",N(s))})}),a;function m(t,s,a,u){e(function(){var e,n,i,r,t,o=(e=h,n=c,r=[],(t=I[i=s])&&Ft(t,function(t){(M.call(t.node,n)||"leave"===i&&M.call(t.node,e))&&r.push(t.callback)}),r);o.length?_(function(){Ft(o,function(t){t(l,a,u)}),D(a,c)}):D(a,c)}),t.progress(s,a,u)}function y(t){var e,n;e=l,(n=s).preparationClasses&&(e.removeClass(n.preparationClasses),n.preparationClasses=null),n.activeClasses&&(e.removeClass(n.activeClasses),n.activeClasses=null),P(l,s),xt(l,s),s.domOperation(),a.complete(!t)}}(t,e,n)},enabled:function(t,e){var n,i=arguments.length;return 0===i?e=!!b:v(t)?(n=$t(t),1===i?e=!w.get(n):(w.has(n)||Z(t).on("$destroy",r),w.set(n,!e))):e=b=!!t,e}};return c;function F(t){t.removeAttribute(J),R.delete(t)}function k(t,e,n){(n=n||{}).state=e,t.setAttribute(J,e);var i=R.get(t),r=i?g(i,n):n;R.set(t,r)}}]}],_=["$animateProvider",function(t){var _="ng-animate-ref",E=this.drivers=[],x="$$animationRunner",C="$$animatePrepareClasses";function S(t){return t.data(x)}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler","$$animateCache",function(h,l,f,p,i,d,g){var v=[],m=W(h);function y(t){for(var o={children:[]},s=new i,e=0;e<t.length;e++){var n=t[e];s.set(n.domNode,t[e]={domNode:n.domNode,element:n.element,fn:n.fn,children:[]})}for(e=0;e<t.length;e++)!function t(e){if(e.processed)return e;e.processed=!0;var n=e.domNode;var i=n.parentNode;s.set(n,e);var r;for(;i;){if(r=s.get(i)){r.processed||(r=t(r));break}i=i.parentNode}(r||o).children.push(e);return e}(t[e]);return function(t){var e,n=[],i=[];for(e=0;e<t.children.length;e++)i.push(t.children[e]);var r=i.length,o=0,s=[];for(e=0;e<i.length;e++){var a=i[e];r<=0&&(r=o,o=0,n.push(s),s=[]),s.push(a),a.children.forEach(function(t){o++,i.push(t)}),r--}s.length&&n.push(s);return n}(o)}return function(e,n,c){c=Et(c);var t=0<=["enter","move","leave"].indexOf(n),i=new p({end:function(){u()},cancel:function(){u(!0)}});if(!E.length)return u(),i;var r,o=T(e.attr("class"),T(c.addClass,c.removeClass)),s=c.tempClasses;return s&&(o+=" "+s,c.tempClasses=null),t&&e.data(C,"ng-"+n+"-prepare"),r=i,e.data(x,r),v.push({element:e,classes:o,event:n,structural:t,options:c,beforeStart:function(){s=(s?s+" ":"")+$,h.addClass(e,s);var t=e.data(C);t&&h.removeClass(e,t)},close:u}),e.on("$destroy",a),1<v.length||l.$$postDigest(function(){var e=[];Ft(v,function(t){S(t.element)?e.push(t):t.close()}),v.length=0;var t=function(c){var h=[],f={};Ft(c,function(t,n){var e,i,r,o,s=$t(t.element),a=t.event,u=0<=["enter","move"].indexOf(a),l=t.structural?(i=(e=s).hasAttribute(_)?[e]:e.querySelectorAll("[ng-animate-ref]"),r=[],Ft(i,function(t){var e=t.getAttribute(_);e&&e.length&&r.push(t)}),r):[];l.length?(o=u?"to":"from",Ft(l,function(t){var e=t.getAttribute(_);f[e]=f[e]||{},f[e][o]={animationID:n,element:Z(t)}})):h.push(t)});var p={},d={};return Ft(f,function(t,e){var n,i,r,o,s,a,u=t.from,l=t.to;u&&l?(n=c[u.animationID],i=c[l.animationID],r=u.animationID.toString(),d[r]||((o=d[r]={structural:!0,beforeStart:function(){n.beforeStart(),i.beforeStart()},close:function(){n.close(),i.close()},classes:function(t,e){t=t.split(" "),e=e.split(" ");for(var n=[],i=0;i<t.length;i++){var r=t[i];if("ng-"!==r.substring(0,3))for(var o=0;o<e.length;o++)if(r===e[o]){n.push(r);break}}return n.join(" ")}(n.classes,i.classes),from:n,to:i,anchors:[]}).classes.length?h.push(o):(h.push(n),h.push(i))),d[r].anchors.push({out:u.element,in:l.element})):(a=(s=u?u.animationID:l.animationID).toString(),p[a]||(p[a]=!0,h.push(c[s])))}),h}(e),n=[];Ft(t,function(a){var t=a.from?a.from.element:a.element,e=((e=c.addClass)?e+" ":"")+$,u=g.cacheKey(t[0],a.event,e,c.removeClass);n.push({element:t,domNode:$t(t),fn:function(){var t,e,n,i,r,o=a.close;function s(t){var e=S(t);e&&e.setHost(r)}g.containsCachedAnimationWithoutDuration(u)?o():(a.beforeStart(),!S(a.anchors?a.from.element||a.to.element:a.element)||(e=function(t){for(var e=E.length-1;0<=e;e--){var n=E[e],i=f.get(n)(t);if(i)return i}}(a))&&(t=e.start),t?((n=t()).done(function(t){o(!t)}),r=n,(i=a).from&&i.to?(s(i.from.element),s(i.to.element)):s(i.element)):o())}})});for(var i=y(n),r=0;r<i.length;r++)for(var o=i[r],s=0;s<o.length;s++){var a,u=o[s],l=u.element;i[r][s]=u.fn,0!==r?(a=l.data(C))&&h.addClass(l,a):l.removeData(C)}d(i)}),i;function a(){var t=S(e);!t||"leave"===n&&c.$$domOperationFired||t.end()}function u(t){e.off("$destroy",a),e.removeData(x),m(e,c),xt(e,c),c.domOperation(),s&&h.removeClass(e,s),i.complete(!t)}}}]}];t.module("ngAnimate",[],function(){Nt=t.noop,Dt=t.copy,g=t.extend,Z=t.element,Ft=t.forEach,kt=t.isArray,Y=t.isString,z=t.isObject,K=t.isUndefined,X=t.isDefined,x=t.isFunction,v=t.isElement}).info({angularVersion:"1.7.9"}).directive("ngAnimateSwap",["$animate",function(a){return{restrict:"A",transclude:"element",terminal:!0,priority:550,link:function(t,n,e,i,r){var o,s;t.$watchCollection(e.ngAnimateSwap||e.for,function(t){o&&a.leave(o),s&&(s.$destroy(),s=null),!t&&0!==t||r(function(t,e){o=t,s=e,a.enter(t,null,n)})})}}}]).directive("ngAnimateChildren",a).factory("$$rAFScheduler",["$$rAF",function(n){var i,r;function t(t){i=i.concat(t),o()}return i=t.queue=[],t.waitUntilQuiet=function(t){r&&r(),r=n(function(){r=null,t(),o()})},t;function o(){if(i.length){for(var t=i.shift(),e=0;e<t.length;e++)t[e]();r||n(function(){r||o()})}}}]).provider("$$animateQueue",y).provider("$$animateCache",function(){var s="$$ngAnimateParentKey",a=0,i=Object.create(null);this.$get=[function(){return{cacheKey:function(t,e,n,i){var r=t.parentNode,o=[r[s]||(r[s]=++a),e,t.getAttribute("class")];return n&&o.push(n),i&&o.push(i),o.join(" ")},containsCachedAnimationWithoutDuration:function(t){var e=i[t];return e&&!e.isValid||!1},flush:function(){i=Object.create(null)},count:function(t){var e=i[t];return e?e.total:0},get:function(t){var e=i[t];return e&&e.value},put:function(t,e,n){i[t]?(i[t].total++,i[t].value=e):i[t]={total:1,value:e,isValid:n}}}}]}).provider("$$animation",_).provider("$animateCss",l).provider("$$animateCssDriver",c).provider("$$animateJs",h).provider("$$animateJsDriver",m)}(window,window.angular)},function(t,e,n){n(149),t.exports="angular-loading-bar"},function(t,e){
/*! 
 * angular-loading-bar v0.9.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2016 Wes Cruver
 * License: MIT
 */
!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(p){var t=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(e,o,n,i,r,s){var a,u=0,l=0,c=s.latencyThreshold;function h(){n.cancel(a),s.complete(),u=l=0}function f(t){var e,n=o.get("$http"),i=p.defaults;!t.cache&&!i.cache||!1===t.cache||"GET"!==t.method&&"JSONP"!==t.method||(e=angular.isObject(t.cache)?t.cache:angular.isObject(i.cache)?i.cache:n);var r=void 0!==e&&void 0!==e.get(t.url);return void 0!==t.cached&&r!==t.cached?t.cached:t.cached=r}return{request:function(t){return t.ignoreLoadingBar||f(t)||(i.$broadcast("cfpLoadingBar:loading",{url:t.url}),0===u&&(a=n(function(){s.start()},c)),u++,s.set(l/u)),t},response:function(t){return t&&t.config?t.config.ignoreLoadingBar||f(t.config)||(l++,i.$broadcast("cfpLoadingBar:loaded",{url:t.config.url,result:t}),u<=l?h():s.set(l/u)):r.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),t},responseError:function(t){return t&&t.config?t.config.ignoreLoadingBar||f(t.config)||(l++,i.$broadcast("cfpLoadingBar:loaded",{url:t.config.url,result:t}),u<=l?h():s.set(l/u)):r.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e.reject(t)}}}];p.interceptors.push(t)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(r,o,s,a){var u,n,l,c=this.parentSelector,h=angular.element(this.loadingBarTemplate),i=h.find("div").eq(0),f=angular.element(this.spinnerTemplate),p=!1,d=0,g=this.autoIncrement,v=this.includeSpinner,m=this.includeBar,y=this.startSize;function _(t){var e;p&&(e=100*t+"%",i.css("width",e),d=t,g&&(s.cancel(n),n=s(function(){E()},250)))}function E(){var t,e;1<=d||(e=(e=0)<=(t=d)&&t<.25?(3*Math.random()+3)/100:.25<=t&&t<.65?3*Math.random()/100:.65<=t&&t<.9?2*Math.random()/100:.9<=t&&t<.99?.005:0,_(d+e))}function t(){return d}function e(){d=0,p=!1}return{start:function(){var t,e,n,i;u=u||r.get("$animate"),s.cancel(l),p||(e=(e=(t=o[0]).querySelector?t.querySelector(c):o.find(c)[0])||t.getElementsByTagName("body")[0],n=angular.element(e),i=e.lastChild&&angular.element(e.lastChild),a.$broadcast("cfpLoadingBar:started"),p=!0,m&&u.enter(h,n,i),v&&u.enter(f,n,h),_(y))},set:_,status:t,inc:E,complete:function(){u=u||r.get("$animate"),a.$broadcast("cfpLoadingBar:completed"),_(1),s.cancel(l),l=s(function(){var t=u.leave(h,e);t&&t.then&&t.then(e),u.leave(f)},500)},autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}()},function(t,e,n){n(151),t.exports="ngSanitize"},function(t,e){
/**
 * @license AngularJS v1.7.9
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(S,$){"use strict";var T,R,w,b,I,A,O,P,L,M,D=$.$$minErr("$sanitize");$.module("ngSanitize",[]).provider("$sanitize",function(){var e=!1,i=!1;this.$get=["$$sanitizeUri",function(n){return e=!0,i&&R(f,c),function(t){var e=[];return L(t,M(e,function(t,e){return!/^unsafe:/.test(n(t,e))})),e.join("")}}],this.enableSvg=function(t){return I(t)?(i=t,this):i},this.addValidElements=function(t){return e||(b(t)&&(t={htmlElements:t}),_(c,t.svgElements),_(a,t.htmlVoidElements),_(f,t.htmlVoidElements),_(f,t.htmlElements)),this},this.addValidAttrs=function(t){return e||R(v,y(t,!0)),this},T=$.bind,R=$.extend,w=$.forEach,b=$.isArray,I=$.isDefined,A=$.$$lowercase,O=$.noop,L=function(t,e){null==t?t="":"string"!=typeof t&&(t=""+t);var n=E(t);if(!n)return"";var i=5;do{if(0===i)throw D("uinput","Failed to sanitize html because the input is unstable");i--,t=n.innerHTML,n=E(t)}while(t!==n.innerHTML);var r,o=n.firstChild;for(;o;){switch(o.nodeType){case 1:e.start(o.nodeName.toLowerCase(),function(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n];e[r.name]=r.value}return e}(o.attributes));break;case 3:e.chars(o.textContent)}if(!((r=o.firstChild)||(1===o.nodeType&&e.end(o.nodeName.toLowerCase()),r=C("nextSibling",o))))for(;null==r&&(o=C("parentNode",o))!==n;)r=C("nextSibling",o),1===o.nodeType&&e.end(o.nodeName.toLowerCase());o=r}for(;o=n.firstChild;)n.removeChild(o)},M=function(t,o){var e=!1,s=T(t,t.push);return{start:function(r,t){r=A(r),!e&&h[r]&&(e=r),e||!0!==f[r]||(s("<"),s(r),w(t,function(t,e){var n=A(e),i="img"===r&&"src"===n||"background"===n;!0!==v[n]||!0===p[n]&&!o(t,i)||(s(" "),s(e),s('="'),s(x(t)),s('"'))}),s(">"))},end:function(t){t=A(t),e||!0!==f[t]||!0===a[t]||(s("</"),s(t),s(">")),t==e&&(e=!1)},chars:function(t){e||s(x(t))}}},P=S.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};var n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,r=/([^#-~ |!])/g,a=m("area,br,col,hr,img,wbr"),t=m("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),o=m("rp,rt"),s=R({},o,t),u=R({},t,m("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),l=R({},o,m("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),c=m("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),h=m("script,style"),f=R({},a,u,l,s),p=m("background,cite,href,longdesc,src,xlink:href,xml:base"),d=m("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),g=m("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),v=R({},p,g,d);function m(t,e){return y(t.split(","),e)}function y(t,e){for(var n={},i=0;i<t.length;i++)n[e?A(t[i]):t[i]]=!0;return n}function _(t,e){e&&e.length&&R(t,y(e))}var E=function(i,e){var t;if(!e||!e.implementation)throw D("noinert","Can't create an inert html document");var n=((t=e.implementation.createHTMLDocument("inert")).documentElement||t.getDocumentElement()).querySelector("body");return n.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',n.querySelector("svg")?(n.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',n.querySelector("svg img")?function(t){t="<remove></remove>"+t;try{var e=(new i.DOMParser).parseFromString(t,"text/html").body;return e.firstChild.remove(),e}catch(t){return}}:function(t){n.innerHTML=t,e.documentMode&&function t(e){for(;e;){if(e.nodeType===S.Node.ELEMENT_NODE)for(var n=e.attributes,i=0,r=n.length;i<r;i++){var o=n[i],s=o.name.toLowerCase();"xmlns:ns1"!==s&&0!==s.lastIndexOf("ns1:",0)||(e.removeAttributeNode(o),i--,r--)}var a=e.firstChild;a&&t(a),e=C("nextSibling",e)}}(n);return n}):function(t){t="<remove></remove>"+t;try{t=encodeURI(t)}catch(t){return}var e=new i.XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(null);var n=e.response.body;return n.firstChild.remove(),n}}(S,S.document);function x(t){return t.replace(/&/g,"&amp;").replace(n,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(r,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function C(t,e){var n=e[t];if(n&&P.call(e,n))throw D("elclob","Failed to sanitize html because the element is clobbered: {0}",e.outerHTML||e.outerText);return n}}).info({angularVersion:"1.7.9"}),$.module("ngSanitize").filter("linky",["$sanitize",function(c){var h=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,f=/^mailto:/i,p=$.$$minErr("linky"),d=$.isDefined,g=$.isFunction,v=$.isObject,m=$.isString;return function(t,r,e){if(null==t||""===t)return t;if(!m(t))throw p("notstring","Expected string but received: {0}",t);for(var n,i,o,s=g(e)?e:v(e)?function(){return e}:function(){return{}},a=t,u=[];n=a.match(h);)i=n[0],n[2]||n[4]||(i=(n[3]?"http://":"mailto:")+i),o=n.index,l(a.substr(0,o)),function(t,e){var n,i=s(t);for(n in u.push("<a "),i)u.push(n+'="'+i[n]+'" ');!d(r)||"target"in i||u.push('target="',r,'" ');u.push('href="',t.replace(/"/g,"&quot;"),'">'),l(e),u.push("</a>")}(i,n[0].replace(f,"")),a=a.substring(o+n[0].length);return l(a),c(u.join(""));function l(t){var e,n;t&&u.push((e=t,M(n=[],O).chars(e),n.join("")))}}}])}(window,window.angular)},function(t,e,n){n(153),t.exports="toastr"},function(t,e){!function(){"use strict";function t(s,a,t,u,l,r,c){var h,f=0,p=[],d="",g={},v=c.defer();return{active:function(){return p.length},clear:function(t){if(1===arguments.length&&!t)return;if(t)m(t.toastId);else for(var e=0;e<p.length;e++)m(p[e].toastId)},error:function(t,e,n){return i(y().iconClasses.error,t,e,n)},info:function(t,e,n){return i(y().iconClasses.info,t,e,n)},remove:m,success:function(t,e,n){return i(y().iconClasses.success,t,e,n)},warning:function(t,e,n){return i(y().iconClasses.warning,t,e,n)},refreshTimer:function(t,e){t&&t.isOpened&&0<=p.indexOf(t)&&t.scope.refreshTimer(e)}};function m(t,n){var i=function(t){for(var e=0;e<p.length;e++)if(p[e].toastId===t)return p[e]}(t);i&&!i.deleting&&(i.deleting=!0,i.isOpened=!1,s.leave(i.el).then(function(){i.scope.options.onHidden&&i.scope.options.onHidden(!!n,i),i.scope.$destroy();var t=p.indexOf(i);delete g[i.scope.message],p.splice(t,1);var e=r.maxOpened;e&&p.length>=e&&p[e-1].open.resolve(),p.length||(h.remove(),h=null,v=c.defer())}))}function i(t,e,n,i){return angular.isObject(n)&&(i=n,n=null),function(n){var i=y();if(function(){var t=i.preventDuplicates&&n.message===d,e=i.preventOpenDuplicates&&g[n.message];if(t||e)return!0;return d=n.message,!(g[n.message]=!0)}())return;var e=function(){var t={toastId:f++,isOpened:!1,scope:u.$new(),open:c.defer()};t.iconClass=n.iconClass,n.optionsOverride&&(angular.extend(i,function(t){for(var e=["containerId","iconClasses","maxOpened","newestOnTop","positionClass","preventDuplicates","preventOpenDuplicates","templates"],n=0,i=e.length;n<i;n++)delete t[e[n]];return t}(n.optionsOverride)),t.iconClass=n.optionsOverride.iconClass||t.iconClass);return function(e,t,n){n.allowHtml?(e.scope.allowHtml=!0,e.scope.title=l.trustAsHtml(t.title),e.scope.message=l.trustAsHtml(t.message)):(e.scope.title=t.title,e.scope.message=t.message);e.scope.toastType=e.iconClass,e.scope.toastId=e.toastId,e.scope.extraData=n.extraData,e.scope.options={extendedTimeOut:n.extendedTimeOut,messageClass:n.messageClass,onHidden:n.onHidden,onShown:i("onShown"),onTap:i("onTap"),progressBar:n.progressBar,tapToDismiss:n.tapToDismiss,timeOut:n.timeOut,titleClass:n.titleClass,toastClass:n.toastClass},n.closeButton&&(e.scope.options.closeHtml=n.closeHtml);function i(t){if(n[t])return function(){n[t](e)}}}(t,n,i),t.el=function(t){var e=angular.element("<div toast></div>");return a.get("$compile")(e)(t)}(t.scope),t}();if(p.push(e),i.autoDismiss&&i.maxOpened&&p.length>i.maxOpened)for(var t=p.slice(0,p.length-i.maxOpened),r=0,o=t.length;r<o;r++)m(t[r].toastId);(i.maxOpened&&p.length<=i.maxOpened||!i.maxOpened)&&e.open.resolve();return e.open.promise.then(function(){(function(t){if(h)return v.promise;(h=angular.element("<div></div>")).attr("id",t.containerId),h.addClass(t.positionClass),h.css({"pointer-events":"auto"});var e=angular.element(document.querySelector(t.target));if(e&&e.length)return s.enter(h,e).then(function(){v.resolve()}),v.promise;throw"Target for toasts doesn't exist"})(i).then(function(){var t;e.isOpened=!0,i.newestOnTop?s.enter(e.el,h).then(function(){e.scope.init()}):(t=h[0].lastChild?angular.element(h[0].lastChild):null,s.enter(e.el,h,t).then(function(){e.scope.init()}))})}),e}({iconClass:t,message:e,optionsOverride:i,title:n})}function y(){return angular.extend({},r)}}angular.module("toastr",[]).factory("toastr",t),t.$inject=["$animate","$injector","$document","$rootScope","$sce","toastrConfig","$q"]}(),function(){"use strict";angular.module("toastr").constant("toastrConfig",{allowHtml:!1,autoDismiss:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:0,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,onTap:null,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}(),function(){"use strict";function t(t){return{require:"^toast",templateUrl:function(){return t.templates.progressbar},link:function(t,e,n,i){var r,o,s;function a(){var t=(s-(new Date).getTime())/o*100;e.css("width",t+"%")}(i.progressBar=t).start=function(t){r&&clearInterval(r),o=parseFloat(t),s=(new Date).getTime()+o,r=setInterval(a,10)},t.stop=function(){r&&clearInterval(r)},t.$on("$destroy",function(){clearInterval(r)})}}}angular.module("toastr").directive("progressBar",t),t.$inject=["toastrConfig"]}(),function(){"use strict";angular.module("toastr").controller("ToastController",function(){this.progressBar=null,this.startProgressBar=function(t){this.progressBar&&this.progressBar.start(t)},this.stopProgressBar=function(){this.progressBar&&this.progressBar.stop()}})}(),function(){"use strict";function t(u,l,t,c){return{templateUrl:function(){return t.templates.toast},controller:"ToastController",link:function(n,t,e,i){var r;{var o,s;n.toastClass=n.options.toastClass,n.titleClass=n.options.titleClass,n.messageClass=n.options.messageClass,n.progressBar=n.options.progressBar,n.options.closeHtml&&(o=angular.element(n.options.closeHtml),s=u.get("$compile"),o.addClass("toast-close-button"),o.attr("ng-click","close(true, $event)"),s(o)(n),t.children().prepend(o))}function a(t){return i.startProgressBar(t),l(function(){i.stopProgressBar(),c.remove(n.toastId)},t,1)}n.init=function(){n.options.timeOut&&(r=a(n.options.timeOut)),n.options.onShown&&n.options.onShown()},t.on("mouseenter",function(){n.progressBar=!1,i.stopProgressBar(),r&&l.cancel(r)}),n.tapToast=function(){angular.isFunction(n.options.onTap)&&n.options.onTap(),n.options.tapToDismiss&&n.close(!0)},n.close=function(t,e){e&&angular.isFunction(e.stopPropagation)&&e.stopPropagation(),c.remove(n.toastId,t)},n.refreshTimer=function(t){r&&(l.cancel(r),r=a(t||n.options.timeOut))},t.on("mouseleave",function(){0===n.options.timeOut&&0===n.options.extendedTimeOut||(n.$apply(function(){n.progressBar=n.options.progressBar}),r=a(n.options.extendedTimeOut))})}}}angular.module("toastr").directive("toast",t),t.$inject=["$injector","$interval","toastrConfig","toastr"]}(),angular.module("toastr").run(["$templateCache",function(t){t.put("directives/progressbar/progressbar.html",'<div class="toast-progress"></div>\n'),t.put("directives/toast/toast.html",'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()">\n  <div ng-switch on="allowHtml">\n    <div ng-switch-default ng-if="title" class="{{titleClass}}" aria-label="{{title}}">{{title}}</div>\n    <div ng-switch-default class="{{messageClass}}" aria-label="{{message}}">{{message}}</div>\n    <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" ng-bind-html="title"></div>\n    <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div>\n  </div>\n  <progress-bar ng-if="progressBar"></progress-bar>\n</div>\n')}])},function(t,e,n){n(155),t.exports="ngTouch"},function(t,e){
/**
 * @license AngularJS v1.7.9
 * (c) 2010-2018 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(f){"use strict";var t=f.module("ngTouch",[]);function e(l,c,h){t.directive(l,["$parse","$swipe",function(a,u){return function(n,i,t){var r,o,s=a(t[l]);var e=["touch"];f.isDefined(t.ngSwipeDisableMouse)||e.push("mouse"),u.bind(i,{start:function(t,e){r=t,o=!0},cancel:function(t){o=!1},end:function(t,e){!function(t){if(r){var e=Math.abs(t.y-r.y),n=(t.x-r.x)*c;return o&&e<75&&0<n&&30<n&&e/n<.3}}(t)||n.$apply(function(){i.triggerHandler(h),s(n,{$event:e})})}},e)}}])}t.info({angularVersion:"1.7.9"}),t.factory("$swipe",[function(){var r={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};function l(t){var e=t.originalEvent||t,n=e.touches&&e.touches.length?e.touches:[e],i=e.changedTouches&&e.changedTouches[0]||n[0];return{x:i.clientX,y:i.clientY}}function c(t,n){var i=[];return f.forEach(t,function(t){var e=r[t][n];e&&i.push(e)}),i.join(" ")}return{bind:function(t,n,e){var i,r,o,s,a=!1;e=e||["mouse","touch","pointer"],t.on(c(e,"start"),function(t){o=l(t),a=!0,r=i=0,s=o,n.start&&n.start(o,t)});var u=c(e,"cancel");u&&t.on(u,function(t){a=!1,n.cancel&&n.cancel(t)}),t.on(c(e,"move"),function(t){if(a&&o){var e=l(t);if(i+=Math.abs(e.x-s.x),r+=Math.abs(e.y-s.y),s=e,!(i<10&&r<10))return i<r?(a=!1,void(n.cancel&&n.cancel(t))):(t.preventDefault(),void(n.move&&n.move(e,t)))}}),t.on(c(e,"end"),function(t){a&&(a=!1,n.end&&n.end(l(t),t))})}}}]),e("ngSwipeLeft",-1,"swipeleft"),e("ngSwipeRight",1,"swiperight")}((window,window.angular))},function(t,e,n){function i(r){return function(t,e){var n=2<arguments.length,i=n?a.call(arguments,2):void 0;return r(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,e)}}var r=n(19),o=n(4),s=n(64),a=[].slice;r({global:!0,bind:!0,forced:/MSIE .\./.test(s)},{setTimeout:i(o.setTimeout),setInterval:i(o.setInterval)})},function(t,e,n){"use strict";function i(t,e,n,i,r){!function t(e,n,i,r,o){for(;i<r;){var s,a,u,l,c,h,f;600<r-i&&(s=r-i+1,a=n-i+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1),h=Math.max(i,Math.floor(n-a*l/s+c)),f=Math.min(r,Math.floor(n+(s-a)*l/s+c)),t(e,n,h,f,o));var p=e[n],d=i,g=r;for(v(e,i,n),0<o(e[r],p)&&v(e,i,r);d<g;){for(v(e,d,g),d++,g--;o(e[d],p)<0;)d++;for(;0<o(e[g],p);)g--}0===o(e[i],p)?v(e,i,g):v(e,++g,r),g<=n&&(i=g+1),n<=g&&(r=g-1)}}(t,e,n||0,i||t.length-1,r||o)}function v(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function o(t,e){return t<e?-1:e<t?1:0}t.exports=i,t.exports.default=i},function(t,e,n){},function(t,e,n){var i=n(26),r=Date.prototype,o="Invalid Date",s=r.toString,a=r.getTime;new Date(NaN)+""!=o&&i(r,"toString",function(){var t=a.call(this);return t==t?s.call(this):o})},function(t,e,n){n(19)({target:"Function",proto:!0},{bind:n(161)})},function(t,e,n){"use strict";var o=n(62),s=n(14),a=[].slice,u={};t.exports=Function.bind||function(e){var n=o(this),i=a.call(arguments,1),r=function(){var t=i.concat(a.call(arguments));return this instanceof r?function(t,e,n){if(!(e in u)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";u[e]=Function("C,a","return new C("+i.join(",")+")")}return u[e](t,n)}(n,t.length,t):n.apply(e,t)};return s(n.prototype)&&(r.prototype=n.prototype),r}},function(t,e,n){var i=n(13),r=n(37).f,o=Function.prototype,s=o.toString,a=/^\s*function ([^ (]*)/;!i||"name"in o||r(o,"name",{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(t){return""}}})},function(t,e,n){var i=n(46),r=n(26),o=n(164);i||r(Object.prototype,"toString",o,{unsafe:!0})},function(t,e,n){"use strict";var i=n(46),r=n(165);t.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},function(t,e,n){var i=n(46),r=n(35),o=n(27)("toStringTag"),s="Arguments"==r(function(){return arguments}());t.exports=i?r:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:s?r(e):"Object"==(i=r(e))&&"function"==typeof e.callee?"Arguments":i}},function(t,e,n){"use strict";var i=n(26),r=n(25),o=n(10),s=n(167),a="toString",u=RegExp.prototype,l=u[a],c=o(function(){return"/a/b"!=l.call({source:"a",flags:"b"})}),h=l.name!=a;(c||h)&&i(RegExp.prototype,a,function(){var t=r(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in u)?s.call(t):n)},{unsafe:!0})},function(t,e,n){"use strict";var i=n(25);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var i=n(19),r=n(169);i({global:!0,forced:parseFloat!=r},{parseFloat:r})},function(t,e,n){var i=n(4),r=n(170).trim,o=n(92),s=i.parseFloat,a=1/s(o+"-0")!=-1/0;t.exports=a?function(t){var e=r(String(t)),n=s(e);return 0===n&&"-"==e.charAt(0)?-0:n}:s},function(t,e,n){function i(n){return function(t){var e=String(r(t));return 1&n&&(e=e.replace(s,"")),2&n&&(e=e.replace(a,"")),e}}var r=n(36),o="["+n(92)+"]",s=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$");t.exports={start:i(1),end:i(2),trim:i(3)}},function(t,e,n){"use strict";var s=n(172),r=n(173),i=n(174);function o(t,e,n,i,r){e=e||a,n=n||u,r=r||Array,this.nodeSize=i||64,this.points=t,this.ids=new r(t.length),this.coords=new r(2*t.length);for(var o=0;o<t.length;o++)this.ids[o]=o,this.coords[2*o]=e(t[o]),this.coords[2*o+1]=n(t[o]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function a(t){return t[0]}function u(t){return t[1]}t.exports=function(t,e,n,i,r){return new o(t,e,n,i,r)},o.prototype={range:function(t,e,n,i){return r(this.ids,this.coords,t,e,n,i,this.nodeSize)},within:function(t,e,n){return i(this.ids,this.coords,t,e,n,this.nodeSize)}}},function(t,e,n){"use strict";function d(t,e,n,i,r,o){for(;i<r;){var s,a,u,l,c;600<r-i&&(s=r-i+1,a=n-i+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1),d(t,e,n,Math.max(i,Math.floor(n-a*l/s+c)),Math.min(r,Math.floor(n+(s-a)*l/s+c)),o));var h=e[2*n+o],f=i,p=r;for(g(t,e,i,n),e[2*r+o]>h&&g(t,e,i,r);f<p;){for(g(t,e,f,p),f++,p--;e[2*f+o]<h;)f++;for(;e[2*p+o]>h;)p--}e[2*i+o]===h?g(t,e,i,p):g(t,e,++p,r),p<=n&&(i=p+1),n<=p&&(r=p-1)}}function g(t,e,n,i){r(t,n,i),r(e,2*n,2*i),r(e,2*n+1,2*i+1)}function r(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}t.exports=function t(e,n,i,r,o,s){if(o-r<=i)return;var a=Math.floor((r+o)/2);d(e,n,a,r,o,s%2);t(e,n,i,r,a-1,s+1);t(e,n,i,a+1,o,s+1)}},function(t,e,n){"use strict";t.exports=function(t,e,n,i,r,o,s){var a,u,l=[0,t.length-1,0],c=[];for(;l.length;){var h=l.pop(),f=l.pop(),p=l.pop();if(f-p<=s)for(var d=p;d<=f;d++)a=e[2*d],u=e[2*d+1],n<=a&&a<=r&&i<=u&&u<=o&&c.push(t[d]);else{var g=Math.floor((p+f)/2);a=e[2*g],u=e[2*g+1],n<=a&&a<=r&&i<=u&&u<=o&&c.push(t[g]);var v=(h+1)%2;(0===h?n<=a:i<=u)&&(l.push(p),l.push(g-1),l.push(v)),(0===h?a<=r:u<=o)&&(l.push(g+1),l.push(f),l.push(v))}}return c}},function(t,e,n){"use strict";function m(t,e,n,i){var r=t-n,o=e-i;return r*r+o*o}t.exports=function(t,e,n,i,r,o){var s=[0,t.length-1,0],a=[],u=r*r;for(;s.length;){var l=s.pop(),c=s.pop(),h=s.pop();if(c-h<=o)for(var f=h;f<=c;f++)m(e[2*f],e[2*f+1],n,i)<=u&&a.push(t[f]);else{var p=Math.floor((h+c)/2),d=e[2*p],g=e[2*p+1];m(d,g,n,i)<=u&&a.push(t[p]);var v=(l+1)%2;(0===l?n-r<=d:i-r<=g)&&(s.push(h),s.push(p-1),s.push(v)),(0===l?d<=n+r:g<=i+r)&&(s.push(p+1),s.push(c),s.push(v))}}return a}},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(95),n(96),n(23);var i=n(7),r=n.n(i),o=n(8),s=n.n(o);function a(t,e,n){if(!h(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&f(i),r&&p(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!c(t[0])||!c(t[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:t},e,n)}function l(t,e){if(!h(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&f(n),i&&p(i);var r={type:"FeatureCollection"};return i&&(r.id=i),n&&(r.bbox=n),r.features=t,r}function c(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function h(t){return t&&t.constructor===Object}function f(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!c(t))throw new Error("bbox must only contain numbers")})}function p(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function d(t){if(h(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?(e=t,[Math.random()*(e[2]-e[0])+e[0],Math.random()*(e[3]-e[1])+e[1]]):[360*g(),180*g()];var e}function g(){return Math.random()-.5}var v={ASSUME_TOUCH:!1,DEFAULT_MAX_ZOOM:42,DEFAULT_MIN_ZOOM:0,DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD:.5,DEFAULT_TILE_SIZE:256,DEFAULT_WMS_VERSION:"1.3.0",ENABLE_CANVAS:!0,ENABLE_PROJ4JS:!0,ENABLE_RASTER_REPROJECTION:!0,ENABLE_WEBGL:!0,DEBUG_WEBGL:!0,INITIAL_ATLAS_SIZE:256,MAX_ATLAS_SIZE:-1,MOUSEWHEELZOOM_MAXDELTA:1,OVERVIEWMAP_MAX_RATIO:.75,OVERVIEWMAP_MIN_RATIO:.1,RASTER_REPROJECTION_MAX_SOURCE_TILES:100,RASTER_REPROJECTION_MAX_SUBDIVISION:10,RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH:.25,SIMPLIFY_TOLERANCE:.5,WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK:1024,VERSION:"v4.6.4"};v.WEBGL_MAX_TEXTURE_SIZE,v.WEBGL_EXTENSIONS,v.inherits=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},v.nullFunction=function(){},v.getUid=function(t){return t.ol_uid||(t.ol_uid=++v.uidCounter_)},v.uidCounter_=0;function m(t){var e=St.VERSION?St.VERSION.split("-")[0]:"latest";this.message="Assertion failed. See https://openlayers.org/en/"+e+"/doc/errors/#"+t+" for details.",this.code=t,this.name="AssertionError"}var St=v;St.inherits(m,Error);var y=m,_={assert:function(t,e){if(!t)throw new y(e)}},b=_,E={clamp:function(t,e,n){return Math.min(Math.max(t,e),n)}};E.cosh="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},E.roundUpToPowerOfTwo=function(t){return b.assert(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},E.squaredSegmentDistance=function(t,e,n,i,r,o){var s,a=r-n,u=o-i;return 0==a&&0==u||(1<(s=((t-n)*a+(e-i)*u)/(a*a+u*u))?(n=r,i=o):0<s&&(n+=a*s,i+=u*s)),E.squaredDistance(t,e,n,i)},E.squaredDistance=function(t,e,n,i){var r=n-t,o=i-e;return r*r+o*o},E.solveLinearSystem=function(t){for(var e=t.length,n=0;n<e;n++){for(var i=n,r=Math.abs(t[n][n]),o=n+1;o<e;o++){var s=Math.abs(t[o][n]);r<s&&(r=s,i=o)}if(0===r)return null;var a=t[i];t[i]=t[n],t[n]=a;for(var u=n+1;u<e;u++)for(var l=-t[u][n]/t[n][n],c=n;c<e+1;c++)n==c?t[u][c]=0:t[u][c]+=l*t[n][c]}for(var h=new Array(e),f=e-1;0<=f;f--){h[f]=t[f][e]/t[f][f];for(var p=f-1;0<=p;p--)t[p][e]-=t[p][f]*h[f]}return h},E.toDegrees=function(t){return 180*t/Math.PI},E.toRadians=function(t){return t*Math.PI/180},E.modulo=function(t,e){var n=t%e;return n*e<0?n+e:n},E.lerp=function(t,e,n){return t+n*(e-t)};function x(t){this.radius=t}var z=E,I={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};x.prototype.geodesicArea=function(t){return x.getArea_(t,this.radius)},x.prototype.haversineDistance=function(t,e){return x.getDistance_(t,e,this.radius)},x.prototype.offset=function(t,e,n){var i=z.toRadians(t[1]),r=z.toRadians(t[0]),o=e/this.radius,s=Math.asin(Math.sin(i)*Math.cos(o)+Math.cos(i)*Math.sin(o)*Math.cos(n)),a=r+Math.atan2(Math.sin(n)*Math.sin(o)*Math.cos(i),Math.cos(o)-Math.sin(i)*Math.sin(s));return[z.toDegrees(a),z.toDegrees(s)]},x.DEFAULT_RADIUS=6371008.8,x.getLength=function(t,e){var n,i,r,o,s=e||{},a=s.radius||x.DEFAULT_RADIUS,u=s.projection||"EPSG:3857",l=(t=t.clone().transform(u,"EPSG:4326")).getType(),c=0;switch(l){case I.POINT:case I.MULTI_POINT:break;case I.LINE_STRING:case I.LINEAR_RING:n=t.getCoordinates(),c=x.getLength_(n,a);break;case I.MULTI_LINE_STRING:case I.POLYGON:for(f=0,p=(n=t.getCoordinates()).length;f<p;++f)c+=x.getLength_(n[f],a);break;case I.MULTI_POLYGON:for(f=0,p=(n=t.getCoordinates()).length;f<p;++f)for(r=0,o=(i=n[f]).length;r<o;++r)c+=x.getLength_(i[r],a);break;case I.GEOMETRY_COLLECTION:for(var h=t.getGeometries(),f=0,p=h.length;f<p;++f)c+=x.getLength(h[f],e);break;default:throw new Error("Unsupported geometry type: "+l)}return c},x.getLength_=function(t,e){for(var n=0,i=0,r=t.length;i<r-1;++i)n+=x.getDistance_(t[i],t[i+1],e);return n},x.getDistance_=function(t,e,n){var i=z.toRadians(t[1]),r=z.toRadians(e[1]),o=(r-i)/2,s=z.toRadians(e[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))},x.getArea=function(t,e){var n,i,r,o,s=e||{},a=s.radius||x.DEFAULT_RADIUS,u=s.projection||"EPSG:3857",l=(t=t.clone().transform(u,"EPSG:4326")).getType(),c=0;switch(l){case I.POINT:case I.MULTI_POINT:case I.LINE_STRING:case I.MULTI_LINE_STRING:case I.LINEAR_RING:break;case I.POLYGON:for(n=t.getCoordinates(),c=Math.abs(x.getArea_(n[0],a)),f=1,p=n.length;f<p;++f)c-=Math.abs(x.getArea_(n[f],a));break;case I.MULTI_POLYGON:for(f=0,p=(n=t.getCoordinates()).length;f<p;++f)for(i=n[f],c+=Math.abs(x.getArea_(i[0],a)),r=1,o=i.length;r<o;++r)c-=Math.abs(x.getArea_(i[r],a));break;case I.GEOMETRY_COLLECTION:for(var h=t.getGeometries(),f=0,p=h.length;f<p;++f)c+=x.getArea(h[f],e);break;default:throw new Error("Unsupported geometry type: "+l)}return c},x.getArea_=function(t,e){for(var n=0,i=t.length,r=t[i-1][0],o=t[i-1][1],s=0;s<i;s++){var a=t[s][0],u=t[s][1];n+=z.toRadians(a-r)*(2+Math.sin(z.toRadians(o))+Math.sin(z.toRadians(u))),r=a,o=u}return n*e*e/2};var C=x,S={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},$={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16},T={boundingExtent:function(t){for(var e=T.createEmpty(),n=0,i=t.length;n<i;++n)T.extendCoordinate(e,t[n]);return e},boundingExtentXYs_:function(t,e,n){var i=Math.min.apply(null,t),r=Math.min.apply(null,e),o=Math.max.apply(null,t),s=Math.max.apply(null,e);return T.createOrUpdate(i,r,o,s,n)},buffer:function(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]},clone:function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()},closestSquaredDistanceXY:function(t,e,n){var i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0;return i*i+r*r},containsCoordinate:function(t,e){return T.containsXY(t,e[0],e[1])},containsExtent:function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},containsXY:function(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]},coordinateRelationship:function(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=e[0],a=e[1],u=$.UNKNOWN;return s<n?u|=$.LEFT:r<s&&(u|=$.RIGHT),a<i?u|=$.BELOW:o<a&&(u|=$.ABOVE),u===$.UNKNOWN&&(u=$.INTERSECTING),u},createEmpty:function(){return[1/0,1/0,-1/0,-1/0]},createOrUpdate:function(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]},createOrUpdateEmpty:function(t){return T.createOrUpdate(1/0,1/0,-1/0,-1/0,t)},createOrUpdateFromCoordinate:function(t,e){var n=t[0],i=t[1];return T.createOrUpdate(n,i,n,i,e)},createOrUpdateFromCoordinates:function(t,e){var n=T.createOrUpdateEmpty(e);return T.extendCoordinates(n,t)},createOrUpdateFromFlatCoordinates:function(t,e,n,i,r){var o=T.createOrUpdateEmpty(r);return T.extendFlatCoordinates(o,t,e,n,i)},createOrUpdateFromRings:function(t,e){var n=T.createOrUpdateEmpty(e);return T.extendRings(n,t)},equals:function(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]},extend:function(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t},extendCoordinate:function(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])},extendCoordinates:function(t,e){for(var n=0,i=e.length;n<i;++n)T.extendCoordinate(t,e[n]);return t},extendFlatCoordinates:function(t,e,n,i,r){for(;n<i;n+=r)T.extendXY(t,e[n],e[n+1]);return t},extendRings:function(t,e){for(var n=0,i=e.length;n<i;++n)T.extendCoordinates(t,e[n]);return t},extendXY:function(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)},forEachCorner:function(t,e,n){var i=e.call(n,T.getBottomLeft(t));return i||((i=e.call(n,T.getBottomRight(t)))||(i=e.call(n,T.getTopRight(t)))?i:(i=e.call(n,T.getTopLeft(t)))||!1)},getArea:function(t){var e=0;return T.isEmpty(t)||(e=T.getWidth(t)*T.getHeight(t)),e},getBottomLeft:function(t){return[t[0],t[1]]},getBottomRight:function(t){return[t[2],t[1]]},getCenter:function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},getCorner:function(t,e){var n;return e===S.BOTTOM_LEFT?n=T.getBottomLeft(t):e===S.BOTTOM_RIGHT?n=T.getBottomRight(t):e===S.TOP_LEFT?n=T.getTopLeft(t):e===S.TOP_RIGHT?n=T.getTopRight(t):b.assert(!1,13),n},getEnlargedArea:function(t,e){var n=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-n)*(Math.max(t[3],e[3])-i)},getForViewAndSize:function(t,e,n,i,r){var o=e*i[0]/2,s=e*i[1]/2,a=Math.cos(n),u=Math.sin(n),l=o*a,c=o*u,h=s*a,f=s*u,p=t[0],d=t[1],g=p-l+f,v=p-l-f,m=p+l-f,y=p+l+f,_=d-c-h,E=d-c+h,x=d+c+h,C=d+c-h;return T.createOrUpdate(Math.min(g,v,m,y),Math.min(_,E,x,C),Math.max(g,v,m,y),Math.max(_,E,x,C),r)},getHeight:function(t){return t[3]-t[1]},getIntersectionArea:function(t,e){var n=T.getIntersection(t,e);return T.getArea(n)},getIntersection:function(t,e,n){var i=n||T.createEmpty();return T.intersects(t,e)&&(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]),i},getMargin:function(t){return T.getWidth(t)+T.getHeight(t)},getSize:function(t){return[t[2]-t[0],t[3]-t[1]]},getTopLeft:function(t){return[t[0],t[3]]},getTopRight:function(t){return[t[2],t[3]]},getWidth:function(t){return t[2]-t[0]},intersects:function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]},isEmpty:function(t){return t[2]<t[0]||t[3]<t[1]},returnOrUpdate:function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t},scaleFromCenter:function(t,e){var n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i},intersectsSegment:function(t,e,n){var i,r,o,s,a,u,l,c,h,f,p,d=!1,g=T.coordinateRelationship(t,e),v=T.coordinateRelationship(t,n);return g===$.INTERSECTING||v===$.INTERSECTING?d=!0:(i=t[0],r=t[1],o=t[2],s=t[3],a=e[0],u=e[1],l=n[0],h=((c=n[1])-u)/(l-a),v&$.ABOVE&&!(g&$.ABOVE)&&(d=i<=(f=l-(c-s)/h)&&f<=o),d||!(v&$.RIGHT)||g&$.RIGHT||(d=r<=(p=c-(l-o)*h)&&p<=s),d||!(v&$.BELOW)||g&$.BELOW||(d=i<=(f=l-(c-r)/h)&&f<=o),d||!(v&$.LEFT)||g&$.LEFT||(d=r<=(p=c-(l-i)*h)&&p<=s)),d},applyTransform:function(t,e,n){var i=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];e(i,i,2);var r=[i[0],i[2],i[4],i[6]],o=[i[1],i[3],i[5],i[7]];return T.boundingExtentXYs_(r,o,n)}},$t=T,R={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft",METERS_PER_UNIT:{}};R.METERS_PER_UNIT[R.DEGREES]=2*Math.PI*6370997/360,R.METERS_PER_UNIT[R.FEET]=.3048,R.METERS_PER_UNIT[R.METERS]=1,R.METERS_PER_UNIT[R.USFEET]=1200/3937;function w(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit;var e,n,i=t.code;St.ENABLE_PROJ4JS&&("function"!=typeof(e=P.get())||void 0!==(n=e.defs(i))&&(void 0!==n.axis&&void 0===t.axisOrientation&&(this.axisOrientation_=n.axis),void 0===t.metersPerUnit&&(this.metersPerUnit_=n.to_meter),void 0===t.units&&(this.units_=n.units)))}var O=R,A={cache_:null,set:function(t){A.cache_=t},get:function(){return A.cache_||window.proj4}},P=A;w.prototype.canWrapX=function(){return this.canWrapX_},w.prototype.getCode=function(){return this.code_},w.prototype.getExtent=function(){return this.extent_},w.prototype.getUnits=function(){return this.units_},w.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||O.METERS_PER_UNIT[this.units_]},w.prototype.getWorldExtent=function(){return this.worldExtent_},w.prototype.getAxisOrientation=function(){return this.axisOrientation_},w.prototype.isGlobal=function(){return this.global_},w.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},w.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},w.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},w.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},w.prototype.setWorldExtent=function(t){this.worldExtent_=t},w.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},w.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var L=w,M={Projection_:function(t){L.call(this,{code:t,units:O.METERS,extent:M.EXTENT,global:!0,worldExtent:M.WORLD_EXTENT,getPointResolution:function(t,e){return t/z.cosh(e[1]/M.RADIUS)}})}};St.inherits(M.Projection_,L),M.RADIUS=6378137,M.HALF_SIZE=Math.PI*M.RADIUS,M.EXTENT=[-M.HALF_SIZE,-M.HALF_SIZE,M.HALF_SIZE,M.HALF_SIZE],M.WORLD_EXTENT=[-180,-85,180,85],M.PROJECTIONS=[new M.Projection_("EPSG:3857"),new M.Projection_("EPSG:102100"),new M.Projection_("EPSG:102113"),new M.Projection_("EPSG:900913"),new M.Projection_("urn:ogc:def:crs:EPSG:6.18:3:3857"),new M.Projection_("urn:ogc:def:crs:EPSG::3857"),new M.Projection_("http://www.opengis.net/gml/srs/epsg.xml#3857")],M.fromEPSG4326=function(t,e,n){var i=t.length,r=1<n?n:2,o=e;void 0===o&&(o=2<r?t.slice():new Array(i));for(var s=M.HALF_SIZE,a=0;a<i;a+=r){o[a]=s*t[a]/180;var u=M.RADIUS*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));s<u?u=s:u<-s&&(u=-s),o[a+1]=u}return o},M.toEPSG4326=function(t,e,n){var i=t.length,r=1<n?n:2,o=e;void 0===o&&(o=2<r?t.slice():new Array(i));for(var s=0;s<i;s+=r)o[s]=180*t[s]/M.HALF_SIZE,o[s+1]=360*Math.atan(Math.exp(t[s+1]/M.RADIUS))/Math.PI-90;return o};var D=M,F={Projection_:function(t,e){L.call(this,{code:t,units:O.DEGREES,extent:F.EXTENT,axisOrientation:e,global:!0,metersPerUnit:F.METERS_PER_UNIT,worldExtent:F.EXTENT})}};St.inherits(F.Projection_,L),F.RADIUS=6378137,F.EXTENT=[-180,-90,180,90],F.METERS_PER_UNIT=Math.PI*F.RADIUS/180,F.PROJECTIONS=[new F.Projection_("CRS:84"),new F.Projection_("EPSG:4326","neu"),new F.Projection_("urn:ogc:def:crs:EPSG::4326","neu"),new F.Projection_("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new F.Projection_("urn:ogc:def:crs:OGC:1.3:CRS84"),new F.Projection_("urn:ogc:def:crs:OGC:2:84"),new F.Projection_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new F.Projection_("urn:x-ogc:def:crs:EPSG:4326","neu")];var k=F,N={cache_:{},clear:function(){N.cache_={}},get:function(t){return N.cache_[t]||null},add:function(t,e){N.cache_[t]=e}},U=N,G={};G.assign="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1,r=arguments.length;i<r;++i){var o=arguments[i];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(n[s]=o[s])}return n},G.clear=function(t){for(var e in t)delete t[e]},G.getValues=function(t){var e=[];for(var n in t)e.push(t[n]);return e},G.isEmpty=function(t){var e;for(e in t)return!1;return!e};var Tt=G,j={cache_:{},clear:function(){j.cache_={}},add:function(t,e,n){var i=t.getCode(),r=e.getCode(),o=j.cache_;i in o||(o[i]={}),o[i][r]=n},remove:function(t,e){var n=t.getCode(),i=e.getCode(),r=j.cache_,o=r[n][i];return delete r[n][i],Tt.isEmpty(r[n])&&delete r[n],o},get:function(t,e){var n,i=j.cache_;return t in i&&e in i[t]&&(n=i[t][e]),n}},V=j,B={};B.METERS_PER_UNIT=O.METERS_PER_UNIT,B.SPHERE_=new C(C.DEFAULT_RADIUS),St.ENABLE_PROJ4JS&&(B.setProj4=function(t){P.set(t)}),B.getPointResolution=function(t,e,n,i){var r,o,s,a=(t=B.get(t)).getPointResolutionFunc();return a?o=a(e,n):t.getUnits()==O.DEGREES&&!i||i==O.DEGREES?o=e:(r=B.getTransformFromProjections(t,B.get("EPSG:4326"))(r=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2],r,2),o=(B.SPHERE_.haversineDistance(r.slice(0,2),r.slice(2,4))+B.SPHERE_.haversineDistance(r.slice(4,6),r.slice(6,8)))/2,void 0!==(s=i?O.METERS_PER_UNIT[i]:t.getMetersPerUnit())&&(o/=s)),o},B.addEquivalentProjections=function(t){B.addProjections(t),t.forEach(function(e){t.forEach(function(t){e!==t&&V.add(e,t,B.cloneTransform)})})},B.addEquivalentTransforms=function(t,n,i,r){t.forEach(function(e){n.forEach(function(t){V.add(e,t,i),V.add(t,e,r)})})},B.addProjection=function(t){U.add(t.getCode(),t),V.add(t,t,B.cloneTransform)},B.addProjections=function(t){t.forEach(B.addProjection)},B.clearAllProjections=function(){U.clear(),V.clear()},B.createProjection=function(t,e){return t?"string"==typeof t?B.get(t):t:B.get(e)},B.addCoordinateTransforms=function(t,e,n,i){var r=B.get(t),o=B.get(e);V.add(r,o,B.createTransformFromCoordinateTransform(n)),V.add(o,r,B.createTransformFromCoordinateTransform(i))},B.createTransformFromCoordinateTransform=function(l){return function(t,e,n){for(var i,r,o=t.length,s=void 0!==n?n:2,a=void 0!==e?e:new Array(o),u=0;u<o;u+=s)for(i=l([t[u],t[u+1]]),a[u]=i[0],a[u+1]=i[1],r=s-1;2<=r;--r)a[u+r]=t[u+r];return a}},B.fromLonLat=function(t,e){return B.transform(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},B.toLonLat=function(t,e){var n=B.transform(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),i=n[0];return(i<-180||180<i)&&(n[0]=z.modulo(i+180,360)-180),n},B.get=function(t){var e,n,i=null;return t instanceof L?i=t:"string"==typeof t&&(e=t,i=U.get(e),!St.ENABLE_PROJ4JS||i||"function"==typeof(n=P.get())&&void 0!==n.defs(e)&&(i=new L({code:e}),B.addProjection(i))),i},B.equivalent=function(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||B.getTransformFromProjections(t,e)===B.cloneTransform)&&n},B.getTransform=function(t,e){var n=B.get(t),i=B.get(e);return B.getTransformFromProjections(n,i)},B.getTransformFromProjections=function(t,e){var n,i,r,o,s=t.getCode(),a=e.getCode(),u=V.get(s,a);return!St.ENABLE_PROJ4JS||u||"function"==typeof(n=P.get())&&(i=n.defs(s),r=n.defs(a),void 0!==i&&void 0!==r&&(i===r?B.addEquivalentProjections([e,t]):(o=n(a,s),B.addCoordinateTransforms(e,t,o.forward,o.inverse)),u=V.get(s,a))),u=u||B.identityTransform},B.identityTransform=function(t,e,n){if(void 0!==e&&t!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];t=e}return t},B.cloneTransform=function(t,e,n){var i;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];i=e}else i=t.slice();return i},B.transform=function(t,e,n){return B.getTransform(e,n)(t,void 0,t.length)},B.transformExtent=function(t,e,n){var i=B.getTransform(e,n);return $t.applyTransform(t,i)},B.transformWithProjections=function(t,e,n){return B.getTransformFromProjections(e,n)(t)},B.addCommon=function(){B.addEquivalentProjections(D.PROJECTIONS),B.addEquivalentProjections(k.PROJECTIONS),B.addEquivalentTransforms(k.PROJECTIONS,D.PROJECTIONS,D.fromEPSG4326,D.toEPSG4326)},B.addCommon();var W=B,H=function(){function e(t){r()(this,e),this.$interval=t}return e.$inject=["$interval"],s()(e,[{key:"$onInit",value:function(){this.map=null,this.refreshCluster=!1,this.isInitialized=!1,this.points=null,this.useWebWorker=!1,this.clusterReady=!1,this.pointsCount=1e5,this.clusterOptions={name:"Stores",shape:"circle",radius:5,fillColor:"#00ecff"}}},{key:"generatePoints",value:function(){var t=this;this.points=function(t,e){if(!h(e=e||{}))throw new Error("options is invalid");var n=e.bbox;null==t&&(t=1);for(var i=[],r=0;r<t;r++)i.push(u(d(n)));return l(i)}(this.pointsCount,{bbox:W.transformExtent(this.map.getView().calculateExtent(),"EPSG:3857","EPSG:4326")}),this.$interval(function(){t.refreshCluster=!0},100,1)}},{key:"onMapReady",value:function(t){this.map=t,this.isInitialized=!0,this.generatePoints()}},{key:"onPointsCountChanged",value:function(t){this.pointsCount=t,this.generatePoints()}},{key:"onClusterRefreshed",value:function(){this.refreshCluster=!1}}]),e}(),q=(n(120),n(123),n(9)),X=n.n(q),Y=(n(146),n(148),n(150),n(152),n(154),X.a.module("main.clusterSettings",[])),K=X.a.module("main.map",[]),Z=X.a.module("main.pointsCluster",[]);Q.$inject=["$windowProvider","$locationProvider","$urlRouterProvider","$stateProvider","$compileProvider","$logProvider","cfpLoadingBarProvider","toastrConfig"];var J=X.a.module("main",["ngAnimate","ngSanitize","ngLocale","ui.router","angular-loading-bar","toastr","main.map","main.pointsCluster","main.clusterSettings"]).config(Q);function Q(t,e,n,i,r,o,s,a){e.html5Mode({enabled:!1,requireBase:!1,rewriteLinks:!0}),e.hashPrefix(""),n.when("","/main").when("/","/main").when("/main/",["$state",function(t){t.go("main")}]);[{name:"main",url:"/main",component:"main",resolve:{}}].forEach(function(t){i.state(t)}),r.debugInfoEnabled(!1),o.debugEnabled(!1),s.includeSpinner=!1,s.latencyThreshold=200,X.a.extend(a,{allowHtml:!0,closeButton:!0,closeHtml:"<button>&times;</button>",extendedTimeOut:1e3,autoDismiss:!0,containerId:"toast-container",maxOpened:0,newestOnTop:!0,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!0,target:"body",iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",onHidden:null,onShown:null,onTap:null,progressBar:!1,tapToDismiss:!0,timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}n(91),n(156);var tt={ADD:"add",REMOVE:"remove"},et={PROPERTYCHANGE:"propertychange"},nt={};nt.bindListener_=function(i){function t(t){var e=i.listener,n=i.bindTo||i.target;return i.callOnce&&nt.unlistenByKey(i),e.call(n,t)}return i.boundListener=t},nt.findListener_=function(t,e,n,i){for(var r,o=0,s=t.length;o<s;++o)if((r=t[o]).listener===e&&r.bindTo===n)return i&&(r.deleteIndex=o),r},nt.getListeners=function(t,e){var n=t.ol_lm;return n?n[e]:void 0},nt.getListenerMap_=function(t){return t.ol_lm||(t.ol_lm={})},nt.removeListeners_=function(t,e){var n=nt.getListeners(t,e);if(n){for(var i=0,r=n.length;i<r;++i)t.removeEventListener(e,n[i].boundListener),Tt.clear(n[i]);n.length=0;var o=t.ol_lm;o&&(delete o[e],0===Object.keys(o).length&&delete t.ol_lm)}},nt.listen=function(t,e,n,i,r){var o=nt.getListenerMap_(t),s=(s=o[e])||(o[e]=[]),a=nt.findListener_(s,n,i,!1);return a?r||(a.callOnce=!1):(a={bindTo:i,callOnce:!!r,listener:n,target:t,type:e},t.addEventListener(e,nt.bindListener_(a)),s.push(a)),a},nt.listenOnce=function(t,e,n,i){return nt.listen(t,e,n,i,!0)},nt.unlisten=function(t,e,n,i){var r,o=nt.getListeners(t,e);!o||(r=nt.findListener_(o,n,i,!0))&&nt.unlistenByKey(r)},nt.unlistenByKey=function(t){var e,n;t&&t.target&&(t.target.removeEventListener(t.type,t.boundListener),(e=nt.getListeners(t.target,t.type))&&(-1!==(n="deleteIndex"in t?t.deleteIndex:e.indexOf(t))&&e.splice(n,1),0===e.length&&nt.removeListeners_(t.target,t.type)),Tt.clear(t))},nt.unlistenAll=function(t){var e=nt.getListenerMap_(t);for(var n in e)nt.removeListeners_(t,n)};function it(){}var rt=nt;it.prototype.disposed_=!1,it.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},it.prototype.disposeInternal=St.nullFunction;function ot(t){this.propagationStopped,this.type=t,this.target=null}var st=it;ot.prototype.preventDefault=ot.prototype.stopPropagation=function(){this.propagationStopped=!0},ot.stopPropagation=function(t){t.stopPropagation()},ot.preventDefault=function(t){t.preventDefault()};function at(){st.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}var ut=ot;St.inherits(at,st),at.prototype.addEventListener=function(t,e){var n=this.listeners_[t];-1===(n=n||(this.listeners_[t]=[])).indexOf(e)&&n.push(e)},at.prototype.dispatchEvent=function(t){var e,n="string"==typeof t?new ut(t):t,i=n.type,r=(n.target=this).listeners_[i];if(r){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var o=0,s=r.length;o<s;++o)if(!1===r[o].call(this,n)||n.propagationStopped){e=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var a=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];a--;)this.removeEventListener(i,St.nullFunction);delete this.dispatching_[i]}return e}},at.prototype.disposeInternal=function(){rt.unlistenAll(this)},at.prototype.getListeners=function(t){return this.listeners_[t]},at.prototype.hasListener=function(t){return t?t in this.listeners_:0<Object.keys(this.listeners_).length},at.prototype.removeEventListener=function(t,e){var n,i=this.listeners_[t];i&&(n=i.indexOf(e),t in this.pendingRemovals_?(i[n]=St.nullFunction,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))};function lt(){ct.call(this),this.revision_=0}var ct=at,ht={CHANGE:"change",CLEAR:"clear",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};St.inherits(lt,ct),lt.unByKey=function(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)rt.unlistenByKey(t[e]);else rt.unlistenByKey(t)},lt.prototype.changed=function(){++this.revision_,this.dispatchEvent(ht.CHANGE)},lt.prototype.getRevision=function(){return this.revision_},lt.prototype.on=function(t,e,n){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),o=0;o<i;++o)r[o]=rt.listen(this,t[o],e,n);return r}return rt.listen(this,t,e,n)},lt.prototype.once=function(t,e,n){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),o=0;o<i;++o)r[o]=rt.listenOnce(this,t[o],e,n);return r}return rt.listenOnce(this,t,e,n)},lt.prototype.un=function(t,e,n){if(Array.isArray(t))for(var i=0,r=t.length;i<r;++i)rt.unlisten(this,t[i],e,n);else rt.unlisten(this,t,e,n)};function ft(t){pt.call(this),St.getUid(this),this.values_={},void 0!==t&&this.setProperties(t)}var pt=lt;St.inherits(ft,pt),ft.changeEventTypeCache_={},ft.getChangeEventType=function(t){return ft.changeEventTypeCache_.hasOwnProperty(t)?ft.changeEventTypeCache_[t]:ft.changeEventTypeCache_[t]="change:"+t},ft.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},ft.prototype.getKeys=function(){return Object.keys(this.values_)},ft.prototype.getProperties=function(){return Tt.assign({},this.values_)},ft.prototype.notify=function(t,e){var n=ft.getChangeEventType(t);this.dispatchEvent(new ft.Event(n,t,e)),n=et.PROPERTYCHANGE,this.dispatchEvent(new ft.Event(n,t,e))},ft.prototype.set=function(t,e,n){var i;n?this.values_[t]=e:(i=this.values_[t])!==(this.values_[t]=e)&&this.notify(t,i)},ft.prototype.setProperties=function(t,e){var n;for(n in t)this.set(n,t[n],e)},ft.prototype.unset=function(t,e){var n;t in this.values_&&(n=this.values_[t],delete this.values_[t],e||this.notify(t,n))},ft.Event=function(t,e,n){ut.call(this,t),this.key=e,this.oldValue=n},St.inherits(ft.Event,ut);function dt(t,e){gt.call(this);var n=e||{};if(this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(var i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}var gt=ft;St.inherits(dt,gt),dt.prototype.clear=function(){for(;0<this.getLength();)this.pop()},dt.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},dt.prototype.forEach=function(t,e){for(var n=e?t.bind(e):t,i=this.array_,r=0,o=i.length;r<o;++r)n(i[r],r,i)},dt.prototype.getArray=function(){return this.array_},dt.prototype.item=function(t){return this.array_[t]},dt.prototype.getLength=function(){return this.get(dt.Property_.LENGTH)},dt.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new dt.Event(tt.ADD,e))},dt.prototype.pop=function(){return this.removeAt(this.getLength()-1)},dt.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},dt.prototype.remove=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)},dt.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new dt.Event(tt.REMOVE,e)),e},dt.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new dt.Event(tt.REMOVE,i)),this.dispatchEvent(new dt.Event(tt.ADD,e))}else{for(var r=n;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},dt.prototype.updateLength_=function(){this.set(dt.Property_.LENGTH,this.array_.length)},dt.prototype.assertUnique_=function(t,e){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new y(58)},dt.Property_={LENGTH:"length"},dt.Event=function(t,e){ut.call(this,t),this.element=e},St.inherits(dt.Event,ut);function vt(t){gt.call(this),this.element=t.element?t.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=t.render?t.render:St.nullFunction,t.target&&this.setTarget(t.target)}var mt=dt,yt={binarySearch:function(t,e,n){for(var i,r,o=n||yt.numberSafeCompareFunction,s=0,a=t.length,u=!1;s<a;)(r=+o(t[i=s+(a-s>>1)],e))<0?s=i+1:(a=i,u=!r);return u?s:~s},numberSafeCompareFunction:function(t,e){return e<t?1:t<e?-1:0},includes:function(t,e){return 0<=t.indexOf(e)},linearFindNearest:function(t,e,n){var i,r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;if(0<n){for(i=1;i<r;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<r;++i)if(t[i]<=e)return i}else for(i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1},reverseSubArray:function(t,e,n){for(;e<n;){var i=t[e];t[e]=t[n],t[n]=i,++e,--n}},extend:function(t,e){for(var n=Array.isArray(e)?e:[e],i=n.length,r=0;r<i;r++)t[t.length]=n[r]},remove:function(t,e){var n=t.indexOf(e),i=-1<n;return i&&t.splice(n,1),i},find:function(t,e){for(var n,i=t.length>>>0,r=0;r<i;r++)if(e(n=t[r],r,t))return n;return null},equals:function(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0},stableSort:function(t,n){for(var e=t.length,i=Array(t.length),r=0;r<e;r++)i[r]={index:r,value:t[r]};for(i.sort(function(t,e){return n(t.value,e.value)||t.index-e.index}),r=0;r<t.length;r++)t[r]=i[r].value},findIndex:function(n,i){var r;return!n.every(function(t,e){return!i(t,r=e,n)})?r:-1},isSorted:function(i,t,r){var o=t||yt.numberSafeCompareFunction;return i.every(function(t,e){if(0===e)return!0;var n=o(i[e-1],t);return!(0<n||r&&0===n)})}},Rt=yt,_t={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},Et={createCanvasContext2D:function(t,e){var n=document.createElement("CANVAS");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")},outerWidth:function(t){var e=t.offsetWidth,n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10)},outerHeight:function(t){var e=t.offsetHeight,n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)},replaceNode:function(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)},removeNode:function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},removeChildren:function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}},xt=Et;St.inherits(vt,gt),vt.prototype.disposeInternal=function(){xt.removeNode(this.element),gt.prototype.disposeInternal.call(this)},vt.prototype.getMap=function(){return this.map_},vt.prototype.setMap=function(t){this.map_&&xt.removeNode(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)rt.unlistenByKey(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==St.nullFunction&&this.listenerKeys.push(rt.listen(t,_t.POSTRENDER,this.render,this)),t.render())},vt.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t};var Ct,wt,bt=vt,It={CLASS_HIDDEN:"ol-hidden",CLASS_SELECTABLE:"ol-selectable",CLASS_UNSELECTABLE:"ol-unselectable",CLASS_UNSUPPORTED:"ol-unsupported",CLASS_CONTROL:"ol-control"};It.getFontFamilies=(wt={},function(t){if(Ct=Ct||document.createElement("div").style,!(t in wt)){Ct.font=t;var e=Ct.fontFamily;if(Ct.font="",!e)return null;wt[t]=e.split(/,\s?/)}return wt[t]});function At(t){gt.call(this);var e=Tt.assign({},t);e[Pt.OPACITY]=void 0!==t.opacity?t.opacity:1,e[Pt.VISIBLE]=void 0===t.visible||t.visible,e[Pt.Z_INDEX]=void 0!==t.zIndex?t.zIndex:0,e[Pt.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[Pt.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,this.setProperties(e),this.state_={layer:this,managed:!0},this.type}var Ot=It,Pt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"};St.inherits(At,gt),At.prototype.getType=function(){return this.type},At.prototype.getLayerState=function(){return this.state_.opacity=z.clamp(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex(),this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},At.prototype.getLayersArray=function(t){},At.prototype.getLayerStatesArray=function(t){},At.prototype.getExtent=function(){return this.get(Pt.EXTENT)},At.prototype.getMaxResolution=function(){return this.get(Pt.MAX_RESOLUTION)},At.prototype.getMinResolution=function(){return this.get(Pt.MIN_RESOLUTION)},At.prototype.getOpacity=function(){return this.get(Pt.OPACITY)},At.prototype.getSourceState=function(){},At.prototype.getVisible=function(){return this.get(Pt.VISIBLE)},At.prototype.getZIndex=function(){return this.get(Pt.Z_INDEX)},At.prototype.setExtent=function(t){this.set(Pt.EXTENT,t)},At.prototype.setMaxResolution=function(t){this.set(Pt.MAX_RESOLUTION,t)},At.prototype.setMinResolution=function(t){this.set(Pt.MIN_RESOLUTION,t)},At.prototype.setOpacity=function(t){this.set(Pt.OPACITY,t)},At.prototype.setVisible=function(t){this.set(Pt.VISIBLE,t)},At.prototype.setZIndex=function(t){this.set(Pt.Z_INDEX,t)};function Lt(t){var e=Tt.assign({},t);delete e.source,Mt.call(this,e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,t.map&&this.setMap(t.map),rt.listen(this,gt.getChangeEventType(Pt.SOURCE),this.handleSourcePropertyChange_,this);var n=t.source?t.source:null;this.setSource(n)}var Mt=At,Dt={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"},Ft={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};St.inherits(Lt,Mt),Lt.visibleAtResolution=function(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution},Lt.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},Lt.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},Lt.prototype.getSource=function(){return this.get(Pt.SOURCE)||null},Lt.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():Ft.UNDEFINED},Lt.prototype.handleSourceChange_=function(){this.changed()},Lt.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(rt.unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=rt.listen(t,ht.CHANGE,this.handleSourceChange_,this)),this.changed()},Lt.prototype.setMap=function(t){this.mapPrecomposeKey_&&(rt.unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(rt.unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=rt.listen(t,Dt.PRECOMPOSE,function(t){var e=this.getLayerState();e.managed=!1,e.zIndex=1/0,t.frameState.layerStatesArray.push(e),t.frameState.layerStates[St.getUid(this)]=e},this),this.mapRenderKey_=rt.listen(this,ht.CHANGE,t.render,t),this.changed())},Lt.prototype.setSource=function(t){this.set(Pt.SOURCE,t)};var kt=Lt,Nt=function(t){var e=t||{};this.ulElement_=document.createElement("UL"),this.logoLi_=document.createElement("LI"),this.ulElement_.appendChild(this.logoLi_),this.logoLi_.style.display="none",this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);var n=void 0!==e.className?e.className:"ol-attribution",i=void 0!==e.tipLabel?e.tipLabel:"Attributions",r=void 0!==e.collapseLabel?e.collapseLabel:"";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;var o=void 0!==e.label?e.label:"i";"string"==typeof o?(this.label_=document.createElement("span"),this.label_.textContent=o):this.label_=o;var s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=i,a.appendChild(s),rt.listen(a,ht.CLICK,this.handleClick_,this);var u=n+" "+Ot.CLASS_UNSELECTABLE+" "+Ot.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),l=document.createElement("div");l.className=u,l.appendChild(this.ulElement_),l.appendChild(a);var c=e.render?e.render:Nt.render;bt.call(this,{element:l,render:c,target:e.target}),this.renderedAttributions_=[],this.renderedVisible_=!0,this.logoElements_={}};St.inherits(Nt,bt),Nt.prototype.getSourceAttributions_=function(t){for(var e={},n=[],i=t.layerStatesArray,r=t.viewState.resolution,o=0,s=i.length;o<s;++o){var a=i[o];if(kt.visibleAtResolution(a,r)){var u=a.layer.getSource();if(u){var l=u.getAttributions2();if(l){var c=l(t);if(c)if(Array.isArray(c))for(var h=0,f=c.length;h<f;++h)c[h]in e||(n.push(c[h]),e[c[h]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return n},Nt.render=function(t){this.updateElement_(t.frameState)},Nt.prototype.updateElement_=function(t){if(t){var e=this.getSourceAttributions_(t);if(!Rt.equals(e,this.renderedAttributions_)){for(;this.ulElement_.lastChild!==this.logoLi_;)this.ulElement_.removeChild(this.ulElement_.lastChild);for(var n=0,i=e.length;n<i;++n){var r=document.createElement("LI");r.innerHTML=e[n],this.ulElement_.appendChild(r)}0===e.length&&0<this.renderedAttributions_.length?this.element.classList.add("ol-logo-only"):0===this.renderedAttributions_.length&&0<e.length&&this.element.classList.remove("ol-logo-only");var o=0<e.length||!Tt.isEmpty(t.logos);this.renderedVisible_!=o&&(this.element.style.display=o?"":"none",this.renderedVisible_=o),this.renderedAttributions_=e,this.insertLogos_(t)}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},Nt.prototype.insertLogos_=function(t){var e,n,i,r,o=t.logos,s=this.logoElements_;for(e in s)e in o||(xt.removeNode(s[e]),delete s[e]);for(r in o){var a=o[r];a instanceof HTMLElement&&(this.logoLi_.appendChild(a),s[r]=a),r in s||((n=new Image).src=r,""===a?i=n:((i=document.createElement("a")).href=a,i.appendChild(n)),this.logoLi_.appendChild(i),s[r]=i)}this.logoLi_.style.display=Tt.isEmpty(o)?"none":""},Nt.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},Nt.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?xt.replaceNode(this.collapseLabel_,this.label_):xt.replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},Nt.prototype.getCollapsible=function(){return this.collapsible_},Nt.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},Nt.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},Nt.prototype.getCollapsed=function(){return this.collapsed_};var Ut=Nt,Gt={easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return 1-Gt.easeIn(1-t)},inAndOut:function(t){return 3*t*t-2*t*t*t},linear:function(t){return t},upAndDown:function(t){return t<.5?Gt.inAndOut(2*t):1-Gt.inAndOut(2*(t-.5))}},jt=Gt,Vt=function(t){var e=t||{},n=void 0!==e.className?e.className:"ol-rotate",i=void 0!==e.label?e.label:"";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=i):(this.label_=i,this.label_.classList.add("ol-compass"));var r=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),rt.listen(o,ht.CLICK,Vt.prototype.handleClick_,this);var s=n+" "+Ot.CLASS_UNSELECTABLE+" "+Ot.CLASS_CONTROL,a=document.createElement("div");a.className=s,a.appendChild(o);var u=e.render?e.render:Vt.render;this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,bt.call(this,{element:a,render:u,target:e.target}),this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ot.CLASS_HIDDEN)};St.inherits(Vt,bt),Vt.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},Vt.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(0<this.duration_?t.animate({rotation:0,duration:this.duration_,easing:jt.easeOut}):t.setRotation(0))},Vt.render=function(t){var e,n,i,r=t.frameState;r&&((e=r.viewState.rotation)!=this.rotation_&&(n="rotate("+e+"rad)",this.autoHide_&&((i=this.element.classList.contains(Ot.CLASS_HIDDEN))||0!==e?i&&0!==e&&this.element.classList.remove(Ot.CLASS_HIDDEN):this.element.classList.add(Ot.CLASS_HIDDEN)),this.label_.style.msTransform=n,this.label_.style.webkitTransform=n,this.label_.style.transform=n),this.rotation_=e)};var Bt=Vt,Wt=function(t){var e=t||{},n=void 0!==e.className?e.className:"ol-zoom",i=void 0!==e.delta?e.delta:1,r=void 0!==e.zoomInLabel?e.zoomInLabel:"+",o=void 0!==e.zoomOutLabel?e.zoomOutLabel:"",s=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",a=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=n+"-in",u.setAttribute("type","button"),u.title=s,u.appendChild("string"==typeof r?document.createTextNode(r):r),rt.listen(u,ht.CLICK,Wt.prototype.handleClick_.bind(this,i));var l=document.createElement("button");l.className=n+"-out",l.setAttribute("type","button"),l.title=a,l.appendChild("string"==typeof o?document.createTextNode(o):o),rt.listen(l,ht.CLICK,Wt.prototype.handleClick_.bind(this,-i));var c=n+" "+Ot.CLASS_UNSELECTABLE+" "+Ot.CLASS_CONTROL,h=document.createElement("div");h.className=c,h.appendChild(u),h.appendChild(l),bt.call(this,{element:h,target:e.target}),this.duration_=void 0!==e.duration?e.duration:250};St.inherits(Wt,bt),Wt.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},Wt.prototype.zoomByDelta_=function(t){var e,n,i=this.getMap().getView();!i||(e=i.getResolution())&&(n=i.constrainResolution(e,t),0<this.duration_?(i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:n,duration:this.duration_,easing:jt.easeOut})):i.setResolution(n))};var Ht=Wt,qt={defaults:function(t){var e=t||{},n=new mt;return void 0!==e.zoom&&!e.zoom||n.push(new Ht(e.zoomOptions)),void 0!==e.rotate&&!e.rotate||n.push(new Bt(e.rotateOptions)),void 0!==e.attribution&&!e.attribution||n.push(new Ut(e.attributionOptions)),n}},Xt=qt,zt={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},Yt=function(t){var e=t||{},n=void 0!==e.className?e.className:"ol-scale-line";this.innerElement_=document.createElement("DIV"),this.innerElement_.className=n+"-inner",this.element_=document.createElement("DIV"),this.element_.className=n+" "+Ot.CLASS_UNSELECTABLE,this.element_.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==e.minWidth?e.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="";var i=e.render?e.render:Yt.render;bt.call(this,{element:this.element_,render:i,target:e.target}),rt.listen(this,gt.getChangeEventType(Yt.Property_.UNITS),this.handleUnitsChanged_,this),this.setUnits(e.units||zt.METRIC)};St.inherits(Yt,bt),Yt.LEADING_DIGITS=[1,2,5],Yt.prototype.getUnits=function(){return this.get(Yt.Property_.UNITS)},Yt.render=function(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()},Yt.prototype.handleUnitsChanged_=function(){this.updateElement_()},Yt.prototype.setUnits=function(t){this.set(Yt.Property_.UNITS,t)},Yt.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,n=t.projection,i=this.getUnits(),r=i==zt.DEGREES?O.DEGREES:O.METERS,o=W.getPointResolution(n,t.resolution,e,r);i!=zt.DEGREES&&(o*=n.getMetersPerUnit());var s,a=this.minWidth_*o,u="";i==zt.DEGREES?(s=W.METERS_PER_UNIT[O.DEGREES],n.getUnits()==O.DEGREES?a*=s:o/=s,a<s/60?(u="",o*=3600):a<s?(u="",o*=60):u=""):i==zt.IMPERIAL?a<.9144?(u="in",o/=.0254):a<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344):i==zt.NAUTICAL?(o/=1852,u="nm"):i==zt.METRIC?a<.001?(u="m",o*=1e6):a<1?(u="mm",o*=1e3):a<1e3?u="m":(u="km",o/=1e3):i==zt.US?a<.9144?(u="in",o*=39.37):a<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472):b.assert(!1,33);for(var l,c,h=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));;){if(l=Yt.LEADING_DIGITS[(h%3+3)%3]*Math.pow(10,Math.floor(h/3)),c=Math.round(l/o),isNaN(c))return this.element_.style.display="none",void(this.renderedVisible_=!1);if(c>=this.minWidth_)break;++h}var f=l+" "+u;this.renderedHTML_!=f&&(this.innerElement_.innerHTML=f,this.renderedHTML_=f),this.renderedWidth_!=c&&(this.innerElement_.style.width=c+"px",this.renderedWidth_=c),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},Yt.Property_={UNITS:"units"};function Kt(t){var e=t||{},n=Tt.assign({},e);delete n.preload,delete n.useInterimTilesOnError,kt.call(this,n),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.type=Jt.TILE}var Zt=Yt,Jt={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"},Qt={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};St.inherits(Kt,kt),Kt.prototype.getPreload=function(){return this.get(Qt.PRELOAD)},Kt.prototype.setPreload=function(t){this.set(Qt.PRELOAD,t)},Kt.prototype.getUseInterimTilesOnError=function(){return this.get(Qt.USE_INTERIM_TILES_ON_ERROR)},Kt.prototype.setUseInterimTilesOnError=function(t){this.set(Qt.USE_INTERIM_TILES_ON_ERROR,t)};function te(t,e,n){ut.call(this,t),this.map=e,this.frameState=void 0!==n?n:null}var ee=Kt;St.inherits(te,ut);function ne(t,e,n,i,r){ie.call(this,t,e,r),this.originalEvent=n,this.pixel=e.getEventPixel(n),this.coordinate=e.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==i&&i}var ie=te;St.inherits(ne,ie),ne.prototype.preventDefault=function(){ie.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},ne.prototype.stopPropagation=function(){ie.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()};var re=ne,oe={ONE:1,SRC_ALPHA:770,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,TRIANGLES:4,TRIANGLE_STRIP:5,ONE_MINUS_SRC_ALPHA:771,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,CULL_FACE:2884,BLEND:3042,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126,RGBA:6408,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,LINK_STATUS:35714,LINEAR:9729,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE0:33984,CLAMP_TO_EDGE:33071,COMPILE_STATUS:35713,FRAMEBUFFER:36160,CONTEXT_IDS_:["experimental-webgl","webgl","webkit-3d","moz-webgl"],getContext:function(t,e){for(var n,i=oe.CONTEXT_IDS_.length,r=0;r<i;++r)try{if(n=t.getContext(oe.CONTEXT_IDS_[r],e))return n}catch(t){}return null}},se=oe,ae={},ue="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";ae.FIREFOX=-1!==ue.indexOf("firefox"),ae.SAFARI=-1!==ue.indexOf("safari")&&-1==ue.indexOf("chrom"),ae.WEBKIT=-1!==ue.indexOf("webkit")&&-1==ue.indexOf("edge"),ae.MAC=-1!==ue.indexOf("macintosh"),ae.DEVICE_PIXEL_RATIO=window.devicePixelRatio||1,ae.CANVAS_LINE_DASH=!1,ae.CANVAS=St.ENABLE_CANVAS&&function(){if(!("HTMLCanvasElement"in window))return!1;try{var t=document.createElement("CANVAS").getContext("2d");return!!t&&(void 0!==t.setLineDash&&(ae.CANVAS_LINE_DASH=!0),!0)}catch(t){return!1}}(),ae.DEVICE_ORIENTATION="DeviceOrientationEvent"in window,ae.GEOLOCATION="geolocation"in navigator,ae.TOUCH=St.ASSUME_TOUCH||"ontouchstart"in window,ae.POINTER="PointerEvent"in window,ae.MSPOINTER=!!navigator.msPointerEnabled,ae.WEBGL,function(){if(St.ENABLE_WEBGL){var t,e=!1,n=[];if("WebGLRenderingContext"in window)try{var i=document.createElement("CANVAS"),r=se.getContext(i,{failIfMajorPerformanceCaveat:!0});r&&(e=!0,t=r.getParameter(r.MAX_TEXTURE_SIZE),n=r.getSupportedExtensions())}catch(t){}ae.WEBGL=e,St.WEBGL_EXTENSIONS=n,St.WEBGL_MAX_TEXTURE_SIZE=t}}();function le(t,e,n,i,r){re.call(this,t,e,n.originalEvent,i,r),this.pointerEvent=n}var ce=ae,he={SINGLECLICK:"singleclick",CLICK:ht.CLICK,DBLCLICK:ht.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};St.inherits(le,re);function fe(t,e){this.dispatcher=t,this.mapping_=e}var pe=le,de={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};fe.prototype.getEvents=function(){return Object.keys(this.mapping_)},fe.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};function ge(t){var e={mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout};ve.call(this,t,e),this.pointerMap=t.pointerMap,this.lastTouches=[]}var ve=fe;St.inherits(ge,ve),ge.POINTER_ID=1,ge.POINTER_TYPE="mouse",ge.DEDUP_DIST=25,ge.prototype.isEventSimulatedFromTouch_=function(t){for(var e,n=this.lastTouches,i=t.clientX,r=t.clientY,o=0,s=n.length;o<s&&(e=n[o]);o++){var a=Math.abs(i-e[0]),u=Math.abs(r-e[1]);if(a<=ge.DEDUP_DIST&&u<=ge.DEDUP_DIST)return!0}return!1},ge.prepareEvent=function(t,e){var n=e.cloneEvent(t,t),i=n.preventDefault;return n.preventDefault=function(){t.preventDefault(),i()},n.pointerId=ge.POINTER_ID,n.isPrimary=!0,n.pointerType=ge.POINTER_TYPE,n},ge.prototype.mousedown=function(t){var e;this.isEventSimulatedFromTouch_(t)||(ge.POINTER_ID.toString()in this.pointerMap&&this.cancel(t),e=ge.prepareEvent(t,this.dispatcher),this.pointerMap[ge.POINTER_ID.toString()]=t,this.dispatcher.down(e,t))},ge.prototype.mousemove=function(t){var e;this.isEventSimulatedFromTouch_(t)||(e=ge.prepareEvent(t,this.dispatcher),this.dispatcher.move(e,t))},ge.prototype.mouseup=function(t){var e,n;this.isEventSimulatedFromTouch_(t)||(e=this.pointerMap[ge.POINTER_ID.toString()])&&e.button===t.button&&(n=ge.prepareEvent(t,this.dispatcher),this.dispatcher.up(n,t),this.cleanupMouse())},ge.prototype.mouseover=function(t){var e;this.isEventSimulatedFromTouch_(t)||(e=ge.prepareEvent(t,this.dispatcher),this.dispatcher.enterOver(e,t))},ge.prototype.mouseout=function(t){var e;this.isEventSimulatedFromTouch_(t)||(e=ge.prepareEvent(t,this.dispatcher),this.dispatcher.leaveOut(e,t))},ge.prototype.cancel=function(t){var e=ge.prepareEvent(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},ge.prototype.cleanupMouse=function(){delete this.pointerMap[ge.POINTER_ID.toString()]};function me(t){var e={MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture};ve.call(this,t,e),this.pointerMap=t.pointerMap,this.POINTER_TYPES=["","unavailable","touch","pen","mouse"]}var ye=ge;St.inherits(me,ve),me.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},me.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},me.prototype.msPointerDown=function(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)},me.prototype.msPointerMove=function(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)},me.prototype.msPointerUp=function(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)},me.prototype.msPointerOut=function(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)},me.prototype.msPointerOver=function(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)},me.prototype.msPointerCancel=function(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)},me.prototype.msLostPointerCapture=function(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)},me.prototype.msGotPointerCapture=function(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)};function _e(t){var e={pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture};ve.call(this,t,e)}var Ee=me;St.inherits(_e,ve),_e.prototype.pointerDown=function(t){this.dispatcher.fireNativeEvent(t)},_e.prototype.pointerMove=function(t){this.dispatcher.fireNativeEvent(t)},_e.prototype.pointerUp=function(t){this.dispatcher.fireNativeEvent(t)},_e.prototype.pointerOut=function(t){this.dispatcher.fireNativeEvent(t)},_e.prototype.pointerOver=function(t){this.dispatcher.fireNativeEvent(t)},_e.prototype.pointerCancel=function(t){this.dispatcher.fireNativeEvent(t)},_e.prototype.lostPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)},_e.prototype.gotPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)};function xe(t,e,n){ut.call(this,t),this.originalEvent=e;var i=n||{};this.buttons=this.getButtons_(i),this.pressure=this.getPressure_(i,this.buttons),this.bubbles="bubbles"in i&&i.bubbles,this.cancelable="cancelable"in i&&i.cancelable,this.view="view"in i?i.view:null,this.detail="detail"in i?i.detail:null,this.screenX="screenX"in i?i.screenX:0,this.screenY="screenY"in i?i.screenY:0,this.clientX="clientX"in i?i.clientX:0,this.clientY="clientY"in i?i.clientY:0,this.ctrlKey="ctrlKey"in i&&i.ctrlKey,this.altKey="altKey"in i&&i.altKey,this.shiftKey="shiftKey"in i&&i.shiftKey,this.metaKey="metaKey"in i&&i.metaKey,this.button="button"in i?i.button:0,this.relatedTarget="relatedTarget"in i?i.relatedTarget:null,this.pointerId="pointerId"in i?i.pointerId:0,this.width="width"in i?i.width:0,this.height="height"in i?i.height:0,this.tiltX="tiltX"in i?i.tiltX:0,this.tiltY="tiltY"in i?i.tiltY:0,this.pointerType="pointerType"in i?i.pointerType:"",this.hwTimestamp="hwTimestamp"in i?i.hwTimestamp:0,this.isPrimary="isPrimary"in i&&i.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})}var Ce=_e;St.inherits(xe,ut),xe.prototype.getButtons_=function(t){var e;if(t.buttons||xe.HAS_BUTTONS)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e},xe.prototype.getPressure_=function(t,e){return t.pressure?t.pressure:e?.5:0},xe.HAS_BUTTONS=!1,function(){try{var t=new MouseEvent("click",{buttons:1});xe.HAS_BUTTONS=1===t.buttons}catch(t){}}();function Se(t,e){var n={touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel};ve.call(this,t,n),this.pointerMap=t.pointerMap,this.mouseSource=e,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0}var $e=xe;St.inherits(Se,ve),Se.DEDUP_TIMEOUT=2500,Se.CLICK_COUNT_TIMEOUT=200,Se.POINTER_TYPE="touch",Se.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},Se.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&ye.POINTER_ID.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},Se.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},Se.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),Se.CLICK_COUNT_TIMEOUT)},Se.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},Se.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},Se.prototype.touchToPointer_=function(t,e){var n=this.dispatcher.cloneEvent(t,e);return n.pointerId=e.identifier+2,n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount_,n.button=0,n.buttons=1,n.width=e.webkitRadiusX||e.radiusX||0,n.height=e.webkitRadiusY||e.radiusY||0,n.pressure=e.webkitForce||e.force||.5,n.isPrimary=this.isPrimaryTouch_(e),n.pointerType=Se.POINTER_TYPE,n.clientX=e.clientX,n.clientY=e.clientY,n.screenX=e.screenX,n.screenY=e.screenY,n},Se.prototype.processTouches_=function(t,e){var n,i,r=Array.prototype.slice.call(t.changedTouches),o=r.length;function s(){t.preventDefault()}for(n=0;n<o;++n)(i=this.touchToPointer_(t,r[n])).preventDefault=s,e.call(this,t,i)},Se.prototype.findTouch_=function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i].identifier===e)return!0;return!1},Se.prototype.vacuumTouches_=function(t){var e=t.touches,n=Object.keys(this.pointerMap),i=n.length;if(i>=e.length){for(var r,o,s=[],a=0;a<i;++a)r=n[a],o=this.pointerMap[r],r==ye.POINTER_ID||this.findTouch_(e,r-2)||s.push(o.out);for(a=0;a<s.length;++a)this.cancelOut_(t,s[a])}},Se.prototype.touchstart=function(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)},Se.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},Se.prototype.touchmove=function(t){t.preventDefault(),this.processTouches_(t,this.moveOverOut_)},Se.prototype.moveOverOut_=function(t,e){var n,i,r=e,o=this.pointerMap[r.pointerId];o&&(n=o.out,i=o.outTarget,this.dispatcher.move(r,t),n&&i!==r.target&&(n.relatedTarget=r.target,r.relatedTarget=i,n.target=i,r.target?(this.dispatcher.leaveOut(n,t),this.dispatcher.enterOver(r,t)):(r.target=i,r.relatedTarget=null,this.cancelOut_(t,r))),o.out=r,o.outTarget=r.target)},Se.prototype.touchend=function(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)},Se.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},Se.prototype.touchcancel=function(t){this.processTouches_(t,this.cancelOut_)},Se.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},Se.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},Se.prototype.dedupSynthMouse_=function(t){var e,n=this.mouseSource.lastTouches,i=t.changedTouches[0];this.isPrimaryTouch_(i)&&(e=[i.clientX,i.clientY],n.push(e),setTimeout(function(){Rt.remove(n,e)},Se.DEDUP_TIMEOUT))};function Te(t){ct.call(this),this.element_=t,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}var Re=Se;St.inherits(Te,ct),Te.prototype.registerSources=function(){var t;ce.POINTER?this.registerSource("native",new Ce(this)):ce.MSPOINTER?this.registerSource("ms",new Ee(this)):(t=new ye(this),this.registerSource("mouse",t),ce.TOUCH&&this.registerSource("touch",new Re(this,t))),this.register_()},Te.prototype.registerSource=function(t,e){var n=e,i=n.getEvents();i&&(i.forEach(function(t){var e=n.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(n))},this),this.eventSourceList_.push(n))},Te.prototype.register_=function(){for(var t,e=this.eventSourceList_.length,n=0;n<e;n++)t=this.eventSourceList_[n],this.addEvents_(t.getEvents())},Te.prototype.unregister_=function(){for(var t,e=this.eventSourceList_.length,n=0;n<e;n++)t=this.eventSourceList_[n],this.removeEvents_(t.getEvents())},Te.prototype.eventHandler_=function(t){var e=t.type,n=this.eventMap_[e];n&&n(t)},Te.prototype.addEvents_=function(t){t.forEach(function(t){rt.listen(this.element_,t,this.eventHandler_,this)},this)},Te.prototype.removeEvents_=function(t){t.forEach(function(t){rt.unlisten(this.element_,t,this.eventHandler_,this)},this)},Te.prototype.cloneEvent=function(t,e){for(var n,i={},r=0,o=Te.CLONE_PROPS.length;r<o;r++)i[n=Te.CLONE_PROPS[r][0]]=t[n]||e[n]||Te.CLONE_PROPS[r][1];return i},Te.prototype.down=function(t,e){this.fireEvent(de.POINTERDOWN,t,e)},Te.prototype.move=function(t,e){this.fireEvent(de.POINTERMOVE,t,e)},Te.prototype.up=function(t,e){this.fireEvent(de.POINTERUP,t,e)},Te.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(de.POINTERENTER,t,e)},Te.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(de.POINTERLEAVE,t,e)},Te.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(de.POINTEROVER,t,e)},Te.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(de.POINTEROUT,t,e)},Te.prototype.cancel=function(t,e){this.fireEvent(de.POINTERCANCEL,t,e)},Te.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},Te.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},Te.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},Te.prototype.makeEvent=function(t,e,n){return new $e(t,n,e)},Te.prototype.fireEvent=function(t,e,n){var i=this.makeEvent(t,e,n);this.dispatchEvent(i)},Te.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},Te.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,ye.prepareEvent(e,this),e)},Te.prototype.disposeInternal=function(){this.unregister_(),ct.prototype.disposeInternal.call(this)},Te.CLONE_PROPS=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function we(t,e){ct.call(this),this.map_=t,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e?e*ce.DEVICE_PIXEL_RATIO:ce.DEVICE_PIXEL_RATIO,this.down_=null;var n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new be(n),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=rt.listen(this.pointerEventHandler_,de.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=rt.listen(this.pointerEventHandler_,de.POINTERMOVE,this.relayEvent_,this)}var be=Te;St.inherits(we,ct),we.prototype.emulateClick_=function(e){var t=new pe(he.CLICK,this.map_,e);this.dispatchEvent(t),0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,t=new pe(he.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var t=new pe(he.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}.bind(this),250)},we.prototype.updateActivePointers_=function(t){var e=t;e.type==he.POINTERUP||e.type==he.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==he.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},we.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new pe(he.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(rt.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},we.prototype.isMouseActionButton_=function(t){return 0===t.button},we.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new pe(he.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new be(document),this.dragListenerKeys_.push(rt.listen(this.documentPointerEventHandler_,he.POINTERMOVE,this.handlePointerMove_,this),rt.listen(this.documentPointerEventHandler_,he.POINTERUP,this.handlePointerUp_,this),rt.listen(this.pointerEventHandler_,he.POINTERCANCEL,this.handlePointerUp_,this)))},we.prototype.handlePointerMove_=function(t){var e;this.isMoving_(t)&&(this.dragging_=!0,e=new pe(he.POINTERDRAG,this.map_,t,this.dragging_),this.dispatchEvent(e)),t.preventDefault()},we.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new pe(t.type,this.map_,t,e))},we.prototype.isMoving_=function(t){return Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},we.prototype.disposeInternal=function(){this.relayedListenerKey_&&(rt.unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(rt.unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(rt.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),ct.prototype.disposeInternal.call(this)};function Ie(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}var Ae=we,Oe={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Pe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5};Ie.DROP=1/0,Ie.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Tt.clear(this.queuedElements_)},Ie.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},Ie.prototype.enqueue=function(t){b.assert(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=Ie.DROP&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},Ie.prototype.getCount=function(){return this.elements_.length},Ie.prototype.getLeftChildIndex_=function(t){return 2*t+1},Ie.prototype.getRightChildIndex_=function(t){return 2*t+2},Ie.prototype.getParentIndex_=function(t){return t-1>>1},Ie.prototype.heapify_=function(){for(var t=(this.elements_.length>>1)-1;0<=t;t--)this.siftUp_(t)},Ie.prototype.isEmpty=function(){return 0===this.elements_.length},Ie.prototype.isKeyQueued=function(t){return t in this.queuedElements_},Ie.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},Ie.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,i=e.length,r=e[t],o=n[t],s=t;t<i>>1;){var a=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<i&&n[u]<n[a]?u:a;e[t]=e[l],n[t]=n[l],t=l}e[t]=r,n[t]=o,this.siftDown_(s,t)},Ie.prototype.siftDown_=function(t,e){for(var n=this.elements_,i=this.priorities_,r=n[e],o=i[e];t<e;){var s=this.getParentIndex_(e);if(!(i[s]>o))break;n[e]=n[s],i[e]=i[s],e=s}n[e]=r,i[e]=o},Ie.prototype.reprioritize=function(){for(var t,e,n=this.priorityFunction_,i=this.elements_,r=this.priorities_,o=0,s=i.length,a=0;a<s;++a)(e=n(t=i[a]))==Ie.DROP?delete this.queuedElements_[this.keyFunction_(t)]:(r[o]=e,i[o++]=t);i.length=o,r.length=o,this.heapify_()};function Le(e,t){Me.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}var Me=Ie;St.inherits(Le,Me),Le.prototype.enqueue=function(t){var e,n=Me.prototype.enqueue.call(this,t);return n&&(e=t[0],rt.listen(e,ht.CHANGE,this.handleTileChange,this)),n},Le.prototype.getTilesLoading=function(){return this.tilesLoading_},Le.prototype.handleTileChange=function(t){var e,n=t.target,i=n.getState();i!==Pe.LOADED&&i!==Pe.ERROR&&i!==Pe.EMPTY&&i!==Pe.ABORT||(rt.unlisten(n,ht.CHANGE,this.handleTileChange,this),(e=n.getKey())in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[e],--this.tilesLoading_),this.tileChangeCallback_())},Le.prototype.loadMoreTiles=function(t,e){for(var n,i,r,o=0,s=!1;this.tilesLoading_<t&&o<e&&0<this.getCount();)r=(i=this.dequeue()[0]).getKey(),(n=i.getState())===Pe.ABORT?s=!0:n!==Pe.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,i.load());0===o&&s&&this.tileChangeCallback_()};var De=Le,Fe={createExtent:function(e){return function(t){return t?[z.clamp(t[0],e[0],e[2]),z.clamp(t[1],e[1],e[3])]:void 0}},none:function(t){return t}},ke=Fe,Ne={createSnapToResolutions:function(s){return function(t,e,n){if(void 0!==t){var i=Rt.linearFindNearest(s,t,n),i=z.clamp(i+e,0,s.length-1),r=Math.floor(i);if(i!=r&&r<s.length-1){var o=s[r]/s[r+1];return s[r]/Math.pow(o,i-r)}return s[r]}}},createSnapToPower:function(s,a,u){return function(t,e,n){if(void 0!==t){var i=-n/2+.5,r=Math.floor(Math.log(a/t)/Math.log(s)+i),o=Math.max(r+e,0);return void 0!==u&&(o=Math.min(o,u)),a/Math.pow(s,o)}}}},Ue=Ne,Ge={disable:function(t,e){return void 0!==t?0:void 0},none:function(t,e){return void 0!==t?t+e:void 0},createSnapToN:function(t){var n=2*Math.PI/t;return function(t,e){return void 0!==t?t=Math.floor((t+e)/n+.5)*n:void 0}},createSnapToZero:function(t){var n=t||z.toRadians(5);return function(t,e){return void 0!==t?Math.abs(t+e)<=n?0:t+e:void 0}}},je=Ge,Ve={ANIMATING:0,INTERACTING:1},Be={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},We={padNumber:function(t,e,n){var i=void 0!==n?t.toFixed(n):""+t,r=i.indexOf(".");return e<(r=-1===r?i.length:r)?i:new Array(1+e-r).join("0")+i},compareVersions:function(t,e){for(var n=(""+t).split("."),i=(""+e).split("."),r=0;r<Math.max(n.length,i.length);r++){var o=parseInt(n[r]||"0",10),s=parseInt(i[r]||"0",10);if(s<o)return 1;if(o<s)return-1}return 0}},He=We,qe={add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t},closestOnCircle:function(t,e){var n=e.getRadius(),i=e.getCenter(),r=i[0],o=i[1],s=t[0]-r,a=t[1]-o;0===s&&0==a&&(s=1);var u=Math.sqrt(s*s+a*a);return[r+n*s/u,o+n*a/u]},closestOnSegment:function(t,e){var n,i=t[0],r=t[1],o=e[0],s=e[1],a=o[0],u=o[1],l=s[0],c=s[1],h=l-a,f=c-u,p=0==h&&0==f?0:(h*(i-a)+f*(r-u))/(h*h+f*f||0),d=p<=0?(n=a,u):1<=p?(n=l,c):(n=a+p*h,u+p*f);return[n,d]},createStringXY:function(e){return function(t){return qe.toStringXY(t,e)}},degreesToStringHDMS:function(t,e,n){var i=z.modulo(e+180,360)-180,r=Math.abs(3600*i),o=n||0,s=Math.pow(10,o),a=Math.floor(r/3600),u=Math.floor((r-3600*a)/60),l=r-3600*a-60*u;return 60<=(l=Math.ceil(l*s)/s)&&(l=0,u+=1),60<=u&&(u=0,a+=1),a+" "+He.padNumber(u,2)+" "+He.padNumber(l,2,o)+""+(0==i?"":" "+t.charAt(i<0?1:0))},format:function(t,e,n){return t?e.replace("{x}",t[0].toFixed(n)).replace("{y}",t[1].toFixed(n)):""},equals:function(t,e){for(var n=!0,i=t.length-1;0<=i;--i)if(t[i]!=e[i]){n=!1;break}return n},rotate:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i;return t[0]=r,t[1]=o,t},scale:function(t,e){return t[0]*=e,t[1]*=e,t},sub:function(t,e){return t[0]-=e[0],t[1]-=e[1],t},squaredDistance:function(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i},distance:function(t,e){return Math.sqrt(qe.squaredDistance(t,e))},squaredDistanceToSegment:function(t,e){return qe.squaredDistance(t,qe.closestOnSegment(t,e))},toStringHDMS:function(t,e){return t?qe.degreesToStringHDMS("NS",t[1],e)+" "+qe.degreesToStringHDMS("EW",t[0],e):""},toStringXY:function(t,e){return qe.format(t,"{x}, {y}",e)}},Xe=qe,ze={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},Ye={TRUE:function(){return!0},FALSE:function(){return!1}},Ke=Ye,Ze={transform2D:function(t,e,n,i,r,o){for(var s=o||[],a=0,u=e;u<n;u+=i){var l=t[u],c=t[u+1];s[a++]=r[0]*l+r[2]*c+r[4],s[a++]=r[1]*l+r[3]*c+r[5]}return o&&s.length!=a&&(s.length=a),s},rotate:function(t,e,n,i,r,o,s){for(var a=s||[],u=Math.cos(r),l=Math.sin(r),c=o[0],h=o[1],f=0,p=e;p<n;p+=i){var d=t[p]-c,g=t[p+1]-h;a[f++]=c+d*u-g*l,a[f++]=h+d*l+g*u;for(var v=p+2;v<p+i;++v)a[f++]=t[v]}return s&&a.length!=f&&(a.length=f),a},scale:function(t,e,n,i,r,o,s,a){for(var u=a||[],l=s[0],c=s[1],h=0,f=e;f<n;f+=i){var p=t[f]-l,d=t[f+1]-c;u[h++]=l+r*p,u[h++]=c+o*d;for(var g=f+2;g<f+i;++g)u[h++]=t[g]}return a&&u.length!=h&&(u.length=h),u},translate:function(t,e,n,i,r,o,s){for(var a,u=s||[],l=0,c=e;c<n;c+=i)for(u[l++]=t[c]+r,u[l++]=t[c+1]+o,a=c+2;a<c+i;++a)u[l++]=t[a];return s&&u.length!=l&&(u.length=l),u}},Je=Ze,Qe={};Qe.tmp_=new Array(6),Qe.create=function(){return[1,0,0,1,0,0]},Qe.reset=function(t){return Qe.set(t,1,0,0,1,0,0)},Qe.multiply=function(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],u=e[0],l=e[1],c=e[2],h=e[3],f=e[4],p=e[5];return t[0]=n*u+r*l,t[1]=i*u+o*l,t[2]=n*c+r*h,t[3]=i*c+o*h,t[4]=n*f+r*p+s,t[5]=i*f+o*p+a,t},Qe.set=function(t,e,n,i,r,o,s){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t},Qe.setFromArray=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},Qe.apply=function(t,e){var n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e},Qe.rotate=function(t,e){var n=Math.cos(e),i=Math.sin(e);return Qe.multiply(t,Qe.set(Qe.tmp_,n,i,-i,n,0,0))},Qe.scale=function(t,e,n){return Qe.multiply(t,Qe.set(Qe.tmp_,e,0,0,n,0,0))},Qe.translate=function(t,e,n){return Qe.multiply(t,Qe.set(Qe.tmp_,1,0,0,1,e,n))},Qe.compose=function(t,e,n,i,r,o,s,a){var u=Math.sin(o),l=Math.cos(o);return t[0]=i*l,t[1]=r*u,t[2]=-i*u,t[3]=r*l,t[4]=s*i*l-a*i*u+e,t[5]=s*r*u+a*r*l+n,t},Qe.invert=function(t){var e=Qe.determinant(t);b.assert(0!==e,32);var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5];return t[0]=o/e,t[1]=-i/e,t[2]=-r/e,t[3]=n/e,t[4]=(r*a-o*s)/e,t[5]=-(n*a-i*s)/e,t},Qe.determinant=function(t){return t[0]*t[3]-t[1]*t[2]};function tn(){gt.call(this),this.extent_=$t.createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.tmpTransform_=en.create()}var en=Qe;St.inherits(tn,gt),tn.prototype.clone=function(){},tn.prototype.closestPointXY=function(t,e,n,i){},tn.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},tn.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},tn.prototype.computeExtent=function(t){},tn.prototype.containsXY=Ke.FALSE,tn.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),$t.returnOrUpdate(this.extent_,t)},tn.prototype.rotate=function(t,e){},tn.prototype.scale=function(t,e,n){},tn.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},tn.prototype.getSimplifiedGeometry=function(t){},tn.prototype.getType=function(){},tn.prototype.applyTransform=function(t){},tn.prototype.intersectsExtent=function(t){},tn.prototype.translate=function(t,e){},tn.prototype.transform=function(s,a){var u=this.tmpTransform_,t=(s=W.get(s)).getUnits()==O.TILE_PIXELS?function(t,e,n){var i=s.getExtent(),r=s.getWorldExtent(),o=$t.getHeight(r)/$t.getHeight(i);return en.compose(u,r[0],r[3],o,-o,0,0,0),Je.transform2D(t,0,t.length,n,u,e),W.getTransform(s,a)(t,e,n)}:W.getTransform(s,a);return this.applyTransform(t),this};function nn(){rn.call(this),this.layout=ze.XY,this.stride=2,this.flatCoordinates=null}var rn=tn;St.inherits(nn,rn),nn.getLayoutForStride_=function(t){var e;return 2==t?e=ze.XY:3==t?e=ze.XYZ:4==t&&(e=ze.XYZM),e},nn.getStrideForLayout=function(t){var e;return t==ze.XY?e=2:t==ze.XYZ||t==ze.XYM?e=3:t==ze.XYZM&&(e=4),e},nn.prototype.containsXY=Ke.FALSE,nn.prototype.computeExtent=function(t){return $t.createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},nn.prototype.getCoordinates=function(){},nn.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},nn.prototype.getFlatCoordinates=function(){return this.flatCoordinates},nn.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},nn.prototype.getLayout=function(){return this.layout},nn.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Tt.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?this.simplifiedGeometryCache[e]=n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},nn.prototype.getSimplifiedGeometryInternal=function(t){return this},nn.prototype.getStride=function(){return this.stride},nn.prototype.setFlatCoordinatesInternal=function(t,e){this.stride=nn.getStrideForLayout(t),this.layout=t,this.flatCoordinates=e},nn.prototype.setCoordinates=function(t,e){},nn.prototype.setLayout=function(t,e,n){var i;if(t)i=nn.getStrideForLayout(t);else{for(var r=0;r<n;++r){if(0===e.length)return this.layout=ze.XY,void(this.stride=2);e=e[0]}i=e.length,t=nn.getLayoutForStride_(i)}this.layout=t,this.stride=i},nn.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},nn.prototype.rotate=function(t,e){var n,i=this.getFlatCoordinates();i&&(n=this.getStride(),Je.rotate(i,0,i.length,n,t,e,i),this.changed())},nn.prototype.scale=function(t,e,n){var i=e;void 0===i&&(i=t);var r,o=(o=n)||$t.getCenter(this.getExtent()),s=this.getFlatCoordinates();s&&(r=this.getStride(),Je.scale(s,0,s.length,r,t,i,o,s),this.changed())},nn.prototype.translate=function(t,e){var n,i=this.getFlatCoordinates();i&&(n=this.getStride(),Je.translate(i,0,i.length,n,t,e,i),this.changed())},nn.transform2D=function(t,e,n){var i=t.getFlatCoordinates();if(i){var r=t.getStride();return Je.transform2D(i,0,i.length,r,e,n)}return null};function on(t,e){sn.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)}var sn=nn,an={linearRing:function(t,e,n,i){for(var r=0,o=t[n-i],s=t[n-i+1];e<n;e+=i){var a=t[e],u=t[e+1];r+=s*a-o*u,o=a,s=u}return r/2},linearRings:function(t,e,n,i){for(var r=0,o=0,s=n.length;o<s;++o){var a=n[o];r+=an.linearRing(t,e,a,i),e=a}return r},linearRingss:function(t,e,n,i){for(var r=0,o=0,s=n.length;o<s;++o){var a=n[o];r+=an.linearRings(t,e,a,i),e=a[a.length-1]}return r}},un=an,ln={point:function(t,e,n,i,r,o,s){var a,u,l=t[e],c=t[e+1],h=t[n]-l,f=t[n+1]-c;if(0==h&&0==f)u=e;else{var p=((r-l)*h+(o-c)*f)/(h*h+f*f);if(1<p)u=n;else{if(0<p){for(a=0;a<i;++a)s[a]=z.lerp(t[e+a],t[n+a],p);return void(s.length=i)}u=e}}for(a=0;a<i;++a)s[a]=t[u+a];s.length=i},getMaxSquaredDelta:function(t,e,n,i,r){var o=t[e],s=t[e+1];for(e+=i;e<n;e+=i){var a=t[e],u=t[e+1],l=z.squaredDistance(o,s,a,u);r<l&&(r=l),o=a,s=u}return r},getsMaxSquaredDelta:function(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o){var a=n[o];r=ln.getMaxSquaredDelta(t,e,a,i,r),e=a}return r},getssMaxSquaredDelta:function(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o){var a=n[o];r=ln.getsMaxSquaredDelta(t,e,a,i,r),e=a[a.length-1]}return r},getClosestPoint:function(t,e,n,i,r,o,s,a,u,l,c){if(e==n)return l;var h,f;if(0===r){if((f=z.squaredDistance(s,a,t[e],t[e+1]))<l){for(h=0;h<i;++h)u[h]=t[e+h];return u.length=i,f}return l}for(var p=c||[NaN,NaN],d=e+i;d<n;)if(ln.point(t,d-i,d,i,s,a,p),(f=z.squaredDistance(s,a,p[0],p[1]))<l){for(l=f,h=0;h<i;++h)u[h]=p[h];d+=u.length=i}else d+=i*Math.max((Math.sqrt(f)-Math.sqrt(l))/r|0,1);if(o&&(ln.point(t,n-i,e,i,s,a,p),(f=z.squaredDistance(s,a,p[0],p[1]))<l)){for(l=f,h=0;h<i;++h)u[h]=p[h];u.length=i}return l},getsClosestPoint:function(t,e,n,i,r,o,s,a,u,l,c){for(var h=c||[NaN,NaN],f=0,p=n.length;f<p;++f){var d=n[f];l=ln.getClosestPoint(t,e,d,i,r,o,s,a,u,l,h),e=d}return l},getssClosestPoint:function(t,e,n,i,r,o,s,a,u,l,c){for(var h=c||[NaN,NaN],f=0,p=n.length;f<p;++f){var d=n[f];l=ln.getsClosestPoint(t,e,d,i,r,o,s,a,u,l,h),e=d[d.length-1]}return l}},cn=ln,hn={coordinate:function(t,e,n,i){for(var r=0,o=n.length;r<o;++r)t[e++]=n[r];return e},coordinates:function(t,e,n,i){for(var r=0,o=n.length;r<o;++r)for(var s=n[r],a=0;a<i;++a)t[e++]=s[a];return e},coordinatess:function(t,e,n,i,r){for(var o=r||[],s=0,a=0,u=n.length;a<u;++a){var l=hn.coordinates(t,e,n[a],i);e=o[s++]=l}return o.length=s,o},coordinatesss:function(t,e,n,i,r){for(var o=r||[],s=0,a=0,u=n.length;a<u;++a){var l=hn.coordinatess(t,e,n[a],i,o[s]);e=(o[s++]=l)[l.length-1]}return o.length=s,o}},fn=hn,pn={coordinates:function(t,e,n,i,r){for(var o=void 0!==r?r:[],s=0,a=e;a<n;a+=i)o[s++]=t.slice(a,a+i);return o.length=s,o},coordinatess:function(t,e,n,i,r){for(var o=void 0!==r?r:[],s=0,a=0,u=n.length;a<u;++a){var l=n[a];o[s++]=pn.coordinates(t,e,l,i,o[s]),e=l}return o.length=s,o},coordinatesss:function(t,e,n,i,r){for(var o=void 0!==r?r:[],s=0,a=0,u=n.length;a<u;++a){var l=n[a];o[s++]=pn.coordinatess(t,e,l,i,o[s]),e=l[l.length-1]}return o.length=s,o}},dn=pn,gn={lineString:function(t,e,n,i,r,o,s){var a=void 0!==s?s:[];return o||(n=gn.radialDistance(t,e,n,i,r,a,0),t=a,e=0,i=2),a.length=gn.douglasPeucker(t,e,n,i,r,a,0),a},douglasPeucker:function(t,e,n,i,r,o,s){var a=(n-e)/i;if(a<3){for(;e<n;e+=i)o[s++]=t[e],o[s++]=t[e+1];return s}var u=new Array(a);u[0]=1,u[a-1]=1;for(var l=[e,n-i],c=0;0<l.length;){for(var h=l.pop(),f=l.pop(),p=0,d=t[f],g=t[f+1],v=t[h],m=t[h+1],y=f+i;y<h;y+=i){var _=t[y],E=t[y+1],x=z.squaredSegmentDistance(_,E,d,g,v,m);p<x&&(c=y,p=x)}r<p&&(u[(c-e)/i]=1,f+i<c&&l.push(f,c),c+i<h&&l.push(c,h))}for(y=0;y<a;++y)u[y]&&(o[s++]=t[e+y*i],o[s++]=t[e+y*i+1]);return s},douglasPeuckers:function(t,e,n,i,r,o,s,a){for(var u=0,l=n.length;u<l;++u){var c=n[u];s=gn.douglasPeucker(t,e,c,i,r,o,s),a.push(s),e=c}return s},douglasPeuckerss:function(t,e,n,i,r,o,s,a){for(var u=0,l=n.length;u<l;++u){var c=n[u],h=[];s=gn.douglasPeuckers(t,e,c,i,r,o,s,h),a.push(h),e=c[c.length-1]}return s},radialDistance:function(t,e,n,i,r,o,s){if(n<=e+i){for(;e<n;e+=i)o[s++]=t[e],o[s++]=t[e+1];return s}var a=t[e],u=t[e+1],l=o[s++]=a,c=o[s++]=u;for(e+=i;e<n;e+=i)l=t[e],c=t[e+1],z.squaredDistance(a,u,l,c)>r&&(a=o[s++]=l,u=o[s++]=c);return l==a&&c==u||(o[s++]=l,o[s++]=c),s},snap:function(t,e){return e*Math.round(t/e)},quantize:function(t,e,n,i,r,o,s){if(e==n)return s;var a,u=gn.snap(t[e],r),l=gn.snap(t[e+1],r);e+=i,o[s++]=u,o[s++]=l;do{if(a=gn.snap(t[e],r),d=gn.snap(t[e+1],r),(e+=i)==n)return o[s++]=a,o[s++]=d,s}while(a==u&&d==l);for(;e<n;){var c,h,f,p,d,g=gn.snap(t[e],r),v=gn.snap(t[e+1],r);e+=i,g==a&&v==d||(a=((c=a-u)*(p=v-l)==(h=d-l)*(f=g-u)&&(c<0&&f<c||c==f||0<c&&c<f)&&(h<0&&p<h||h==p||0<h&&h<p)||(u=o[s++]=a,l=o[s++]=d),g),d=v)}return o[s++]=a,o[s++]=d,s},quantizes:function(t,e,n,i,r,o,s,a){for(var u=0,l=n.length;u<l;++u){var c=n[u];s=gn.quantize(t,e,c,i,r,o,s),a.push(s),e=c}return s},quantizess:function(t,e,n,i,r,o,s,a){for(var u=0,l=n.length;u<l;++u){var c=n[u],h=[];s=gn.quantizes(t,e,c,i,r,o,s,h),a.push(h),e=c[c.length-1]}return s}},vn=gn;St.inherits(on,sn),on.prototype.clone=function(){var t=new on(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},on.prototype.closestPointXY=function(t,e,n,i){return i<$t.closestSquaredDistanceXY(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cn.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cn.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))},on.prototype.getArea=function(){return un.linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},on.prototype.getCoordinates=function(){return dn.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},on.prototype.getSimplifiedGeometryInternal=function(t){var e=[];e.length=vn.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);var n=new on(null);return n.setFlatCoordinates(ze.XY,e),n},on.prototype.getType=function(){return I.LINEAR_RING},on.prototype.intersectsExtent=function(t){},on.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fn.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(ze.XY,null)},on.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};function mn(t,e){sn.call(this),this.setCoordinates(t,e)}var yn=on;St.inherits(mn,sn),mn.prototype.clone=function(){var t=new mn(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},mn.prototype.closestPointXY=function(t,e,n,i){var r=this.flatCoordinates,o=z.squaredDistance(t,e,r[0],r[1]);if(o<i){for(var s=this.stride,a=0;a<s;++a)n[a]=r[a];return n.length=s,o}return i},mn.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},mn.prototype.computeExtent=function(t){return $t.createOrUpdateFromCoordinate(this.flatCoordinates,t)},mn.prototype.getType=function(){return I.POINT},mn.prototype.intersectsExtent=function(t){return $t.containsXY(t,this.flatCoordinates[0],this.flatCoordinates[1])},mn.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fn.coordinate(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(ze.XY,null)},mn.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};function _n(t,e){sn.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)}var En=mn,xn={linearRingContainsExtent:function(e,n,i,r,t){return!$t.forEachCorner(t,function(t){return!xn.linearRingContainsXY(e,n,i,r,t[0],t[1])})},linearRingContainsXY:function(t,e,n,i,r,o){for(var s=0,a=t[n-i],u=t[n-i+1];e<n;e+=i){var l=t[e],c=t[e+1];u<=o?o<c&&0<(l-a)*(o-u)-(r-a)*(c-u)&&s++:c<=o&&(l-a)*(o-u)-(r-a)*(c-u)<0&&s--,a=l,u=c}return 0!==s},linearRingsContainsXY:function(t,e,n,i,r,o){if(0===n.length)return!1;if(!xn.linearRingContainsXY(t,e,n[0],i,r,o))return!1;for(var s=1,a=n.length;s<a;++s)if(xn.linearRingContainsXY(t,n[s-1],n[s],i,r,o))return!1;return!0},linearRingssContainsXY:function(t,e,n,i,r,o){if(0===n.length)return!1;for(var s=0,a=n.length;s<a;++s){var u=n[s];if(xn.linearRingsContainsXY(t,e,u,i,r,o))return!0;e=u[u.length-1]}return!1}},Cn=xn,Sn={linearRings:function(t,e,n,i,r,o,s){for(var a,u,l,c,h=r[o+1],f=[],p=0,d=n.length;p<d;++p)for(var g=n[p],v=t[g-i],m=t[g-i+1],y=e;y<g;y+=i)l=t[y],c=t[y+1],(h<=m&&c<=h||m<=h&&h<=c)&&(u=(h-m)/(c-m)*(l-v)+v,f.push(u)),v=l,m=c;var _=NaN,E=-1/0;for(f.sort(Rt.numberSafeCompareFunction),v=f[0],y=1,a=f.length;y<a;++y){l=f[y];var x=Math.abs(l-v);E<x&&(u=(v+l)/2,Cn.linearRingsContainsXY(t,e,n,i,u,h)&&(_=u,E=x)),v=l}return isNaN(_)&&(_=r[o]),s?(s.push(_,h,E),s):[_,h,E]},linearRingss:function(t,e,n,i,r){for(var o=[],s=0,a=n.length;s<a;++s){var u=n[s],o=Sn.linearRings(t,e,u,i,r,2*s,o);e=u[u.length-1]}return o}},$n=Sn,Tn={forEach:function(t,e,n,i,r,o){for(var s,a=[t[e],t[e+1]],u=[];e+i<n;e+=i){if(u[0]=t[e+i],u[1]=t[e+i+1],s=r.call(o,a,u))return s;a[0]=u[0],a[1]=u[1]}return!1}},Rn=Tn,wn={lineString:function(t,e,n,i,r){var o=$t.extendFlatCoordinates($t.createEmpty(),t,e,n,i);return!!$t.intersects(r,o)&&(!!$t.containsExtent(r,o)||(o[0]>=r[0]&&o[2]<=r[2]||(o[1]>=r[1]&&o[3]<=r[3]||Rn.forEach(t,e,n,i,function(t,e){return $t.intersectsSegment(r,t,e)}))))},lineStrings:function(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o){if(wn.lineString(t,e,n[o],i,r))return!0;e=n[o]}return!1},linearRing:function(t,e,n,i,r){return!!wn.lineString(t,e,n,i,r)||(!!Cn.linearRingContainsXY(t,e,n,i,r[0],r[1])||(!!Cn.linearRingContainsXY(t,e,n,i,r[0],r[3])||(!!Cn.linearRingContainsXY(t,e,n,i,r[2],r[1])||!!Cn.linearRingContainsXY(t,e,n,i,r[2],r[3]))))},linearRings:function(t,e,n,i,r){if(!wn.linearRing(t,e,n[0],i,r))return!1;if(1===n.length)return!0;for(var o=1,s=n.length;o<s;++o)if(Cn.linearRingContainsExtent(t,n[o-1],n[o],i,r))return!1;return!0},linearRingss:function(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o){var a=n[o];if(wn.linearRings(t,e,a,i,r))return!0;e=a[a.length-1]}return!1}},bn=wn,In={coordinates:function(t,e,n,i){for(;e<n-i;){for(var r=0;r<i;++r){var o=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=o}e+=i,n-=i}}},An=In,On={linearRingIsClockwise:function(t,e,n,i){for(var r=0,o=t[n-i],s=t[n-i+1];e<n;e+=i){var a=t[e],u=t[e+1];r+=(a-o)*(u+s),o=a,s=u}return 0<r},linearRingsAreOriented:function(t,e,n,i,r){for(var o=void 0!==r&&r,s=0,a=n.length;s<a;++s){var u=n[s],l=On.linearRingIsClockwise(t,e,u,i);if(0===s){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=u}return!0},linearRingssAreOriented:function(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o)if(!On.linearRingsAreOriented(t,e,n[o],i,r))return!1;return!0},orientLinearRings:function(t,e,n,i,r){for(var o=void 0!==r&&r,s=0,a=n.length;s<a;++s){var u=n[s],l=On.linearRingIsClockwise(t,e,u,i);(0===s?o&&l||!o&&!l:o&&!l||!o&&l)&&An.coordinates(t,e,u,i),e=u}return e},orientLinearRingss:function(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o)e=On.orientLinearRings(t,e,n[o],i,r);return e}},Pn=On;St.inherits(_n,sn),_n.prototype.appendLinearRing=function(t){this.flatCoordinates?Rt.extend(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},_n.prototype.clone=function(){var t=new _n(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},_n.prototype.closestPointXY=function(t,e,n,i){return i<$t.closestSquaredDistanceXY(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cn.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cn.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))},_n.prototype.containsXY=function(t,e){return Cn.linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},_n.prototype.getArea=function(){return un.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},_n.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Pn.orientLinearRings(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,dn.coordinatess(e,0,this.ends_,this.stride)},_n.prototype.getEnds=function(){return this.ends_},_n.prototype.getFlatInteriorPoint=function(){var t;return this.flatInteriorPointRevision_!=this.getRevision()&&(t=$t.getCenter(this.getExtent()),this.flatInteriorPoint_=$n.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()),this.flatInteriorPoint_},_n.prototype.getInteriorPoint=function(){return new En(this.getFlatInteriorPoint(),ze.XYM)},_n.prototype.getLinearRingCount=function(){return this.ends_.length},_n.prototype.getLinearRing=function(t){if(t<0||this.ends_.length<=t)return null;var e=new yn(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},_n.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[],r=0,o=0,s=n.length;o<s;++o){var a=n[o],u=new yn(null);u.setFlatCoordinates(t,e.slice(r,a)),i.push(u),r=a}return i},_n.prototype.getOrientedFlatCoordinates=function(){var t;return this.orientedRevision_!=this.getRevision()&&(t=this.flatCoordinates,Pn.linearRingsAreOriented(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Pn.orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()),this.orientedFlatCoordinates_},_n.prototype.getSimplifiedGeometryInternal=function(t){var e=[],n=[];e.length=vn.quantizes(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n);var i=new _n(null);return i.setFlatCoordinates(ze.XY,e,n),i},_n.prototype.getType=function(){return I.POLYGON},_n.prototype.intersectsExtent=function(t){return bn.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},_n.prototype.setCoordinates=function(t,e){var n;t?(this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]),n=fn.coordinatess(this.flatCoordinates,0,t,this.stride,this.ends_),this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()):this.setFlatCoordinates(ze.XY,null,this.ends_)},_n.prototype.setFlatCoordinates=function(t,e,n){this.setFlatCoordinatesInternal(t,e),this.ends_=n,this.changed()},_n.circular=function(t,e,n,i){for(var r=i||32,o=[],s=0;s<r;++s)Rt.extend(o,t.offset(e,n,2*Math.PI*s/r));o.push(o[0],o[1]);var a=new _n(null);return a.setFlatCoordinates(ze.XY,o,[o.length]),a},_n.fromExtent=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=[e,n,e,r,i,r,i,n,e,n],s=new _n(null);return s.setFlatCoordinates(ze.XY,o,[o.length]),s},_n.fromCircle=function(t,e,n){for(var i=e||32,r=t.getStride(),o=t.getLayout(),s=new _n(null,o),a=r*(i+1),u=new Array(a),l=0;l<a;l++)u[l]=0;var c=[u.length];return s.setFlatCoordinates(o,u,c),_n.makeRegular(s,t.getCenter(),t.getRadius(),n),s},_n.makeRegular=function(t,e,n,i){for(var r,o,s=t.getFlatCoordinates(),a=t.getLayout(),u=t.getStride(),l=t.getEnds(),c=s.length/u-1,h=i||0,f=0;f<=c;++f)o=f*u,r=h+2*z.modulo(f,c)*Math.PI/c,s[o]=e[0]+n*Math.cos(r),s[1+o]=e[1]+n*Math.sin(r);t.setFlatCoordinates(a,s,l)};function Ln(t){gt.call(this);var e=Tt.assign({},t);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=W.createProjection(e.projection,"EPSG:3857"),this.applyOptions_(e)}var Mn=_n;St.inherits(Ln,gt),Ln.prototype.applyOptions_=function(t){var e={};e[Be.CENTER]=void 0!==t.center?t.center:null;var n=Ln.createResolutionConstraint_(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=n.minZoom;var i=Ln.createCenterConstraint_(t),r=n.constraint,o=Ln.createRotationConstraint_(t);this.constraints_={center:i,resolution:r,rotation:o},void 0!==t.resolution?e[Be.RESOLUTION]=t.resolution:void 0!==t.zoom&&(e[Be.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[Be.RESOLUTION]=z.clamp(Number(this.getResolution()||e[Be.RESOLUTION]),this.minResolution_,this.maxResolution_))),e[Be.ROTATION]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},Ln.prototype.getUpdatedOptions_=function(t){var e=Tt.assign({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),Tt.assign({},e,t)},Ln.prototype.animate=function(t){var e,n=arguments.length;if(1<n&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var i=arguments[n-1];return i.center&&this.setCenter(i.center),void 0!==i.zoom&&this.setZoom(i.zoom),void 0!==i.rotation&&this.setRotation(i.rotation),void(e&&e(!0))}for(var r=Date.now(),o=this.getCenter().slice(),s=this.getResolution(),a=this.getRotation(),u=[],l=0;l<n;++l){var c,h=arguments[l],f={start:r,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||jt.inAndOut};h.center&&(f.sourceCenter=o,f.targetCenter=h.center,o=f.targetCenter),void 0!==h.zoom?(f.sourceResolution=s,f.targetResolution=this.constrainResolution(this.maxResolution_,h.zoom-this.minZoom_,0),s=f.targetResolution):h.resolution&&(f.sourceResolution=s,f.targetResolution=h.resolution,s=f.targetResolution),void 0!==h.rotation&&(f.sourceRotation=a,c=z.modulo(h.rotation-a+Math.PI,2*Math.PI)-Math.PI,f.targetRotation=a+c,a=f.targetRotation),f.callback=e,Ln.isNoopAnimation(f)?f.complete=!0:r+=f.duration,u.push(f)}this.animations_.push(u),this.setHint(Ve.ANIMATING,1),this.updateAnimations_()},Ln.prototype.getAnimating=function(){return 0<this.hints_[Ve.ANIMATING]},Ln.prototype.getInteracting=function(){return 0<this.hints_[Ve.INTERACTING]},Ln.prototype.cancelAnimations=function(){this.setHint(Ve.ANIMATING,-this.hints_[Ve.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var n=this.animations_[t];n[0].callback&&n[0].callback(!1)}this.animations_.length=0},Ln.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;0<=n;--n){for(var i,r=this.animations_[n],o=!0,s=0,a=r.length;s<a;++s){var u=r[s];if(!u.complete){var l=t-u.start,c=0<u.duration?l/u.duration:1;1<=c?(u.complete=!0,c=1):o=!1;var h,f,p,d,g,v,m=u.easing(c);if(u.sourceCenter&&(h=u.sourceCenter[0],f=u.sourceCenter[1],p=h+m*(u.targetCenter[0]-h),d=f+m*(u.targetCenter[1]-f),this.set(Be.CENTER,[p,d])),u.sourceResolution&&u.targetResolution&&(g=1===m?u.targetResolution:u.sourceResolution+m*(u.targetResolution-u.sourceResolution),u.anchor&&this.set(Be.CENTER,this.calculateCenterZoom(g,u.anchor)),this.set(Be.RESOLUTION,g)),void 0!==u.sourceRotation&&void 0!==u.targetRotation&&(v=1===m?z.modulo(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+m*(u.targetRotation-u.sourceRotation),u.anchor&&this.set(Be.CENTER,this.calculateCenterRotate(v,u.anchor)),this.set(Be.ROTATION,v)),e=!0,!u.complete)break}}o&&(this.animations_[n]=null,this.setHint(Ve.ANIMATING,-1),(i=r[0].callback)&&i(!0))}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},Ln.prototype.calculateCenterRotate=function(t,e){var n,i=this.getCenter();return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],Xe.rotate(n,t-this.getRotation()),Xe.add(n,e)),n},Ln.prototype.calculateCenterZoom=function(t,e){var n,i=this.getCenter(),r=this.getResolution();return void 0!==i&&void 0!==r&&(n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]),n},Ln.prototype.getSizeFromViewport_=function(){var t,e=[100,100],n='.ol-viewport[data-view="'+St.getUid(this)+'"]',i=document.querySelector(n);return i&&(t=getComputedStyle(i),e[0]=parseInt(t.width,10),e[1]=parseInt(t.height,10)),e},Ln.prototype.constrainCenter=function(t){return this.constraints_.center(t)},Ln.prototype.constrainResolution=function(t,e,n){var i=e||0,r=n||0;return this.constraints_.resolution(t,i,r)},Ln.prototype.constrainRotation=function(t,e){var n=e||0;return this.constraints_.rotation(t,n)},Ln.prototype.getCenter=function(){return this.get(Be.CENTER)},Ln.prototype.getConstraints=function(){return this.constraints_},Ln.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},Ln.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),n=this.getCenter();b.assert(n,1);var i=this.getResolution();b.assert(void 0!==i,2);var r=this.getRotation();return b.assert(void 0!==r,3),$t.getForViewAndSize(n,i,r,e)},Ln.prototype.getMaxResolution=function(){return this.maxResolution_},Ln.prototype.getMinResolution=function(){return this.minResolution_},Ln.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},Ln.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},Ln.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},Ln.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},Ln.prototype.getProjection=function(){return this.projection_},Ln.prototype.getResolution=function(){return this.get(Be.RESOLUTION)},Ln.prototype.getResolutions=function(){return this.resolutions_},Ln.prototype.getResolutionForExtent=function(t,e){var n=e||this.getSizeFromViewport_(),i=$t.getWidth(t)/n[0],r=$t.getHeight(t)/n[1];return Math.max(i,r)},Ln.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.maxResolution_,i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(t){return n/Math.pow(e,t*r)}},Ln.prototype.getRotation=function(){return this.get(Be.ROTATION)},Ln.prototype.getValueForResolutionFunction=function(t){var e=t||2,n=this.maxResolution_,i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(t){return Math.log(n/t)/Math.log(e)/r}},Ln.prototype.getState=function(){var t=this.getCenter(),e=this.getProjection(),n=this.getResolution(),i=this.getRotation();return{center:t.slice(),projection:void 0!==e?e:null,resolution:n,rotation:i,zoom:this.getZoom()}},Ln.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},Ln.prototype.getZoomForResolution=function(t){var e,n,i,r=this.minZoom_||0;return i=this.resolutions_?(r=e=Rt.linearFindNearest(this.resolutions_,t,1),n=this.resolutions_[e],e==this.resolutions_.length-1?2:n/this.resolutions_[e+1]):(n=this.maxResolution_,this.zoomFactor_),r+Math.log(n/t)/Math.log(i)},Ln.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},Ln.prototype.fit=function(t,e){var n,i=e||{},r=(r=i.size)||this.getSizeFromViewport_();t instanceof sn?t.getType()===I.CIRCLE?(t=t.getExtent(),(n=Mn.fromExtent(t)).rotate(this.getRotation(),$t.getCenter(t))):n=t:(b.assert(Array.isArray(t),24),b.assert(!$t.isEmpty(t),25),n=Mn.fromExtent(t));for(var o=void 0!==i.padding?i.padding:[0,0,0,0],s=void 0===i.constrainResolution||i.constrainResolution,a=void 0!==i.nearest&&i.nearest,u=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.constrainResolution(this.maxResolution_,i.maxZoom-this.minZoom_,0):0,l=n.getFlatCoordinates(),c=this.getRotation(),h=Math.cos(-c),f=Math.sin(-c),p=1/0,d=1/0,g=-1/0,v=-1/0,m=n.getStride(),y=0,_=l.length;y<_;y+=m)var E=l[y]*h-l[y+1]*f,x=l[y]*f+l[y+1]*h,p=Math.min(p,E),d=Math.min(d,x),g=Math.max(g,E),v=Math.max(v,x);var C,S=this.getResolutionForExtent([p,d,g,v],[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]),S=isNaN(S)?u:Math.max(S,u);s&&(C=this.constrainResolution(S,0,0),!a&&C<S&&(C=this.constrainResolution(C,-1,0)),S=C),f=-f;var $=(p+g)/2,T=(d+v)/2,R=[($+=(o[1]-o[3])/2*S)*h-(T+=(o[0]-o[2])/2*S)*f,T*h+$*f],w=i.callback?i.callback:St.nullFunction;void 0!==i.duration?this.animate({resolution:S,center:R,duration:i.duration,easing:i.easing},w):(this.setResolution(S),this.setCenter(R),setTimeout(w.bind(void 0,!0),0))},Ln.prototype.centerOn=function(t,e,n){var i=this.getRotation(),r=Math.cos(-i),o=Math.sin(-i),s=t[0]*r-t[1]*o,a=t[1]*r+t[0]*o,u=this.getResolution(),l=(s+=(e[0]/2-n[0])*u)*r-(a+=(n[1]-e[1]/2)*u)*(o=-o),c=a*r+s*o;this.setCenter([l,c])},Ln.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},Ln.prototype.rotate=function(t,e){var n;void 0!==e&&(n=this.calculateCenterRotate(t,e),this.setCenter(n)),this.setRotation(t)},Ln.prototype.setCenter=function(t){this.set(Be.CENTER,t),this.getAnimating()&&this.cancelAnimations()},Ln.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},Ln.prototype.setResolution=function(t){this.set(Be.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},Ln.prototype.setRotation=function(t){this.set(Be.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},Ln.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},Ln.createCenterConstraint_=function(t){return void 0!==t.extent?ke.createExtent(t.extent):ke.none},Ln.createResolutionConstraint_=function(t){var e,n,i,r,o,s,a,u=void 0!==t.minZoom?t.minZoom:St.DEFAULT_MIN_ZOOM,l=void 0!==t.maxZoom?t.maxZoom:28,c=void 0!==t.zoomFactor?t.zoomFactor:2;return{constraint:void 0!==t.resolutions?(n=(e=t.resolutions)[u],i=void 0!==e[l]?e[l]:e[e.length-1],Ue.createSnapToResolutions(e)):(a=(s=((o=(r=W.createProjection(t.projection,"EPSG:3857")).getExtent())?Math.max($t.getWidth(o),$t.getHeight(o)):360*W.METERS_PER_UNIT[O.DEGREES]/r.getMetersPerUnit())/St.DEFAULT_TILE_SIZE/Math.pow(2,St.DEFAULT_MIN_ZOOM))/Math.pow(2,28-St.DEFAULT_MIN_ZOOM),void 0!==(n=t.maxResolution)?u=0:n=s/Math.pow(c,u),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(c,l):s/Math.pow(c,l):a),l=u+Math.floor(Math.log(n/i)/Math.log(c)),i=n/Math.pow(c,l-u),Ue.createSnapToPower(c,n,l-u)),maxResolution:n,minResolution:i,minZoom:u,zoomFactor:c}},Ln.createRotationConstraint_=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?je.createSnapToZero():!1!==e&&"number"==typeof e?je.createSnapToN(e):je.none}return je.disable},Ln.isNoopAnimation=function(t){return!(t.sourceCenter&&t.targetCenter&&!Xe.equals(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)};var Dn=Ln,Fn=function(t){var e=t||{},n=Tt.assign({},e);delete n.layers;var i=e.layers;Mt.call(this,n),this.layersListenerKeys_=[],this.listenerKeys_={},rt.listen(this,gt.getChangeEventType(Fn.Property_.LAYERS),this.handleLayersChanged_,this),i?Array.isArray(i)?i=new mt(i.slice(),{unique:!0}):b.assert(i instanceof mt,43):i=new mt(void 0,{unique:!0}),this.setLayers(i)};St.inherits(Fn,Mt),Fn.prototype.handleLayerChange_=function(){this.changed()},Fn.prototype.handleLayersChanged_=function(t){this.layersListenerKeys_.forEach(rt.unlistenByKey),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var n in this.layersListenerKeys_.push(rt.listen(e,tt.ADD,this.handleLayersAdd_,this),rt.listen(e,tt.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[n].forEach(rt.unlistenByKey);Tt.clear(this.listenerKeys_);for(var i,r=e.getArray(),o=0,s=r.length;o<s;o++)i=r[o],this.listenerKeys_[St.getUid(i).toString()]=[rt.listen(i,et.PROPERTYCHANGE,this.handleLayerChange_,this),rt.listen(i,ht.CHANGE,this.handleLayerChange_,this)];this.changed()},Fn.prototype.handleLayersAdd_=function(t){var e=t.element,n=St.getUid(e).toString();this.listenerKeys_[n]=[rt.listen(e,et.PROPERTYCHANGE,this.handleLayerChange_,this),rt.listen(e,ht.CHANGE,this.handleLayerChange_,this)],this.changed()},Fn.prototype.handleLayersRemove_=function(t){var e=t.element,n=St.getUid(e).toString();this.listenerKeys_[n].forEach(rt.unlistenByKey),delete this.listenerKeys_[n],this.changed()},Fn.prototype.getLayers=function(){return this.get(Fn.Property_.LAYERS)},Fn.prototype.setLayers=function(t){this.set(Fn.Property_.LAYERS,t)},Fn.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},Fn.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var i,r=this.getLayerState(),o=n,s=e.length;o<s;o++)(i=e[o]).opacity*=r.opacity,i.visible=i.visible&&r.visible,i.maxResolution=Math.min(i.maxResolution,r.maxResolution),i.minResolution=Math.max(i.minResolution,r.minResolution),void 0!==r.extent&&(void 0!==i.extent?i.extent=$t.getIntersection(i.extent,r.extent):i.extent=r.extent);return e},Fn.prototype.getSourceState=function(){return Ft.READY},Fn.Property_={LAYERS:"layers"};var kn=Fn,Nn={MAP_RENDERER:"MAP_RENDERER",LAYER_RENDERER:"LAYER_RENDERER"},Un={mapRendererPlugins_:[],getMapRendererPlugins:function(){return Un.mapRendererPlugins_},layerRendererPlugins_:[],getLayerRendererPlugins:function(){return Un.layerRendererPlugins_},register:function(t,e){switch(t){case Nn.MAP_RENDERER:Un.mapRendererPlugins_.push(e);break;case Nn.LAYER_RENDERER:Un.layerRendererPlugins_.push(e);break;default:throw new Error("Unsupported plugin type: "+t)}},registerMultiple:function(t,e){for(var n=0,i=e.length;n<i;++n)Un.register(t,e[n])}},Gn=Un,jn={CANVAS:"canvas",WEBGL:"webgl"},Vn={buffer:function(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]+2*e,n[1]=t[1]+2*e,n},hasArea:function(t){return 0<t[0]&&0<t[1]},scale:function(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n},toSize:function(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}},Bn=Vn,Wn=function(t){gt.call(this);var e=Wn.createOptionsInternal(t);this.loadTilesWhileAnimating_=void 0!==t.loadTilesWhileAnimating&&t.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==t.loadTilesWhileInteracting&&t.loadTilesWhileInteracting,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:ce.DEVICE_PIXEL_RATIO,this.logos_=e.logos,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=en.create(),this.pixelToCoordinateTransform_=en.create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("DIV"),this.viewport_.className="ol-viewport"+(ce.TOUCH?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var n=[ht.CLICK,ht.DBLCLICK,ht.MOUSEDOWN,ht.TOUCHSTART,ht.MSPOINTERDOWN,he.POINTERDOWN,ht.MOUSEWHEEL,ht.WHEEL],i=0,r=n.length;i<r;++i)rt.listen(this.overlayContainerStopEvent_,n[i],ut.stopPropagation);for(var o in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new Ae(this,t.moveTolerance),he)rt.listen(this.mapBrowserEventHandler_,he[o],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=e.keyboardEventTarget,this.keyHandlerKeys_=null,rt.listen(this.viewport_,ht.WHEEL,this.handleBrowserEvent,this),rt.listen(this.viewport_,ht.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=e.controls||new mt,this.interactions=e.interactions||new mt,this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=e.mapRendererPlugin.create(this.viewport_,this),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new De(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},rt.listen(this,gt.getChangeEventType(Oe.LAYERGROUP),this.handleLayerGroupChanged_,this),rt.listen(this,gt.getChangeEventType(Oe.VIEW),this.handleViewChanged_,this),rt.listen(this,gt.getChangeEventType(Oe.SIZE),this.handleSizeChanged_,this),rt.listen(this,gt.getChangeEventType(Oe.TARGET),this.handleTargetChanged_,this),this.setProperties(e.values),this.controls.forEach(function(t){t.setMap(this)},this),rt.listen(this.controls,tt.ADD,function(t){t.element.setMap(this)},this),rt.listen(this.controls,tt.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)},this),rt.listen(this.interactions,tt.ADD,function(t){t.element.setMap(this)},this),rt.listen(this.interactions,tt.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_,this),rt.listen(this.overlays_,tt.ADD,function(t){this.addOverlayInternal_(t.element)},this),rt.listen(this.overlays_,tt.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)};St.inherits(Wn,gt),Wn.prototype.addControl=function(t){this.getControls().push(t)},Wn.prototype.addInteraction=function(t){this.getInteractions().push(t)},Wn.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},Wn.prototype.addOverlay=function(t){this.getOverlays().push(t)},Wn.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},Wn.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),rt.unlisten(this.viewport_,ht.WHEEL,this.handleBrowserEvent,this),rt.unlisten(this.viewport_,ht.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(window.removeEventListener(ht.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),gt.prototype.disposeInternal.call(this)},Wn.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var i=this.getCoordinateFromPixel(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==n.layerFilter?n.layerFilter:Ke.TRUE;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,e,null,o,null)}},Wn.prototype.getFeaturesAtPixel=function(t,e){var n=null;return this.forEachFeatureAtPixel(t,function(t){(n=n||[]).push(t)},e),n},Wn.prototype.forEachLayerAtPixel=function(t,e,n,i,r){if(this.frameState_){var o=void 0!==n?n:null,s=void 0!==i?i:Ke.TRUE,a=void 0!==r?r:null;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,e,o,s,a)}},Wn.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixel(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:Ke.TRUE,r=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,i,null)},Wn.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},Wn.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n=t.changedTouches?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},Wn.prototype.getTarget=function(){return this.get(Oe.TARGET)},Wn.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},Wn.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?en.apply(e.pixelToCoordinateTransform,t.slice()):null},Wn.prototype.getControls=function(){return this.controls},Wn.prototype.getOverlays=function(){return this.overlays_},Wn.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},Wn.prototype.getInteractions=function(){return this.interactions},Wn.prototype.getLayerGroup=function(){return this.get(Oe.LAYERGROUP)},Wn.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},Wn.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?en.apply(e.coordinateToPixelTransform,t.slice(0,2)):null},Wn.prototype.getRenderer=function(){return this.renderer_},Wn.prototype.getSize=function(){return this.get(Oe.SIZE)},Wn.prototype.getView=function(){return this.get(Oe.VIEW)},Wn.prototype.getViewport=function(){return this.viewport_},Wn.prototype.getOverlayContainer=function(){return this.overlayContainer_},Wn.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},Wn.prototype.getTilePriority=function(t,e,n,i){var r=this.frameState_;if(!(r&&e in r.wantedTiles))return Me.DROP;if(!r.wantedTiles[e][t.getKey()])return Me.DROP;var o=n[0]-r.focus[0],s=n[1]-r.focus[1];return 65536*Math.log(i)+Math.sqrt(o*o+s*s)/i},Wn.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,i=new re(n,this,t);this.handleMapBrowserEvent(i)},Wn.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e,n=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(e=n.length-1;0<=e;e--){var i=n[e];if(i.getActive())if(!i.handleEvent(t))break}}},Wn.prototype.handlePostRender=function(){var t,e,n,i=this.frameState_,r=this.tileQueue_;r.isEmpty()||(e=t=16,i&&((n=i.viewHints)[Ve.ANIMATING]&&(t=this.loadTilesWhileAnimating_?8:0,e=2),n[Ve.INTERACTING]&&(t=this.loadTilesWhileInteracting_?8:0,e=2)),r.getTilesLoading()<t&&(r.reprioritize(),r.loadMoreTiles(t,e)));for(var o=this.postRenderFunctions_,s=0,a=o.length;s<a;++s)o[s](this,i);o.length=0},Wn.prototype.handleSizeChanged_=function(){this.render()},Wn.prototype.handleTargetChanged_=function(){var t,e;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var n=0,i=this.keyHandlerKeys_.length;n<i;++n)rt.unlistenByKey(this.keyHandlerKeys_[n]);this.keyHandlerKeys_=null}t?(t.appendChild(this.viewport_),e=this.keyboardEventTarget_?this.keyboardEventTarget_:t,this.keyHandlerKeys_=[rt.listen(e,ht.KEYDOWN,this.handleBrowserEvent,this),rt.listen(e,ht.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(ht.RESIZE,this.handleResize_,!1))):(this.renderer_.removeLayerRenderers(),xt.removeNode(this.viewport_),void 0!==this.handleResize_&&(window.removeEventListener(ht.RESIZE,this.handleResize_,!1),this.handleResize_=void 0)),this.updateSize()},Wn.prototype.handleTileChange_=function(){this.render()},Wn.prototype.handleViewPropertyChanged_=function(){this.render()},Wn.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(rt.unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(rt.unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",St.getUid(t)),this.viewPropertyListenerKey_=rt.listen(t,et.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=rt.listen(t,ht.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},Wn.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(rt.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[rt.listen(t,et.PROPERTYCHANGE,this.render,this),rt.listen(t,ht.CHANGE,this.render,this)]),this.render()},Wn.prototype.isRendered=function(){return!!this.frameState_},Wn.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},Wn.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},Wn.prototype.removeControl=function(t){return this.getControls().remove(t)},Wn.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},Wn.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},Wn.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},Wn.prototype.renderFrame_=function(t){var e,n=this.getSize(),i=this.getView(),r=$t.createEmpty(),o=this.frameState_,s=null;if(void 0!==n&&Bn.hasArea(n)&&i&&i.isDef()){for(var a=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=this.getLayerGroup().getLayerStatesArray(),l={},c=0,h=u.length;c<h;++c)l[St.getUid(u[c].layer)]=u[c];var f=(e=i.getState()).center,p=e.resolution/this.pixelRatio_;f[0]=Math.round(f[0]/p)*p,f[1]=Math.round(f[1]/p)*p,s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:r,focus:this.focus_?this.focus_:f,index:this.frameIndex_++,layerStates:l,layerStatesArray:u,logos:Tt.assign({},this.logos_),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:a,wantedTiles:{}}}s&&(s.extent=$t.getForViewAndSize(e.center,e.resolution,e.rotation,s.size,r)),this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),!o||this.previousExtent_&&($t.isEmpty(this.previousExtent_)||$t.equals(s.extent,this.previousExtent_))||(this.dispatchEvent(new ie(_t.MOVESTART,this,o)),this.previousExtent_=$t.createOrUpdateEmpty(this.previousExtent_)),!this.previousExtent_||s.viewHints[Ve.ANIMATING]||s.viewHints[Ve.INTERACTING]||$t.equals(s.extent,this.previousExtent_)||(this.dispatchEvent(new ie(_t.MOVEEND,this,s)),$t.clone(s.extent,this.previousExtent_))),this.dispatchEvent(new ie(_t.POSTRENDER,this,s)),setTimeout(this.handlePostRender.bind(this),0)},Wn.prototype.setLayerGroup=function(t){this.set(Oe.LAYERGROUP,t)},Wn.prototype.setSize=function(t){this.set(Oe.SIZE,t)},Wn.prototype.setTarget=function(t){this.set(Oe.TARGET,t)},Wn.prototype.setView=function(t){this.set(Oe.VIEW,t)},Wn.prototype.skipFeature=function(t){var e=St.getUid(t).toString();this.skippedFeatureUids_[e]=!0,this.render()},Wn.prototype.updateSize=function(){var t,e=this.getTargetElement();e?(t=getComputedStyle(e),this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])):this.setSize(void 0)},Wn.prototype.unskipFeature=function(t){var e=St.getUid(t).toString();delete this.skippedFeatureUids_[e],this.render()},Wn.DEFAULT_RENDERER_TYPES=[jn.CANVAS,jn.WEBGL],Wn.LOGO_URL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC",Wn.createOptionsInternal=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,i={},r={};void 0===t.logo||"boolean"==typeof t.logo&&t.logo?r[Wn.LOGO_URL]="https://openlayers.org/":"string"==typeof(n=t.logo)?r[n]="":n instanceof HTMLElement?r[St.getUid(n).toString()]=n:n&&(b.assert("string"==typeof n.href,44),b.assert("string"==typeof n.src,45),r[n.src]=n.href);var o,s,a=t.layers instanceof kn?t.layers:new kn({layers:t.layers});i[Oe.LAYERGROUP]=a,i[Oe.TARGET]=t.target,i[Oe.VIEW]=void 0!==t.view?t.view:new Dn,void 0!==t.renderer?(Array.isArray(t.renderer)?o=t.renderer:"string"==typeof t.renderer?o=[t.renderer]:b.assert(!1,46),0<=o.indexOf("dom")&&(o=o.concat(Wn.DEFAULT_RENDERER_TYPES))):o=Wn.DEFAULT_RENDERER_TYPES;var u,l,c=Gn.getMapRendererPlugins();t:for(var h=0,f=o.length;h<f;++h)for(var p=o[h],d=0,g=c.length;d<g;++d){var v=c[d];if(v.handles(p)){s=v;break t}}if(!s)throw new Error("Unable to create a map renderer for types: "+o.join(", "));return void 0!==t.controls&&(u=Array.isArray(t.controls)?new mt(t.controls.slice()):(b.assert(t.controls instanceof mt,47),t.controls)),void 0!==t.interactions&&(l=Array.isArray(t.interactions)?new mt(t.interactions.slice()):(b.assert(t.interactions instanceof mt,48),t.interactions)),{controls:u,interactions:l,keyboardEventTarget:e,logos:r,overlays:void 0!==t.overlays?Array.isArray(t.overlays)?new mt(t.overlays.slice()):(b.assert(t.overlays instanceof mt,49),t.overlays):new mt,mapRendererPlugin:s,values:i}};function Hn(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}var qn=Wn;Hn.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},Hn.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},Hn.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[2+e]<t)return!1;for(var n=e-3;0<n&&this.points_[n+2]>t;)n-=3;var i=this.points_[2+e]-this.points_[n+2];if(i<1e3/60)return!1;var r=this.points_[e]-this.points_[n],o=this.points_[1+e]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/i,this.initialVelocity_>this.minVelocity_},Hn.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},Hn.prototype.getAngle=function(){return this.angle_};function Xn(t){gt.call(this),this.map_=null,this.setActive(!0),this.handleEvent=t.handleEvent}var zn=Hn,Yn={ACTIVE:"active"};St.inherits(Xn,gt),Xn.prototype.getActive=function(){return this.get(Yn.ACTIVE)},Xn.prototype.getMap=function(){return this.map_},Xn.prototype.setActive=function(t){this.set(Yn.ACTIVE,t)},Xn.prototype.setMap=function(t){this.map_=t},Xn.pan=function(t,e,n){var i,r=t.getCenter();r&&(i=t.constrainCenter([r[0]+e[0],r[1]+e[1]]),n?t.animate({duration:n,easing:jt.linear,center:i}):t.setCenter(i))},Xn.rotate=function(t,e,n,i){e=t.constrainRotation(e,0),Xn.rotateWithoutConstraints(t,e,n,i)},Xn.rotateWithoutConstraints=function(t,e,n,i){var r,o;void 0!==e&&(r=t.getRotation(),o=t.getCenter(),void 0!==r&&o&&0<i?t.animate({rotation:e,anchor:n,duration:i,easing:jt.easeOut}):t.rotate(e,n))},Xn.zoom=function(t,e,n,i,r){e=t.constrainResolution(e,0,r),Xn.zoomWithoutConstraints(t,e,n,i)},Xn.zoomByDelta=function(t,e,n,i){var r,o,s,a=t.getResolution(),u=t.constrainResolution(a,e,0);void 0!==u&&(r=t.getResolutions(),u=z.clamp(u,t.getMinResolution()||r[r.length-1],t.getMaxResolution()||r[0])),n&&void 0!==u&&u!==a&&(o=t.getCenter(),s=t.calculateCenterZoom(u,n),s=t.constrainCenter(s),n=[(u*o[0]-a*s[0])/(u-a),(u*o[1]-a*s[1])/(u-a)]),Xn.zoomWithoutConstraints(t,u,n,i)},Xn.zoomWithoutConstraints=function(t,e,n,i){var r,o,s;e&&(r=t.getResolution(),o=t.getCenter(),void 0!==r&&o&&e!==r&&i?t.animate({resolution:e,anchor:n,duration:i,easing:jt.easeOut}):(n&&(s=t.calculateCenterZoom(e,n),t.setCenter(s)),t.setResolution(e)))};var Kn=Xn,Zn=function(t){var e=t||{};this.delta_=e.delta?e.delta:1,Kn.call(this,{handleEvent:Zn.handleEvent}),this.duration_=void 0!==e.duration?e.duration:250};St.inherits(Zn,Kn),Zn.handleEvent=function(t){var e,n,i,r,o=!1,s=t.originalEvent;return t.type==he.DBLCLICK&&(e=t.map,n=t.coordinate,i=s.shiftKey?-this.delta_:this.delta_,r=e.getView(),Kn.zoomByDelta(r,i,n,this.duration_),t.preventDefault(),o=!0),!o};var Jn=Zn,Qn={altKeyOnly:function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly:function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey}};Qn.always=Ke.TRUE,Qn.click=function(t){return t.type==he.CLICK},Qn.mouseActionButton=function(t){var e=t.originalEvent;return 0==e.button&&!(ce.WEBKIT&&ce.MAC&&e.ctrlKey)},Qn.never=Ke.FALSE,Qn.pointerMove=function(t){return"pointermove"==t.type},Qn.singleClick=function(t){return t.type==he.SINGLECLICK},Qn.doubleClick=function(t){return t.type==he.DBLCLICK},Qn.noModifierKeys=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Qn.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(ce.MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey},Qn.shiftKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Qn.targetNotEditable=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Qn.mouseOnly=function(t){return b.assert(t.pointerEvent,56),"mouse"==t.pointerEvent.pointerType},Qn.primaryAction=function(t){var e=t.pointerEvent;return e.isPrimary&&0===e.button};var ti=Qn,ei=function(t){var e=t||{},n=e.handleEvent?e.handleEvent:ei.handleEvent;Kn.call(this,{handleEvent:n}),this.handleDownEvent_=e.handleDownEvent?e.handleDownEvent:ei.handleDownEvent,this.handleDragEvent_=e.handleDragEvent?e.handleDragEvent:ei.handleDragEvent,this.handleMoveEvent_=e.handleMoveEvent?e.handleMoveEvent:ei.handleMoveEvent,this.handleUpEvent_=e.handleUpEvent?e.handleUpEvent:ei.handleUpEvent,this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]};St.inherits(ei,Kn),ei.centroid=function(t){for(var e=t.length,n=0,i=0,r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return[n/e,i/e]},ei.prototype.isPointerDraggingEvent_=function(t){var e=t.type;return e===he.POINTERDOWN||e===he.POINTERDRAG||e===he.POINTERUP},ei.prototype.updateTrackedPointers_=function(t){var e,n;this.isPointerDraggingEvent_(t)&&(n=(e=t.pointerEvent).pointerId.toString(),t.type==he.POINTERUP?delete this.trackedPointers_[n]:(t.type==he.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=Tt.getValues(this.trackedPointers_))},ei.handleDragEvent=St.nullFunction,ei.handleUpEvent=Ke.FALSE,ei.handleDownEvent=Ke.FALSE,ei.handleMoveEvent=St.nullFunction,ei.handleEvent=function(t){if(!(t instanceof pe))return!0;var e,n,i=!1;return this.updateTrackedPointers_(t),this.handlingDownUpSequence?t.type==he.POINTERDRAG?this.handleDragEvent_(t):t.type==he.POINTERUP&&(e=this.handleUpEvent_(t),this.handlingDownUpSequence=e&&0<this.targetPointers.length):t.type==he.POINTERDOWN?(n=this.handleDownEvent_(t),this.handlingDownUpSequence=n,i=this.shouldStopEvent(n)):t.type==he.POINTERMOVE&&this.handleMoveEvent_(t),!i},ei.prototype.shouldStopEvent=function(t){return t};var ni=ei,ii=function(t){ni.call(this,{handleDownEvent:ii.handleDownEvent_,handleDragEvent:ii.handleDragEvent_,handleUpEvent:ii.handleUpEvent_});var e=t||{};this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.condition_=e.condition?e.condition:ti.noModifierKeys,this.noKinetic_=!1};St.inherits(ii,ni),ii.handleDragEvent_=function(t){var e,n,i,r,o,s=this.targetPointers,a=ni.centroid(s);s.length==this.lastPointersCount_?(this.kinetic_&&this.kinetic_.update(a[0],a[1]),this.lastCentroid&&(e=this.lastCentroid[0]-a[0],n=a[1]-this.lastCentroid[1],r=(i=t.map.getView()).getState(),o=[e,n],Xe.scale(o,r.resolution),Xe.rotate(o,r.rotation),Xe.add(o,r.center),o=i.constrainCenter(o),i.setCenter(o))):this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=a,this.lastPointersCount_=s.length},ii.handleUpEvent_=function(t){var e,n,i,r,o,s=t.map,a=s.getView();return 0!==this.targetPointers.length?(this.kinetic_&&this.kinetic_.begin(),!(this.lastCentroid=null)):(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()&&(e=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),i=a.getCenter(),r=s.getPixelFromCoordinate(i),o=s.getCoordinateFromPixel([r[0]-e*Math.cos(n),r[1]-e*Math.sin(n)]),a.animate({center:a.constrainCenter(o),duration:500,easing:jt.easeOut})),a.setHint(Ve.INTERACTING,-1),!1)},ii.handleDownEvent_=function(t){if(0<this.targetPointers.length&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,this.handlingDownUpSequence||e.setHint(Ve.INTERACTING,1),e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=1<this.targetPointers.length,!0}return!1},ii.prototype.shouldStopEvent=Ke.FALSE;var ri=ii,oi=function(t){var e=t||{};ni.call(this,{handleDownEvent:oi.handleDownEvent_,handleDragEvent:oi.handleDragEvent_,handleUpEvent:oi.handleUpEvent_}),this.condition_=e.condition?e.condition:ti.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250};St.inherits(oi,ni),oi.handleDragEvent_=function(t){var e,n,i,r,o,s,a;!ti.mouseOnly(t)||(n=(e=t.map).getView()).getConstraints().rotation!==je.disable&&(i=e.getSize(),r=t.pixel,o=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2),void 0!==this.lastAngle_&&(s=o-this.lastAngle_,a=n.getRotation(),Kn.rotateWithoutConstraints(n,a-s)),this.lastAngle_=o)},oi.handleUpEvent_=function(t){if(!ti.mouseOnly(t))return!0;var e=t.map.getView();e.setHint(Ve.INTERACTING,-1);var n=e.getRotation();return Kn.rotate(e,n,void 0,this.duration_),!1},oi.handleDownEvent_=function(t){return!!ti.mouseOnly(t)&&(!(!ti.mouseActionButton(t)||!this.condition_(t))&&(t.map.getView().setHint(Ve.INTERACTING,1),!(this.lastAngle_=void 0)))},oi.prototype.shouldStopEvent=Ke.FALSE;function si(t){this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}var ai=oi;St.inherits(si,st),si.prototype.disposeInternal=function(){this.setMap(null)},si.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"},si.prototype.setMap=function(t){var e;this.map_&&(this.map_.getOverlayContainer().removeChild(this.element_),(e=this.element_.style).left=e.top=e.width=e.height="inherit"),this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},si.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},si.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Mn([n])},si.prototype.getGeometry=function(){return this.geometry_};var ui=si,li=function(t){ni.call(this,{handleDownEvent:li.handleDownEvent_,handleDragEvent:li.handleDragEvent_,handleUpEvent:li.handleUpEvent_});var e=t||{};this.box_=new ui(e.className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,this.startPixel_=null,this.condition_=e.condition?e.condition:ti.always,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:li.defaultBoxEndCondition};St.inherits(li,ni),li.defaultBoxEndCondition=function(t,e,n){var i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_},li.handleDragEvent_=function(t){ti.mouseOnly(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new li.Event(li.EventType_.BOXDRAG,t.coordinate,t)))},li.prototype.getGeometry=function(){return this.box_.getGeometry()},li.prototype.onBoxEnd=St.nullFunction,li.handleUpEvent_=function(t){return!ti.mouseOnly(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd(t),this.dispatchEvent(new li.Event(li.EventType_.BOXEND,t.coordinate,t))),!1)},li.handleDownEvent_=function(t){return!!ti.mouseOnly(t)&&(!(!ti.mouseActionButton(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new li.Event(li.EventType_.BOXSTART,t.coordinate,t)),!0))},li.EventType_={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},li.Event=function(t,e,n){ut.call(this,t),this.coordinate=e,this.mapBrowserEvent=n},St.inherits(li.Event,ut);function ci(t){var e=t||{},n=e.condition?e.condition:ti.shiftKeyOnly;this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out,hi.call(this,{condition:n,className:e.className||"ol-dragzoom"})}var hi=li;St.inherits(ci,hi),ci.prototype.onBoxEnd=function(){var t,e,n,i=this.getMap(),r=i.getView(),o=i.getSize(),s=this.getGeometry().getExtent();this.out_&&(t=r.calculateExtent(o),e=$t.createOrUpdateFromCoordinates([i.getPixelFromCoordinate($t.getBottomLeft(s)),i.getPixelFromCoordinate($t.getTopRight(s))]),n=r.getResolutionForExtent(e,o),$t.scaleFromCenter(t,1/n),s=t);var a=r.constrainResolution(r.getResolutionForExtent(s,o)),u=$t.getCenter(s),u=r.constrainCenter(u);r.animate({resolution:a,center:u,duration:this.duration_,easing:jt.easeOut})};var fi=ci,pi={LEFT:37,UP:38,RIGHT:39,DOWN:40},di=function(t){Kn.call(this,{handleEvent:di.handleEvent});var e=t||{};this.defaultCondition_=function(t){return ti.noModifierKeys(t)&&ti.targetNotEditable(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128};St.inherits(di,Kn),di.handleEvent=function(t){var e,n,i,r,o,s,a=!1;return t.type==ht.KEYDOWN&&(e=t.originalEvent.keyCode,!this.condition_(t)||e!=pi.DOWN&&e!=pi.LEFT&&e!=pi.RIGHT&&e!=pi.UP||(i=(n=t.map.getView()).getResolution()*this.pixelDelta_,o=r=0,e==pi.DOWN?o=-i:e==pi.LEFT?r=-i:e==pi.RIGHT?r=i:o=i,s=[r,o],Xe.rotate(s,n.getRotation()),Kn.pan(n,s,this.duration_),t.preventDefault(),a=!0)),!a};var gi=di,vi=function(t){Kn.call(this,{handleEvent:vi.handleEvent});var e=t||{};this.condition_=e.condition?e.condition:ti.targetNotEditable,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100};St.inherits(vi,Kn),vi.handleEvent=function(t){var e,n,i,r,o=!1;return t.type!=ht.KEYDOWN&&t.type!=ht.KEYPRESS||(e=t.originalEvent.charCode,!this.condition_(t)||e!="+".charCodeAt(0)&&e!="-".charCodeAt(0)||(n=t.map,i=e=="+".charCodeAt(0)?this.delta_:-this.delta_,r=n.getView(),Kn.zoomByDelta(r,i,void 0,this.duration_),t.preventDefault(),o=!0)),!o};var mi=vi,yi=function(t){Kn.call(this,{handleEvent:yi.handleEvent});var e=t||{};this.delta_=0,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=e.constrainResolution||!1,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5};St.inherits(yi,Kn),yi.handleEvent=function(t){var e=t.type;if(e!==ht.WHEEL&&e!==ht.MOUSEWHEEL)return!0;t.preventDefault();var n,i=t.map,r=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==ht.WHEEL?(n=r.deltaY,ce.FIREFOX&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=ce.DEVICE_PIXEL_RATIO),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)):t.type==ht.MOUSEWHEEL&&(n=-r.wheelDeltaY,ce.SAFARI&&(n/=3)),0===n)return!1;var o=Date.now();if(void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?yi.Mode_.TRACKPAD:yi.Mode_.WHEEL),this.mode_===yi.Mode_.TRACKPAD){var s=i.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(Ve.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var a,u=s.getResolution()*Math.pow(2,n/this.trackpadDeltaPerZoom_),l=s.getMinResolution(),c=s.getMaxResolution(),h=0;return u<l?(u=Math.max(u,l/this.trackpadZoomBuffer_),h=1):c<u&&(u=Math.min(u,c*this.trackpadZoomBuffer_),h=-1),this.lastAnchor_&&(a=s.calculateCenterZoom(u,this.lastAnchor_),s.setCenter(s.constrainCenter(a))),s.setResolution(u),0===h&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(u,0<n?-1:1),easing:jt.easeOut,anchor:this.lastAnchor_,duration:this.duration_}),0<h?s.animate({resolution:l,easing:jt.easeOut,anchor:this.lastAnchor_,duration:500}):h<0&&s.animate({resolution:c,easing:jt.easeOut,anchor:this.lastAnchor_,duration:500}),this.startTime_=o,!1}this.delta_+=n;var f=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),f),!1},yi.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(Ve.INTERACTING,-1)},yi.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=St.MOUSEWHEELZOOM_MAXDELTA,i=z.clamp(this.delta_,-n,n);Kn.zoomByDelta(e,-i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},yi.prototype.setMouseAnchor=function(t){(this.useAnchor_=t)||(this.lastAnchor_=null)},yi.Mode_={TRACKPAD:"trackpad",WHEEL:"wheel"};var _i=yi,Ei=function(t){ni.call(this,{handleDownEvent:Ei.handleDownEvent_,handleDragEvent:Ei.handleDragEvent_,handleUpEvent:Ei.handleUpEvent_});var e=t||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250};St.inherits(Ei,ni),Ei.handleDragEvent_=function(t){var e,n=0,i=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);void 0!==this.lastAngle_&&(e=o-this.lastAngle_,this.rotationDelta_+=e,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=e),this.lastAngle_=o;var s,a,u,l=t.map,c=l.getView();c.getConstraints().rotation!==je.disable&&(s=l.getViewport().getBoundingClientRect(),(a=ni.centroid(this.targetPointers))[0]-=s.left,a[1]-=s.top,this.anchor_=l.getCoordinateFromPixel(a),this.rotating_&&(u=c.getRotation(),l.render(),Kn.rotateWithoutConstraints(c,u+n,this.anchor_)))},Ei.handleUpEvent_=function(t){if(this.targetPointers.length<2){var e,n=t.map.getView();return n.setHint(Ve.INTERACTING,-1),this.rotating_&&(e=n.getRotation(),Kn.rotate(n,e,this.anchor_,this.duration_)),!1}return!0},Ei.handleDownEvent_=function(t){if(2<=this.targetPointers.length){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(Ve.INTERACTING,1),!0}return!1},Ei.prototype.shouldStopEvent=Ke.FALSE;var xi=Ei,Ci=function(t){ni.call(this,{handleDownEvent:Ci.handleDownEvent_,handleDragEvent:Ci.handleDragEvent_,handleUpEvent:Ci.handleUpEvent_});var e=t||{};this.constrainResolution_=e.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1};St.inherits(Ci,ni),Ci.handleDragEvent_=function(t){var e=1,n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,o=n.clientY-i.clientY,s=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,u=a.getView(),l=u.getResolution(),c=u.getMaxResolution(),h=u.getMinResolution(),f=l*e;c<f?(e=c/l,f=c):f<h&&(e=h/l,f=h),1!=e&&(this.lastScaleDelta_=e);var p=a.getViewport().getBoundingClientRect(),d=ni.centroid(this.targetPointers);d[0]-=p.left,d[1]-=p.top,this.anchor_=a.getCoordinateFromPixel(d),a.render(),Kn.zoomWithoutConstraints(u,f,this.anchor_)},Ci.handleUpEvent_=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(Ve.INTERACTING,-1);var n,i=e.getResolution();return(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution())&&(n=this.lastScaleDelta_-1,Kn.zoom(e,i,this.anchor_,this.duration_,n)),!1}return!0},Ci.handleDownEvent_=function(t){if(2<=this.targetPointers.length){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(Ve.INTERACTING,1),!0}return!1},Ci.prototype.shouldStopEvent=Ke.FALSE;function Si(t,e,n,i){ct.call(this),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state=i}var $i=Ci,Ti={defaults:function(t){var e=t||{},n=new mt,i=new zn(-.005,.05,100);return void 0!==e.altShiftDragRotate&&!e.altShiftDragRotate||n.push(new ai),void 0!==e.doubleClickZoom&&!e.doubleClickZoom||n.push(new Jn({delta:e.zoomDelta,duration:e.zoomDuration})),void 0!==e.dragPan&&!e.dragPan||n.push(new ri({kinetic:i})),void 0!==e.pinchRotate&&!e.pinchRotate||n.push(new xi),void 0!==e.pinchZoom&&!e.pinchZoom||n.push(new $i({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),void 0!==e.keyboard&&!e.keyboard||(n.push(new gi),n.push(new mi({delta:e.zoomDelta,duration:e.zoomDuration}))),void 0!==e.mouseWheelZoom&&!e.mouseWheelZoom||n.push(new _i({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),void 0!==e.shiftDragZoom&&!e.shiftDragZoom||n.push(new fi({duration:e.zoomDuration})),n}},Ri=Ti;St.inherits(Si,ct),Si.prototype.changed=function(){this.dispatchEvent(ht.CHANGE)},Si.prototype.getExtent=function(){return this.extent},Si.prototype.getImage=function(){},Si.prototype.getPixelRatio=function(){return this.pixelRatio_},Si.prototype.getResolution=function(){return this.resolution},Si.prototype.getState=function(){return this.state},Si.prototype.load=function(){};function wi(t,e,n,i,r){this.loader_=void 0!==r?r:null;var o=void 0!==r?Ii.IDLE:Ii.LOADED;bi.call(this,t,e,n,o),this.canvas_=i,this.error_=null}var bi=Si,Ii={IDLE:0,LOADING:1,LOADED:2,ERROR:3};St.inherits(wi,bi),wi.prototype.getError=function(){return this.error_},wi.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=Ii.ERROR):this.state=Ii.LOADED,this.changed()},wi.prototype.load=function(){this.state==Ii.IDLE&&(this.state=Ii.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},wi.prototype.getImage=function(){return this.canvas_};function Ai(t,e,n,i,r){ut.call(this,t),this.vectorContext=e,this.frameState=n,this.context=i,this.glContext=r}var Oi=wi,Pi={IMAGE:"image",VECTOR:"vector"};St.inherits(Ai,ut);function Li(t){ct.call(this),this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}var Mi=Ai;St.inherits(Li,ct),Li.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},Li.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(ht.CLEAR)},Li.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},Li.prototype.forEach=function(t,e){for(var n=this.oldest_;n;)t.call(e,n.value_,n.key_,this),n=n.newer},Li.prototype.get=function(t){var e=this.entries_[t];return b.assert(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,(this.newest_=e).value_)},Li.prototype.remove=function(t){var e=this.entries_[t];return b.assert(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},Li.prototype.getCount=function(){return this.count_},Li.prototype.getKeys=function(){for(var t=new Array(this.count_),e=0,n=this.newest_;n;n=n.older)t[e++]=n.key_;return t},Li.prototype.getValues=function(){for(var t=new Array(this.count_),e=0,n=this.newest_;n;n=n.older)t[e++]=n.value_;return t},Li.prototype.peekLast=function(){return this.oldest_.value_},Li.prototype.peekLastKey=function(){return this.oldest_.key_},Li.prototype.peekFirstKey=function(){return this.newest_.key_},Li.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},Li.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},Li.prototype.set=function(t,e){b.assert(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},Li.prototype.prune=function(){for(;this.canExpireCache();)this.pop()};var Di,Fi,ki,Ni,Ui,Gi,ji,Vi,Bi,Wi=Li,Hi={};function qi(t){var e=Hi.getMeasureContext();e.font=Gi,Fi=e.measureText(ji).width;var n=!0;return"monospace"!=t&&(e.font="32px "+t+",monospace",n=e.measureText(ji).width!=Fi),n}function Xi(){var t=!0;for(var e in Ni)Ni[e]<ki&&(qi(e)?(Ni[e]=ki,Tt.clear(Hi.textHeights_),Hi.measureContext_=null,Ui.clear()):(++Ni[e],t=!1));t&&(window.clearInterval(Di),Di=void 0)}Hi.defaultFont="10px sans-serif",Hi.defaultFillStyle=[0,0,0,1],Hi.defaultLineCap="round",Hi.defaultLineDash=[],Hi.defaultLineDashOffset=0,Hi.defaultLineJoin="round",Hi.defaultMiterLimit=10,Hi.defaultStrokeStyle=[0,0,0,1],Hi.defaultTextAlign="center",Hi.defaultTextBaseline="middle",Hi.defaultPadding=[0,0,0,0],Hi.defaultLineWidth=1,Hi.labelCache=new Wi,Hi.checkedFonts_={},Hi.measureContext_=null,Hi.textHeights_={},Hi.checkFont=(ki=60,Ni=Hi.checkedFonts_,Ui=Hi.labelCache,Gi="32px monospace",ji="wmytzilWMYTZIL@#/&?$%10",function(t){var e=Ot.getFontFamilies(t);if(e)for(var n=0,i=e.length;n<i;++n){var r=e[n];r in Ni||(Ni[r]=ki,qi(r)||void(Ni[r]=0)===Di&&(Di=window.setInterval(Xi,32)))}}),Hi.getMeasureContext=function(){return Hi.measureContext_||(Hi.measureContext_=xt.createCanvasContext2D(1,1))},Hi.measureTextHeight=(Bi=Hi.textHeights_,function(t){var e=Bi[t];return null==e&&(Vi||((Vi=document.createElement("span")).textContent="M",Vi.style.margin=Vi.style.padding="0 !important",Vi.style.position="absolute !important",Vi.style.left="-99999px !important"),Vi.style.font=t,document.body.appendChild(Vi),e=Bi[t]=Vi.offsetHeight,document.body.removeChild(Vi)),e}),Hi.measureTextWidth=function(t,e){var n=Hi.getMeasureContext();return t!=n.font&&(n.font=t),n.measureText(e).width},Hi.rotateAtOffset=function(t,e,n,i){0!==e&&(t.translate(n,i),t.rotate(e),t.translate(-n,-i))},Hi.resetTransform_=en.create(),Hi.drawImage=function(t,e,n,i,r,o,s,a,u,l,c){var h;1!=n&&(h=t.globalAlpha,t.globalAlpha=h*n),e&&t.setTransform.apply(t,e),t.drawImage(i,r,o,s,a,u,l,s*c,a*c),h&&(t.globalAlpha=h),e&&t.setTransform.apply(t,Hi.resetTransform_)};var zi,Yi,Ki=Hi,Zi={HEX_COLOR_RE_:/^#(?:[0-9a-f]{3,4}){1,2}$/i,NAMED_COLOR_RE_:/^([a-z]*)$/i,asArray:function(t){return Array.isArray(t)?t:Zi.fromString(t)},asString:function(t){return"string"==typeof t?t:Zi.toString(t)},fromNamed:function(t){var e=document.createElement("div");e.style.color=t,document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}};Zi.fromString=(zi={},Yi=0,function(t){var e;if(zi.hasOwnProperty(t))e=zi[t];else{if(1024<=Yi){var n,i=0;for(n in zi)0==(3&i++)&&(delete zi[n],--Yi)}e=Zi.fromStringInternal_(t),zi[t]=e,++Yi}return e}),Zi.fromStringInternal_=function(t){var e,n,i,r,o,s,a,u,l;return Zi.NAMED_COLOR_RE_.exec(t)&&(t=Zi.fromNamed(t)),Zi.HEX_COLOR_RE_.exec(t)?(r=(i=t.length-1)<=4?1:2,o=4==i||8==i,s=parseInt(t.substr(1+0*r,r),16),a=parseInt(t.substr(+r+1,r),16),u=parseInt(t.substr(1+2*r,r),16),l=o?parseInt(t.substr(1+3*r,r),16):255,1==r&&(s=(s<<4)+s,a=(a<<4)+a,u=(u<<4)+u,o&&(l=(l<<4)+l)),e=[s,a,u,l/255]):0==t.indexOf("rgba(")?(n=t.slice(5,-1).split(",").map(Number),e=Zi.normalize(n)):0==t.indexOf("rgb(")?((n=t.slice(4,-1).split(",").map(Number)).push(1),e=Zi.normalize(n)):b.assert(!1,14),e},Zi.normalize=function(t,e){var n=e||[];return n[0]=z.clamp(t[0]+.5|0,0,255),n[1]=z.clamp(t[1]+.5|0,0,255),n[2]=z.clamp(t[2]+.5|0,0,255),n[3]=z.clamp(t[3],0,1),n},Zi.toString=function(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:t[3])+")"};function Ji(){}var Qi=Zi,tr={asColorLike:function(t){return tr.isColorLike(t)?t:Qi.asString(t)},isColorLike:function(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient}},er=tr;Ji.prototype.drawCustom=function(t,e,n){},Ji.prototype.drawGeometry=function(t){},Ji.prototype.setStyle=function(t){},Ji.prototype.drawCircle=function(t,e){},Ji.prototype.drawFeature=function(t,e){},Ji.prototype.drawGeometryCollection=function(t,e){},Ji.prototype.drawLineString=function(t,e){},Ji.prototype.drawMultiLineString=function(t,e){},Ji.prototype.drawMultiPoint=function(t,e){},Ji.prototype.drawMultiPolygon=function(t,e){},Ji.prototype.drawPoint=function(t,e){},Ji.prototype.drawPolygon=function(t,e){},Ji.prototype.drawText=function(t,e){},Ji.prototype.setFillStrokeStyle=function(t,e){},Ji.prototype.setImageStyle=function(t,e){},Ji.prototype.setTextStyle=function(t,e){};function nr(t,e,n,i,r){ir.call(this),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.viewRotation_=r,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageSnapToPixel_=!1,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=en.create()}var ir=Ji;St.inherits(nr,ir),nr.prototype.drawImages_=function(t,e,n,i){if(this.image_){var r=Je.transform2D(t,e,n,2,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var u,l,c=this.imageRotation_;for(this.imageRotateWithView_&&(c+=this.viewRotation_),u=0,l=r.length;u<l;u+=2){var h,f,p=r[u]-this.imageAnchorX_,d=r[u+1]-this.imageAnchorY_;this.imageSnapToPixel_&&(p=Math.round(p),d=Math.round(d)),0===c&&1==this.imageScale_||(h=p+this.imageAnchorX_,f=d+this.imageAnchorY_,en.compose(s,h,f,this.imageScale_,this.imageScale_,c,-h,-f),o.setTransform.apply(o,s)),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,d,this.imageWidth_,this.imageHeight_)}0===c&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=a)}},nr.prototype.drawText_=function(t,e,n,i){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=Je.transform2D(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=i){var a,u=r[e]+this.textOffsetX_,l=r[e+1]+this.textOffsetY_;0===s&&1==this.textScale_||(a=en.compose(this.tmpLocalTransform_,u,l,this.textScale_,this.textScale_,s,-u,-l),o.setTransform.apply(o,a)),this.textStrokeState_&&o.strokeText(this.text_,u,l),this.textFillState_&&o.fillText(this.text_,u,l)}0===s&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},nr.prototype.moveToLineTo_=function(t,e,n,i,r){var o=this.context_,s=Je.transform2D(t,e,n,i,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;r&&(a-=2);for(var u=2;u<a;u+=2)o.lineTo(s[u],s[u+1]);return r&&o.closePath(),n},nr.prototype.drawRings_=function(t,e,n,i){for(var r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e},nr.prototype.drawCircle=function(t){var e,n,i,r,o;$t.intersects(this.extent_,t.getExtent())&&((this.fillState_||this.strokeState_)&&(this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_),n=(e=sn.transform2D(t,this.transform_,this.pixelCoordinates_))[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),(o=this.context_).beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()),""!==this.text_&&this.drawText_(t.getCenter(),0,2,2))},nr.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},nr.prototype.drawGeometry=function(t){switch(t.getType()){case I.POINT:this.drawPoint(t);break;case I.LINE_STRING:this.drawLineString(t);break;case I.POLYGON:this.drawPolygon(t);break;case I.MULTI_POINT:this.drawMultiPoint(t);break;case I.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case I.MULTI_POLYGON:this.drawMultiPolygon(t);break;case I.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case I.CIRCLE:this.drawCircle(t)}},nr.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&$t.intersects(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},nr.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])},nr.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},nr.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},nr.prototype.drawLineString=function(t){var e,n,i;$t.intersects(this.extent_,t.getExtent())&&(this.strokeState_&&(this.setContextStrokeState_(this.strokeState_),e=this.context_,n=t.getFlatCoordinates(),e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()),""!==this.text_&&(i=t.getFlatMidpoint(),this.drawText_(i,0,2,2)))},nr.prototype.drawMultiLineString=function(t){var e,n=t.getExtent();if($t.intersects(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i,r,o=this.context_,s=t.getFlatCoordinates(),a=0,u=t.getEnds(),l=t.getStride();for(o.beginPath(),i=0,r=u.length;i<r;++i)a=this.moveToLineTo_(s,a,u[i],l,!1);o.stroke()}""!==this.text_&&(e=t.getFlatMidpoints(),this.drawText_(e,0,e.length,2))}},nr.prototype.drawPolygon=function(t){var e,n;$t.intersects(this.extent_,t.getExtent())&&((this.strokeState_||this.fillState_)&&(this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_),(e=this.context_).beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()),""!==this.text_&&(n=t.getFlatInteriorPoint(),this.drawText_(n,0,2,2)))},nr.prototype.drawMultiPolygon=function(t){if($t.intersects(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e,n,i=this.context_,r=t.getOrientedFlatCoordinates(),o=0,s=t.getEndss(),a=t.getStride();for(i.beginPath(),e=0,n=s.length;e<n;++e)var u=s[e],o=this.drawRings_(r,o,u,a);this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}var l;""!==this.text_&&(l=t.getFlatInteriorPoints(),this.drawText_(l,0,l.length,2))}},nr.prototype.setContextFillState_=function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},nr.prototype.setContextStrokeState_=function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=e.lineCap=t.lineCap),ce.CANVAS_LINE_DASH&&(Rt.equals(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,ce.CANVAS_LINE_DASH&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},nr.prototype.setContextTextState_=function(t){var e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:Ki.defaultTextAlign;n?(n.font!=t.font&&(n.font=e.font=t.font),n.textAlign!=i&&(n.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})},nr.prototype.setFillStrokeStyle=function(t,e){var n,i,r,o,s,a,u,l;t?(n=t.getColor(),this.fillState_={fillStyle:er.asColorLike(n||Ki.defaultFillStyle)}):this.fillState_=null,e?(i=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),u=e.getWidth(),l=e.getMiterLimit(),this.strokeState_={lineCap:void 0!==r?r:Ki.defaultLineCap,lineDash:o||Ki.defaultLineDash,lineDashOffset:s||Ki.defaultLineDashOffset,lineJoin:void 0!==a?a:Ki.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==u?u:Ki.defaultLineWidth),miterLimit:void 0!==l?l:Ki.defaultMiterLimit,strokeStyle:er.asColorLike(i||Ki.defaultStrokeStyle)}):this.strokeState_=null},nr.prototype.setImageStyle=function(t){var e,n,i,r;t?(e=t.getAnchor(),n=t.getImage(1),i=t.getOrigin(),r=t.getSize(),this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageSnapToPixel_=t.getSnapToPixel(),this.imageWidth_=r[0]):this.image_=null},nr.prototype.setTextStyle=function(t){var e,n,i,r,o,s,a,u,l,c,h,f,p,d,g,v,m,y,_;t?((e=t.getFill())?(n=e.getColor(),this.textFillState_={fillStyle:er.asColorLike(n||Ki.defaultFillStyle)}):this.textFillState_=null,(i=t.getStroke())?(r=i.getColor(),o=i.getLineCap(),s=i.getLineDash(),a=i.getLineDashOffset(),u=i.getLineJoin(),l=i.getWidth(),c=i.getMiterLimit(),this.textStrokeState_={lineCap:void 0!==o?o:Ki.defaultLineCap,lineDash:s||Ki.defaultLineDash,lineDashOffset:a||Ki.defaultLineDashOffset,lineJoin:void 0!==u?u:Ki.defaultLineJoin,lineWidth:void 0!==l?l:Ki.defaultLineWidth,miterLimit:void 0!==c?c:Ki.defaultMiterLimit,strokeStyle:er.asColorLike(r||Ki.defaultStrokeStyle)}):this.textStrokeState_=null,h=t.getFont(),f=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),v=t.getScale(),m=t.getText(),y=t.getTextAlign(),_=t.getTextBaseline(),this.textState_={font:void 0!==h?h:Ki.defaultFont,textAlign:void 0!==y?y:Ki.defaultTextAlign,textBaseline:void 0!==_?_:Ki.defaultTextBaseline},this.text_=void 0!==m?m:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==g?g:0,this.textScale_=this.pixelRatio_*(void 0!==v?v:1)):this.text_=""};function rr(t){pt.call(this),this.layer_=t}var or=nr;St.inherits(rr,pt),rr.prototype.forEachFeatureAtCoordinate=St.nullFunction,rr.prototype.hasFeatureAtCoordinate=Ke.FALSE,rr.prototype.createLoadedTileFinder=function(n,i,r){return function(e,t){return n.forEachLoadedTile(i,e,t,function(t){r[e]||(r[e]={}),r[e][t.tileCoord.toString()]=t})}},rr.prototype.getLayer=function(){return this.layer_},rr.prototype.handleImageChange_=function(t){t.target.getState()===Ii.LOADED&&this.renderIfReadyAndVisible()},rr.prototype.loadImage=function(t){var e=t.getState();return e!=Ii.LOADED&&e!=Ii.ERROR&&rt.listen(t,ht.CHANGE,this.handleImageChange_,this),e==Ii.IDLE&&(t.load(),e=t.getState()),e==Ii.LOADED},rr.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Ft.READY&&this.changed()},rr.prototype.scheduleExpireCache=function(t,e){var n;e.canExpireCache()&&(n=function(t,e,n){var i=St.getUid(t).toString();i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e),t.postRenderFunctions.push(n))},rr.prototype.updateLogos=function(t,e){var n=e.getLogo();void 0!==n&&("string"==typeof n?t.logos[n]="":n&&(b.assert("string"==typeof n.href,44),b.assert("string"==typeof n.src,45),t.logos[n.src]=n.href))},rr.prototype.updateUsedTiles=function(t,e,n,i){var r=St.getUid(e).toString(),o=n.toString();r in t?o in t[r]?t[r][o].extend(i):t[r][o]=i:(t[r]={},t[r][o]=i)},rr.prototype.manageTilePyramid=function(t,e,n,i,r,o,s,a,u,l){var c=St.getUid(e).toString();c in t.wantedTiles||(t.wantedTiles[c]={});for(var h,f,p,d,g,v=t.wantedTiles[c],m=t.tileQueue,y=n.getMinZoom();y<=s;++y)for(f=n.getTileRangeForExtentAndZ(o,y,f),p=n.getResolution(y),d=f.minX;d<=f.maxX;++d)for(g=f.minY;g<=f.maxY;++g)s-y<=a?((h=e.getTile(y,d,g,i,r)).getState()==Pe.IDLE&&(v[h.getKey()]=!0,m.isKeyQueued(h.getKey())||m.enqueue([h,c,n.getTileCoordCenter(h.tileCoord),p])),void 0!==u&&u.call(l,h)):e.useTile(y,d,g,r)};function sr(t){ar.call(this,t),this.renderedResolution,this.transform_=en.create()}var ar=rr;St.inherits(sr,ar),sr.prototype.clip=function(t,e,n){var i=e.pixelRatio,r=e.size[0]*i,o=e.size[1]*i,s=e.viewState.rotation,a=$t.getTopLeft(n),u=$t.getTopRight(n),l=$t.getBottomRight(n),c=$t.getBottomLeft(n);en.apply(e.coordinateToPixelTransform,a),en.apply(e.coordinateToPixelTransform,u),en.apply(e.coordinateToPixelTransform,l),en.apply(e.coordinateToPixelTransform,c),t.save(),Ki.rotateAtOffset(t,-s,r/2,o/2),t.beginPath(),t.moveTo(a[0]*i,a[1]*i),t.lineTo(u[0]*i,u[1]*i),t.lineTo(l[0]*i,l[1]*i),t.lineTo(c[0]*i,c[1]*i),t.clip(),Ki.rotateAtOffset(t,s,r/2,o/2)},sr.prototype.dispatchComposeEvent_=function(t,e,n,i){var r,o,s,a,u,l,c=this.getLayer();c.hasListener(t)&&(r=n.size[0]*n.pixelRatio,o=n.size[1]*n.pixelRatio,s=n.viewState.rotation,Ki.rotateAtOffset(e,-s,r/2,o/2),a=void 0!==i?i:this.getTransform(n,0),u=new or(e,n.pixelRatio,n.extent,a,n.viewState.rotation),l=new Mi(t,u,n,e,null),c.dispatchEvent(l),Ki.rotateAtOffset(e,s,r/2,o/2))},sr.prototype.forEachLayerAtCoordinate=function(t,e,n,i){return this.forEachFeatureAtCoordinate(t,e,0,Ke.TRUE,this)?n.call(i,this.getLayer(),null):void 0},sr.prototype.postCompose=function(t,e,n,i){this.dispatchComposeEvent_(Dt.POSTCOMPOSE,t,e,i)},sr.prototype.preCompose=function(t,e,n){this.dispatchComposeEvent_(Dt.PRECOMPOSE,t,e,n)},sr.prototype.dispatchRenderEvent=function(t,e,n){this.dispatchComposeEvent_(Dt.RENDER,t,e,n)},sr.prototype.getTransform=function(t,e){var n=t.viewState,i=t.pixelRatio,r=i*t.size[0]/2,o=i*t.size[1]/2,s=i/n.resolution,a=-s,u=-n.rotation,l=-n.center[0]+e,c=-n.center[1];return en.compose(this.transform_,r,o,s,a,u,l,c)},sr.prototype.composeFrame=function(t,e,n){},sr.prototype.prepareFrame=function(t,e){};function ur(t){lr.call(this,t),this.coordinateToCanvasPixelTransform=en.create(),this.hitCanvasContext_=null}var lr=sr;St.inherits(ur,lr),ur.prototype.composeFrame=function(t,e,n){this.preCompose(n,t);var i,r,o,s,a,u,l,c,h=this.getImage();h&&((r=void 0!==(i=e.extent)&&!$t.containsExtent(i,t.extent)&&$t.intersects(i,t.extent))&&this.clip(n,t,i),o=this.getImageTransform(),s=n.globalAlpha,n.globalAlpha=e.opacity,a=o[4],u=o[5],l=h.width*o[0],c=h.height*o[3],n.drawImage(h,0,0,+h.width,+h.height,Math.round(a),Math.round(u),Math.round(l),Math.round(c)),n.globalAlpha=s,r&&n.restore()),this.postCompose(n,t,e)},ur.prototype.getImage=function(){},ur.prototype.getImageTransform=function(){},ur.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){var o=this.getLayer(),s=o.getSource(),a=e.viewState.resolution,u=e.viewState.rotation,l=e.skippedFeatureUids;return s.forEachFeatureAtCoordinate(t,a,u,n,l,function(t){return i.call(r,t,o)})},ur.prototype.forEachLayerAtCoordinate=function(t,e,n,i){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==St.nullFunction)return lr.prototype.forEachLayerAtCoordinate.apply(this,arguments);var r=en.apply(this.coordinateToCanvasPixelTransform,t.slice());Xe.scale(r,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=xt.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),r[0],r[1],1,1,0,0,1,1);var o=this.hitCanvasContext_.getImageData(0,0,1,1).data;return 0<o[3]?n.call(i,this.getLayer(),o):void 0}};function cr(t){hr.call(this,t),this.image_=null,this.imageTransform_=en.create(),this.skippedFeatures_=[],this.vectorRenderer_=null}var hr=ur;St.inherits(cr,hr),cr.handles=function(t,e){return t===jn.CANVAS&&(e.getType()===Jt.IMAGE||e.getType()===Jt.VECTOR&&e.getRenderMode()===Pi.IMAGE)},cr.create=function(t,e){var n=new cr(e);if(e.getType()===Jt.VECTOR)for(var i=Gn.getLayerRendererPlugins(),r=0,o=i.length;r<o;++r){var s=i[r];s!==cr&&s.handles(jn.CANVAS,e)&&n.setVectorRenderer(s.create(t,e))}return n},cr.prototype.getImage=function(){return this.image_?this.image_.getImage():null},cr.prototype.getImageTransform=function(){return this.imageTransform_},cr.prototype.prepareFrame=function(t,e){var n,i,r,o,s,a,u,l,c,h,f,p,d=t.pixelRatio,g=t.size,v=t.viewState,m=v.center,y=v.resolution,_=this.getLayer().getSource(),E=t.viewHints,x=t.extent;return void 0!==e.extent&&(x=$t.getIntersection(x,e.extent)),E[Ve.ANIMATING]||E[Ve.INTERACTING]||$t.isEmpty(x)||(n=v.projection,St.ENABLE_RASTER_REPROJECTION||(i=_.getProjection())&&(n=i),(r=this.vectorRenderer_)?(o=r.context,s=Tt.assign({},t,{size:[$t.getWidth(x)/y,$t.getHeight(x)/y],viewState:Tt.assign({},t.viewState,{rotation:0})}),a=Object.keys(s.skippedFeatureUids).sort(),!r.prepareFrame(s,e)||!r.replayGroupChanged&&Rt.equals(a,this.skippedFeatures_)||(o.canvas.width=s.size[0]*d,o.canvas.height=s.size[1]*d,r.composeFrame(s,e,o),this.image_=new Oi(x,y,d,o.canvas),this.skippedFeatures_=a)):(u=_.getImage(x,y,d,n))&&this.loadImage(u)&&(this.image_=u)),this.image_&&(l=(u=this.image_).getExtent(),f=d*(c=u.getResolution())/(y*(h=u.getPixelRatio())),p=en.compose(this.imageTransform_,d*g[0]/2,d*g[1]/2,f,f,0,h*(l[0]-m[0])/c,h*(m[1]-l[3])/c),en.compose(this.coordinateToCanvasPixelTransform,d*g[0]/2-p[4],d*g[1]/2-p[5],d/y,-d/y,0,-m[0],-m[1]),this.updateLogos(t,_),this.renderedResolution=c*d/h),!!this.image_},cr.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,n,i,r):hr.prototype.forEachFeatureAtCoordinate.call(this,t,e,n,i,r)},cr.prototype.setVectorRenderer=function(t){this.vectorRenderer_=t};function fr(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}var pr=cr;fr.getKey=function(t,e,n){return e+":"+t+":"+(n?Qi.asString(n):"null")},fr.prototype.clear=function(){this.cache_={},this.cacheSize_=0},fr.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t,e,n=0;for(t in this.cache_)e=this.cache_[t],0!=(3&n++)||e.hasListener()||(delete this.cache_[t],--this.cacheSize_)}},fr.prototype.get=function(t,e,n){var i=fr.getKey(t,e,n);return i in this.cache_?this.cache_[i]:null},fr.prototype.set=function(t,e,n,i){var r=fr.getKey(t,e,n);this.cache_[r]=i,++this.cacheSize_},fr.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var dr={};dr.iconImageCache=new fr;function gr(t,e){st.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={}}var vr=dr;St.inherits(gr,st),gr.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;en.compose(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),en.invert(en.setFromArray(i,n))},gr.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},gr.expireIconCache_=function(t,e){vr.iconImageCache.expire()},gr.prototype.forEachFeatureAtCoordinate=function(t,r,e,o,s,n,i){var a,u=r.viewState,l=u.resolution;function c(t,e){var n=St.getUid(t).toString(),i=r.layerStates[St.getUid(e)].managed;if(!(n in r.skippedFeatureUids)||i)return o.call(s,t,i?e:null)}var h,f,p,d=u.projection,g=t;d.canWrapX()&&(h=d.getExtent(),f=$t.getWidth(h),((p=t[0])<h[0]||p>h[2])&&(g=[p+f*Math.ceil((h[0]-p)/f),t[1]]));for(var v=r.layerStatesArray,m=v.length-1;0<=m;--m){var y=v[m],_=y.layer;if(kt.visibleAtResolution(y,l)&&n.call(i,_)){var E=this.getLayerRenderer(_);if(_.getSource()&&(a=E.forEachFeatureAtCoordinate(_.getSource().getWrapX()?g:t,r,e,c,s)),a)return a}}},gr.prototype.forEachLayerAtPixel=function(t,e,n,i,r,o){},gr.prototype.hasFeatureAtCoordinate=function(t,e,n,i,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,Ke.TRUE,this,i,r)},gr.prototype.getLayerRenderer=function(t){var e=St.getUid(t).toString();if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var n,i=Gn.getLayerRendererPlugins(),r=this.getType(),o=0,s=i.length;o<s;++o){var a=i[o];if(a.handles(r,t)){n=a.create(this,t);break}}if(!n)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=n,this.layerRendererListeners_[e]=rt.listen(n,ht.CHANGE,this.handleLayerRendererChange_,this),n},gr.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},gr.prototype.getLayerRenderers=function(){return this.layerRenderers_},gr.prototype.getMap=function(){return this.map_},gr.prototype.getType=function(){},gr.prototype.handleLayerRendererChange_=function(){this.map_.render()},gr.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],rt.unlistenByKey(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},gr.prototype.renderFrame=St.nullFunction,gr.prototype.removeUnusedLayerRenderers_=function(t,e){var n;for(n in this.layerRenderers_)e&&n in e.layerStates||this.removeLayerRendererByKey_(n).dispose()},gr.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(gr.expireIconCache_)},gr.prototype.scheduleRemoveUnusedLayerRenderers=function(t){var e;for(e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},gr.sortByZIndex=function(t,e){return t.zIndex-e.zIndex};function mr(t,e){yr.call(this,t,e),this.context_=xt.createCanvasContext2D(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=Ot.CLASS_UNSELECTABLE,t.insertBefore(this.canvas_,t.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=en.create()}var yr=gr;St.inherits(mr,yr),mr.handles=function(t){return t===jn.CANVAS},mr.create=function(t,e){return new mr(t,e)},mr.prototype.dispatchComposeEvent_=function(t,e){var n,i,r,o,s,a,u=this.getMap(),l=this.context_;u.hasListener(t)&&(n=e.extent,i=e.pixelRatio,r=e.viewState.rotation,o=this.getTransform(e),s=new or(l,i,n,o,r),a=new Mi(t,s,e,l,null),u.dispatchEvent(a))},mr.prototype.getTransform=function(t){var e=t.viewState,n=this.canvas_.width/2,i=this.canvas_.height/2,r=t.pixelRatio/e.resolution,o=-r,s=-e.rotation,a=-e.center[0],u=-e.center[1];return en.compose(this.transform_,n,i,r,o,s,a,u)},mr.prototype.getType=function(){return jn.CANVAS},mr.prototype.renderFrame=function(t){if(t){var e=this.context_,n=t.pixelRatio,i=Math.round(t.size[0]*n),r=Math.round(t.size[1]*n);this.canvas_.width!=i||this.canvas_.height!=r?(this.canvas_.width=i,this.canvas_.height=r):e.clearRect(0,0,i,r);var o=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchComposeEvent_(Dt.PRECOMPOSE,t);var s=t.layerStatesArray;Rt.stableSort(s,yr.sortByZIndex),o&&(e.save(),Ki.rotateAtOffset(e,o,i/2,r/2));for(var a,u,l,c=t.viewState.resolution,h=0,f=s.length;h<f;++h)a=(l=s[h]).layer,u=this.getLayerRenderer(a),kt.visibleAtResolution(l,c)&&l.sourceState==Ft.READY&&u.prepareFrame(t,l)&&u.composeFrame(t,l,e);o&&e.restore(),this.dispatchComposeEvent_(Dt.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},mr.prototype.forEachLayerAtPixel=function(t,e,n,i,r,o){for(var s=e.viewState.resolution,a=e.layerStatesArray,u=a.length,l=en.apply(e.pixelToCoordinateTransform,t.slice()),c=u-1;0<=c;--c){var h,f=a[c],p=f.layer;if(kt.visibleAtResolution(f,s)&&r.call(o,p))if(h=this.getLayerRenderer(p).forEachLayerAtCoordinate(l,e,n,i))return h}};function _r(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}var Er=mr;_r.createOrUpdate=function(t,e,n,i,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new _r(t,e,n,i)},_r.prototype.contains=function(t){return this.containsXY(t[1],t[2])},_r.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},_r.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},_r.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},_r.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},_r.prototype.getHeight=function(){return this.maxY-this.minY+1},_r.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},_r.prototype.getWidth=function(){return this.maxX-this.minX+1},_r.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};function xr(t){hr.call(this,t),this.context=null===this.context?null:xt.createCanvasContext2D(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.tmpExtent=$t.createEmpty(),this.tmpTileRange_=new Cr(0,0,0,0),this.imageTransform_=en.create(),this.zDirection=0}var Cr=_r;St.inherits(xr,hr),xr.handles=function(t,e){return t===jn.CANVAS&&e.getType()===Jt.TILE},xr.create=function(t,e){return new xr(e)},xr.prototype.isDrawableTile_=function(t){var e=t.getState(),n=this.getLayer().getUseInterimTilesOnError();return e==Pe.LOADED||e==Pe.EMPTY||e==Pe.ERROR&&!n},xr.prototype.prepareFrame=function(t,e){var n=t.pixelRatio,i=t.size,r=t.viewState,o=r.projection,s=r.resolution,a=r.center,u=this.getLayer(),l=u.getSource(),c=l.getRevision(),h=l.getTileGridForProjection(o),f=h.getZForResolution(s,this.zDirection),p=h.getResolution(f),d=Math.round(s/p)||1,g=t.extent;if(void 0!==e.extent&&(g=$t.getIntersection(g,e.extent)),$t.isEmpty(g))return!1;var v=h.getTileRangeForExtentAndZ(g,f),m=h.getTileRangeExtent(f,v),y=l.getTilePixelRatio(n),_={};_[f]={};for(var E,x,C=this.createLoadedTileFinder(l,o,_),S=this.tmpExtent,$=this.tmpTileRange_,T=!1,R=v.minX;R<=v.maxX;++R)for(x=v.minY;x<=v.maxY;++x){if((E=l.getTile(f,R,x,n,o)).getState()==Pe.ERROR&&(u.getUseInterimTilesOnError()?0<u.getPreload()&&(T=!0):E.setState(Pe.LOADED)),this.isDrawableTile_(E)||(E=E.getInterimTile()),this.isDrawableTile_(E)){var w,b=St.getUid(this);if(E.getState()==Pe.LOADED&&(w=(_[f][E.tileCoord.toString()]=E).inTransition(b),T||!w&&-1!==this.renderedTiles.indexOf(E)||(T=!0)),1===E.getAlpha(b,t.time))continue}var I=h.getTileCoordChildTileRange(E.tileCoord,$,S),A=!1;I&&(A=C(f+1,I)),A||h.forEachTileCoordParentTileRange(E.tileCoord,C,null,$,S)}var O=p*n/y*d,P=t.viewHints,L=P[Ve.ANIMATING]||P[Ve.INTERACTING];if(!(this.renderedResolution&&16<Date.now()-t.time&&L)&&(T||!this.renderedExtent_||!$t.containsExtent(this.renderedExtent_,g)||this.renderedRevision!=c||d!=this.oversampling_||!L&&O!=this.renderedResolution)){var M,D,F,k,N=this.context;N&&(M=l.getTilePixelSize(f,n,o),D=Math.round(v.getWidth()*M[0]/d),F=Math.round(v.getHeight()*M[1]/d),(k=N.canvas).width!=D||k.height!=F?(this.oversampling_=d,k.width=D,k.height=F):(this.renderedExtent_&&!$t.equals(m,this.renderedExtent_)&&N.clearRect(0,0,D,F),d=this.oversampling_)),this.renderedTiles.length=0;var U,G,j,V,B,W,H,q,X,z,Y=Object.keys(_).map(Number);for(Y.sort(function(t,e){return t===f?1:e===f?-1:e<t?1:t<e?-1:0}),V=0,B=Y.length;V<B;++V)for(var K in j=Y[V],G=l.getTilePixelSize(j,n,o),U=h.getResolution(j)/p,H=y*l.getGutter(o),q=_[j])E=q[K],R=((W=h.getTileCoordExtent(E.getTileCoord(),S))[0]-m[0])/p*y/d,x=(m[3]-W[3])/p*y/d,X=G[0]*U/d,z=G[1]*U/d,this.drawTileImage(E,t,e,R,x,X,z,H,f===j),this.renderedTiles.push(E);this.renderedRevision=c,this.renderedResolution=p*n/y*d,this.renderedExtent_=m}var Z=this.renderedResolution/s,J=en.compose(this.imageTransform_,n*i[0]/2,n*i[1]/2,Z,Z,0,(this.renderedExtent_[0]-a[0])/this.renderedResolution*n,(a[1]-this.renderedExtent_[3])/this.renderedResolution*n);return en.compose(this.coordinateToCanvasPixelTransform,n*i[0]/2-J[4],n*i[1]/2-J[5],n/s,-n/s,0,-a[0],-a[1]),this.updateUsedTiles(t.usedTiles,l,f,v),this.manageTilePyramid(t,l,h,n,o,g,f,u.getPreload()),this.scheduleExpireCache(t,l),this.updateLogos(t,l),0<this.renderedTiles.length},xr.prototype.drawTileImage=function(t,e,n,i,r,o,s,a,u){var l,c,h,f=t.getImage(this.getLayer());f&&(l=St.getUid(this),1!==(c=u?t.getAlpha(l,e.time):1)||this.getLayer().getSource().getOpaque(e.viewState.projection)||this.context.clearRect(i,r,o,s),(h=c!==this.context.globalAlpha)&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(f,a,a,f.width-2*a,f.height-2*a,i,r,o,s),h&&this.context.restore(),1!==c?e.animate=!0:u&&t.endTransition(l))},xr.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},xr.prototype.getImageTransform=function(){return this.imageTransform_};function Sr(){}var $r=xr,Tr=n(18),Rr=n.n(Tr);Sr.prototype.getReplay=function(t,e){},Sr.prototype.isEmpty=function(){};var wr=Sr,br={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"},Ir={lineString:function(t,e,n,i){for(var r=t[e],o=t[e+1],s=0,a=e+i;a<n;a+=i){var u=t[a],l=t[a+1];s+=Math.sqrt((u-r)*(u-r)+(l-o)*(l-o)),r=u,o=l}return s},linearRing:function(t,e,n,i){var r=Ir.lineString(t,e,n,i),o=t[n-i]-t[e],s=t[n-i+1]-t[e+1];return r+=Math.sqrt(o*o+s*s)}},Ar=Ir,Or={lineString:function(t,e,n,i,r,o,s,a){for(var u,l,c,h=[],f=t[e]>t[n-i],p=r.length,d=t[e],g=t[e+1],v=t[e+=i],m=t[e+1],y=0,_=Math.sqrt(Math.pow(v-d,2)+Math.pow(m-g,2)),E="",x=0,C=0;C<p;++C){l=f?p-C-1:C;var S=r.charAt(l),$=o(E=f?S+E:E+S)-x;x+=$;for(var T=s+$/2;e<n-i&&y+_<T;)d=v,g=m,v=t[e+=i],m=t[e+1],y+=_,_=Math.sqrt(Math.pow(v-d,2)+Math.pow(m-g,2));var R=T-y,w=Math.atan2(m-g,v-d);if(f&&(w+=0<w?-Math.PI:Math.PI),void 0!==c){var b=w-c;if(b+=b>Math.PI?-2*Math.PI:b<-Math.PI?2*Math.PI:0,Math.abs(b)>a)return null}var I=R/_,A=z.lerp(d,v,I),O=z.lerp(g,m,I);c==w?(f&&(u[0]=A,u[1]=O,u[2]=$/2),u[4]=E):(u=[A,O,(x=$)/2,w,E=S],f?h.unshift(u):h.push(u),c=w),s+=$}return h}},Pr=Or,Lr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Mr={};Mr.ORDER=[br.POLYGON,br.CIRCLE,br.LINE_STRING,br.IMAGE,br.TEXT,br.DEFAULT],Mr.TEXT_ALIGN={},Mr.TEXT_ALIGN.left=0,Mr.TEXT_ALIGN.end=0,Mr.TEXT_ALIGN.center=.5,Mr.TEXT_ALIGN.right=1,Mr.TEXT_ALIGN.start=1,Mr.TEXT_ALIGN.top=0,Mr.TEXT_ALIGN.middle=.5,Mr.TEXT_ALIGN.hanging=.2,Mr.TEXT_ALIGN.alphabetic=.8,Mr.TEXT_ALIGN.ideographic=.8,Mr.TEXT_ALIGN.bottom=1;function Dr(t,e,n,i,r,o){ir.call(this),this.declutterTree=o,this.tmpExtent_=$t.createEmpty(),this.tolerance=t,this.maxExtent=e,this.overlaps=r,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.fillOrigin_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=en.create(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0,this.tmpLocalTransform_=en.create(),this.resetTransform_=en.create()}var Fr=Mr;St.inherits(Dr,ir),Dr.prototype.replayTextBackground_=function(t,e,n,i,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.fillOrigin_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},Dr.prototype.replayImage_=function(t,e,n,i,r,o,s,a,u,l,c,h,f,p,d,g,v,m){var y=v||m,_=this.tmpLocalTransform_;e-=r*=f,n-=o*=f,p&&(e=Math.round(e),n=Math.round(n));var E,x,C,S,$=d+l>i.width?i.width-l:d,T=a+c>i.height?i.height-c:a,R=this.tmpExtent_,w=g[3]+$*f+g[1],b=g[0]+T*f+g[2],I=e-g[3],A=n-g[0];!y&&0===h||(E=[I,A],x=[I+w,A],C=[I+w,A+b],S=[I,A+b]);var O,P,L=null;0!==h?(O=e+r,P=n+o,L=en.compose(_,O,P,1,1,h,-O,-P),$t.createOrUpdateEmpty(R),$t.extendCoordinate(R,en.apply(_,E)),$t.extendCoordinate(R,en.apply(_,x)),$t.extendCoordinate(R,en.apply(_,C)),$t.extendCoordinate(R,en.apply(_,S))):$t.createOrUpdate(I,A,I+w,A+b,R);var M=t.canvas,D=R[0]<=M.width&&0<=R[2]&&R[1]<=M.height&&0<=R[3];if(s){if(!D&&1==s[4])return;$t.extend(s,R);var F=D?[t,L?L.slice(0):null,u,i,l,c,$,T,e,n,f]:null;F&&y&&F.push(v,m,E,x,C,S),s.push(F)}else D&&(y&&this.replayTextBackground_(t,E,x,C,S,v,m),Ki.drawImage(t,L,u,i,l,c,$,T,e,n,f))},Dr.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},Dr.prototype.appendFlatCoordinates=function(t,e,n,i,r,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=i);for(var u,l,c=[t[e],t[e+1]],h=[NaN,NaN],f=!0,p=e+i;p<n;p+=i)h[0]=t[p],h[1]=t[p+1],f=(l=$t.coordinateRelationship(a,h))!==u?(f&&(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1]),this.coordinates[s++]=h[0],this.coordinates[s++]=h[1],!1):l!==$.INTERSECTING||(this.coordinates[s++]=h[0],this.coordinates[s++]=h[1],!1),c[0]=h[0],c[1]=h[1],u=l;return(r&&f||p===e+i)&&(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1]),s},Dr.prototype.drawCustomCoordinates_=function(t,e,n,i,r){for(var o=0,s=n.length;o<s;++o){var a=n[o],u=this.appendFlatCoordinates(t,e,a,i,!1,!1);r.push(u),e=a}return e},Dr.prototype.drawCustom=function(t,e,n){this.beginGeometry(t,e);var i,r,o,s,a=t.getType(),u=t.getStride(),l=this.coordinates.length;if(a==I.MULTI_POLYGON){i=t.getOrientedFlatCoordinates(),s=[];for(var c=t.getEndss(),h=d=0,f=c.length;h<f;++h){var p=[],d=this.drawCustomCoordinates_(i,d,c[h],u,p);s.push(p)}this.instructions.push([Lr.CUSTOM,l,s,t,n,dn.coordinatesss])}else a==I.POLYGON||a==I.MULTI_LINE_STRING?(o=[],i=a==I.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(i,0,t.getEnds(),u,o),this.instructions.push([Lr.CUSTOM,l,o,t,n,dn.coordinatess])):a==I.LINE_STRING||a==I.MULTI_POINT?(i=t.getFlatCoordinates(),r=this.appendFlatCoordinates(i,0,i.length,u,!1,!1),this.instructions.push([Lr.CUSTOM,l,r,t,n,dn.coordinates])):a==I.POINT&&(i=t.getFlatCoordinates(),this.coordinates.push(i[0],i[1]),r=this.coordinates.length,this.instructions.push([Lr.CUSTOM,l,r,t,n]));this.endGeometry(t,e)},Dr.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[Lr.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Lr.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},Dr.prototype.fill_=function(t){var e;this.fillOrigin_&&(e=en.apply(this.renderedTransform_,this.fillOrigin_.slice()),t.translate(e[0],e[1]),t.rotate(this.viewRotation_)),t.fill(),this.fillOrigin_&&t.setTransform.apply(t,Ki.resetTransform_)},Dr.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],ce.CANVAS_LINE_DASH&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},Dr.prototype.renderDeclutter_=function(t,e){if(t&&5<t.length){var n=t[4];if(1==n||n==t.length-5){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(i)){this.declutterTree.insert(i);for(var r=Ki.drawImage,o=5,s=t.length;o<s;++o){var a=t[o];a&&(11<a.length&&this.replayTextBackground_(a[0],a[13],a[14],a[15],a[16],a[11],a[12]),r.apply(void 0,a))}}t.length=5,$t.createOrUpdateEmpty(t)}}},Dr.prototype.replay_=function(t,e,n,i,r,o){var s;this.pixelCoordinates_&&Rt.equals(e,this.renderedTransform_)?s=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),s=Je.transform2D(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),en.setFromArray(this.renderedTransform_,e));for(var a,u,l,c,h,f,p,d,g=!Tt.isEmpty(n),v=0,m=i.length,y=0,_=0,E=0,x=null,C=null,S=this.coordinateCache_,$=this.viewRotation_,T={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:$},R=this.instructions!=i||this.overlaps?0:200;v<m;){var w,b,I,A=i[v];switch(A[0]){case Lr.BEGIN_GEOMETRY:w=A[1],g&&n[St.getUid(w).toString()]||!w.getGeometry()?v=A[2]:void 0===o||$t.intersects(o,w.getGeometry().getExtent())?++v:v=A[2]+1;break;case Lr.BEGIN_PATH:R<_&&(this.fill_(t),_=0),R<E&&(t.stroke(),E=0),_||E||(t.beginPath(),c=h=NaN),++v;break;case Lr.CIRCLE:var O=s[y=A[1]],P=s[y+1],L=s[y+2]-O,M=s[y+3]-P,D=Math.sqrt(L*L+M*M);t.moveTo(O+D,P),t.arc(O,P,D,0,2*Math.PI,!0),++v;break;case Lr.CLOSE_PATH:t.closePath(),++v;break;case Lr.CUSTOM:y=A[1],a=A[2];var F=A[3],k=A[4],N=6==A.length?A[5]:void 0;T.geometry=F,T.feature=w,v in S||(S[v]=[]);var U=S[v];N?N(s,y,a,2,U):(U[0]=s[y],U[1]=s[y+1],U.length=2),k(U,T),++v;break;case Lr.DRAW_IMAGE:y=A[1],a=A[2],d=A[3],u=A[4],l=A[5],et=r?null:A[6];var G,j,V,B=A[7],W=A[8],H=A[9],q=A[10],X=A[11],z=A[12],Y=A[13],K=A[14],Z=A[15];for(16<A.length?(G=A[16],j=A[17],V=A[18]):(G=Ki.defaultPadding,j=V=!1),X&&(z+=$);y<a;y+=2)this.replayImage_(t,s[y],s[y+1],d,u,l,et,B,W,H,q,z,Y,K,Z,G,j?x:null,V?C:null);this.renderDeclutter_(et,w),++v;break;case Lr.DRAW_CHARS:var J=A[1],Q=A[2],tt=A[3],et=r?null:A[4],nt=A[5],it=A[6],rt=A[7],ot=A[8],st=A[9],at=A[10],ut=A[11],lt=A[12],ct=A[13],ht=A[14],ft=Ar.lineString(s,J,Q,2),pt=ot(lt);if(nt||pt<=ft){var dt,gt,vt,mt,yt,_t=this.textStates[ct].textAlign,Et=(ft-pt)*Fr.TEXT_ALIGN[_t],xt=Pr.lineString(s,J,Q,2,lt,ot,Et,rt);if(xt){if(at)for(dt=0,gt=xt.length;dt<gt;++dt)vt=(yt=xt[dt])[4],mt=this.getImage(vt,ct,"",at),u=yt[2]+ut,l=tt*mt.height+2*(.5-tt)*ut-st,this.replayImage_(t,yt[0],yt[1],mt,u,l,et,mt.height,1,0,0,yt[3],ht,!1,mt.width,Ki.defaultPadding,null,null);if(it)for(dt=0,gt=xt.length;dt<gt;++dt)vt=(yt=xt[dt])[4],mt=this.getImage(vt,ct,it,""),u=yt[2],l=tt*mt.height-st,this.replayImage_(t,yt[0],yt[1],mt,u,l,et,mt.height,1,0,0,yt[3],ht,!1,mt.width,Ki.defaultPadding,null,null)}}this.renderDeclutter_(et,w),++v;break;case Lr.END_GEOMETRY:if(void 0!==r){var Ct=r(w=A[1]);if(Ct)return Ct}++v;break;case Lr.FILL:R?_++:this.fill_(t),++v;break;case Lr.MOVE_TO_LINE_TO:for(y=A[1],a=A[2],b=s[y],p=(I=s[y+1])+.5|0,(f=b+.5|0)===c&&p===h||(t.moveTo(b,I),c=f,h=p),y+=2;y<a;y+=2)f=(b=s[y])+.5|0,p=(I=s[y+1])+.5|0,y!=a-2&&f===c&&p===h||(t.lineTo(b,I),c=f,h=p);++v;break;case Lr.SET_FILL_STYLE:x=A,this.fillOrigin_=A[2],_&&(this.fill_(t),_=0,E&&(t.stroke(),E=0)),t.fillStyle=A[1],++v;break;case Lr.SET_STROKE_STYLE:C=A,E&&(t.stroke(),E=0),this.setStrokeStyle_(t,A),++v;break;case Lr.STROKE:R?E++:t.stroke(),++v;break;default:++v}}_&&this.fill_(t),E&&t.stroke()},Dr.prototype.replay=function(t,e,n,i){this.viewRotation_=n,this.replay_(t,e,i,this.instructions,void 0,void 0)},Dr.prototype.replayHitDetection=function(t,e,n,i,r,o){return this.viewRotation_=n,this.replay_(t,e,i,this.hitDetectionInstructions,r,o)},Dr.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();for(var e,n,i=t.length,r=-1,o=0;o<i;++o)(n=(e=t[o])[0])==Lr.END_GEOMETRY?r=o:n==Lr.BEGIN_GEOMETRY&&(e[2]=o,Rt.reverseSubArray(this.hitDetectionInstructions,r,o),r=-1)},Dr.prototype.setFillStrokeStyle=function(t,e){var n,i,r,o,s,a,u,l,c=this.state;t?(n=t.getColor(),c.fillStyle=er.asColorLike(n||Ki.defaultFillStyle)):c.fillStyle=void 0,e?(i=e.getColor(),c.strokeStyle=er.asColorLike(i||Ki.defaultStrokeStyle),r=e.getLineCap(),c.lineCap=void 0!==r?r:Ki.defaultLineCap,o=e.getLineDash(),c.lineDash=o?o.slice():Ki.defaultLineDash,s=e.getLineDashOffset(),c.lineDashOffset=s||Ki.defaultLineDashOffset,a=e.getLineJoin(),c.lineJoin=void 0!==a?a:Ki.defaultLineJoin,u=e.getWidth(),c.lineWidth=void 0!==u?u:Ki.defaultLineWidth,l=e.getMiterLimit(),c.miterLimit=void 0!==l?l:Ki.defaultMiterLimit,c.lineWidth>this.maxLineWidth&&(this.maxLineWidth=c.lineWidth,this.bufferedMaxExtent_=null)):(c.strokeStyle=void 0,c.lineCap=void 0,c.lineDash=null,c.lineDashOffset=void 0,c.lineJoin=void 0,c.lineWidth=void 0,c.miterLimit=void 0)},Dr.prototype.applyFill=function(t,e){var n,i=t.fillStyle,r=[Lr.SET_FILL_STYLE,i];"string"!=typeof i&&(n=e.getExtent(),r.push([n[0],n[3]])),this.instructions.push(r)},Dr.prototype.applyStroke=function(t){this.instructions.push([Lr.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio])},Dr.prototype.updateFillStyle=function(t,e,n){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(e.call(this,t,n),t.currentFillStyle=i)},Dr.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle,i=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,u=t.miterLimit;t.currentStrokeStyle==n&&t.currentLineCap==i&&(r==t.currentLineDash||Rt.equals(t.currentLineDash,r))&&t.currentLineDashOffset==o&&t.currentLineJoin==s&&t.currentLineWidth==a&&t.currentMiterLimit==u||(e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=u)},Dr.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[Lr.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)},Dr.prototype.finish=St.nullFunction,Dr.prototype.getBufferedMaxExtent=function(){var t;return this.bufferedMaxExtent_||(this.bufferedMaxExtent_=$t.clone(this.maxExtent),0<this.maxLineWidth&&(t=this.resolution*(this.maxLineWidth+1)/2,$t.buffer(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_))),this.bufferedMaxExtent_};function kr(t,e,n,i,r,o){Nr.call(this,t,e,n,i,r,o),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.snapToPixel_=void 0,this.width_=void 0}var Nr=Dr;St.inherits(kr,Nr),kr.prototype.drawCoordinates_=function(t,e,n,i){return this.appendFlatCoordinates(t,e,n,i,!1,!1)},kr.prototype.drawPoint=function(t,e){var n,i,r,o;this.image_&&(this.beginGeometry(t,e),n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(n,0,n.length,i),this.instructions.push([Lr.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([Lr.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e))},kr.prototype.drawMultiPoint=function(t,e){var n,i,r,o;this.image_&&(this.beginGeometry(t,e),n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(n,0,n.length,i),this.instructions.push([Lr.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([Lr.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e))},kr.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.snapToPixel_=void 0,this.width_=void 0},kr.prototype.setImageStyle=function(t,e){var n=t.getAnchor(),i=t.getSize(),r=t.getHitDetectionImage(1),o=t.getImage(1),s=t.getOrigin();this.anchorX_=n[0],this.anchorY_=n[1],this.declutterGroup_=e,this.hitDetectionImage_=r,this.image_=o,this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.snapToPixel_=t.getSnapToPixel(),this.width_=i[0]};function Ur(t,e,n,i,r,o){Nr.call(this,t,e,n,i,r,o)}var Gr=kr;St.inherits(Ur,Nr),Ur.prototype.drawFlatCoordinates_=function(t,e,n,i){var r=this.coordinates.length,o=this.appendFlatCoordinates(t,e,n,i,!1,!1),s=[Lr.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n},Ur.prototype.drawLineString=function(t,e){var n,i,r=this.state,o=r.strokeStyle,s=r.lineWidth;void 0!==o&&void 0!==s&&(this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Lr.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],[Lr.BEGIN_PATH]),n=t.getFlatCoordinates(),i=t.getStride(),this.drawFlatCoordinates_(n,0,n.length,i),this.hitDetectionInstructions.push([Lr.STROKE]),this.endGeometry(t,e))},Ur.prototype.drawMultiLineString=function(t,e){var n=this.state,i=n.strokeStyle,r=n.lineWidth;if(void 0!==i&&void 0!==r){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Lr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],[Lr.BEGIN_PATH]);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinates_(s,u,o[l],a);this.hitDetectionInstructions.push([Lr.STROKE]),this.endGeometry(t,e)}},Ur.prototype.finish=function(){var t=this.state;null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push([Lr.STROKE]),this.reverseHitDetectionInstructions(),this.state=null},Ur.prototype.applyStroke=function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push([Lr.STROKE]),t.lastStroke=this.coordinates.length),t.lastStroke=0,Nr.prototype.applyStroke.call(this,t),this.instructions.push([Lr.BEGIN_PATH])};function jr(t,e,n,i,r,o){Nr.call(this,t,e,n,i,r,o)}var Vr=Ur;St.inherits(jr,Nr),jr.prototype.drawFlatCoordinatess_=function(t,e,n,i){var r=this.state,o=void 0!==r.fillStyle,s=null!=r.strokeStyle,a=n.length,u=[Lr.BEGIN_PATH];this.instructions.push(u),this.hitDetectionInstructions.push(u);for(var l=0;l<a;++l){var c,h=n[l],f=this.coordinates.length,p=this.appendFlatCoordinates(t,e,h,i,!0,!s),d=[Lr.MOVE_TO_LINE_TO,f,p];this.instructions.push(d),this.hitDetectionInstructions.push(d),s&&(c=[Lr.CLOSE_PATH],this.instructions.push(c),this.hitDetectionInstructions.push(c)),e=h}var g,v=[Lr.FILL];return this.hitDetectionInstructions.push(v),o&&this.instructions.push(v),s&&(g=[Lr.STROKE],this.instructions.push(g),this.hitDetectionInstructions.push(g)),e},jr.prototype.drawCircle=function(t,e){var n,i,r,o,s,a,u,l=this.state,c=l.fillStyle,h=l.strokeStyle;void 0===c&&void 0===h||(this.setFillStrokeStyles_(t),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Lr.SET_FILL_STYLE,Qi.asString(Ki.defaultFillStyle)]),void 0!==l.strokeStyle&&this.hitDetectionInstructions.push([Lr.SET_STROKE_STYLE,l.strokeStyle,l.lineWidth,l.lineCap,l.lineJoin,l.miterLimit,l.lineDash,l.lineDashOffset]),n=t.getFlatCoordinates(),i=t.getStride(),r=this.coordinates.length,this.appendFlatCoordinates(n,0,n.length,i,!1,!1),o=[Lr.BEGIN_PATH],s=[Lr.CIRCLE,r],this.instructions.push(o,s),this.hitDetectionInstructions.push(o,s),a=[Lr.FILL],this.hitDetectionInstructions.push(a),void 0!==l.fillStyle&&this.instructions.push(a),void 0!==l.strokeStyle&&(u=[Lr.STROKE],this.instructions.push(u),this.hitDetectionInstructions.push(u)),this.endGeometry(t,e))},jr.prototype.drawPolygon=function(t,e){var n=this.state;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Lr.SET_FILL_STYLE,Qi.asString(Ki.defaultFillStyle)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Lr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var i=t.getEnds(),r=t.getOrientedFlatCoordinates(),o=t.getStride();this.drawFlatCoordinatess_(r,0,i,o),this.endGeometry(t,e)},jr.prototype.drawMultiPolygon=function(t,e){var n=this.state,i=n.fillStyle,r=n.strokeStyle;if(void 0!==i||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Lr.SET_FILL_STYLE,Qi.asString(Ki.defaultFillStyle)]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Lr.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinatess_(s,u,o[l],a);this.endGeometry(t,e)}},jr.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,n=0,i=e.length;n<i;++n)e[n]=vn.snap(e[n],t)},jr.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.applyFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)};function Br(t,e,n,i,r,o){Nr.call(this,t,e,n,i,r,o),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},Ki.labelCache.prune()}var Wr=jr,Hr={lineString:function(t,e,n,i,r){for(var o,s,a,u,l,c,h,f,p=n,d=n,g=0,v=0,m=n,y=n;y<i;y+=r){var _=e[y],E=e[y+1];void 0!==a&&(h=_-a,f=E-u,s=Math.sqrt(h*h+f*f),void 0!==l&&(v+=o,t<Math.acos((l*h+c*f)/(o*s))&&(g<v&&(g=v,p=m,d=y),v=0,m=y-r)),o=s,l=h,c=f),a=_,u=E}return g<(v+=s)?[m,y]:[p,d]}},qr=Hr,Xr={POINT:"point",LINE:"line"};St.inherits(Br,Nr),Br.measureTextWidths=function(t,e,n){for(var i,r=e.length,o=0,s=0;s<r;++s)i=Ki.measureTextWidth(t,e[s]),o=Math.max(o,i),n.push(i);return o},Br.prototype.drawText=function(t,e){var n=this.textFillState_,i=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(n||i)){var o=this.coordinates.length,s=t.getType(),a=null,u=2,l=2;if(r.placement===Xr.LINE){if(!$t.intersects(this.getBufferedMaxExtent(),t.getExtent()))return;a=t.getFlatCoordinates(),l=t.getStride();if(s==I.LINE_STRING)h=[a.length];else if(s==I.MULTI_LINE_STRING)h=t.getEnds();else if(s==I.POLYGON)h=t.getEnds().slice(0,1);else if(s==I.MULTI_POLYGON)for(var c=t.getEndss(),h=[],f=0,p=c.length;f<p;++f)h.push(c[f][0]);this.beginGeometry(t,e);for(var d,g,v=r.textAlign,m=0,y=0,_=h.length;y<_;++y){for(g=null==v?(m=(d=qr.lineString(r.maxAngle,a,m,h[y],l))[0],d[1]):h[y],f=m;f<g;f+=l)this.coordinates.push(a[f],a[f+1]);u=this.coordinates.length,m=h[y],this.drawChars_(o,u,this.declutterGroup_),o=u}this.endGeometry(t,e)}else{var E=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),x=E.width/this.pixelRatio;switch(s){case I.POINT:case I.MULTI_POINT:u=(a=t.getFlatCoordinates()).length;break;case I.LINE_STRING:a=t.getFlatMidpoint();break;case I.CIRCLE:a=t.getCenter();break;case I.MULTI_LINE_STRING:u=(a=t.getFlatMidpoints()).length;break;case I.POLYGON:if(a=t.getFlatInteriorPoint(),!r.overflow&&a[2]/this.resolution<x)return;l=3;break;case I.MULTI_POLYGON:var C=t.getFlatInteriorPoints();for(a=[],f=0,p=C.length;f<p;f+=3)(r.overflow||C[f+2]/this.resolution>=x)&&a.push(C[f],C[f+1]);if(0==(u=a.length))return}u=this.appendFlatCoordinates(a,0,u,l,!1,!1),this.beginGeometry(t,e),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),this.updateFillStyle(this.state,this.applyFill,t),this.updateStrokeStyle(this.state,this.applyStroke)),this.drawTextImage_(E,o,u),this.endGeometry(t,e)}}},Br.prototype.getImage=function(t,e,n,i){var r=i+e+t+n+this.pixelRatio,o=Ki.labelCache;if(!o.containsKey(r)){var s=i?this.strokeStates[i]||this.textStrokeState_:null,a=n?this.fillStates[n]||this.textFillState_:null,u=this.textStates[e]||this.textState_,l=this.pixelRatio,c=u.scale*l,h=Fr.TEXT_ALIGN[u.textAlign||Ki.defaultTextAlign],f=i&&s.lineWidth?s.lineWidth:0,p=t.split("\n"),d=p.length,g=[],v=Br.measureTextWidths(u.font,p,g),m=Ki.measureTextHeight(u.font),y=m*d,_=v+f,E=xt.createCanvasContext2D(Math.ceil(_*c),Math.ceil((y+f)*c)),x=E.canvas;o.set(r,x),1!=c&&E.scale(c,c),E.font=u.font,i&&(E.strokeStyle=s.strokeStyle,E.lineWidth=f*(ce.SAFARI?c:1),E.lineCap=s.lineCap,E.lineJoin=s.lineJoin,E.miterLimit=s.miterLimit,ce.CANVAS_LINE_DASH&&s.lineDash.length&&(E.setLineDash(s.lineDash),E.lineDashOffset=s.lineDashOffset)),n&&(E.fillStyle=a.fillStyle),E.textBaseline="middle",E.textAlign="center";var C,S=.5-h,$=h*x.width/c+S*f;if(i)for(C=0;C<d;++C)E.strokeText(p[C],$+S*g[C],.5*(f+m)+C*m);if(n)for(C=0;C<d;++C)E.fillText(p[C],$+S*g[C],.5*(f+m)+C*m)}return o.get(r)},Br.prototype.drawTextImage_=function(t,e,n){var i=this.textState_,r=this.textStrokeState_,o=this.pixelRatio,s=Fr.TEXT_ALIGN[i.textAlign||Ki.defaultTextAlign],a=Fr.TEXT_ALIGN[i.textBaseline],u=r&&r.lineWidth?r.lineWidth:0,l=s*t.width/o+2*(.5-s)*u,c=a*t.height/o+2*(.5-a)*u;this.instructions.push([Lr.DRAW_IMAGE,e,n,t,(l-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,!0,t.width,i.padding==Ki.defaultPadding?Ki.defaultPadding:i.padding.map(function(t){return t*o}),!!i.backgroundFill,!!i.backgroundStroke]),this.hitDetectionInstructions.push([Lr.DRAW_IMAGE,e,n,t,(l-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,!0,t.width,i.padding,!!i.backgroundFill,!!i.backgroundStroke])},Br.prototype.drawChars_=function(t,e,n){var i=this.textStrokeState_,r=this.textState_,o=this.textFillState_,s=this.strokeKey_;i&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:i.strokeStyle,lineCap:i.lineCap,lineDashOffset:i.lineDashOffset,lineWidth:i.lineWidth,lineJoin:i.lineJoin,miterLimit:i.miterLimit,lineDash:i.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:r.font,textAlign:r.textAlign||Ki.defaultTextAlign,scale:r.scale});var u=this.fillKey_;o&&(u in this.fillStates||(this.fillStates[u]={fillStyle:o.fillStyle}));var l=this.pixelRatio,c=Fr.TEXT_ALIGN[r.textBaseline],h=this.textOffsetY_*l,f=this.text_,p=r.font,d=r.scale,g=i?i.lineWidth*d/2:0,v=this.widths_[p];v||(this.widths_[p]=v={}),this.instructions.push([Lr.DRAW_CHARS,t,e,c,n,r.overflow,u,r.maxAngle,function(t){return(v[t]||(v[t]=Ki.measureTextWidth(p,t)))*d*l},h,s,g*l,f,a,1]),this.hitDetectionInstructions.push([Lr.DRAW_CHARS,t,e,c,n,r.overflow,u,r.maxAngle,function(t){return(v[t]||(v[t]=Ki.measureTextWidth(p,t)))*d},h,s,g,f,a,1/l])},Br.prototype.setTextStyle=function(t,e){var n,i,r,o,s,a,u,l,c,h,f,p,d,g,v;t?(this.declutterGroup_=e,(o=t.getFill())?(i=(i=this.textFillState_)||(this.textFillState_={})).fillStyle=er.asColorLike(o.getColor()||Ki.defaultFillStyle):i=this.textFillState_=null,(s=t.getStroke())?(r=(r=this.textStrokeState_)||(this.textStrokeState_={}),a=s.getLineDash(),u=s.getLineDashOffset(),l=s.getWidth(),c=s.getMiterLimit(),r.lineCap=s.getLineCap()||Ki.defaultLineCap,r.lineDash=a?a.slice():Ki.defaultLineDash,r.lineDashOffset=void 0===u?Ki.defaultLineDashOffset:u,r.lineJoin=s.getLineJoin()||Ki.defaultLineJoin,r.lineWidth=void 0===l?Ki.defaultLineWidth:l,r.miterLimit=void 0===c?Ki.defaultMiterLimit:c,r.strokeStyle=er.asColorLike(s.getColor()||Ki.defaultStrokeStyle)):r=this.textStrokeState_=null,n=this.textState_,h=t.getFont()||Ki.defaultFont,Ki.checkFont(h),f=t.getScale(),n.overflow=t.getOverflow(),n.font=h,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||Ki.defaultTextBaseline,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Ki.defaultPadding,n.scale=void 0===f?1:f,p=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),v=t.getRotation(),this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===v?0:v,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:St.getUid(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?"),this.fillKey_=i?"string"==typeof i.fillStyle?i.fillStyle:"|"+St.getUid(i.fillStyle):""):this.text_=""};function zr(t,e,n,i,r,o,s){wr.call(this),this.declutterTree_=o,this.declutterGroup_=null,this.tolerance_=t,this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=s,this.replaysByZIndex_={},this.hitDetectionContext_=xt.createCanvasContext2D(1,1),this.hitDetectionTransform_=en.create()}var Yr=Br;St.inherits(zr,wr),zr.circleArrayCache_={0:[[!0]]},zr.fillCircleArrayRowToMiddle_=function(t,e,n){var i,r=Math.floor(t.length/2);if(r<=e)for(i=r;i<e;i++)t[i][n]=!0;else if(e<r)for(i=e+1;i<r;i++)t[i][n]=!0},zr.getCircleArray_=function(t){if(void 0!==zr.circleArrayCache_[t])return zr.circleArrayCache_[t];for(var e=2*t+1,n=new Array(e),i=0;i<e;i++)n[i]=new Array(e);for(var r=t,o=0,s=0;o<=r;)zr.fillCircleArrayRowToMiddle_(n,t+r,t+o),zr.fillCircleArrayRowToMiddle_(n,t+o,t+r),zr.fillCircleArrayRowToMiddle_(n,t-o,t+r),zr.fillCircleArrayRowToMiddle_(n,t-r,t+o),zr.fillCircleArrayRowToMiddle_(n,t-r,t-o),zr.fillCircleArrayRowToMiddle_(n,t-o,t-r),zr.fillCircleArrayRowToMiddle_(n,t+o,t-r),zr.fillCircleArrayRowToMiddle_(n,t+r,t-o),0<2*((s+=1+2*++o)-r)+1&&(s+=1-2*--r);return zr.circleArrayCache_[t]=n},zr.replayDeclutter=function(t,e,n){for(var i=Object.keys(t).map(Number).sort(Rt.numberSafeCompareFunction),r={},o=0,s=i.length;o<s;++o)for(var a=t[i[o].toString()],u=0,l=a.length;u<l;){var c=a[u++],h=a[u++];c.replay(e,h,n,r)}},zr.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=$t.createEmpty()).push(1)),e},zr.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},zr.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var n=this.replaysByZIndex_[e],i=0,r=t.length;i<r;++i)if(t[i]in n)return!0;return!1},zr.prototype.finish=function(){var t;for(t in this.replaysByZIndex_){var e,n=this.replaysByZIndex_[t];for(e in n)n[e].finish()}},zr.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r,o,s){var a,u=2*(i=Math.round(i))+1,l=en.compose(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),c=this.hitDetectionContext_;c.canvas.width!==u||c.canvas.height!==u?(c.canvas.width=u,c.canvas.height=u):c.clearRect(0,0,u,u),void 0!==this.renderBuffer_&&(a=$t.createEmpty(),$t.extendCoordinate(a,t),$t.buffer(a,e*(this.renderBuffer_+i),a));var h,f=zr.getCircleArray_(i);return this.declutterTree_&&(h=this.declutterTree_.all().map(function(t){return t.value})),this.replayHitDetection_(c,l,n,r,function(t){for(var e=c.getImageData(0,0,u,u).data,n=0;n<u;n++)for(var i,r=0;r<u;r++){if(f[n][r])if(0<e[4*(r*u+n)+3])return h&&-1===h.indexOf(t)||(i=o(t)),i||void c.clearRect(0,0,u,u)}},a,s)},zr.prototype.getClipCoords=function(t){var e=this.maxExtent_,n=e[0],i=e[1],r=e[2],o=e[3],s=[n,i,n,o,r,o,r,i];return Je.transform2D(s,0,8,2,t,s),s},zr.prototype.getReplay=function(t,e){var n=void 0!==t?t.toString():"0",i=this.replaysByZIndex_[n];void 0===i&&(i={},this.replaysByZIndex_[n]=i);var r=i[e];return void 0===r&&(r=new zr.BATCH_CONSTRUCTORS_[e](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),i[e]=r),r},zr.prototype.getReplays=function(){return this.replaysByZIndex_},zr.prototype.isEmpty=function(){return Tt.isEmpty(this.replaysByZIndex_)},zr.prototype.replay=function(t,e,n,i,r,o){var s=Object.keys(this.replaysByZIndex_).map(Number);s.sort(Rt.numberSafeCompareFunction),t.save(),this.clip(t,e);for(var a=r||Fr.ORDER,u=0,l=s.length;u<l;++u)for(var c=s[u].toString(),h=this.replaysByZIndex_[c],f=0,p=a.length;f<p;++f){var d,g,v=a[f];void 0!==(g=h[v])&&(!o||v!=br.IMAGE&&v!=br.TEXT?g.replay(t,e,n,i):(d=o[c])?d.push(g,e.slice(0)):o[c]=[g,e.slice(0)])}t.restore()},zr.prototype.replayHitDetection_=function(t,e,n,i,r,o,s){var a,u,l=Object.keys(this.replaysByZIndex_).map(Number);for(l.sort(Rt.numberSafeCompareFunction),a=l.length-1;0<=a;--a)for(var c=l[a].toString(),h=this.replaysByZIndex_[c],f=Fr.ORDER.length-1;0<=f;--f){var p,d=Fr.ORDER[f];if(void 0!==(p=h[d]))if(!s||d!=br.IMAGE&&d!=br.TEXT){if(u=p.replayHitDetection(t,e,n,i,r,o))return u}else{var g=s[c];g?g.push(p,e.slice(0)):s[c]=[p,e.slice(0)]}}},zr.BATCH_CONSTRUCTORS_={Circle:Wr,Default:Nr,Image:Gr,LineString:Vr,Polygon:Wr,Text:Yr};var Kr=zr,Zr={defaultOrder:function(t,e){return St.getUid(t)-St.getUid(e)},getSquaredTolerance:function(t,e){var n=Zr.getTolerance(t,e);return n*n},getTolerance:function(t,e){return St.SIMPLIFY_TOLERANCE*t/e},renderCircleGeometry_:function(t,e,n,i){var r,o=n.getFill(),s=n.getStroke();(o||s)&&((r=t.getReplay(n.getZIndex(),br.CIRCLE)).setFillStrokeStyle(o,s),r.drawCircle(e,i));var a,u=n.getText();u&&((a=t.getReplay(n.getZIndex(),br.TEXT)).setTextStyle(u,t.addDeclutter(!1)),a.drawText(e,i))},renderFeature:function(t,e,n,i,r,o){var s,a=!1,u=n.getImage();return u&&((s=u.getImageState())==Ii.LOADED||s==Ii.ERROR?u.unlistenImageChange(r,o):(s==Ii.IDLE&&u.load(),s=u.getImageState(),u.listenImageChange(r,o),a=!0)),Zr.renderFeature_(t,e,n,i),a},renderFeature_:function(t,e,n,i){var r,o=n.getGeometryFunction()(e);o&&(r=o.getSimplifiedGeometry(i),n.getRenderer()?Zr.renderGeometry_(t,r,n,e):(0,Zr.GEOMETRY_RENDERERS_[r.getType()])(t,r,n,e))},renderGeometry_:function(t,e,n,i){if(e.getType()!=I.GEOMETRY_COLLECTION)t.getReplay(n.getZIndex(),br.DEFAULT).drawCustom(e,i,n.getRenderer());else for(var r=e.getGeometries(),o=0,s=r.length;o<s;++o)Zr.renderGeometry_(t,r[o],n,i)},renderGeometryCollectionGeometry_:function(t,e,n,i){for(var r=e.getGeometriesArray(),o=0,s=r.length;o<s;++o){(0,Zr.GEOMETRY_RENDERERS_[r[o].getType()])(t,r[o],n,i)}},renderLineStringGeometry_:function(t,e,n,i){var r,o=n.getStroke();o&&((r=t.getReplay(n.getZIndex(),br.LINE_STRING)).setFillStrokeStyle(null,o),r.drawLineString(e,i));var s,a=n.getText();a&&((s=t.getReplay(n.getZIndex(),br.TEXT)).setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,i))},renderMultiLineStringGeometry_:function(t,e,n,i){var r,o=n.getStroke();o&&((r=t.getReplay(n.getZIndex(),br.LINE_STRING)).setFillStrokeStyle(null,o),r.drawMultiLineString(e,i));var s,a=n.getText();a&&((s=t.getReplay(n.getZIndex(),br.TEXT)).setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,i))},renderMultiPolygonGeometry_:function(t,e,n,i){var r,o=n.getFill(),s=n.getStroke();(s||o)&&((r=t.getReplay(n.getZIndex(),br.POLYGON)).setFillStrokeStyle(o,s),r.drawMultiPolygon(e,i));var a,u=n.getText();u&&((a=t.getReplay(n.getZIndex(),br.TEXT)).setTextStyle(u,t.addDeclutter(!1)),a.drawText(e,i))},renderPointGeometry_:function(t,e,n,i){var r=n.getImage();if(r){if(r.getImageState()!=Ii.LOADED)return;var o=t.getReplay(n.getZIndex(),br.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawPoint(e,i)}var s,a=n.getText();a&&((s=t.getReplay(n.getZIndex(),br.TEXT)).setTextStyle(a,t.addDeclutter(!!r)),s.drawText(e,i))},renderMultiPointGeometry_:function(t,e,n,i){var r=n.getImage();if(r){if(r.getImageState()!=Ii.LOADED)return;var o=t.getReplay(n.getZIndex(),br.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawMultiPoint(e,i)}var s,a=n.getText();a&&((s=t.getReplay(n.getZIndex(),br.TEXT)).setTextStyle(a,t.addDeclutter(!!r)),s.drawText(e,i))},renderPolygonGeometry_:function(t,e,n,i){var r,o=n.getFill(),s=n.getStroke();(o||s)&&((r=t.getReplay(n.getZIndex(),br.POLYGON)).setFillStrokeStyle(o,s),r.drawPolygon(e,i));var a,u=n.getText();u&&((a=t.getReplay(n.getZIndex(),br.TEXT)).setTextStyle(u,t.addDeclutter(!1)),a.drawText(e,i))}};Zr.GEOMETRY_RENDERERS_={Point:Zr.renderPointGeometry_,LineString:Zr.renderLineStringGeometry_,Polygon:Zr.renderPolygonGeometry_,MultiPoint:Zr.renderMultiPointGeometry_,MultiLineString:Zr.renderMultiLineStringGeometry_,MultiPolygon:Zr.renderMultiPolygonGeometry_,GeometryCollection:Zr.renderGeometryCollectionGeometry_,Circle:Zr.renderCircleGeometry_};function Jr(t){lr.call(this,t),this.declutterTree_=t.getDeclutter()?Rr()(9):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=$t.createEmpty(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=xt.createCanvasContext2D(),rt.listen(Ki.labelCache,ht.CLEAR,this.handleFontsChanged_,this)}var Qr=Zr;St.inherits(Jr,lr),Jr.handles=function(t,e){return t===jn.CANVAS&&e.getType()===Jt.VECTOR},Jr.create=function(t,e){return new Jr(e)},Jr.prototype.disposeInternal=function(){rt.unlisten(Ki.labelCache,ht.CLEAR,this.handleFontsChanged_,this),lr.prototype.disposeInternal.call(this)},Jr.prototype.composeFrame=function(t,e,n){var i=t.extent,r=t.pixelRatio,o=e.managed?t.skippedFeatureUids:{},s=t.viewState,a=s.projection,u=s.rotation,l=a.getExtent(),c=this.getLayer().getSource(),h=this.getTransform(t,0);this.preCompose(n,t,h);var f=e.extent,p=void 0!==f;p&&this.clip(n,t,f);var d=this.replayGroup_;if(d&&!d.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var g,v,m,y=this.getLayer(),_=0,E=0,x=1!==e.opacity,C=y.hasListener(Dt.RENDER),S=x||C?(m=n.canvas.width,g=n.canvas.height,u&&(_=((v=Math.round(Math.sqrt(m*m+g*g)))-m)/2,E=(v-g)/2,m=g=v),this.context.canvas.width=m,this.context.canvas.height=g,this.context):n,$=S.globalAlpha;x||(S.globalAlpha=e.opacity),S!=n&&S.translate(_,E);var T,R=t.size[0]*r,w=t.size[1]*r;if(Ki.rotateAtOffset(S,-u,R/2,w/2),d.replay(S,h,u,o),c.getWrapX()&&a.canWrapX()&&!$t.containsExtent(l,i)){for(var b,I=i[0],A=$t.getWidth(l),O=0;I<l[0];)b=A*--O,h=this.getTransform(t,b),d.replay(S,h,u,o),I+=A;for(O=0,I=i[2];I>l[2];)b=A*++O,h=this.getTransform(t,b),d.replay(S,h,u,o),I-=A;h=this.getTransform(t,0)}Ki.rotateAtOffset(S,u,R/2,w/2),S!=n&&(C&&this.dispatchRenderEvent(S,t,h),x?(T=n.globalAlpha,n.globalAlpha=e.opacity,n.drawImage(S.canvas,-_,-E),n.globalAlpha=T):n.drawImage(S.canvas,-_,-E),S.translate(-_,-E)),x||(S.globalAlpha=$)}p&&n.restore(),this.postCompose(n,t,e,h)},Jr.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){if(this.replayGroup_){var o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,s,n,{},function(t){var e=St.getUid(t).toString();if(!(e in u))return u[e]=!0,i.call(r,t,a)},null)}},Jr.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},Jr.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},Jr.prototype.prepareFrame=function(t,e){var r=this.getLayer(),n=r.getSource();this.updateLogos(t,n);var i=t.viewHints[Ve.ANIMATING],o=t.viewHints[Ve.INTERACTING],s=r.getUpdateWhileAnimating(),a=r.getUpdateWhileInteracting();if(!this.dirty_&&!s&&i||!a&&o)return!0;var u=t.extent,l=t.viewState,c=l.projection,h=l.resolution,f=t.pixelRatio,p=r.getRevision(),d=r.getRenderBuffer(),g=r.getRenderOrder();void 0===g&&(g=Qr.defaultOrder);var v,m,y=$t.buffer(u,d*h),_=l.projection.getExtent();if(n.getWrapX()&&l.projection.canWrapX()&&!$t.containsExtent(_,t.extent)&&(v=$t.getWidth(_),m=Math.max($t.getWidth(y)/2,v),y[0]=_[0]-m,y[2]=_[2]+m),!this.dirty_&&this.renderedResolution_==h&&this.renderedRevision_==p&&this.renderedRenderOrder_==g&&$t.containsExtent(this.renderedExtent_,y))return!(this.replayGroupChanged=!1);this.replayGroup_=null,this.dirty_=!1;var E=new Kr(Qr.getTolerance(h,f),y,h,f,n.getOverlaps(),this.declutterTree_,r.getRenderBuffer());n.loadFeatures(y,h,c);var x=function(t){var e,n,i=t.getStyleFunction();i?e=i.call(t,h):(i=r.getStyleFunction())&&(e=i(t,h)),e&&(n=this.renderFeature(t,h,f,e,E),this.dirty_=this.dirty_||n)}.bind(this);if(g){var C=[];n.forEachFeatureInExtent(y,function(t){C.push(t)},this),C.sort(g);for(var S=0,$=C.length;S<$;++S)x(C[S])}else n.forEachFeatureInExtent(y,x,this);return E.finish(),this.renderedResolution_=h,this.renderedRevision_=p,this.renderedRenderOrder_=g,this.renderedExtent_=y,this.replayGroup_=E,this.replayGroupChanged=!0},Jr.prototype.renderFeature=function(t,e,n,i,r){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var s=0,a=i.length;s<a;++s)o=Qr.renderFeature(r,t,i[s],Qr.getSquaredTolerance(e,n),this.handleStyleImageChange_,this)||o;else o=Qr.renderFeature(r,t,i,Qr.getSquaredTolerance(e,n),this.handleStyleImageChange_,this);return o};function to(t){this.context=null,$r.call(this,t),this.declutterTree_=t.getDeclutter()?Rr()(9):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=en.create(),this.zDirection=t.getRenderMode()==no.VECTOR?1:0,rt.listen(Ki.labelCache,ht.CLEAR,this.handleFontsChanged_,this)}var eo=Jr,no={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};St.inherits(to,$r),to.handles=function(t,e){return t===jn.CANVAS&&e.getType()===Jt.VECTOR_TILE},to.create=function(t,e){return new to(e)},to.IMAGE_REPLAYS={image:[br.POLYGON,br.CIRCLE,br.LINE_STRING,br.IMAGE,br.TEXT],hybrid:[br.POLYGON,br.LINE_STRING]},to.VECTOR_REPLAYS={image:[br.DEFAULT],hybrid:[br.IMAGE,br.TEXT,br.DEFAULT],vector:Fr.ORDER},to.prototype.disposeInternal=function(){rt.unlisten(Ki.labelCache,ht.CLEAR,this.handleFontsChanged_,this),$r.prototype.disposeInternal.call(this)},to.prototype.prepareFrame=function(t,e){var n,i=this.getLayer(),r=i.getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0,n=i.getRenderMode(),this.context||n==no.VECTOR||(this.context=xt.createCanvasContext2D()),this.context&&n==no.VECTOR&&(this.context=null)),this.renderedLayerRevision_=r,$r.prototype.prepareFrame.apply(this,arguments)},to.prototype.createReplayGroup_=function(t,e){var r=this.getLayer(),n=e.pixelRatio,i=e.viewState.projection,o=r.getRevision(),s=r.getRenderOrder()||null,a=t.getReplayState(r);if(a.dirty||a.renderedRevision!=o||a.renderedRenderOrder!=s){for(var u=r.getSource(),l=u.getTileGrid(),c=u.getTileGridForProjection(i),h=c.getResolution(t.tileCoord[0]),f=c.getTileCoordExtent(t.wrappedTileCoord),p={},d=0,g=t.tileKeys.length;d<g;++d){var v=t.getTile(t.tileKeys[d]);if(v.getState()!=Pe.ERROR){var m=v.tileCoord,y=l.getTileCoordExtent(m),_=$t.getIntersection(f,y),E=$t.equals(y,_)?null:$t.buffer(_,r.getRenderBuffer()*h),x=v.getProjection(),C=!1;W.equivalent(i,x)||(C=!0,v.setProjection(i)),a.dirty=!1;var S,$=new Kr(0,_,h,n,u.getOverlaps(),this.declutterTree_,r.getRenderBuffer()),T=Qr.getSquaredTolerance(h,n),R=function(t){var e,n,i=t.getStyleFunction();i?e=i.call(t,h):(i=r.getStyleFunction())&&(e=i(t,h)),e&&(n=this.renderFeature(t,T,e,$),this.dirty_=this.dirty_||n,a.dirty=a.dirty||n)},w=v.getFeatures();s&&s!==a.renderedRenderOrder&&w.sort(s);for(var b=0,I=w.length;b<I;++b)S=w[b],C&&(x.getUnits()==O.TILE_PIXELS&&(x.setWorldExtent(y),x.setExtent(v.getExtent())),S.getGeometry().transform(x,i)),E&&!$t.intersects(E,S.getGeometry().getExtent())||R.call(this,S);for(var A in $.finish(),$.getReplays())p[A]=!0;v.setReplayGroup(r,t.tileCoord.toString(),$)}}a.renderedRevision=o,a.renderedRenderOrder=s}},to.prototype.drawTileImage=function(t,e,n,i,r,o,s,a,u){var l=t;this.createReplayGroup_(l,e),this.context&&(this.renderTileImage_(l,e,n),$r.prototype.drawTileImage.apply(this,arguments))},to.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){var o=e.viewState.resolution,s=e.viewState.rotation;n=null==n?0:n;for(var a,u,l,c,h,f,p=this.getLayer(),d={},g=this.renderedTiles,v=p.getSource().getTileGridForProjection(e.viewState.projection),m=0,y=g.length;m<y;++m)if(h=(c=g[m]).wrappedTileCoord,f=v.getTileCoordExtent(h,this.tmpExtent),a=$t.buffer(f,n*o,a),$t.containsCoordinate(a,t))for(var _=0,E=c.tileKeys.length;_<E;++_){var x=c.getTile(c.tileKeys[_]);x.getState()!=Pe.ERROR&&(l=x.getReplayGroup(p,c.tileCoord.toString()),u=u||l.forEachFeatureAtCoordinate(t,o,s,n,{},function(t){var e=St.getUid(t).toString();if(!(e in d))return d[e]=!0,i.call(r,t,p)},null))}return u},to.prototype.getReplayTransform_=function(t,e){var n=this.getLayer().getSource().getTileGrid(),i=t.tileCoord,r=n.getResolution(i[0]),o=e.viewState,s=e.pixelRatio,a=o.resolution/s,u=n.getTileCoordExtent(i,this.tmpExtent),l=o.center,c=$t.getTopLeft(u),h=e.size,f=Math.round(s*h[0]/2),p=Math.round(s*h[1]/2);return en.compose(this.tmpTransform_,f,p,r/a,r/a,o.rotation,(c[0]-l[0])/r,(l[1]-c[1])/r)},to.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},to.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},to.prototype.postCompose=function(t,e,n){var i,r,o=this.getLayer(),s=o.getDeclutter()?{}:null,a=o.getSource(),u=o.getRenderMode(),l=to.VECTOR_REPLAYS[u],c=e.pixelRatio,h=e.viewState.rotation,f=e.size;h&&(i=Math.round(c*f[0]/2),r=Math.round(c*f[1]/2),Ki.rotateAtOffset(t,-h,i,r)),s&&this.declutterTree_.clear();for(var p=this.renderedTiles,d=a.getTileGridForProjection(e.viewState.projection),g=[],v=[],m=p.length-1;0<=m;--m){var y=p[m];if(y.getState()!=Pe.ABORT)for(var _=y.tileCoord,E=d.getTileCoordExtent(_)[0]-d.getTileCoordExtent(y.wrappedTileCoord)[0],x=void 0,C=0,S=y.tileKeys.length;C<S;++C){var $=y.getTile(y.tileKeys[C]);if($.getState()!=Pe.ERROR){var T=$.getReplayGroup(o,_.toString());if(u==no.VECTOR||T.hasReplays(l)){x=x||this.getTransform(e,E);var R=$.tileCoord[0],w=T.getClipCoords(x);t.save(),t.globalAlpha=n.opacity;for(var b=0,I=g.length;b<I;++b){var A=g[b];R<v[b]&&(t.beginPath(),t.moveTo(w[0],w[1]),t.lineTo(w[2],w[3]),t.lineTo(w[4],w[5]),t.lineTo(w[6],w[7]),t.moveTo(A[6],A[7]),t.lineTo(A[4],A[5]),t.lineTo(A[2],A[3]),t.lineTo(A[0],A[1]),t.clip())}T.replay(t,x,h,{},l,s),t.restore(),g.push(w),v.push(R)}}}}s&&Kr.replayDeclutter(s,t,h),h&&Ki.rotateAtOffset(t,h,i,r),$r.prototype.postCompose.apply(this,arguments)},to.prototype.renderFeature=function(t,e,n,i){if(!n)return!1;var r=!1;if(Array.isArray(n))for(var o=0,s=n.length;o<s;++o)r=Qr.renderFeature(i,t,n[o],e,this.handleStyleImageChange_,this)||r;else r=Qr.renderFeature(i,t,n,e,this.handleStyleImageChange_,this);return r},to.prototype.renderTileImage_=function(t,e,n){var i=this.getLayer(),r=t.getReplayState(i),o=i.getRevision(),s=to.IMAGE_REPLAYS[i.getRenderMode()];if(s&&r.renderedTileRevision!==o){r.renderedTileRevision=o;var a=t.wrappedTileCoord,u=a[0],l=e.pixelRatio,c=i.getSource(),h=c.getTileGridForProjection(e.viewState.projection),f=h.getResolution(u),p=t.getContext(i),d=c.getTilePixelSize(u,l,e.viewState.projection);p.canvas.width=d[0],p.canvas.height=d[1];for(var g=h.getTileCoordExtent(a),v=0,m=t.tileKeys.length;v<m;++v){var y,_,E=t.getTile(t.tileKeys[v]);E.getState()!=Pe.ERROR&&(y=l/f,_=en.reset(this.tmpTransform_),en.scale(_,y,-y),en.translate(_,-g[0],-g[3]),E.getReplayGroup(i,t.tileCoord.toString()).replay(p,_,0,{},s))}}};function io(t){this.source_=t}var ro=to;io.prototype.getType=function(){},io.prototype.getSource=function(){return this.source_},io.prototype.isAnimated=Ke.FALSE;function oo(t){so.call(this,t)}var so=io;St.inherits(oo,so),oo.prototype.getType=function(){return se.FRAGMENT_SHADER};function ao(t){so.call(this,t)}var uo=oo;St.inherits(ao,so),ao.prototype.getType=function(){return se.VERTEX_SHADER};var lo=ao,co={};co.fragment=new uo(St.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n":"precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"),co.vertex=new lo(St.DEBUG_WEBGL?"varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n":"varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;//Until we get gl_VertexID in WebGL,we store an instruction.if(f==0.0){//Offsetting the edges of the triangle by lineWidth/2 is necessary,however//we should also leave some space for the antialiasing,thus we offset by lineWidth.offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}");function ho(t,e){ir.call(this),this.tolerance=t,this.maxExtent=e,this.origin=$t.getCenter(e),this.projectionMatrix_=en.create(),this.offsetRotateMatrix_=en.create(),this.offsetScaleMatrix_=en.create(),this.tmpMat4_=vo.create(),this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0}var fo=co,po=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_lineWidth":"k"),this.u_pixelRatio=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_pixelRatio":"l"),this.u_opacity=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_opacity":"m"),this.u_fillColor=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_fillColor":"n"),this.u_strokeColor=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_strokeColor":"o"),this.u_size=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_size":"p"),this.a_position=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_position":"e"),this.a_instruction=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_instruction":"f"),this.a_radius=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_radius":"g")},go={create:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},fromTransform:function(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}},vo=go;St.inherits(ho,ir),ho.prototype.getDeleteResourcesFunction=function(t){},ho.prototype.finish=function(t){},ho.prototype.setUpProgram=function(t,e,n,i){},ho.prototype.shutDownProgram=function(t,e){},ho.prototype.drawReplay=function(t,e,n,i){},ho.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,r){},ho.prototype.drawHitDetectionReplay=function(t,e,n,i,r,o){return r?this.drawHitDetectionReplayOneByOne(t,e,n,i,o):this.drawHitDetectionReplayAll(t,e,n,i)},ho.prototype.drawHitDetectionReplayAll=function(t,e,n,i){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawReplay(t,e,n,!0);var r=i(null);return r||void 0},ho.prototype.replay=function(t,e,n,i,r,o,s,a,u,l,c){var h,f,p,d,g,v,m,y,_=t.getGL();this.lineStringReplay&&(h=_.isEnabled(_.STENCIL_TEST),f=_.getParameter(_.STENCIL_FUNC),p=_.getParameter(_.STENCIL_VALUE_MASK),d=_.getParameter(_.STENCIL_REF),g=_.getParameter(_.STENCIL_WRITEMASK),v=_.getParameter(_.STENCIL_FAIL),m=_.getParameter(_.STENCIL_PASS_DEPTH_PASS),y=_.getParameter(_.STENCIL_PASS_DEPTH_FAIL),_.enable(_.STENCIL_TEST),_.clear(_.STENCIL_BUFFER_BIT),_.stencilMask(255),_.stencilFunc(_.ALWAYS,1,255),_.stencilOp(_.KEEP,_.KEEP,_.REPLACE),this.lineStringReplay.replay(t,e,n,i,r,o,s,a,u,l,c),_.stencilMask(0),_.stencilFunc(_.NOTEQUAL,1,255)),t.bindBuffer(se.ARRAY_BUFFER,this.verticesBuffer),t.bindBuffer(se.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);var E=this.setUpProgram(_,t,r,o),x=en.reset(this.projectionMatrix_);en.scale(x,2/(n*r[0]),2/(n*r[1])),en.rotate(x,-i),en.translate(x,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]));var C=en.reset(this.offsetScaleMatrix_);en.scale(C,2/r[0],2/r[1]);var S,$=en.reset(this.offsetRotateMatrix_);return 0!==i&&en.rotate($,-i),_.uniformMatrix4fv(E.u_projectionMatrix,!1,vo.fromTransform(this.tmpMat4_,x)),_.uniformMatrix4fv(E.u_offsetScaleMatrix,!1,vo.fromTransform(this.tmpMat4_,C)),_.uniformMatrix4fv(E.u_offsetRotateMatrix,!1,vo.fromTransform(this.tmpMat4_,$)),_.uniform1f(E.u_opacity,s),void 0===u?this.drawReplay(_,t,a,!1):S=this.drawHitDetectionReplay(_,t,a,u,l,c),this.shutDownProgram(_,E),this.lineStringReplay&&(h||_.disable(_.STENCIL_TEST),_.clear(_.STENCIL_BUFFER_BIT),_.stencilFunc(f,d,p),_.stencilMask(g),_.stencilOp(v,y,m)),S},ho.prototype.drawElements=function(t,e,n,i){var r=e.hasOESElementIndexUint?se.UNSIGNED_INT:se.UNSIGNED_SHORT,o=i-n,s=n*(e.hasOESElementIndexUint?4:2);t.drawElements(se.TRIANGLES,o,r,s)};var mo=ho,yo={defaultFont:"10px sans-serif",defaultFillStyle:[0,0,0,1],defaultLineCap:"round",defaultLineDash:[],defaultLineDashOffset:0,defaultLineJoin:"round",defaultMiterLimit:10,defaultStrokeStyle:[0,0,0,1],defaultTextAlign:.5,defaultTextBaseline:.5,defaultLineWidth:1,triangleIsCounterClockwise:function(t,e,n,i,r,o){var s=(n-t)*(o-e)-(r-t)*(i-e);return s<=yo.EPSILON&&s>=-yo.EPSILON?void 0:0<s}};yo.EPSILON=Number.EPSILON||2220446049250313e-31;var _o=yo,Eo=function(t,e){this.arr_=void 0!==t?t:[],this.usage_=void 0!==e?e:Eo.Usage_.STATIC_DRAW};Eo.prototype.getArray=function(){return this.arr_},Eo.prototype.getUsage=function(){return this.usage_},Eo.Usage_={STATIC_DRAW:se.STATIC_DRAW,STREAM_DRAW:se.STREAM_DRAW,DYNAMIC_DRAW:se.DYNAMIC_DRAW};function xo(t,e){mo.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}}var Co=Eo;St.inherits(xo,mo),xo.prototype.drawCoordinates_=function(t,e,n,i){for(var r=this.vertices.length,o=this.indices.length,s=r/4,a=e,u=n;a<u;a+=i)this.vertices[r++]=t[a],this.vertices[r++]=t[a+1],this.vertices[r++]=0,this.vertices[r++]=this.radius_,this.vertices[r++]=t[a],this.vertices[r++]=t[a+1],this.vertices[r++]=1,this.vertices[r++]=this.radius_,this.vertices[r++]=t[a],this.vertices[r++]=t[a+1],this.vertices[r++]=2,this.vertices[r++]=this.radius_,this.vertices[r++]=t[a],this.vertices[r++]=t[a+1],this.vertices[r++]=3,this.vertices[r++]=this.radius_,this.indices[o++]=s,this.indices[o++]=s+1,this.indices[o++]=s+2,this.indices[o++]=s+2,this.indices[o++]=s+3,this.indices[o++]=s,s+=4},xo.prototype.drawCircle=function(t,e){var n,i,r=t.getRadius(),o=t.getStride();r?(this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=r,n=t.getFlatCoordinates(),n=Je.translate(n,0,2,o,-this.origin[0],-this.origin[1]),this.drawCoordinates_(n,0,2,o)):this.state_.changed&&(this.styles_.pop(),this.styles_.length&&(i=this.styles_[this.styles_.length-1],this.state_.fillColor=i[0],this.state_.strokeColor=i[1],this.state_.lineWidth=i[2],this.state_.changed=!1))},xo.prototype.finish=function(t){this.verticesBuffer=new Co(this.vertices),this.indicesBuffer=new Co(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&0<this.styles_.length&&(this.styles_=[]),this.vertices=null,this.indices=null},xo.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,n=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(n)}},xo.prototype.setUpProgram=function(t,e,n,i){var r,o=fo.fragment,s=fo.vertex,a=e.getProgram(o,s);return this.defaultLocations_?r=this.defaultLocations_:(r=new po(t,a),this.defaultLocations_=r),e.useProgram(a),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,se.FLOAT,!1,16,0),t.enableVertexAttribArray(r.a_instruction),t.vertexAttribPointer(r.a_instruction,1,se.FLOAT,!1,16,8),t.enableVertexAttribArray(r.a_radius),t.vertexAttribPointer(r.a_radius,1,se.FLOAT,!1,16,12),t.uniform2fv(r.u_size,n),t.uniform1f(r.u_pixelRatio,i),r},xo.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_instruction),t.disableVertexAttribArray(e.a_radius)},xo.prototype.drawReplay=function(t,e,n,i){if(Tt.isEmpty(n))for(var r,o,s=this.startIndices[this.startIndices.length-1],a=this.styleIndices_.length-1;0<=a;--a)r=this.styleIndices_[a],o=this.styles_[a],this.setFillStyle_(t,o[0]),this.setStrokeStyle_(t,o[1],o[2]),this.drawElements(t,e,r,s),s=r;else this.drawReplaySkipping_(t,e,n)},xo.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,r){for(var o,s,a,u,l=this.startIndices.length-2,c=this.startIndices[l+1],h=this.styleIndices_.length-1;0<=h;--h)for(s=this.styles_[h],this.setFillStyle_(t,s[0]),this.setStrokeStyle_(t,s[1],s[2]),a=this.styleIndices_[h];0<=l&&this.startIndices[l]>=a;){if(o=this.startIndices[l],u=this.startIndicesFeature[l],void 0===n[St.getUid(u).toString()]&&u.getGeometry()&&(void 0===r||$t.intersects(r,u.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,o,c);var f=i(u);if(f)return f}l--,c=o}},xo.prototype.drawReplaySkipping_=function(t,e,n){for(var i,r,o,s,a,u=this.startIndices.length-2,l=i=this.startIndices[u+1],c=this.styleIndices_.length-1;0<=c;--c){for(r=this.styles_[c],this.setFillStyle_(t,r[0]),this.setStrokeStyle_(t,r[1],r[2]),o=this.styleIndices_[c];0<=u&&this.startIndices[u]>=o;)a=this.startIndices[u],s=this.startIndicesFeature[u],n[St.getUid(s).toString()]&&(i!==l&&this.drawElements(t,e,i,l),l=a),u--,i=a;i!==l&&this.drawElements(t,e,i,l),i=l=o}},xo.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_fillColor,e)},xo.prototype.setStrokeStyle_=function(t,e,n){t.uniform4fv(this.defaultLocations_.u_strokeColor,e),t.uniform1f(this.defaultLocations_.u_lineWidth,n)},xo.prototype.setFillStrokeStyle=function(t,e){var n,i,r,o=e?(i=e.getLineDash(),this.state_.lineDash=i||_o.defaultLineDash,r=e.getLineDashOffset(),this.state_.lineDashOffset=r||_o.defaultLineDashOffset,n=!((n=e.getColor())instanceof CanvasGradient||n instanceof CanvasPattern)&&Qi.asArray(n).map(function(t,e){return 3!=e?t/255:t})||_o.defaultStrokeStyle,void 0!==(o=e.getWidth())?o:_o.defaultLineWidth):(n=[0,0,0,0],0),s=!((s=t?t.getColor():[0,0,0,0])instanceof CanvasGradient||s instanceof CanvasPattern)&&Qi.asArray(s).map(function(t,e){return 3!=e?t/255:t})||_o.defaultFillStyle;this.state_.strokeColor&&Rt.equals(this.state_.strokeColor,n)&&this.state_.fillColor&&Rt.equals(this.state_.fillColor,s)&&this.state_.lineWidth===o||(this.state_.changed=!0,this.state_.fillColor=s,this.state_.strokeColor=n,this.state_.lineWidth=o,this.styles_.push([s,n,o]))};var So=xo,$o={};$o.fragment=new uo(St.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),$o.vertex=new lo(St.DEBUG_WEBGL?"varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n":"varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}");function To(t,e){this.canvas_=t,this.gl_=e,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=Rt.includes(St.WEBGL_EXTENSIONS,"OES_element_index_uint"),this.hasOESElementIndexUint&&e.getExtension("OES_element_index_uint"),rt.listen(this.canvas_,bo.LOST,this.handleWebGLContextLost,this),rt.listen(this.canvas_,bo.RESTORED,this.handleWebGLContextRestored,this)}var Ro=$o,wo=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_opacity=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_opacity":"k"),this.u_image=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_image":"l"),this.a_position=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_position":"c"),this.a_texCoord=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_texCoord":"d"),this.a_offsets=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_offsets":"e"),this.a_opacity=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_opacity":"f"),this.a_rotateWithView=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_rotateWithView":"g")},bo={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};St.inherits(To,st),To.prototype.bindBuffer=function(t,e){var n,i,r,o=this.getGL(),s=e.getArray(),a=String(St.getUid(e));a in this.bufferCache_?(n=this.bufferCache_[a],o.bindBuffer(t,n.buffer)):(i=o.createBuffer(),o.bindBuffer(t,i),t==se.ARRAY_BUFFER?r=new Float32Array(s):t==se.ELEMENT_ARRAY_BUFFER&&(r=new(this.hasOESElementIndexUint?Uint32Array:Uint16Array)(s)),o.bufferData(t,r,e.getUsage()),this.bufferCache_[a]={buf:e,buffer:i})},To.prototype.deleteBuffer=function(t){var e=this.getGL(),n=String(St.getUid(t)),i=this.bufferCache_[n];e.isContextLost()||e.deleteBuffer(i.buffer),delete this.bufferCache_[n]},To.prototype.disposeInternal=function(){rt.unlistenAll(this.canvas_);var t,e=this.getGL();if(!e.isContextLost()){for(t in this.bufferCache_)e.deleteBuffer(this.bufferCache_[t].buffer);for(t in this.programCache_)e.deleteProgram(this.programCache_[t]);for(t in this.shaderCache_)e.deleteShader(this.shaderCache_[t]);e.deleteFramebuffer(this.hitDetectionFramebuffer_),e.deleteRenderbuffer(this.hitDetectionRenderbuffer_),e.deleteTexture(this.hitDetectionTexture_)}},To.prototype.getCanvas=function(){return this.canvas_},To.prototype.getGL=function(){return this.gl_},To.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},To.prototype.getShader=function(t){var e=String(St.getUid(t));if(e in this.shaderCache_)return this.shaderCache_[e];var n=this.getGL(),i=n.createShader(t.getType());return n.shaderSource(i,t.getSource()),n.compileShader(i),this.shaderCache_[e]=i},To.prototype.getProgram=function(t,e){var n=St.getUid(t)+"/"+St.getUid(e);if(n in this.programCache_)return this.programCache_[n];var i=this.getGL(),r=i.createProgram();return i.attachShader(r,this.getShader(t)),i.attachShader(r,this.getShader(e)),i.linkProgram(r),this.programCache_[n]=r},To.prototype.handleWebGLContextLost=function(){Tt.clear(this.bufferCache_),Tt.clear(this.shaderCache_),Tt.clear(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},To.prototype.handleWebGLContextRestored=function(){},To.prototype.initHitDetectionFramebuffer_=function(){var t=this.gl_,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var n=To.createEmptyTexture(t,1,1),i=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,i),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,1,1),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=e,this.hitDetectionTexture_=n,this.hitDetectionRenderbuffer_=i},To.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,!0)},To.createTexture_=function(t,e,n){var i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_S,e),void 0!==n&&t.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_T,n),i},To.createEmptyTexture=function(t,e,n,i,r){var o=To.createTexture_(t,i,r);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),o},To.createTexture=function(t,e,n,i){var r=To.createTexture_(t,n,i);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),r};function Io(t,e){mo.call(this,t,e),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0}var Ao=To;St.inherits(Io,mo),Io.prototype.getDeleteResourcesFunction=function(n){var i=this.verticesBuffer,r=this.indicesBuffer,o=this.getTextures(!0),s=n.getGL();return function(){if(!s.isContextLost())for(var t=0,e=o.length;t<e;++t)s.deleteTexture(o[t]);n.deleteBuffer(i),n.deleteBuffer(r)}},Io.prototype.drawCoordinates=function(t,e,n,i){for(var r,o,s,a,u,l=this.anchorX,c=this.anchorY,h=this.height,f=this.imageHeight,p=this.imageWidth,d=this.opacity,g=this.originX,v=this.originY,m=this.rotateWithView?1:0,y=-this.rotation,_=this.scale,E=this.width,x=Math.cos(y),C=Math.sin(y),S=this.indices.length,$=this.vertices.length,T=e;T<n;T+=i)a=t[T]-this.origin[0],u=t[T+1]-this.origin[1],r=$/8,o=-_*l,s=-_*(h-c),this.vertices[$++]=a,this.vertices[$++]=u,this.vertices[$++]=o*x-s*C,this.vertices[$++]=o*C+s*x,this.vertices[$++]=g/p,this.vertices[$++]=(v+h)/f,this.vertices[$++]=d,this.vertices[$++]=m,o=_*(E-l),s=-_*(h-c),this.vertices[$++]=a,this.vertices[$++]=u,this.vertices[$++]=o*x-s*C,this.vertices[$++]=o*C+s*x,this.vertices[$++]=(g+E)/p,this.vertices[$++]=(v+h)/f,this.vertices[$++]=d,this.vertices[$++]=m,o=_*(E-l),s=_*c,this.vertices[$++]=a,this.vertices[$++]=u,this.vertices[$++]=o*x-s*C,this.vertices[$++]=o*C+s*x,this.vertices[$++]=(g+E)/p,this.vertices[$++]=v/f,this.vertices[$++]=d,this.vertices[$++]=m,o=-_*l,s=_*c,this.vertices[$++]=a,this.vertices[$++]=u,this.vertices[$++]=o*x-s*C,this.vertices[$++]=o*C+s*x,this.vertices[$++]=g/p,this.vertices[$++]=v/f,this.vertices[$++]=d,this.vertices[$++]=m,this.indices[S++]=r,this.indices[S++]=1+r,this.indices[S++]=2+r,this.indices[S++]=r,this.indices[S++]=2+r,this.indices[S++]=3+r;return $},Io.prototype.createTextures=function(t,e,n,i){for(var r,o,s,a=e.length,u=0;u<a;++u)o=e[u],(s=St.getUid(o).toString())in n?r=n[s]:(r=Ao.createTexture(i,o,se.CLAMP_TO_EDGE,se.CLAMP_TO_EDGE),n[s]=r),t[u]=r},Io.prototype.setUpProgram=function(t,e,n,i){var r,o=Ro.fragment,s=Ro.vertex,a=e.getProgram(o,s);return this.defaultLocations?r=this.defaultLocations:(r=new wo(t,a),this.defaultLocations=r),e.useProgram(a),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,se.FLOAT,!1,32,0),t.enableVertexAttribArray(r.a_offsets),t.vertexAttribPointer(r.a_offsets,2,se.FLOAT,!1,32,8),t.enableVertexAttribArray(r.a_texCoord),t.vertexAttribPointer(r.a_texCoord,2,se.FLOAT,!1,32,16),t.enableVertexAttribArray(r.a_opacity),t.vertexAttribPointer(r.a_opacity,1,se.FLOAT,!1,32,24),t.enableVertexAttribArray(r.a_rotateWithView),t.vertexAttribPointer(r.a_rotateWithView,1,se.FLOAT,!1,32,28),r},Io.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_offsets),t.disableVertexAttribArray(e.a_texCoord),t.disableVertexAttribArray(e.a_opacity),t.disableVertexAttribArray(e.a_rotateWithView)},Io.prototype.drawReplay=function(t,e,n,i){var r=i?this.getHitDetectionTextures():this.getTextures(),o=i?this.hitDetectionGroupIndices:this.groupIndices;if(Tt.isEmpty(n))for(var s=0,a=r.length,u=0;s<a;++s){t.bindTexture(se.TEXTURE_2D,r[s]);var l=o[s];this.drawElements(t,e,u,l),u=l}else this.drawReplaySkipping(t,e,n,r,o)},Io.prototype.drawReplaySkipping=function(t,e,n,i,r){for(var o=0,s=0,a=i.length;s<a;++s){t.bindTexture(se.TEXTURE_2D,i[s]);for(var u=0<s?r[s-1]:0,l=r[s],c=u,h=u;o<this.startIndices.length&&this.startIndices[o]<=l;){var f=this.startIndicesFeature[o],h=void 0!==n[St.getUid(f).toString()]?(c!==h&&this.drawElements(t,e,c,h),c=o===this.startIndices.length-1?l:this.startIndices[o+1]):o===this.startIndices.length-1?l:this.startIndices[o+1];o++}c!==h&&this.drawElements(t,e,c,h)}},Io.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,r){for(var o,s,a,u,l=this.startIndices.length-1,c=this.getHitDetectionTextures(),h=c.length-1;0<=h;--h)for(t.bindTexture(se.TEXTURE_2D,c[h]),o=0<h?this.hitDetectionGroupIndices[h-1]:0,a=this.hitDetectionGroupIndices[h];0<=l&&this.startIndices[l]>=o;){if(s=this.startIndices[l],u=this.startIndicesFeature[l],void 0===n[St.getUid(u).toString()]&&u.getGeometry()&&(void 0===r||$t.intersects(r,u.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);var f=i(u);if(f)return f}a=s,l--}},Io.prototype.finish=function(t){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},Io.prototype.getTextures=function(t){},Io.prototype.getHitDetectionTextures=function(){};function Oo(t,e){Po.call(this,t,e),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]}var Po=Io;St.inherits(Oo,Po),Oo.prototype.drawMultiPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var n=t.getFlatCoordinates(),i=t.getStride();this.drawCoordinates(n,0,n.length,i)},Oo.prototype.drawPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var n=t.getFlatCoordinates(),i=t.getStride();this.drawCoordinates(n,0,n.length,i)},Oo.prototype.finish=function(t){var e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new Co(this.vertices);var n=this.indices;this.indicesBuffer=new Co(n);var i={};this.createTextures(this.textures_,this.images_,i,e),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,i,e),this.images_=null,this.hitDetectionImages_=null,Po.prototype.finish.call(this,t)},Oo.prototype.setImageStyle=function(t){var e,n=t.getAnchor(),i=t.getImage(1),r=t.getImageSize(),o=t.getHitDetectionImage(1),s=t.getOpacity(),a=t.getOrigin(),u=t.getRotateWithView(),l=t.getRotation(),c=t.getSize(),h=t.getScale();0===this.images_.length?this.images_.push(i):(e=this.images_[this.images_.length-1],St.getUid(e)!=St.getUid(i)&&(this.groupIndices.push(this.indices.length),this.images_.push(i))),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(o):(e=this.hitDetectionImages_[this.hitDetectionImages_.length-1],St.getUid(e)!=St.getUid(o)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(o))),this.anchorX=n[0],this.anchorY=n[1],this.height=c[1],this.imageHeight=r[1],this.imageWidth=r[0],this.opacity=s,this.originX=a[0],this.originY=a[1],this.rotation=l,this.rotateWithView=u,this.scale=h,this.width=c[0]},Oo.prototype.getTextures=function(t){return t?this.textures_.concat(this.hitDetectionTextures_):this.textures_},Oo.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_};var Lo=Oo,Mo={lineStringIsClosed:function(t,e,n,i){var r=n-i;return t[e]===t[r]&&t[e+1]===t[1+r]&&3<(n-e)/i&&!!un.linearRing(t,e,n,i)}},Do=Mo,Fo={};Fo.fragment=new uo(St.DEBUG_WEBGL?"precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),Fo.vertex=new lo(St.DEBUG_WEBGL?"varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n":"varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}");function ko(t,e){mo.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}}var No=Fo,Uo=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_lineWidth":"k"),this.u_miterLimit=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_miterLimit":"l"),this.u_opacity=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_opacity":"m"),this.u_color=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_color":"n"),this.u_size=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_size":"o"),this.u_pixelRatio=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_pixelRatio":"p"),this.a_lastPos=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_lastPos":"d"),this.a_position=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_position":"e"),this.a_nextPos=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_nextPos":"f"),this.a_direction=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_direction":"g")};St.inherits(ko,mo),ko.prototype.drawCoordinates_=function(t,e,n,i){for(var r,o,s,a,u,l,c=this.vertices.length,h=this.indices.length,f="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,p="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,d=Do.lineStringIsClosed(t,e,n,i),g=h,v=1,m=e,y=n;m<y;m+=i){if(s=c/7,a=u,u=l||[t[m],t[m+1]],m===e){if(l=[t[m+i],t[m+i+1]],n-e==2*i&&Rt.equals(u,l))break;if(!d){p&&(c=this.addVertices_([0,0],u,l,v*ko.Instruction_.BEGIN_LINE_CAP*p,c),c=this.addVertices_([0,0],u,l,-v*ko.Instruction_.BEGIN_LINE_CAP*p,c),this.indices[h++]=s+2,this.indices[h++]=s,this.indices[h++]=s+1,this.indices[h++]=s+1,this.indices[h++]=s+3,this.indices[h++]=s+2),c=this.addVertices_([0,0],u,l,v*ko.Instruction_.BEGIN_LINE*(p||1),c),g=(c=this.addVertices_([0,0],u,l,-v*ko.Instruction_.BEGIN_LINE*(p||1),c))/7-1;continue}a=[t[n-2*i],t[n-2*i+1]],r=l}else{if(m===n-i){if(d){l=r;break}a=a||[0,0],c=this.addVertices_(a,u,[0,0],v*ko.Instruction_.END_LINE*(p||1),c),c=this.addVertices_(a,u,[0,0],-v*ko.Instruction_.END_LINE*(p||1),c),this.indices[h++]=s,this.indices[h++]=g-1,this.indices[h++]=g,this.indices[h++]=g,this.indices[h++]=s+1,this.indices[h++]=s,p&&(c=this.addVertices_(a,u,[0,0],v*ko.Instruction_.END_LINE_CAP*p,c),c=this.addVertices_(a,u,[0,0],-v*ko.Instruction_.END_LINE_CAP*p,c),this.indices[h++]=s+2,this.indices[h++]=s,this.indices[h++]=s+1,this.indices[h++]=s+1,this.indices[h++]=s+3,this.indices[h++]=s+2);break}l=[t[m+i],t[m+i+1]]}o=_o.triangleIsCounterClockwise(a[0],a[1],u[0],u[1],l[0],l[1])?-1:1,c=this.addVertices_(a,u,l,o*ko.Instruction_.BEVEL_FIRST*(f||1),c),c=this.addVertices_(a,u,l,o*ko.Instruction_.BEVEL_SECOND*(f||1),c),c=this.addVertices_(a,u,l,-o*ko.Instruction_.MITER_BOTTOM*(f||1),c),e<m&&(this.indices[h++]=s,this.indices[h++]=g-1,this.indices[h++]=g,this.indices[h++]=s+2,this.indices[h++]=s,this.indices[h++]=0<v*o?g:g-1),this.indices[h++]=s,this.indices[h++]=s+2,this.indices[h++]=s+1,g=s+2,v=o,f&&(c=this.addVertices_(a,u,l,o*ko.Instruction_.MITER_TOP*f,c),this.indices[h++]=s+1,this.indices[h++]=s+3,this.indices[h++]=s)}d&&(s=s||c/7,o=Pn.linearRingIsClockwise([a[0],a[1],u[0],u[1],l[0],l[1]],0,6,2)?1:-1,c=this.addVertices_(a,u,l,o*ko.Instruction_.BEVEL_FIRST*(f||1),c),c=this.addVertices_(a,u,l,-o*ko.Instruction_.MITER_BOTTOM*(f||1),c),this.indices[h++]=s,this.indices[h++]=g-1,this.indices[h++]=g,this.indices[h++]=s+1,this.indices[h++]=s,this.indices[h++]=0<v*o?g:g-1)},ko.prototype.addVertices_=function(t,e,n,i,r){return this.vertices[r++]=t[0],this.vertices[r++]=t[1],this.vertices[r++]=e[0],this.vertices[r++]=e[1],this.vertices[r++]=n[0],this.vertices[r++]=n[1],this.vertices[r++]=i,r},ko.prototype.isValid_=function(t,e,n,i){var r=n-e;if(r<2*i)return!1;if(r!=2*i)return!0;var o=[t[e],t[e+1]],s=[t[e+i],t[e+i+1]];return!Rt.equals(o,s)},ko.prototype.drawLineString=function(t,e){var n=t.getFlatCoordinates(),i=t.getStride();this.isValid_(n,0,n.length,i)&&(n=Je.translate(n,0,n.length,i,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.drawCoordinates_(n,0,n.length,i))},ko.prototype.drawMultiLineString=function(t,e){var n=this.indices.length,i=t.getEnds();i.unshift(0);var r,o,s,a=t.getFlatCoordinates(),u=t.getStride();if(1<i.length)for(r=1,o=i.length;r<o;++r){this.isValid_(a,i[r-1],i[r],u)&&(s=Je.translate(a,i[r-1],i[r],u,-this.origin[0],-this.origin[1]),this.drawCoordinates_(s,0,s.length,u))}this.indices.length>n&&(this.startIndices.push(n),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(n),this.state_.changed=!1))},ko.prototype.drawPolygonCoordinates=function(t,e,n){if(Do.lineStringIsClosed(t,0,t.length,n)||(t.push(t[0]),t.push(t[1])),this.drawCoordinates_(t,0,t.length,n),e.length)for(var i=0,r=e.length;i<r;++i)Do.lineStringIsClosed(e[i],0,e[i].length,n)||(e[i].push(e[i][0]),e[i].push(e[i][1])),this.drawCoordinates_(e[i],0,e[i].length,n)},ko.prototype.setPolygonStyle=function(t,e){var n=void 0===e?this.indices.length:e;this.startIndices.push(n),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(n),this.state_.changed=!1)},ko.prototype.getCurrentIndex=function(){return this.indices.length},ko.prototype.finish=function(t){this.verticesBuffer=new Co(this.vertices),this.indicesBuffer=new Co(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&0<this.styles_.length&&(this.styles_=[]),this.vertices=null,this.indices=null},ko.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,n=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(n)}},ko.prototype.setUpProgram=function(t,e,n,i){var r,o=No.fragment,s=No.vertex,a=e.getProgram(o,s);return this.defaultLocations_?r=this.defaultLocations_:(r=new Uo(t,a),this.defaultLocations_=r),e.useProgram(a),t.enableVertexAttribArray(r.a_lastPos),t.vertexAttribPointer(r.a_lastPos,2,se.FLOAT,!1,28,0),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,se.FLOAT,!1,28,8),t.enableVertexAttribArray(r.a_nextPos),t.vertexAttribPointer(r.a_nextPos,2,se.FLOAT,!1,28,16),t.enableVertexAttribArray(r.a_direction),t.vertexAttribPointer(r.a_direction,1,se.FLOAT,!1,28,24),t.uniform2fv(r.u_size,n),t.uniform1f(r.u_pixelRatio,i),r},ko.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_lastPos),t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_nextPos),t.disableVertexAttribArray(e.a_direction)},ko.prototype.drawReplay=function(t,e,n,i){var r=t.getParameter(t.DEPTH_FUNC),o=t.getParameter(t.DEPTH_WRITEMASK);if(i||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),Tt.isEmpty(n))for(var s,a,u=this.startIndices[this.startIndices.length-1],l=this.styleIndices_.length-1;0<=l;--l)s=this.styleIndices_[l],a=this.styles_[l],this.setStrokeStyle_(t,a[0],a[1],a[2]),this.drawElements(t,e,s,u),t.clear(t.DEPTH_BUFFER_BIT),u=s;else this.drawReplaySkipping_(t,e,n);i||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(o),t.depthFunc(r))},ko.prototype.drawReplaySkipping_=function(t,e,n){for(var i,r,o,s,a,u=this.startIndices.length-2,l=i=this.startIndices[u+1],c=this.styleIndices_.length-1;0<=c;--c){for(r=this.styles_[c],this.setStrokeStyle_(t,r[0],r[1],r[2]),o=this.styleIndices_[c];0<=u&&this.startIndices[u]>=o;)a=this.startIndices[u],s=this.startIndicesFeature[u],n[St.getUid(s).toString()]&&(i!==l&&(this.drawElements(t,e,i,l),t.clear(t.DEPTH_BUFFER_BIT)),l=a),u--,i=a;i!==l&&(this.drawElements(t,e,i,l),t.clear(t.DEPTH_BUFFER_BIT)),i=l=o}},ko.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,r){for(var o,s,a,u,l=this.startIndices.length-2,c=this.startIndices[l+1],h=this.styleIndices_.length-1;0<=h;--h)for(s=this.styles_[h],this.setStrokeStyle_(t,s[0],s[1],s[2]),a=this.styleIndices_[h];0<=l&&this.startIndices[l]>=a;){if(o=this.startIndices[l],u=this.startIndicesFeature[l],void 0===n[St.getUid(u).toString()]&&u.getGeometry()&&(void 0===r||$t.intersects(r,u.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,o,c);var f=i(u);if(f)return f}l--,c=o}},ko.prototype.setStrokeStyle_=function(t,e,n,i){t.uniform4fv(this.defaultLocations_.u_color,e),t.uniform1f(this.defaultLocations_.u_lineWidth,n),t.uniform1f(this.defaultLocations_.u_miterLimit,i)},ko.prototype.setFillStrokeStyle=function(t,e){var n=e.getLineCap();this.state_.lineCap=void 0!==n?n:_o.defaultLineCap;var i=e.getLineDash();this.state_.lineDash=i||_o.defaultLineDash;var r=e.getLineDashOffset();this.state_.lineDashOffset=r||_o.defaultLineDashOffset;var o=e.getLineJoin();this.state_.lineJoin=void 0!==o?o:_o.defaultLineJoin;var s=!((s=e.getColor())instanceof CanvasGradient||s instanceof CanvasPattern)&&Qi.asArray(s).map(function(t,e){return 3!=e?t/255:t})||_o.defaultStrokeStyle,a=void 0!==(a=e.getWidth())?a:_o.defaultLineWidth,u=void 0!==(u=e.getMiterLimit())?u:_o.defaultMiterLimit;this.state_.strokeColor&&Rt.equals(this.state_.strokeColor,s)&&this.state_.lineWidth===a&&this.state_.miterLimit===u||(this.state_.changed=!0,this.state_.strokeColor=s,this.state_.lineWidth=a,this.state_.miterLimit=u,this.styles_.push([s,a,u]))},ko.Instruction_={ROUND:2,BEGIN_LINE:3,END_LINE:5,BEGIN_LINE_CAP:7,END_LINE_CAP:11,BEVEL_FIRST:13,BEVEL_SECOND:17,MITER_BOTTOM:19,MITER_TOP:23};var Go=ko,jo={};jo.fragment=new uo(St.DEBUG_WEBGL?"precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),jo.vertex=new lo(St.DEBUG_WEBGL?"\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n":"attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}");function Vo(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0}var Bo=jo,Wo=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_projectionMatrix":"b"),this.u_offsetScaleMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_offsetScaleMatrix":"c"),this.u_offsetRotateMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_offsetRotateMatrix":"d"),this.u_color=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_color":"e"),this.u_opacity=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_opacity":"f"),this.a_position=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_position":"a")};Vo.prototype.clone=function(){var t=this.getColor();return new Vo({color:t&&t.slice?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},Vo.prototype.getColor=function(){return this.color_},Vo.prototype.getLineCap=function(){return this.lineCap_},Vo.prototype.getLineDash=function(){return this.lineDash_},Vo.prototype.getLineDashOffset=function(){return this.lineDashOffset_},Vo.prototype.getLineJoin=function(){return this.lineJoin_},Vo.prototype.getMiterLimit=function(){return this.miterLimit_},Vo.prototype.getWidth=function(){return this.width_},Vo.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},Vo.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},Vo.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},Vo.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},Vo.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},Vo.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},Vo.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},Vo.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=St.getUid(this.color_).toString():this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_};function Ho(t){this.first_=void 0,this.last_=void 0,this.head_=void 0,this.circular_=void 0===t||t,this.length_=0}var qo=Vo;Ho.prototype.insertItem=function(t){var e,n={prev:void 0,next:void 0,data:t},i=this.head_;i?(e=i.next,n.prev=i,n.next=e,i.next=n,e&&(e.prev=n),i===this.last_&&(this.last_=n)):(this.first_=n,this.last_=n,this.circular_&&((n.next=n).prev=n)),this.head_=n,this.length_++},Ho.prototype.removeItem=function(){var t,e,n=this.head_;n&&(t=n.next,e=n.prev,t&&(t.prev=e),e&&(e.next=t),this.head_=t||e,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===n?this.first_=this.head_:this.last_===n&&(this.last_=e?this.head_.prev:this.head_),this.length_--)},Ho.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},Ho.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},Ho.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},Ho.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},Ho.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},Ho.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},Ho.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},Ho.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},Ho.prototype.concat=function(t){var e;t.head_&&(this.head_?(e=this.head_.next,this.head_.next=t.first_,t.first_.prev=this.head_,e.prev=t.last_,t.last_.next=e,this.length_+=t.length_):(this.head_=t.head_,this.first_=t.first_,this.last_=t.last_,this.length_=t.length_),t.head_=void 0,t.first_=void 0,t.last_=void 0,t.length_=0)},Ho.prototype.getLength=function(){return this.length_};function Xo(t){this.rbush_=Rr()(t),this.items_={}}var zo=Ho;Xo.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[St.getUid(e)]=n},Xo.prototype.load=function(t,e){for(var n=new Array(e.length),i=0,r=e.length;i<r;i++){var o=t[i],s=e[i],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};n[i]=a,this.items_[St.getUid(s)]=a}this.rbush_.load(n)},Xo.prototype.remove=function(t){var e=St.getUid(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},Xo.prototype.update=function(t,e){var n=this.items_[St.getUid(e)],i=[n.minX,n.minY,n.maxX,n.maxY];$t.equals(i,t)||(this.remove(e),this.insert(t,e))},Xo.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},Xo.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},Xo.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},Xo.prototype.forEachInExtent=function(t,e,n){return this.forEach_(this.getInExtent(t),e,n)},Xo.prototype.forEach_=function(t,e,n){for(var i,r=0,o=t.length;r<o;r++)if(i=e.call(n,t[r]))return i;return i},Xo.prototype.isEmpty=function(){return Tt.isEmpty(this.items_)},Xo.prototype.clear=function(){this.rbush_.clear(),this.items_={}},Xo.prototype.getExtent=function(t){var e=this.rbush_.data;return $t.createOrUpdate(e.minX,e.minY,e.maxX,e.maxY,t)},Xo.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[0|e]=t.items_[0|e]};function Yo(t,e){mo.call(this,t,e),this.lineStringReplay=new Go(t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}}var Ko=Xo;St.inherits(Yo,mo),Yo.prototype.drawCoordinates_=function(t,e,n){var i=new zo,r=new Ko;this.processFlatCoordinates_(t,n,i,r,!0);var o=this.getMaxCoords_(i);if(e.length){for(var s=[],a=0,u=e.length;a<u;++a){var l={list:new zo,maxCoords:void 0,rtree:new Ko};s.push(l),this.processFlatCoordinates_(e[a],n,l.list,l.rtree,!1),this.classifyPoints_(l.list,l.rtree,!0),l.maxCoords=this.getMaxCoords_(l.list)}for(s.sort(function(t,e){return e.maxCoords[0]===t.maxCoords[0]?t.maxCoords[1]-e.maxCoords[1]:e.maxCoords[0]-t.maxCoords[0]}),a=0;a<s.length;++a){var c,h=s[a].list,f=h.firstItem(),p=f;do{if(this.getIntersections_(p,r).length){c=!0;break}p=h.nextItem()}while(f!==p);c||this.bridgeHole_(h,s[a].maxCoords[0],i,o[0],r)&&(r.concat(s[a].rtree),this.classifyPoints_(i,r,!1))}}else this.classifyPoints_(i,r,!1);this.triangulate_(i,r)},Yo.prototype.processFlatCoordinates_=function(t,e,n,i,r){var o,s=Pn.linearRingIsClockwise(t,0,t.length,e),a=this.vertices.length/2,u=[],l=[];if(r===s){for(f=c=this.createPoint_(t[0],t[1],a++),p=e,d=t.length;p<d;p+=e)o=this.createPoint_(t[p],t[p+1],a++),l.push(this.insertItem_(f,o,n)),u.push([Math.min(f.x,o.x),Math.min(f.y,o.y),Math.max(f.x,o.x),Math.max(f.y,o.y)]),f=o;l.push(this.insertItem_(o,c,n)),u.push([Math.min(f.x,o.x),Math.min(f.y,o.y),Math.max(f.x,o.x),Math.max(f.y,o.y)])}else{for(var c,h=t.length-e,f=c=this.createPoint_(t[h],t[1+h],a++),p=h-e,d=0;d<=p;p-=e)o=this.createPoint_(t[p],t[p+1],a++),l.push(this.insertItem_(f,o,n)),u.push([Math.min(f.x,o.x),Math.min(f.y,o.y),Math.max(f.x,o.x),Math.max(f.y,o.y)]),f=o;l.push(this.insertItem_(o,c,n)),u.push([Math.min(f.x,o.x),Math.min(f.y,o.y),Math.max(f.x,o.x),Math.max(f.y,o.y)])}i.load(u,l)},Yo.prototype.getMaxCoords_=function(t){for(var e=t.firstItem(),n=e,i=[n.p0.x,n.p0.y];(n=t.nextItem()).p0.x>i[0]&&(i=[n.p0.x,n.p0.y]),n!==e;);return i},Yo.prototype.classifyPoints_=function(t,e,n){var i=t.firstItem(),r=i,o=t.nextItem(),s=!1;do{var a=n?_o.triangleIsCounterClockwise(o.p1.x,o.p1.y,r.p1.x,r.p1.y,r.p0.x,r.p0.y):_o.triangleIsCounterClockwise(r.p0.x,r.p0.y,r.p1.x,r.p1.y,o.p1.x,o.p1.y);void 0===a?(this.removeItem_(r,o,t,e),s=!0,o===i&&(i=t.getNextItem()),o=r,t.prevItem()):r.p1.reflex!==a&&(r.p1.reflex=a,s=!0),r=o,o=t.nextItem()}while(r!==i);return s},Yo.prototype.bridgeHole_=function(t,e,n,i,r){for(var o=t.firstItem();o.p1.x!==e;)o=t.nextItem();var s,a,u=o.p1,l={x:i,y:u.y,i:-1},c=1/0,h=this.getIntersections_({p0:u,p1:l},r,!0);for(m=0,y=h.length;m<y;++m){var f=h[m],p=this.calculateIntersection_(u,l,f.p0,f.p1,!0),d=Math.abs(u.x-p[0]);d<c&&void 0!==_o.triangleIsCounterClockwise(u.x,u.y,f.p0.x,f.p0.y,f.p1.x,f.p1.y)&&(c=d,a={x:p[0],y:p[1],i:-1},o=f)}if(c===1/0)return!1;if(s=o.p1,0<c){var g=this.getPointsInTriangle_(u,a,o.p1,r);if(g.length)for(var v=1/0,m=0,y=g.length;m<y;++m){var _=g[m],E=Math.atan2(u.y-_.y,l.x-_.x);(E<v||E===v&&_.x<s.x)&&(v=E,s=_)}}for(o=n.firstItem();o.p1.x!==s.x||o.p1.y!==s.y;)o=n.nextItem();var x={x:u.x,y:u.y,i:u.i,reflex:void 0},C={x:o.p1.x,y:o.p1.y,i:o.p1.i,reflex:void 0};return t.getNextItem().p0=x,this.insertItem_(u,o.p1,t,r),this.insertItem_(C,x,t,r),o.p1=C,t.setFirstItem(),n.concat(t),!0},Yo.prototype.triangulate_=function(t,e){for(var n,i=!1,r=this.isSimple_(t,e);3<t.getLength();)if(r){if(!this.clipEars_(t,e,r,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e,!0))break}else if(!this.clipEars_(t,e,r,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e)){if(!(r=this.isSimple_(t,e))){this.splitPolygon_(t,e);break}i=!this.isClockwise_(t),this.classifyPoints_(t,e,i)}3===t.getLength()&&(n=this.indices.length,this.indices[n++]=t.getPrevItem().p0.i,this.indices[n++]=t.getCurrItem().p0.i,this.indices[n++]=t.getNextItem().p0.i)},Yo.prototype.clipEars_=function(t,e,n,i){var r=this.indices.length,o=t.firstItem(),s=t.getPrevItem(),a=o,u=t.nextItem(),l=t.getNextItem(),c=!1;do{var h,f=a.p0,p=a.p1,d=u.p1;!1===p.reflex&&(h=n?0===this.getPointsInTriangle_(f,p,d,e,!0).length:i?this.diagonalIsInside_(l.p1,d,p,f,s.p0):this.diagonalIsInside_(s.p0,f,p,d,l.p1),(n||0===this.getIntersections_({p0:f,p1:d},e).length)&&h&&(!n&&!1!==f.reflex&&!1!==d.reflex&&Pn.linearRingIsClockwise([s.p0.x,s.p0.y,f.x,f.y,p.x,p.y,d.x,d.y,l.p1.x,l.p1.y],0,10,2)!==!i||(this.indices[r++]=f.i,this.indices[r++]=p.i,this.indices[r++]=d.i,this.removeItem_(a,u,t,e),u===o&&(o=l),c=!0))),s=t.getPrevItem(),a=t.getCurrItem(),u=t.nextItem(),l=t.getNextItem()}while(a!==o&&3<t.getLength());return c},Yo.prototype.resolveSelfIntersections_=function(t,e,n){var i=t.firstItem();t.nextItem();var r=i,o=t.nextItem(),s=!1;do{var a=this.calculateIntersection_(r.p0,r.p1,o.p0,o.p1,n);if(a){var u,l=!1,c=this.vertices.length,h=this.indices.length,f=c/2,p=t.prevItem();if(t.removeItem(),e.remove(p),l=p===i,n?(l=a[0]===r.p0.x&&a[1]===r.p0.y?(t.prevItem(),u=r.p0,o.p0=u,e.remove(r),l||r===i):(u=o.p1,r.p1=u,e.remove(o),l||o===i),t.removeItem()):(u=this.createPoint_(a[0],a[1],f),r.p1=u,o.p0=u,e.update([Math.min(r.p0.x,r.p1.x),Math.min(r.p0.y,r.p1.y),Math.max(r.p0.x,r.p1.x),Math.max(r.p0.y,r.p1.y)],r),e.update([Math.min(o.p0.x,o.p1.x),Math.min(o.p0.y,o.p1.y),Math.max(o.p0.x,o.p1.x),Math.max(o.p0.y,o.p1.y)],o)),this.indices[h++]=p.p0.i,this.indices[h++]=p.p1.i,this.indices[h++]=u.i,s=!0,l)break}r=t.getPrevItem(),o=t.nextItem()}while(r!==i);return s},Yo.prototype.isSimple_=function(t,e){var n=t.firstItem(),i=n;do{if(this.getIntersections_(i,e).length)return!1;i=t.nextItem()}while(i!==n);return!0},Yo.prototype.isClockwise_=function(t){for(var e=2*t.getLength(),n=new Array(e),i=t.firstItem(),r=i,o=0;n[o++]=r.p0.x,n[o++]=r.p0.y,(r=t.nextItem())!==i;);return Pn.linearRingIsClockwise(n,0,e,2)},Yo.prototype.splitPolygon_=function(t,e){var n=t.firstItem(),i=n;do{var r=this.getIntersections_(i,e);if(r.length){var o=r[0],s=this.vertices.length/2,a=this.calculateIntersection_(i.p0,i.p1,o.p0,o.p1),u=this.createPoint_(a[0],a[1],s),l=new zo,c=new Ko;this.insertItem_(u,i.p1,l,c),i.p1=u,e.update([Math.min(i.p0.x,u.x),Math.min(i.p0.y,u.y),Math.max(i.p0.x,u.x),Math.max(i.p0.y,u.y)],i);for(var h=t.nextItem();h!==o;)this.insertItem_(h.p0,h.p1,l,c),e.remove(h),t.removeItem(),h=t.getCurrItem();this.insertItem_(o.p0,u,l,c),o.p0=u,e.update([Math.min(o.p1.x,u.x),Math.min(o.p1.y,u.y),Math.max(o.p1.x,u.x),Math.max(o.p1.y,u.y)],o),this.classifyPoints_(t,e,!1),this.triangulate_(t,e),this.classifyPoints_(l,c,!1),this.triangulate_(l,c);break}i=t.nextItem()}while(i!==n)},Yo.prototype.createPoint_=function(t,e,n){var i=this.vertices.length;return{x:this.vertices[i++]=t,y:this.vertices[i++]=e,i:n,reflex:void 0}},Yo.prototype.insertItem_=function(t,e,n,i){var r={p0:t,p1:e};return n.insertItem(r),i&&i.insert([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],r),r},Yo.prototype.removeItem_=function(t,e,n,i){n.getCurrItem()===e&&(n.removeItem(),t.p1=e.p1,i.remove(e),i.update([Math.min(t.p0.x,t.p1.x),Math.min(t.p0.y,t.p1.y),Math.max(t.p0.x,t.p1.x),Math.max(t.p0.y,t.p1.y)],t))},Yo.prototype.getPointsInTriangle_=function(t,e,n,i,r){for(var o,s,a=[],u=i.getInExtent([Math.min(t.x,e.x,n.x),Math.min(t.y,e.y,n.y),Math.max(t.x,e.x,n.x),Math.max(t.y,e.y,n.y)]),l=0,c=u.length;l<c;++l)for(o in u[l])"object"!=typeof(s=u[l][o])||r&&!s.reflex||s.x===t.x&&s.y===t.y||s.x===e.x&&s.y===e.y||s.x===n.x&&s.y===n.y||-1!==a.indexOf(s)||!Cn.linearRingContainsXY([t.x,t.y,e.x,e.y,n.x,n.y],0,6,2,s.x,s.y)||a.push(s);return a},Yo.prototype.getIntersections_=function(t,e,n){for(var i=t.p0,r=t.p1,o=e.getInExtent([Math.min(i.x,r.x),Math.min(i.y,r.y),Math.max(i.x,r.x),Math.max(i.y,r.y)]),s=[],a=0,u=o.length;a<u;++a){var l=o[a];t!==l&&(n||l.p0!==r||l.p1!==i)&&this.calculateIntersection_(i,r,l.p0,l.p1,n)&&s.push(l)}return s},Yo.prototype.calculateIntersection_=function(t,e,n,i,r){var o=(i.y-n.y)*(e.x-t.x)-(i.x-n.x)*(e.y-t.y);if(0!=o){var s=((i.x-n.x)*(t.y-n.y)-(i.y-n.y)*(t.x-n.x))/o,a=((e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x))/o;if(!r&&s>_o.EPSILON&&s<1-_o.EPSILON&&a>_o.EPSILON&&a<1-_o.EPSILON||r&&0<=s&&s<=1&&0<=a&&a<=1)return[t.x+s*(e.x-t.x),t.y+s*(e.y-t.y)]}},Yo.prototype.diagonalIsInside_=function(t,e,n,i,r){if(void 0===e.reflex||void 0===i.reflex)return!1;var o=(n.x-i.x)*(e.y-i.y)>(n.y-i.y)*(e.x-i.x),s=(r.x-i.x)*(e.y-i.y)<(r.y-i.y)*(e.x-i.x),a=(t.x-e.x)*(i.y-e.y)>(t.y-e.y)*(i.x-e.x),u=(n.x-e.x)*(i.y-e.y)<(n.y-e.y)*(i.x-e.x),l=i.reflex?s||o:s&&o,c=e.reflex?u||a:u&&a;return l&&c},Yo.prototype.drawMultiPolygon=function(t,e){for(var n=t.getEndss(),i=t.getStride(),r=this.indices.length,o=this.lineStringReplay.getCurrentIndex(),s=t.getFlatCoordinates(),a=0,u=0,l=n.length;u<l;++u){var c=n[u];if(0<c.length){var h=Je.translate(s,a,c[0],i,-this.origin[0],-this.origin[1]);if(h.length){for(var f,p=[],d=1,g=c.length;d<g;++d)c[d]!==c[d-1]&&(f=Je.translate(s,c[d-1],c[d],i,-this.origin[0],-this.origin[1]),p.push(f));this.lineStringReplay.drawPolygonCoordinates(h,p,i),this.drawCoordinates_(h,p,i)}}a=c[c.length-1]}this.indices.length>r&&(this.startIndices.push(r),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(r),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>o&&this.lineStringReplay.setPolygonStyle(e,o)},Yo.prototype.drawPolygon=function(t,e){var n=t.getEnds(),i=t.getStride();if(0<n.length){var r=t.getFlatCoordinates().map(Number),o=Je.translate(r,0,n[0],i,-this.origin[0],-this.origin[1]);if(o.length){for(var s,a=[],u=1,l=n.length;u<l;++u)n[u]!==n[u-1]&&(s=Je.translate(r,n[u-1],n[u],i,-this.origin[0],-this.origin[1]),a.push(s));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(e),this.lineStringReplay.drawPolygonCoordinates(o,a,i),this.drawCoordinates_(o,a,i)}}},Yo.prototype.finish=function(t){this.verticesBuffer=new Co(this.vertices),this.indicesBuffer=new Co(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(t),0===this.styleIndices_.length&&0<this.styles_.length&&(this.styles_=[]),this.vertices=null,this.indices=null},Yo.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,n=this.indicesBuffer,i=this.lineStringReplay.getDeleteResourcesFunction(t);return function(){t.deleteBuffer(e),t.deleteBuffer(n),i()}},Yo.prototype.setUpProgram=function(t,e,n,i){var r,o=Bo.fragment,s=Bo.vertex,a=e.getProgram(o,s);return this.defaultLocations_?r=this.defaultLocations_:(r=new Wo(t,a),this.defaultLocations_=r),e.useProgram(a),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,se.FLOAT,!1,8,0),r},Yo.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position)},Yo.prototype.drawReplay=function(t,e,n,i){var r=t.getParameter(t.DEPTH_FUNC),o=t.getParameter(t.DEPTH_WRITEMASK);if(i||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),Tt.isEmpty(n))for(var s,a,u=this.startIndices[this.startIndices.length-1],l=this.styleIndices_.length-1;0<=l;--l)s=this.styleIndices_[l],a=this.styles_[l],this.setFillStyle_(t,a),this.drawElements(t,e,s,u),u=s;else this.drawReplaySkipping_(t,e,n);i||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(o),t.depthFunc(r))},Yo.prototype.drawHitDetectionReplayOneByOne=function(t,e,n,i,r){for(var o,s,a,u,l=this.startIndices.length-2,c=this.startIndices[l+1],h=this.styleIndices_.length-1;0<=h;--h)for(s=this.styles_[h],this.setFillStyle_(t,s),a=this.styleIndices_[h];0<=l&&this.startIndices[l]>=a;){if(o=this.startIndices[l],u=this.startIndicesFeature[l],void 0===n[St.getUid(u).toString()]&&u.getGeometry()&&(void 0===r||$t.intersects(r,u.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,o,c);var f=i(u);if(f)return f}l--,c=o}},Yo.prototype.drawReplaySkipping_=function(t,e,n){for(var i,r,o,s,a,u=this.startIndices.length-2,l=i=this.startIndices[u+1],c=this.styleIndices_.length-1;0<=c;--c){for(r=this.styles_[c],this.setFillStyle_(t,r),o=this.styleIndices_[c];0<=u&&this.startIndices[u]>=o;)a=this.startIndices[u],s=this.startIndicesFeature[u],n[St.getUid(s).toString()]&&(i!==l&&(this.drawElements(t,e,i,l),t.clear(t.DEPTH_BUFFER_BIT)),l=a),u--,i=a;i!==l&&(this.drawElements(t,e,i,l),t.clear(t.DEPTH_BUFFER_BIT)),i=l=o}},Yo.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_color,e)},Yo.prototype.setFillStrokeStyle=function(t,e){var n,i=!((i=t?t.getColor():[0,0,0,0])instanceof CanvasGradient||i instanceof CanvasPattern)&&Qi.asArray(i).map(function(t,e){return 3!=e?t/255:t})||_o.defaultFillStyle;this.state_.fillColor&&Rt.equals(i,this.state_.fillColor)||(this.state_.fillColor=i,this.state_.changed=!0,this.styles_.push(i)),e?this.lineStringReplay.setFillStrokeStyle(null,e):(n=new qo({color:[0,0,0,0],lineWidth:0}),this.lineStringReplay.setFillStrokeStyle(null,n))};function Zo(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=xt.createCanvasContext2D(t,t),this.canvas_=this.context_.canvas}var Jo=Yo;Zo.prototype.get=function(t){return this.entries_[t]||null},Zo.prototype.add=function(t,e,n,i,r){for(var o,s=0,a=this.emptyBlocks_.length;s<a;++s)if((o=this.emptyBlocks_[s]).width>=e+this.space_&&o.height>=n+this.space_){var u={offsetX:o.x+this.space_,offsetY:o.y+this.space_,image:this.canvas_};return this.entries_[t]=u,i.call(r,this.context_,o.x+this.space_,o.y+this.space_),this.split_(s,o,e+this.space_,n+this.space_),u}return null},Zo.prototype.split_=function(t,e,n,i){var r,o=e.width-n,s=e.height-i<o?(r={x:e.x+n,y:e.y,width:e.width-n,height:e.height},{x:e.x,y:e.y+i,width:n,height:e.height-i}):(r={x:e.x+n,y:e.y,width:e.width-n,height:i},{x:e.x,y:e.y+i,width:e.width,height:e.height-i});this.updateBlocks_(t,r,s)},Zo.prototype.updateBlocks_=function(t,e,n){var i=[t,1];0<e.width&&0<e.height&&i.push(e),0<n.width&&0<n.height&&i.push(n),this.emptyBlocks_.splice.apply(this.emptyBlocks_,i)};function Qo(t){var e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:St.INITIAL_ATLAS_SIZE,this.maxSize_=void 0!==e.maxSize?e.maxSize:-1!=St.MAX_ATLAS_SIZE?St.MAX_ATLAS_SIZE:void 0!==St.WEBGL_MAX_TEXTURE_SIZE?St.WEBGL_MAX_TEXTURE_SIZE:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new ts(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new ts(this.currentHitSize_,this.space_)]}var ts=Zo;Qo.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var n=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,n)},Qo.prototype.getInfo_=function(t,e){for(var n,i=0,r=t.length;i<r;++i)if(n=t[i].get(e))return n;return null},Qo.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},Qo.prototype.add=function(t,e,n,i,r,o){if(e+this.space_>this.maxSize_||n+this.space_>this.maxSize_)return null;var s=this.add_(!1,t,e,n,i,o);if(!s)return null;var a=void 0!==r?r:St.nullFunction,u=this.add_(!0,t,e,n,a,o);return this.mergeInfos_(s,u)},Qo.prototype.add_=function(t,e,n,i,r,o){for(var s,a,u,l=t?this.hitAtlases_:this.atlases_,c=0,h=l.length;c<h;++c){if(a=(s=l[c]).add(e,n,i,r,o))return a;a||c!==h-1||(t?(u=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=u):(u=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=u),s=new ts(u,this.space_),l.push(s),++h)}return null};function es(t,e){Po.call(this,t,e),this.images_=[],this.textures_=[],this.measureCanvas_=xt.createCanvasContext2D(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1}var ns=Qo;St.inherits(es,Po),es.prototype.drawText=function(t,e){if(this.text_){var n=null,i=2,r=2;switch(t.getType()){case I.POINT:case I.MULTI_POINT:i=(n=t.getFlatCoordinates()).length,r=t.getStride();break;case I.CIRCLE:n=t.getCenter();break;case I.LINE_STRING:n=t.getFlatMidpoint();break;case I.MULTI_LINE_STRING:i=(n=t.getFlatMidpoints()).length;break;case I.POLYGON:n=t.getFlatInteriorPoint();break;case I.MULTI_POLYGON:i=(n=t.getFlatInteriorPoints()).length}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);for(var o,s,a,u,l,c,h,f,p=this.currAtlas_,d=this.text_.split("\n"),g=this.getTextSize_(d),v=Math.round(g[0]*this.textAlign_-this.offsetX_),m=Math.round(g[1]*this.textBaseline_-this.offsetY_),y=this.state_.lineWidth/2*this.state_.scale,_=0,E=d.length;_<E;++_)for(a=0,u=p.height*_,o=0,s=(l=d[_].split("")).length;o<s;++o){(f=p.atlas.getInfo(l[o]))&&(c=f.image,this.anchorX=v-a,this.anchorY=m-u,this.originX=0===o?f.offsetX-y:f.offsetX,this.originY=f.offsetY,this.height=p.height,this.width=0===o||o===l.length-1?p.width[l[o]]+y:p.width[l[o]],this.imageHeight=c.height,this.imageWidth=c.width,0===this.images_.length?this.images_.push(c):(h=this.images_[this.images_.length-1],St.getUid(h)!=St.getUid(c)&&(this.groupIndices.push(this.indices.length),this.images_.push(c))),this.drawText_(n,0,i,r)),a+=this.width}}},es.prototype.getTextSize_=function(t){var o=this,s=this.currAtlas_,e=t.length*s.height;return[t.map(function(t){for(var e=0,n=0,i=t.length;n<i;++n){var r=t[n];s.width[r]||o.addCharToAtlas_(r),e+=s.width[r]?s.width[r]:0}return e}).reduce(function(t,e){return Math.max(t,e)}),e]},es.prototype.drawText_=function(t,e,n,i){for(var r=e,o=n;r<o;r+=i)this.drawCoordinates(t,e,n,i)},es.prototype.addCharToAtlas_=function(i){var t,r,e,n;1===i.length&&(t=this.currAtlas_,r=this.state_,(e=this.measureCanvas_.getContext("2d")).font=r.font,n=Math.ceil(e.measureText(i).width*r.scale),t.atlas.add(i,n,t.height,function(t,e,n){t.font=r.font,t.fillStyle=r.fillColor,t.strokeStyle=r.strokeColor,t.lineWidth=r.lineWidth,t.lineCap=r.lineCap,t.lineJoin=r.lineJoin,t.miterLimit=r.miterLimit,t.textAlign="left",t.textBaseline="top",ce.CANVAS_LINE_DASH&&r.lineDash&&(t.setLineDash(r.lineDash),t.lineDashOffset=r.lineDashOffset),1!==r.scale&&t.setTransform(r.scale,0,0,r.scale,0,0),r.strokeColor&&t.strokeText(i,e,n),r.fillColor&&t.fillText(i,e,n)})&&(t.width[i]=n))},es.prototype.finish=function(t){var e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new Co(this.vertices),this.indicesBuffer=new Co(this.indices);this.createTextures(this.textures_,this.images_,{},e),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,Po.prototype.finish.call(this,t)},es.prototype.setTextStyle=function(t){var e,n,i,r,o,s=this.state_,a=t.getFill(),u=t.getStroke();t&&t.getText()&&(a||u)?(a?(e=a.getColor(),s.fillColor=er.asColorLike(e||_o.defaultFillStyle)):s.fillColor=null,u?(n=u.getColor(),s.strokeColor=er.asColorLike(n||_o.defaultStrokeStyle),s.lineWidth=u.getWidth()||_o.defaultLineWidth,s.lineCap=u.getLineCap()||_o.defaultLineCap,s.lineDashOffset=u.getLineDashOffset()||_o.defaultLineDashOffset,s.lineJoin=u.getLineJoin()||_o.defaultLineJoin,s.miterLimit=u.getMiterLimit()||_o.defaultMiterLimit,i=u.getLineDash(),s.lineDash=i?i.slice():_o.defaultLineDash):(s.strokeColor=null,s.lineWidth=0),s.font=t.getFont()||_o.defaultFont,s.scale=t.getScale()||1,this.text_=t.getText(),r=Fr.TEXT_ALIGN[t.getTextAlign()],o=Fr.TEXT_ALIGN[t.getTextBaseline()],this.textAlign_=void 0===r?_o.defaultTextAlign:r,this.textBaseline_=void 0===o?_o.defaultTextBaseline:o,this.offsetX_=t.getOffsetX()||0,this.offsetY_=t.getOffsetY()||0,this.rotateWithView=!!t.getRotateWithView(),this.rotation=t.getRotation()||0,this.currAtlas_=this.getAtlas_(s)):this.text_=""},es.prototype.getAtlas_=function(t){var e,n=[];for(e in t)!t[e]&&0!==t[e]||(Array.isArray(t[e])?n=n.concat(t[e]):n.push(t[e]));var i,r,o=this.calculateHash_(n);return this.atlases_[o]||((i=this.measureCanvas_.getContext("2d")).font=t.font,r=Math.ceil((1.5*i.measureText("M").width+t.lineWidth/2)*t.scale),this.atlases_[o]={atlas:new ns({space:t.lineWidth+1}),width:{},height:r}),this.atlases_[o]},es.prototype.calculateHash_=function(t){for(var e="",n=0,i=t.length;n<i;++n)e+=t[n];return e},es.prototype.getTextures=function(t){return this.textures_},es.prototype.getHitDetectionTextures=function(){return this.textures_};function is(t,e,n){wr.call(this),this.maxExtent_=e,this.tolerance_=t,this.renderBuffer_=n,this.replaysByZIndex_={}}var rs=es;St.inherits(is,wr),is.prototype.addDeclutter=function(t,e){},is.prototype.getDeleteResourcesFunction=function(t){var e,i=[];for(e in this.replaysByZIndex_){var n,r=this.replaysByZIndex_[e];for(n in r)i.push(r[n].getDeleteResourcesFunction(t))}return function(){for(var t,e=i.length,n=0;n<e;n++)t=i[n].apply(this,arguments);return t}},is.prototype.finish=function(t){var e;for(e in this.replaysByZIndex_){var n,i=this.replaysByZIndex_[e];for(n in i)i[n].finish(t)}},is.prototype.getReplay=function(t,e){var n=void 0!==t?t.toString():"0",i=this.replaysByZIndex_[n];void 0===i&&(i={},this.replaysByZIndex_[n]=i);var r=i[e];return void 0===r&&(r=new is.BATCH_CONSTRUCTORS_[e](this.tolerance_,this.maxExtent_),i[e]=r),r},is.prototype.isEmpty=function(){return Tt.isEmpty(this.replaysByZIndex_)},is.prototype.replay=function(t,e,n,i,r,o,s,a){var u,l,c,h,f,p,d=Object.keys(this.replaysByZIndex_).map(Number);for(d.sort(Rt.numberSafeCompareFunction),u=0,l=d.length;u<l;++u)for(f=this.replaysByZIndex_[d[u].toString()],c=0,h=Fr.ORDER.length;c<h;++c)void 0!==(p=f[Fr.ORDER[c]])&&p.replay(t,e,n,i,r,o,s,a,void 0,!1)},is.prototype.replayHitDetection_=function(t,e,n,i,r,o,s,a,u,l,c){var h,f,p,d,g,v,m=Object.keys(this.replaysByZIndex_).map(Number);for(m.sort(function(t,e){return e-t}),h=0,f=m.length;h<f;++h)for(d=this.replaysByZIndex_[m[h].toString()],p=Fr.ORDER.length-1;0<=p;--p)if(void 0!==(g=d[Fr.ORDER[p]])&&(v=g.replay(t,e,n,i,r,o,s,a,u,l,c)))return v},is.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r,o,s,a,u,l){var c,h=e.getGL();return h.bindFramebuffer(h.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.renderBuffer_&&(c=$t.buffer($t.createOrUpdateFromCoordinate(t),i*this.renderBuffer_)),this.replayHitDetection_(e,t,i,r,is.HIT_DETECTION_SIZE_,s,a,u,function(t){var e=new Uint8Array(4);if(h.readPixels(0,0,1,1,h.RGBA,h.UNSIGNED_BYTE,e),0<e[3]){var n=l(t);if(n)return n}},!0,c)},is.prototype.hasFeatureAtCoordinate=function(t,e,n,i,r,o,s,a,u){var l=e.getGL();return l.bindFramebuffer(l.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.replayHitDetection_(e,t,i,r,is.HIT_DETECTION_SIZE_,s,a,u,function(t){var e=new Uint8Array(4);return l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,e),0<e[3]},!1)},is.HIT_DETECTION_SIZE_=[1,1],is.BATCH_CONSTRUCTORS_={Circle:So,Image:Lo,LineString:Go,Polygon:Jo,Text:rs};function os(t,e,n,i,r,o,s){ir.call(this),this.context_=t,this.center_=e,this.extent_=o,this.pixelRatio_=s,this.size_=r,this.rotation_=i,this.resolution_=n,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null}var ss=is;St.inherits(os,ir),os.prototype.drawText_=function(t,e){var n=this.context_,i=t.getReplay(0,br.TEXT);i.setTextStyle(this.textStyle_),i.drawText(e,null),i.finish(n);i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),i.getDeleteResourcesFunction(n)()},os.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},os.prototype.drawGeometry=function(t){switch(t.getType()){case I.POINT:this.drawPoint(t,null);break;case I.LINE_STRING:this.drawLineString(t,null);break;case I.POLYGON:this.drawPolygon(t,null);break;case I.MULTI_POINT:this.drawMultiPoint(t,null);break;case I.MULTI_LINE_STRING:this.drawMultiLineString(t,null);break;case I.MULTI_POLYGON:this.drawMultiPolygon(t,null);break;case I.GEOMETRY_COLLECTION:this.drawGeometryCollection(t,null);break;case I.CIRCLE:this.drawCircle(t,null)}},os.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&$t.intersects(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},os.prototype.drawGeometryCollection=function(t,e){for(var n=t.getGeometriesArray(),i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])},os.prototype.drawPoint=function(t,e){var n=this.context_,i=new ss(1,this.extent_),r=i.getReplay(0,br.IMAGE);r.setImageStyle(this.imageStyle_),r.drawPoint(t,e),r.finish(n);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},os.prototype.drawMultiPoint=function(t,e){var n=this.context_,i=new ss(1,this.extent_),r=i.getReplay(0,br.IMAGE);r.setImageStyle(this.imageStyle_),r.drawMultiPoint(t,e),r.finish(n);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},os.prototype.drawLineString=function(t,e){var n=this.context_,i=new ss(1,this.extent_),r=i.getReplay(0,br.LINE_STRING);r.setFillStrokeStyle(null,this.strokeStyle_),r.drawLineString(t,e),r.finish(n);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},os.prototype.drawMultiLineString=function(t,e){var n=this.context_,i=new ss(1,this.extent_),r=i.getReplay(0,br.LINE_STRING);r.setFillStrokeStyle(null,this.strokeStyle_),r.drawMultiLineString(t,e),r.finish(n);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},os.prototype.drawPolygon=function(t,e){var n=this.context_,i=new ss(1,this.extent_),r=i.getReplay(0,br.POLYGON);r.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),r.drawPolygon(t,e),r.finish(n);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},os.prototype.drawMultiPolygon=function(t,e){var n=this.context_,i=new ss(1,this.extent_),r=i.getReplay(0,br.POLYGON);r.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),r.drawMultiPolygon(t,e),r.finish(n);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},os.prototype.drawCircle=function(t,e){var n=this.context_,i=new ss(1,this.extent_),r=i.getReplay(0,br.CIRCLE);r.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),r.drawCircle(t,e),r.finish(n);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(n)(),this.textStyle_&&this.drawText_(i,t)},os.prototype.setImageStyle=function(t){this.imageStyle_=t},os.prototype.setFillStrokeStyle=function(t,e){this.fillStyle_=t,this.strokeStyle_=e},os.prototype.setTextStyle=function(t){this.textStyle_=t};var as=os,us={};us.fragment=new uo(St.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n":"precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"),us.vertex=new lo(St.DEBUG_WEBGL?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}");function ls(t,e){ar.call(this,e),this.mapRenderer=t,this.arrayBuffer_=new Co([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=en.create(),this.projectionMatrix=en.create(),this.tmpMat4_=vo.create(),this.defaultLocations_=null}var cs=us,hs=function(t,e){this.u_texCoordMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_texCoordMatrix":"d"),this.u_projectionMatrix=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_projectionMatrix":"e"),this.u_opacity=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_opacity":"f"),this.u_texture=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_texture":"g"),this.a_position=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_texCoord":"c")};St.inherits(ls,ar),ls.prototype.bindFramebuffer=function(t,e){var n,i,r,o=this.mapRenderer.getGL();void 0===this.framebufferDimension||this.framebufferDimension!=e?(n=function(t,e,n){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(n))}.bind(null,o,this.framebuffer,this.texture),t.postRenderFunctions.push(n),i=Ao.createEmptyTexture(o,e,e),r=o.createFramebuffer(),o.bindFramebuffer(se.FRAMEBUFFER,r),o.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_2D,i,0),this.texture=i,this.framebuffer=r,this.framebufferDimension=e):o.bindFramebuffer(se.FRAMEBUFFER,this.framebuffer)},ls.prototype.composeFrame=function(t,e,n){this.dispatchComposeEvent_(Dt.PRECOMPOSE,n,t),n.bindBuffer(se.ARRAY_BUFFER,this.arrayBuffer_);var i,r=n.getGL(),o=cs.fragment,s=cs.vertex,a=n.getProgram(o,s);this.defaultLocations_?i=this.defaultLocations_:(i=new hs(r,a),this.defaultLocations_=i),n.useProgram(a)&&(r.enableVertexAttribArray(i.a_position),r.vertexAttribPointer(i.a_position,2,se.FLOAT,!1,16,0),r.enableVertexAttribArray(i.a_texCoord),r.vertexAttribPointer(i.a_texCoord,2,se.FLOAT,!1,16,8),r.uniform1i(i.u_texture,0)),r.uniformMatrix4fv(i.u_texCoordMatrix,!1,vo.fromTransform(this.tmpMat4_,this.getTexCoordMatrix())),r.uniformMatrix4fv(i.u_projectionMatrix,!1,vo.fromTransform(this.tmpMat4_,this.getProjectionMatrix())),r.uniform1f(i.u_opacity,e.opacity),r.bindTexture(se.TEXTURE_2D,this.getTexture()),r.drawArrays(se.TRIANGLE_STRIP,0,4),this.dispatchComposeEvent_(Dt.POSTCOMPOSE,n,t)},ls.prototype.dispatchComposeEvent_=function(t,e,n){var i,r,o,s,a,u,l,c,h,f=this.getLayer();f.hasListener(t)&&(r=(i=n.viewState).resolution,o=n.pixelRatio,s=n.extent,a=i.center,u=i.rotation,l=n.size,c=new as(e,a,r,u,l,s,o),h=new Mi(t,c,n,null,e),f.dispatchEvent(h))},ls.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},ls.prototype.getTexture=function(){return this.texture},ls.prototype.getProjectionMatrix=function(){return this.projectionMatrix},ls.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},ls.prototype.prepareFrame=function(t,e,n){},ls.prototype.forEachLayerAtPixel=function(t,e,n,i){};function fs(t,e){ps.call(this,t,e),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null}var ps=ls;St.inherits(fs,ps),fs.handles=function(t,e){return t===jn.WEBGL&&e.getType()===Jt.IMAGE},fs.create=function(t,e){return new fs(t,e)},fs.prototype.createTexture_=function(t){var e=t.getImage(),n=this.mapRenderer.getGL();return Ao.createTexture(n,e,se.CLAMP_TO_EDGE,se.CLAMP_TO_EDGE)},fs.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){var o=this.getLayer(),s=o.getSource(),a=e.viewState.resolution,u=e.viewState.rotation,l=e.skippedFeatureUids;return s.forEachFeatureAtCoordinate(t,a,u,n,l,function(t){return i.call(r,t,o)})},fs.prototype.prepareFrame=function(t,e,n){var i,r,o,s,a,u,l=this.mapRenderer.getGL(),c=t.pixelRatio,h=t.viewState,f=h.center,p=h.resolution,d=h.rotation,g=this.image_,v=this.texture,m=this.getLayer().getSource(),y=t.viewHints,_=t.extent;return void 0!==e.extent&&(_=$t.getIntersection(_,e.extent)),y[Ve.ANIMATING]||y[Ve.INTERACTING]||$t.isEmpty(_)||(i=h.projection,St.ENABLE_RASTER_REPROJECTION||(r=m.getProjection())&&(i=r),(o=m.getImage(_,p,c,i))&&this.loadImage(o)&&(g=o,v=this.createTexture_(o),this.texture&&(s=function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,l,this.texture),t.postRenderFunctions.push(s)))),g&&(a=this.mapRenderer.getContext().getCanvas(),this.updateProjectionMatrix_(a.width,a.height,c,f,p,d,g.getExtent()),this.hitTransformationMatrix_=null,u=this.texCoordMatrix,en.reset(u),en.scale(u,1,-1),en.translate(u,0,-1),this.image_=g,this.texture=v,this.updateLogos(t,m)),!!g},fs.prototype.updateProjectionMatrix_=function(t,e,n,i,r,o,s){var a=t*r,u=e*r,l=this.projectionMatrix;en.reset(l),en.scale(l,2*n/a,2*n/u),en.rotate(l,-o),en.translate(l,s[0]-i[0],s[1]-i[1]),en.scale(l,(s[2]-s[0])/2,(s[3]-s[1])/2),en.translate(l,1,1)},fs.prototype.hasFeatureAtCoordinate=function(t,e){return void 0!==this.forEachFeatureAtCoordinate(t,e,0,Ke.TRUE,this)},fs.prototype.forEachLayerAtPixel=function(t,e,n,i){if(this.image_&&this.image_.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==St.nullFunction){var r=en.apply(e.pixelToCoordinateTransform,t.slice());return this.forEachFeatureAtCoordinate(r,e,0,Ke.TRUE,this)?n.call(i,this.getLayer(),null):void 0}var o=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(e.size,o));var s=en.apply(this.hitTransformationMatrix_,t.slice());if(!(s[0]<0||s[0]>o[0]||s[1]<0||s[1]>o[1])){this.hitCanvasContext_||(this.hitCanvasContext_=xt.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),s[0],s[1],1,1,0,0,1,1);var a=this.hitCanvasContext_.getImageData(0,0,1,1).data;return 0<a[3]?n.call(i,this.getLayer(),a):void 0}}},fs.prototype.getHitTransformationMatrix_=function(t,e){var n=en.create();en.translate(n,-1,-1),en.scale(n,2/t[0],2/t[1]),en.translate(n,0,t[1]),en.scale(n,1,-1);var i=en.invert(this.projectionMatrix.slice()),r=en.create();return en.translate(r,0,e[1]),en.scale(r,1,-1),en.scale(r,e[0]/2,e[1]/2),en.translate(r,1,1),en.multiply(r,i),en.multiply(r,n),r};function ds(t,e){yr.call(this,t,e),this.canvas_=document.createElement("CANVAS"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=Ot.CLASS_UNSELECTABLE,t.insertBefore(this.canvas_,t.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=xt.createCanvasContext2D(),this.renderedVisible_=!0,this.gl_=se.getContext(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new Ao(this.canvas_,this.gl_),rt.listen(this.canvas_,bo.LOST,this.handleWebGLContextLost,this),rt.listen(this.canvas_,bo.RESTORED,this.handleWebGLContextRestored,this),this.textureCache_=new Wi,this.focus_=null,this.tileTextureQueue_=new Me(function(t){var e=t[1],n=t[2],i=e[0]-this.focus_[0],r=e[1]-this.focus_[1];return 65536*Math.log(n)+Math.sqrt(i*i+r*r)/n}.bind(this),function(t){return t[0].getKey()}),this.loadNextTileTexture_=function(t,e){var n,i,r,o;return this.tileTextureQueue_.isEmpty()||(this.tileTextureQueue_.reprioritize(),i=(n=this.tileTextureQueue_.dequeue())[0],r=n[3],o=n[4],this.bindTileTexture(i,r,o,se.LINEAR,se.LINEAR)),!1}.bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()}var gs=fs;St.inherits(ds,yr),ds.handles=function(t){return ce.WEBGL&&t===jn.WEBGL},ds.create=function(t,e){return new ds(t,e)},ds.prototype.bindTileTexture=function(t,e,n,i,r){var o,s,a,u,l=this.getGL(),c=t.getKey();this.textureCache_.containsKey(c)?(o=this.textureCache_.get(c),l.bindTexture(se.TEXTURE_2D,o.texture),o.magFilter!=i&&(l.texParameteri(se.TEXTURE_2D,se.TEXTURE_MAG_FILTER,i),o.magFilter=i),o.minFilter!=r&&(l.texParameteri(se.TEXTURE_2D,se.TEXTURE_MIN_FILTER,r),o.minFilter=r)):(s=l.createTexture(),l.bindTexture(se.TEXTURE_2D,s),0<n?(a=this.clipTileContext_.canvas,u=this.clipTileContext_,this.clipTileCanvasWidth_!==e[0]||this.clipTileCanvasHeight_!==e[1]?(a.width=e[0],a.height=e[1],this.clipTileCanvasWidth_=e[0],this.clipTileCanvasHeight_=e[1]):u.clearRect(0,0,e[0],e[1]),u.drawImage(t.getImage(),n,n,e[0],e[1],0,0,e[0],e[1]),l.texImage2D(se.TEXTURE_2D,0,se.RGBA,se.RGBA,se.UNSIGNED_BYTE,a)):l.texImage2D(se.TEXTURE_2D,0,se.RGBA,se.RGBA,se.UNSIGNED_BYTE,t.getImage()),l.texParameteri(se.TEXTURE_2D,se.TEXTURE_MAG_FILTER,i),l.texParameteri(se.TEXTURE_2D,se.TEXTURE_MIN_FILTER,r),l.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_S,se.CLAMP_TO_EDGE),l.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_T,se.CLAMP_TO_EDGE),this.textureCache_.set(c,{texture:s,magFilter:i,minFilter:r}))},ds.prototype.dispatchComposeEvent_=function(t,e){var n,i,r,o,s,a,u,l,c,h,f=this.getMap();f.hasListener(t)&&(n=this.context_,i=e.extent,r=e.size,o=e.viewState,s=e.pixelRatio,a=o.resolution,u=o.center,l=o.rotation,c=new as(n,u,a,l,r,i,s),h=new Mi(t,c,e,null,n),f.dispatchEvent(h))},ds.prototype.disposeInternal=function(){var e=this.getGL();e.isContextLost()||this.textureCache_.forEach(function(t){t&&e.deleteTexture(t.texture)}),this.context_.dispose(),yr.prototype.disposeInternal.call(this)},ds.prototype.expireCache_=function(t,e){for(var n,i=this.getGL();this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>St.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK;){if(n=this.textureCache_.peekLast())i.deleteTexture(n.texture);else{if(+this.textureCache_.peekLastKey()==e.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},ds.prototype.getContext=function(){return this.context_},ds.prototype.getGL=function(){return this.gl_},ds.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},ds.prototype.getType=function(){return jn.WEBGL},ds.prototype.handleWebGLContextLost=function(t){t.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;var e=this.getLayerRenderers();for(var n in e){e[n].handleWebGLContextLost()}},ds.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},ds.prototype.initializeGL_=function(){var t=this.gl_;t.activeTexture(se.TEXTURE0),t.blendFuncSeparate(se.SRC_ALPHA,se.ONE_MINUS_SRC_ALPHA,se.ONE,se.ONE_MINUS_SRC_ALPHA),t.disable(se.CULL_FACE),t.disable(se.DEPTH_TEST),t.disable(se.SCISSOR_TEST),t.disable(se.STENCIL_TEST)},ds.prototype.isTileTextureLoaded=function(t){return this.textureCache_.containsKey(t.getKey())},ds.prototype.renderFrame=function(t){var e=this.getContext(),n=this.getGL();if(n.isContextLost())return!1;if(!t)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=t.focus,this.textureCache_.set((-t.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchComposeEvent_(Dt.PRECOMPOSE,t);var i=[],r=t.layerStatesArray;Rt.stableSort(r,yr.sortByZIndex);for(var o,s=t.viewState.resolution,a=0,u=r.length;a<u;++a)o=r[a],kt.visibleAtResolution(o,s)&&o.sourceState==Ft.READY&&this.getLayerRenderer(o.layer).prepareFrame(t,o,e)&&i.push(o);var l=t.size[0]*t.pixelRatio,c=t.size[1]*t.pixelRatio;for(this.canvas_.width==l&&this.canvas_.height==c||(this.canvas_.width=l,this.canvas_.height=c),n.bindFramebuffer(se.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(se.COLOR_BUFFER_BIT),n.enable(se.BLEND),n.viewport(0,0,this.canvas_.width,this.canvas_.height),a=0,u=i.length;a<u;++a)o=i[a],this.getLayerRenderer(o.layer).composeFrame(t,o,e);this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(t),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>St.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK&&t.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(t.postRenderFunctions.push(this.loadNextTileTexture_),t.animate=!0),this.dispatchComposeEvent_(Dt.POSTCOMPOSE,t),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},ds.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r,o,s){if(this.getGL().isContextLost())return!1;for(var a=e.viewState,u=e.layerStatesArray,l=u.length-1;0<=l;--l){var c,h=u[l],f=h.layer;if(kt.visibleAtResolution(h,a.resolution)&&o.call(s,f))if(c=this.getLayerRenderer(f).forEachFeatureAtCoordinate(t,e,n,i,r))return c}},ds.prototype.hasFeatureAtCoordinate=function(t,e,n,i,r){var o=!1;if(this.getGL().isContextLost())return!1;for(var s=e.viewState,a=e.layerStatesArray,u=a.length-1;0<=u;--u){var l=a[u],c=l.layer;if(kt.visibleAtResolution(l,s.resolution)&&i.call(r,c))if(o=this.getLayerRenderer(c).hasFeatureAtCoordinate(t,e))return!0}return o},ds.prototype.forEachLayerAtPixel=function(t,e,n,i,r,o){if(this.getGL().isContextLost())return!1;for(var s=e.viewState,a=e.layerStatesArray,u=a.length-1;0<=u;--u){var l,c=a[u],h=c.layer;if(kt.visibleAtResolution(c,s.resolution)&&r.call(i,h))if(l=this.getLayerRenderer(h).forEachLayerAtPixel(t,e,n,i))return l}};var vs=ds,ms={};ms.fragment=new uo(St.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n":"precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"),ms.vertex=new lo(St.DEBUG_WEBGL?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}");function ys(t,e){ps.call(this,t,e),this.fragmentShader_=_s.fragment,this.vertexShader_=_s.vertex,this.locations_=null,this.renderArrayBuffer_=new Co([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]}var _s=ms,Es=function(t,e){this.u_tileOffset=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_tileOffset":"d"),this.u_texture=t.getUniformLocation(e,St.DEBUG_WEBGL?"u_texture":"e"),this.a_position=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,St.DEBUG_WEBGL?"a_texCoord":"c")};St.inherits(ys,ps),ys.handles=function(t,e){return t===jn.WEBGL&&e.getType()===Jt.TILE},ys.create=function(t,e){return new ys(t,e)},ys.prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_),ps.prototype.disposeInternal.call(this)},ys.prototype.createLoadedTileFinder=function(e,i,r){var o=this.mapRenderer;return function(n,t){return e.forEachLoadedTile(i,n,t,function(t){var e=o.isTileTextureLoaded(t);return e&&(r[n]||(r[n]={}),r[n][t.tileCoord.toString()]=t),e})}},ys.prototype.handleWebGLContextLost=function(){ps.prototype.handleWebGLContextLost.call(this),this.locations_=null},ys.prototype.prepareFrame=function(t,e,n){var i=this.mapRenderer,r=n.getGL(),o=t.viewState,s=o.projection,a=this.getLayer(),u=a.getSource(),l=u.getTileGridForProjection(s),c=l.getZForResolution(o.resolution),h=l.getResolution(c),f=u.getTilePixelSize(c,t.pixelRatio,s),p=f[0]/Bn.toSize(l.getTileSize(c),this.tmpSize_)[0],d=h/p,g=u.getTilePixelRatio(p)*u.getGutter(s),v=o.center,m=t.extent,y=l.getTileRangeForExtentAndZ(m,c);if(this.renderedTileRange_&&this.renderedTileRange_.equals(y)&&this.renderedRevision_==u.getRevision())R=this.renderedFramebufferExtent_;else{var _=y.getSize(),E=Math.max(_[0]*f[0],_[1]*f[1]),x=z.roundUpToPowerOfTwo(E),C=d*x,S=l.getOrigin(c),$=S[0]+y.minX*f[0]*d,T=S[1]+y.minY*f[1]*d,R=[$,T,$+C,T+C];this.bindFramebuffer(t,x),r.viewport(0,0,x,x),r.clearColor(0,0,0,0),r.clear(se.COLOR_BUFFER_BIT),r.disable(se.BLEND);var w=n.getProgram(this.fragmentShader_,this.vertexShader_);n.useProgram(w),this.locations_||(this.locations_=new Es(r,w)),n.bindBuffer(se.ARRAY_BUFFER,this.renderArrayBuffer_),r.enableVertexAttribArray(this.locations_.a_position),r.vertexAttribPointer(this.locations_.a_position,2,se.FLOAT,!1,16,0),r.enableVertexAttribArray(this.locations_.a_texCoord),r.vertexAttribPointer(this.locations_.a_texCoord,2,se.FLOAT,!1,16,8),r.uniform1i(this.locations_.u_texture,0);var b={};b[c]={};for(var I,A,O,P,L,M=this.createLoadedTileFinder(u,s,b),D=a.getUseInterimTilesOnError(),F=!0,k=$t.createEmpty(),N=new Cr(0,0,0,0),U=y.minX;U<=y.maxX;++U)for(P=y.minY;P<=y.maxY;++P)if(A=u.getTile(c,U,P,p,s),void 0===e.extent||(L=l.getTileCoordExtent(A.tileCoord,k),$t.intersects(L,e.extent))){if((O=A.getState())==Pe.LOADED||O==Pe.EMPTY||O==Pe.ERROR&&!D||(A=A.getInterimTile()),(O=A.getState())==Pe.LOADED){if(i.isTileTextureLoaded(A)){b[c][A.tileCoord.toString()]=A;continue}}else if(O==Pe.EMPTY||O==Pe.ERROR&&!D)continue;F=!1,l.forEachTileCoordParentTileRange(A.tileCoord,M,null,N,k)||(I=l.getTileCoordChildTileRange(A.tileCoord,N,k))&&M(c+1,I)}var G=Object.keys(b).map(Number);G.sort(Rt.numberSafeCompareFunction);for(var j,V,B=new Float32Array(4),W=0,H=G.length;W<H;++W)for(j in V=b[G[W]])A=V[j],L=l.getTileCoordExtent(A.tileCoord,k),B[0]=2*(L[2]-L[0])/C,B[1]=2*(L[3]-L[1])/C,B[2]=2*(L[0]-R[0])/C-1,B[3]=2*(L[1]-R[1])/C-1,r.uniform4fv(this.locations_.u_tileOffset,B),i.bindTileTexture(A,f,g*p,se.LINEAR,se.LINEAR),r.drawArrays(se.TRIANGLE_STRIP,0,4);F?(this.renderedTileRange_=y,this.renderedFramebufferExtent_=R,this.renderedRevision_=u.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,t.animate=!0)}this.updateUsedTiles(t.usedTiles,u,c,y);var q=i.getTileTextureQueue();this.manageTilePyramid(t,u,l,p,s,m,c,a.getPreload(),function(t){t.getState()!=Pe.LOADED||i.isTileTextureLoaded(t)||q.isKeyQueued(t.getKey())||q.enqueue([t,l.getTileCoordCenter(t.tileCoord),l.getResolution(t.tileCoord[0]),f,g*p])},this),this.scheduleExpireCache(t,u),this.updateLogos(t,u);var X=this.texCoordMatrix;return en.reset(X),en.translate(X,(Math.round(v[0]/h)*h-R[0])/(R[2]-R[0]),(Math.round(v[1]/h)*h-R[1])/(R[3]-R[1])),0!==o.rotation&&en.rotate(X,o.rotation),en.scale(X,t.size[0]*o.resolution/(R[2]-R[0]),t.size[1]*o.resolution/(R[3]-R[1])),en.translate(X,-.5,-.5),!0},ys.prototype.forEachLayerAtPixel=function(t,e,n,i){if(this.framebuffer){var r=[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]],o=en.apply(this.texCoordMatrix,r.slice()),s=[o[0]*this.framebufferDimension,o[1]*this.framebufferDimension],a=this.mapRenderer.getContext().getGL();a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer);var u=new Uint8Array(4);return a.readPixels(s[0],s[1],1,1,a.RGBA,a.UNSIGNED_BYTE,u),0<u[3]?n.call(i,this.getLayer(),u):void 0}};function xs(t,e){ps.call(this,t,e),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=$t.createEmpty(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null}var Cs=ys;St.inherits(xs,ps),xs.handles=function(t,e){return t===jn.WEBGL&&e.getType()===Jt.VECTOR},xs.create=function(t,e){return new xs(t,e)},xs.prototype.composeFrame=function(t,e,n){this.layerState_=e;var i=t.viewState,r=this.replayGroup_,o=t.size,s=t.pixelRatio,a=this.mapRenderer.getGL();r&&!r.isEmpty()&&(a.enable(a.SCISSOR_TEST),a.scissor(0,0,o[0]*s,o[1]*s),r.replay(n,i.center,i.resolution,i.rotation,o,s,e.opacity,e.managed?t.skippedFeatureUids:{}),a.disable(a.SCISSOR_TEST))},xs.prototype.disposeInternal=function(){var t,e=this.replayGroup_;e&&(t=this.mapRenderer.getContext(),e.getDeleteResourcesFunction(t)(),this.replayGroup_=null),ps.prototype.disposeInternal.call(this)},xs.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){if(this.replayGroup_&&this.layerState_){var o=this.mapRenderer.getContext(),s=e.viewState,a=this.getLayer(),u=this.layerState_,l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,s.center,s.resolution,s.rotation,e.size,e.pixelRatio,u.opacity,{},function(t){var e=St.getUid(t).toString();if(!(e in l))return l[e]=!0,i.call(r,t,a)})}},xs.prototype.hasFeatureAtCoordinate=function(t,e){if(this.replayGroup_&&this.layerState_){var n=this.mapRenderer.getContext(),i=e.viewState,r=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(t,n,i.center,i.resolution,i.rotation,e.size,e.pixelRatio,r.opacity,e.skippedFeatureUids)}return!1},xs.prototype.forEachLayerAtPixel=function(t,e,n,i){var r=en.apply(e.pixelToCoordinateTransform,t.slice());return this.hasFeatureAtCoordinate(r,e)?n.call(i,this.getLayer(),null):void 0},xs.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},xs.prototype.prepareFrame=function(t,e,n){var r=this.getLayer(),i=r.getSource();this.updateLogos(t,i);var o=t.viewHints[Ve.ANIMATING],s=t.viewHints[Ve.INTERACTING],a=r.getUpdateWhileAnimating(),u=r.getUpdateWhileInteracting();if(!this.dirty_&&!a&&o||!u&&s)return!0;var l=t.extent,c=t.viewState,h=c.projection,f=c.resolution,p=t.pixelRatio,d=r.getRevision(),g=r.getRenderBuffer(),v=r.getRenderOrder();void 0===v&&(v=Qr.defaultOrder);var m=$t.buffer(l,g*f);if(!this.dirty_&&this.renderedResolution_==f&&this.renderedRevision_==d&&this.renderedRenderOrder_==v&&$t.containsExtent(this.renderedExtent_,m))return!0;this.replayGroup_&&t.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(n)),this.dirty_=!1;var y=new ss(Qr.getTolerance(f,p),m,r.getRenderBuffer());i.loadFeatures(m,f,h);function _(t){var e,n,i=t.getStyleFunction();i?e=i.call(t,f):(i=r.getStyleFunction())&&(e=i(t,f)),e&&(n=this.renderFeature(t,f,p,e,y),this.dirty_=this.dirty_||n)}var E;return v?(E=[],i.forEachFeatureInExtent(m,function(t){E.push(t)},this),E.sort(v),E.forEach(_,this)):i.forEachFeatureInExtent(m,_,this),y.finish(n),this.renderedResolution_=f,this.renderedRevision_=d,this.renderedRenderOrder_=v,this.renderedExtent_=m,this.replayGroup_=y,!0},xs.prototype.renderFeature=function(t,e,n,i,r){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var s=i.length-1;0<=s;--s)o=Qr.renderFeature(r,t,i[s],Qr.getSquaredTolerance(e,n),this.handleStyleImageChange_,this)||o;else o=Qr.renderFeature(r,t,i,Qr.getSquaredTolerance(e,n),this.handleStyleImageChange_,this)||o;return o};var Ss=xs;St.ENABLE_CANVAS&&(Gn.register(Nn.MAP_RENDERER,Er),Gn.registerMultiple(Nn.LAYER_RENDERER,[pr,$r,eo,ro])),St.ENABLE_WEBGL&&(Gn.register(Nn.MAP_RENDERER,vs),Gn.registerMultiple(Nn.LAYER_RENDERER,[gs,Cs,Ss]));function $s(t){(t=Tt.assign({},t)).controls||(t.controls=Xt.defaults()),t.interactions||(t.interactions=Ri.defaults()),qn.call(this,t)}St.inherits($s,qn);function Ts(t,e,n){ct.call(this);var i=n||{};this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={}}var Rs=$s;n(158);St.inherits(Ts,ct),Ts.prototype.changed=function(){this.dispatchEvent(ht.CHANGE)},Ts.prototype.getKey=function(){return this.key+"/"+this.tileCoord},Ts.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==Pe.LOADED)return t;t=t.interimTile}while(t);return this},Ts.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==Pe.LOADED){t.interimTile=null;break}t.getState()!=Pe.LOADING&&t.getState()==Pe.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},Ts.prototype.getTileCoord=function(){return this.tileCoord},Ts.prototype.getState=function(){return this.state},Ts.prototype.setState=function(t){this.state=t,this.changed()},Ts.prototype.load=function(){},Ts.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var i=e-n+1e3/60;return i>=this.transition_?1:jt.easeIn(i/this.transition_)},Ts.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},Ts.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)};function ws(t,e,n,i,r,o){bs.call(this,t,e,o),this.crossOrigin_=i,this.src_=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.imageListenerKeys_=null,this.tileLoadFunction_=r}var bs=Ts;St.inherits(ws,bs),ws.prototype.disposeInternal=function(){this.state==Pe.LOADING&&(this.unlistenImage_(),this.image_=ws.getBlankImage()),this.interimTile&&this.interimTile.dispose(),this.state=Pe.ABORT,this.changed(),bs.prototype.disposeInternal.call(this)},ws.prototype.getImage=function(){return this.image_},ws.prototype.getKey=function(){return this.src_},ws.prototype.handleImageError_=function(){this.state=Pe.ERROR,this.unlistenImage_(),this.image_=ws.getBlankImage(),this.changed()},ws.prototype.handleImageLoad_=function(){this.image_.naturalWidth&&this.image_.naturalHeight?this.state=Pe.LOADED:this.state=Pe.EMPTY,this.unlistenImage_(),this.changed()},ws.prototype.load=function(){this.state==Pe.ERROR&&(this.state=Pe.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Pe.IDLE&&(this.state=Pe.LOADING,this.changed(),this.imageListenerKeys_=[rt.listenOnce(this.image_,ht.ERROR,this.handleImageError_,this),rt.listenOnce(this.image_,ht.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},ws.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(rt.unlistenByKey),this.imageListenerKeys_=null},ws.getBlankImage=function(){var t=xt.createCanvasContext2D(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas};function Is(t){Wi.call(this,t)}var As=ws,Os={createOrUpdate:function(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]},getKeyZXY:function(t,e,n){return t+"/"+e+"/"+n},getKey:function(t){return Os.getKeyZXY(t[0],t[1],t[2])},fromKey:function(t){return t.split("/").map(Number)},hash:function(t){return(t[1]<<t[0])+t[2]},quadKey:function(t){for(var e,n=t[0],i=new Array(n),r=1<<n-1,o=0;o<n;++o)e=48,t[1]&r&&(e+=1),t[2]&r&&(e+=2),i[o]=String.fromCharCode(e),r>>=1;return i.join("")},withinExtentAndZ:function(t,e){var n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o=e.getExtent(),s=o?e.getTileRangeForExtentAndZ(o,n):e.getFullTileRange(n);return!s||s.containsXY(i,r)}},Ps=Os;St.inherits(Is,Wi),Is.prototype.expireCache=function(t){for(var e,n;this.canExpireCache()&&!((n=(e=this.peekLast()).tileCoord[0].toString())in t&&t[n].contains(e.tileCoord));)this.pop().dispose()},Is.prototype.pruneExceptNewestZ=function(){var t,e;0!==this.getCount()&&(t=this.peekFirstKey(),e=Ps.fromKey(t)[0],this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(Ps.getKey(t.tileCoord)),t.dispose())},this))};function Ls(t,e,n,i,r){this.sourceProj_=t,this.targetProj_=e;var o={},s=W.getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=s(t)),o[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&$t.getWidth(i)==$t.getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?$t.getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?$t.getWidth(this.targetProj_.getExtent()):null;var a,u=$t.getTopLeft(n),l=$t.getTopRight(n),c=$t.getBottomRight(n),h=$t.getBottomLeft(n),f=this.transformInv_(u),p=this.transformInv_(l),d=this.transformInv_(c),g=this.transformInv_(h);this.addQuad_(u,l,c,h,f,p,d,g,St.RASTER_REPROJECTION_MAX_SUBDIVISION),this.wrapsXInSource_&&(a=1/0,this.triangles_.forEach(function(t,e,n){a=Math.min(a,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){var e,n;Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-a>this.sourceWorldWidth_/2&&((e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]])[0][0]-a>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-a>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-a>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_),n=Math.min(e[0][0],e[1][0],e[2][0]),Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e))},this)),o={}}var Ms=Is,Ds={calculateSourceResolution:function(t,e,n,i){var r=W.transform(n,e,t),o=W.getPointResolution(e,i,n),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var a=t.getMetersPerUnit();void 0!==a&&(o/=a);var u,l=t.getExtent();return l&&!$t.containsCoordinate(l,r)||(u=W.getPointResolution(t,o,r)/o,isFinite(u)&&0<u&&(o/=u)),o},enlargeClipPoint_:function(t,e,n,i){var r=n-t,o=i-e,s=Math.sqrt(r*r+o*o);return[Math.round(n+r/s),Math.round(i+o/s)]},render:function(t,e,R,w,n,b,i,r,o,a,s){var I=xt.createCanvasContext2D(Math.round(R*t),Math.round(R*e));if(0===o.length)return I.canvas;I.scale(R,R);var A=$t.createEmpty();o.forEach(function(t,e,n){$t.extend(A,t.extent)});var u=$t.getWidth(A),l=$t.getHeight(A),O=xt.createCanvasContext2D(Math.round(R*u/w),Math.round(R*l/w)),c=R/w;o.forEach(function(t,e,n){var i=t.extent[0]-A[0],r=-(t.extent[3]-A[3]),o=$t.getWidth(t.extent),s=$t.getHeight(t.extent);O.drawImage(t.image,a,a,t.image.width-2*a,t.image.height-2*a,i*c,r*c,o*c,s*c)});var P=$t.getTopLeft(i);return r.getTriangles().forEach(function(t,e,n){var i,r,o,s,a,u=t.source,l=t.target,c=u[0][0],h=u[0][1],f=u[1][0],p=u[1][1],d=u[2][0],g=u[2][1],v=(l[0][0]-P[0])/b,m=-(l[0][1]-P[1])/b,y=(l[1][0]-P[0])/b,_=-(l[1][1]-P[1])/b,E=(l[2][0]-P[0])/b,x=-(l[2][1]-P[1])/b,C=c,S=h,$=[[f-=C,p-=S,0,0,y-v],[d-=C,g-=S,0,0,E-v],[0,0,f,p,_-m],[0,0,d,g,x-m]],T=z.solveLinearSystem($);T&&(I.save(),I.beginPath(),i=(v+y+E)/3,r=(m+_+x)/3,o=Ds.enlargeClipPoint_(i,r,v,m),s=Ds.enlargeClipPoint_(i,r,y,_),a=Ds.enlargeClipPoint_(i,r,E,x),I.moveTo(s[0],s[1]),I.lineTo(o[0],o[1]),I.lineTo(a[0],a[1]),I.clip(),I.transform(T[0],T[2],T[1],T[3],v,m),I.translate(A[0]-C,A[3]-S),I.scale(w/R,-w/R),I.drawImage(O.canvas,0,0),I.restore())}),s&&(I.save(),I.strokeStyle="black",I.lineWidth=1,r.getTriangles().forEach(function(t,e,n){var i=t.target,r=(i[0][0]-P[0])/b,o=-(i[0][1]-P[1])/b,s=(i[1][0]-P[0])/b,a=-(i[1][1]-P[1])/b,u=(i[2][0]-P[0])/b,l=-(i[2][1]-P[1])/b;I.beginPath(),I.moveTo(s,a),I.lineTo(r,o),I.lineTo(u,l),I.closePath(),I.stroke()}),I.restore()),I.canvas}},Fs=Ds;Ls.prototype.addTriangle_=function(t,e,n,i,r,o){this.triangles_.push({source:[i,r,o],target:[t,e,n]})},Ls.prototype.addQuad_=function(t,e,n,i,r,o,s,a,u){var l,c,h,f,p,d,g,v,m,y,_,E,x,C=$t.boundingExtent([r,o,s,a]),S=this.sourceWorldWidth_?$t.getWidth(C)/this.sourceWorldWidth_:null,$=this.sourceWorldWidth_,T=this.sourceProj_.canWrapX()&&.5<S&&S<1,R=!1;if(0<u&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(l=$t.boundingExtent([t,e,n,i]),R|=$t.getWidth(l)/this.targetWorldWidth_>St.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH),!T&&this.sourceProj_.isGlobal()&&S&&(R|=S>St.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH)),R||!this.maxSourceExtent_||$t.intersects(C,this.maxSourceExtent_)){if(!(R||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(0<u))return;R=!0}if(0<u)if(R||(c=[(t[0]+n[0])/2,(t[1]+n[1])/2],h=this.transformInv_(c),R=(f=T?(z.modulo(r[0],$)+z.modulo(s[0],$))/2-z.modulo(h[0],$):(r[0]+s[0])/2-h[0])*f+(p=(r[1]+s[1])/2-h[1])*p>this.errorThresholdSquared_),R)return void(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])?(d=[(e[0]+n[0])/2,(e[1]+n[1])/2],g=this.transformInv_(d),v=[(i[0]+t[0])/2,(i[1]+t[1])/2],m=this.transformInv_(v),this.addQuad_(t,e,d,v,r,o,g,m,u-1),this.addQuad_(v,d,n,i,m,g,s,a,u-1)):(y=[(t[0]+e[0])/2,(t[1]+e[1])/2],_=this.transformInv_(y),E=[(n[0]+i[0])/2,(n[1]+i[1])/2],x=this.transformInv_(E),this.addQuad_(t,y,E,i,r,_,x,a,u-1),this.addQuad_(y,e,n,E,_,o,s,x,u-1)));if(T){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,n,i,r,s,a),this.addTriangle_(t,e,n,r,o,s)}},Ls.prototype.calculateSourceExtent=function(){var r=$t.createEmpty();return this.triangles_.forEach(function(t,e,n){var i=t.source;$t.extendCoordinate(r,i[0]),$t.extendCoordinate(r,i[1]),$t.extendCoordinate(r,i[2])}),r},Ls.prototype.getTriangles=function(){return this.triangles_};function ks(t,e,n,i,r,o,s,a,u,l,c){bs.call(this,r,Pe.IDLE),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=s,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=i,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var h=i.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent(),p=this.sourceTileGrid_.getExtent(),d=f?$t.getIntersection(h,f):h;if(0!==$t.getArea(d)){var g=t.getExtent();g&&(p=p?$t.getIntersection(p,g):g);var v=i.getResolution(this.wrappedTileCoord_[0]),m=$t.getCenter(d),y=Fs.calculateSourceResolution(t,n,m,v);if(!isFinite(y)||y<=0)this.state=Pe.EMPTY;else{var _=void 0!==l?l:St.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;if(this.triangulation_=new Ns(t,n,d,p,y*_),0!==this.triangulation_.getTriangles().length){this.sourceZ_=e.getZForResolution(y);var E=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(E[1]=z.clamp(E[1],p[1],p[3]),E[3]=z.clamp(E[3],p[1],p[3])):E=$t.getIntersection(E,p)),$t.getArea(E)){for(var x=e.getTileRangeForExtentAndZ(E,this.sourceZ_),C=x.minX;C<=x.maxX;C++)for(var S=x.minY;S<=x.maxY;S++){var $=u(this.sourceZ_,C,S,s);$&&this.sourceTiles_.push($)}0===this.sourceTiles_.length&&(this.state=Pe.EMPTY)}else this.state=Pe.EMPTY}else this.state=Pe.EMPTY}}else this.state=Pe.EMPTY}var Ns=Ls;St.inherits(ks,bs),ks.prototype.disposeInternal=function(){this.state==Pe.LOADING&&this.unlistenSources_(),bs.prototype.disposeInternal.call(this)},ks.prototype.getImage=function(){return this.canvas_},ks.prototype.reproject_=function(){var t,e,n,i,r,o,s,a=[];this.sourceTiles_.forEach(function(t,e,n){t&&t.getState()==Pe.LOADED&&a.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})},this),(this.sourceTiles_.length=0)===a.length?this.state=Pe.ERROR:(t=this.wrappedTileCoord_[0],n="number"==typeof(e=this.targetTileGrid_.getTileSize(t))?e:e[0],i="number"==typeof e?e:e[1],r=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),this.canvas_=Fs.render(n,i,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),r,s,this.triangulation_,a,this.gutter_,this.renderEdges_),this.state=Pe.LOADED),this.changed()},ks.prototype.load=function(){var o;this.state==Pe.IDLE&&(this.state=Pe.LOADING,this.changed(),o=0,this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,t,e){var i,r=n.getState();r!=Pe.IDLE&&r!=Pe.LOADING||(o++,i=rt.listen(n,ht.CHANGE,function(t){var e=n.getState();e!=Pe.LOADED&&e!=Pe.ERROR&&e!=Pe.EMPTY||(rt.unlistenByKey(i),0===--o&&(this.unlistenSources_(),this.reproject_()))},this),this.sourcesListenerKeys_.push(i))},this),this.sourceTiles_.forEach(function(t,e,n){t.getState()==Pe.IDLE&&t.load()}),0===o&&setTimeout(this.reproject_.bind(this),0))},ks.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(rt.unlistenByKey),this.sourcesListenerKeys_=null};function Us(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,b.assert(Rt.isSorted(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(e){if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}else e=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,b.assert(this.origins_.length==this.resolutions_.length,20));var r=t.extent;void 0===r||this.origin_||this.origins_||(this.origin_=$t.getTopLeft(r)),b.assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,b.assert(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:St.DEFAULT_TILE_SIZE,b.assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==r?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new Cr(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):r&&this.calculateTileRanges_(r)}var Gs=ks,js={createFromTemplate:function(i,r){var o=/\{z\}/g,s=/\{x\}/g,a=/\{y\}/g,u=/\{-y\}/g;return function(n,t,e){return n?i.replace(o,n[0].toString()).replace(s,n[1].toString()).replace(a,function(){return(-n[2]-1).toString()}).replace(u,function(){var t=n[0],e=r.getFullTileRange(t);return b.assert(e,55),(e.getHeight()+n[2]).toString()}):void 0}},createFromTemplates:function(t,e){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=js.createFromTemplate(t[r],e);return js.createFromTileUrlFunctions(i)},createFromTileUrlFunctions:function(o){return 1===o.length?o[0]:function(t,e,n){if(t){var i=Ps.hash(t),r=z.modulo(i,o.length);return o[r](t,e,n)}}},nullTileUrlFunction:function(t,e,n){},expandUrl:function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){for(var i=n[1].charCodeAt(0),r=n[2].charCodeAt(0),o=i;o<=r;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(n[2],10),a=parseInt(n[1],10);a<=s;a++)e.push(t.replace(n[0],a.toString()));return e}return e.push(t),e}},Vs=js;Us.tmpTileCoord_=[0,0,0],Us.prototype.forEachTileCoord=function(t,e,n){for(var i=this.getTileRangeForExtentAndZ(t,e),r=i.minX,o=i.maxX;r<=o;++r)for(var s=i.minY,a=i.maxY;s<=a;++s)n([e,r,s])},Us.prototype.forEachTileCoordParentTileRange=function(t,e,n,i,r){var o,s,a,u=null,l=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):u=this.getTileCoordExtent(t,r);l>=this.minZoom;){if(o=2===this.zoomFactor_?(s=Math.floor(s/2),a=Math.floor(a/2),Cr.createOrUpdate(s,s,a,a,i)):this.getTileRangeForExtentAndZ(u,l,i),e.call(n,l,o))return!0;--l}return!1},Us.prototype.getExtent=function(){return this.extent_},Us.prototype.getMaxZoom=function(){return this.maxZoom},Us.prototype.getMinZoom=function(){return this.minZoom},Us.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},Us.prototype.getResolution=function(t){return this.resolutions_[t]},Us.prototype.getResolutions=function(){return this.resolutions_},Us.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],r=2*t[2];return Cr.createOrUpdate(i,1+i,r,1+r,e)}var o=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},Us.prototype.getTileRangeExtent=function(t,e,n){var i=this.getOrigin(t),r=this.getResolution(t),o=Bn.toSize(this.getTileSize(t),this.tmpSize_),s=i[0]+e.minX*o[0]*r,a=i[0]+(e.maxX+1)*o[0]*r,u=i[1]+e.minY*o[1]*r,l=i[1]+(e.maxY+1)*o[1]*r;return $t.createOrUpdate(s,u,a,l,n)},Us.prototype.getTileRangeForExtentAndZ=function(t,e,n){var i=Us.tmpTileCoord_;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i);var r=i[1],o=i[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,i),Cr.createOrUpdate(r,i[1],o,i[2],n)},Us.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Bn.toSize(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]+(t[2]+.5)*i[1]*n]},Us.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Bn.toSize(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*i,s=n[1]+t[2]*r[1]*i,a=o+r[0]*i,u=s+r[1]*i;return $t.createOrUpdate(o,s,a,u,e)},Us.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},Us.prototype.getTileCoordForXYAndResolution_=function(t,e,n,i,r){var o=this.getZForResolution(n),s=n/this.getResolution(o),a=this.getOrigin(o),u=Bn.toSize(this.getTileSize(o),this.tmpSize_),l=i?.5:0,c=i?0:.5,h=Math.floor((t-a[0])/n+l),f=Math.floor((e-a[1])/n+c),p=s*h/u[0],d=s*f/u[1],d=i?(p=Math.ceil(p)-1,Math.ceil(d)-1):(p=Math.floor(p),Math.floor(d));return Ps.createOrUpdate(o,p,d,r)},Us.prototype.getTileCoordForXYAndZ_=function(t,e,n,i,r){var o=this.getOrigin(n),s=this.getResolution(n),a=Bn.toSize(this.getTileSize(n),this.tmpSize_),u=i?.5:0,l=i?0:.5,c=Math.floor((t-o[0])/s+u),h=Math.floor((e-o[1])/s+l),f=c/a[0],p=h/a[1],p=i?(f=Math.ceil(f)-1,Math.ceil(p)-1):(f=Math.floor(f),Math.floor(p));return Ps.createOrUpdate(n,f,p,r)},Us.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},Us.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},Us.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},Us.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},Us.prototype.getZForResolution=function(t,e){var n=Rt.linearFindNearest(this.resolutions_,t,e||0);return z.clamp(n,this.minZoom,this.maxZoom)},Us.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n};function Bs(t){this.html_=t.html,this.tileRanges_=t.tileRanges?t.tileRanges:null}var Ws=Us,Hs={getForProjection:function(t){var e=t.getDefaultTileGrid();return e||(e=Hs.createForProjection(t),t.setDefaultTileGrid(e)),e},wrapX:function(t,e,n){var i=e[0],r=t.getTileCoordCenter(e),o=Hs.extentFromProjection(n);if($t.containsCoordinate(o,r))return e;var s=$t.getWidth(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,t.getTileCoordForCoordAndZ(r,i)},createForExtent:function(t,e,n,i){var r=void 0!==i?i:S.TOP_LEFT,o=Hs.resolutionsFromExtent(t,e,n);return new Ws({extent:t,origin:$t.getCorner(t,r),resolutions:o,tileSize:n})},createXYZ:function(t){var e={};return Tt.assign(e,void 0!==t?t:{}),void 0===e.extent&&(e.extent=W.get("EPSG:3857").getExtent()),e.resolutions=Hs.resolutionsFromExtent(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new Ws(e)},resolutionsFromExtent:function(t,e,n){for(var i=void 0!==e?e:St.DEFAULT_MAX_ZOOM,r=$t.getHeight(t),o=$t.getWidth(t),s=Bn.toSize(void 0!==n?n:St.DEFAULT_TILE_SIZE),a=Math.max(o/s[0],r/s[1]),u=i+1,l=new Array(u),c=0;c<u;++c)l[c]=a/Math.pow(2,c);return l},createForProjection:function(t,e,n,i){var r=Hs.extentFromProjection(t);return Hs.createForExtent(r,e,n,i)},extentFromProjection:function(t){var e,n=(t=W.get(t)).getExtent();return n||(e=180*W.METERS_PER_UNIT[O.DEGREES]/t.getMetersPerUnit(),n=$t.createOrUpdate(-e,-e,e,e)),n}},qs=Hs;Bs.prototype.getHTML=function(){return this.html_},Bs.prototype.intersectsAnyTileRange=function(t,e,n){if(!this.tileRanges_)return!0;var i;for(i in t)if(i in this.tileRanges_)for(var r,o=t[i],s=0,a=this.tileRanges_[i].length;s<a;++s){if((r=this.tileRanges_[i][s]).intersects(o))return!0;var u=e.getTileRangeForExtentAndZ(qs.extentFromProjection(n),parseInt(i,10)),l=u.getWidth();if(o.minX<u.minX||o.maxX>u.maxX){if(r.intersects(new Cr(z.modulo(o.minX,l),z.modulo(o.maxX,l),o.minY,o.maxY)))return!0;if(o.getWidth()>l&&r.intersects(u))return!0}}return!1};function Xs(t){gt.call(this),this.projection_=W.get(t.projection),this.attributions_=null,this.attributions2_=this.adaptAttributions_(t.attributions),this.logo_=t.logo,this.state_=void 0!==t.state?t.state:Ft.READY,this.wrapX_=void 0!==t.wrapX&&t.wrapX}var zs=Bs;St.inherits(Xs,gt),Xs.prototype.adaptAttributions_=function(e){if(!e)return null;if(e instanceof zs)return this.attributions_=[e],function(t){return[e.getHTML()]};if(Array.isArray(e)){if(e[0]instanceof zs){var n=(this.attributions_=e).map(function(t){return t.getHTML()});return function(t){return n}}return this.attributions_=e.map(function(t){return new zs({html:t})}),function(t){return e}}return"function"==typeof e?e:(this.attributions_=[new zs({html:e})],function(t){return[e]})},Xs.prototype.forEachFeatureAtCoordinate=St.nullFunction,Xs.prototype.getAttributions=function(){return this.attributions_},Xs.prototype.getAttributions2=function(){return this.attributions2_},Xs.prototype.getLogo=function(){return this.logo_},Xs.prototype.getProjection=function(){return this.projection_},Xs.prototype.getResolutions=function(){},Xs.prototype.getState=function(){return this.state_},Xs.prototype.getWrapX=function(){return this.wrapX_},Xs.prototype.refresh=function(){this.changed()},Xs.prototype.setAttributions=function(t){this.attributions2_=this.adaptAttributions_(t),this.changed()},Xs.prototype.setLogo=function(t){this.logo_=t},Xs.prototype.setState=function(t){this.state_=t,this.changed()};function Ys(t){Ks.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileCache=new Ms(t.cacheSize),this.tmpSize=[0,0],this.key_="",this.tileOptions={transition:t.transition}}var Ks=Xs;St.inherits(Ys,Ks),Ys.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},Ys.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},Ys.prototype.forEachLoadedTile=function(t,e,n,i){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var o,s,a,u=!0,l=n.minX;l<=n.maxX;++l)for(var c=n.minY;c<=n.maxY;++c)s=Ps.getKeyZXY(e,l,c),a=!1,r.containsKey(s)&&(a=(a=(o=r.get(s)).getState()===Pe.LOADED)&&!1!==i(o)),a||(u=!1);return u},Ys.prototype.getGutter=function(t){return 0},Ys.prototype.getKey=function(){return this.key_},Ys.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},Ys.prototype.getOpaque=function(t){return this.opaque_},Ys.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},Ys.prototype.getTile=function(t,e,n,i,r){},Ys.prototype.getTileGrid=function(){return this.tileGrid},Ys.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:qs.getForProjection(t)},Ys.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!W.equivalent(e,t)?null:this.tileCache},Ys.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},Ys.prototype.getTilePixelSize=function(t,e,n){var i=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),o=Bn.toSize(i.getTileSize(t),this.tmpSize);return 1==r?o:Bn.scale(o,r,this.tmpSize)},Ys.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=qs.wrapX(i,t,n)),Ps.withinExtentAndZ(t,i)?t:null},Ys.prototype.refresh=function(){this.tileCache.clear(),this.changed()},Ys.prototype.useTile=St.nullFunction,Ys.Event=function(t,e){ut.call(this,t),this.tile=e},St.inherits(Ys.Event,ut);function Zs(t){Js.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition}),this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Vs.nullTileUrlFunction,this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),t.tileUrlFunction&&this.setTileUrlFunction(t.tileUrlFunction),this.tileLoadingKeys_={}}var Js=Ys,Qs={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};St.inherits(Zs,Js),Zs.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},Zs.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},Zs.prototype.getUrls=function(){return this.urls},Zs.prototype.handleTileChange=function(t){var e,n=t.target,i=St.getUid(n),r=n.getState();r==Pe.LOADING?(this.tileLoadingKeys_[i]=!0,e=Qs.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],e=r==Pe.ERROR?Qs.TILELOADERROR:r==Pe.LOADED||r==Pe.ABORT?Qs.TILELOADEND:void 0),null!=e&&this.dispatchEvent(new Js.Event(e,n))},Zs.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},Zs.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},Zs.prototype.setUrl=function(t){var e=this.urls=Vs.expandUrl(t);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Vs.createFromTemplates(e,this.tileGrid),t)},Zs.prototype.setUrls=function(t){var e=(this.urls=t).join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Vs.createFromTemplates(t,this.tileGrid),e)},Zs.prototype.useTile=function(t,e,n){var i=Ps.getKeyZXY(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)};var ta=Zs,ea=function(t){ta.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:ea.defaultTileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:As,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1};St.inherits(ea,ta),ea.prototype.canExpireCache=function(){if(!St.ENABLE_RASTER_REPROJECTION)return ta.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},ea.prototype.expireCache=function(t,e){if(St.ENABLE_RASTER_REPROJECTION){var n=this.getTileCacheForProjection(t);for(var i in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[i];r.expireCache(r==n?e:{})}}else ta.prototype.expireCache.call(this,t,e)},ea.prototype.getGutter=function(t){return St.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!W.equivalent(this.getProjection(),t)?0:this.getGutterInternal()},ea.prototype.getGutterInternal=function(){return 0},ea.prototype.getOpaque=function(t){return!(St.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!W.equivalent(this.getProjection(),t))&&ta.prototype.getOpaque.call(this,t)},ea.prototype.getTileGridForProjection=function(t){if(!St.ENABLE_RASTER_REPROJECTION)return ta.prototype.getTileGridForProjection.call(this,t);var e=this.getProjection();if(!this.tileGrid||e&&!W.equivalent(e,t)){var n=St.getUid(t).toString();return n in this.tileGridForProjection||(this.tileGridForProjection[n]=qs.getForProjection(t)),this.tileGridForProjection[n]}return this.tileGrid},ea.prototype.getTileCacheForProjection=function(t){if(!St.ENABLE_RASTER_REPROJECTION)return ta.prototype.getTileCacheForProjection.call(this,t);var e=this.getProjection();if(!e||W.equivalent(e,t))return this.tileCache;var n=St.getUid(t).toString();return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Ms(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},ea.prototype.createTile_=function(t,e,n,i,r,o){var s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,r),u=a?this.tileUrlFunction(a,i,r):void 0,l=new this.tileClass(s,void 0!==u?Pe.IDLE:Pe.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,rt.listen(l,ht.CHANGE,this.handleTileChange,this),l},ea.prototype.getTile=function(t,e,n,i,r){var o=this.getProjection();if(St.ENABLE_RASTER_REPROJECTION&&o&&r&&!W.equivalent(o,r)){var s,a=this.getTileCacheForProjection(r),u=[t,e,n],l=Ps.getKey(u);a.containsKey(l)&&(s=a.get(l));var c=this.getKey();if(s&&s.key==c)return s;var h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(r),p=this.getTileCoordForTileUrlFunction(u,r),d=new Gs(o,h,r,f,u,p,this.getTilePixelRatio(i),this.getGutterInternal(),function(t,e,n,i){return this.getTileInternal(t,e,n,i,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=c,s?(d.interimTile=s,d.refreshInterimChain(),a.replace(l,d)):a.set(l,d),d}return this.getTileInternal(t,e,n,i,o||r)},ea.prototype.getTileInternal=function(t,e,n,i,r){var o,s=null,a=Ps.getKeyZXY(t,e,n),u=this.getKey();return this.tileCache.containsKey(a)?(s=this.tileCache.get(a)).key!=u&&(o=s,s=this.createTile_(t,e,n,i,r,u),o.getState()==Pe.IDLE?s.interimTile=o.interimTile:s.interimTile=o,s.refreshInterimChain(),this.tileCache.replace(a,s)):(s=this.createTile_(t,e,n,i,r,u),this.tileCache.set(a,s)),s},ea.prototype.setRenderReprojectionEdges=function(t){if(St.ENABLE_RASTER_REPROJECTION&&this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},ea.prototype.setTileGridForProjection=function(t,e){var n,i;!St.ENABLE_RASTER_REPROJECTION||(n=W.get(t))&&((i=St.getUid(n).toString())in this.tileGridForProjection||(this.tileGridForProjection[i]=e))},ea.defaultTileLoadFunction=function(t,e){t.getImage().src=e};function na(t){var e=t||{},n=void 0!==e.projection?e.projection:"EPSG:3857",i=void 0!==e.tileGrid?e.tileGrid:qs.createXYZ({extent:qs.extentFromProjection(n),maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});ia.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:e.logo,opaque:e.opaque,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})}var ia=ea;St.inherits(na,ia);var ra=na,oa=function(t){var e=t||{},n=void 0!==e.attributions?e.attributions:[oa.ATTRIBUTION],i=void 0!==e.crossOrigin?e.crossOrigin:"anonymous",r=void 0!==e.url?e.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";ra.call(this,{attributions:n,cacheSize:e.cacheSize,crossOrigin:i,opaque:void 0===e.opaque||e.opaque,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:r,wrapX:e.wrapX})};St.inherits(oa,ra),oa.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.';function sa(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.snapToPixel_=t.snapToPixel}var aa=oa,ua=function(){function t(){r()(this,t)}return s()(t,[{key:"$onDestroy",value:function(){this.map.setTarget(null),this.map=null}},{key:"$onInit",value:function(){this.map=new Rs({target:"map",view:new Dn({projection:"EPSG:3857",displayProjection:"EPSG:4326",center:W.transform([11.58,48.14],"EPSG:4326","EPSG:900913"),zoom:4}),controls:Xt.defaults({zoom:!0,attribution:!1,rotate:!1}).extend([new Zt]),layers:[new ee({source:new aa})]}),this.attachWindowResize(),this.onMapReady({map:this.map})}},{key:"attachWindowResize",value:function(){var t=this;window.addEventListener("resize",function(){t.map.updateSize()},!1);var e=setTimeout(function(){clearTimeout(e),t.map.updateSize()},100)}}]),t}();K.component("olMap",{template:'<div id="map" class="map"></div>',controller:ua,bindings:{onMapReady:"&"}}),n(159),n(160),n(162),n(163),n(166);sa.prototype.getOpacity=function(){return this.opacity_},sa.prototype.getRotateWithView=function(){return this.rotateWithView_},sa.prototype.getRotation=function(){return this.rotation_},sa.prototype.getScale=function(){return this.scale_},sa.prototype.getSnapToPixel=function(){return this.snapToPixel_},sa.prototype.getAnchor=function(){},sa.prototype.getImage=function(t){},sa.prototype.getHitDetectionImage=function(t){},sa.prototype.getImageState=function(){},sa.prototype.getImageSize=function(){},sa.prototype.getHitDetectionImageSize=function(){},sa.prototype.getOrigin=function(){},sa.prototype.getSize=function(){},sa.prototype.setOpacity=function(t){this.opacity_=t},sa.prototype.setRotateWithView=function(t){this.rotateWithView_=t},sa.prototype.setRotation=function(t){this.rotation_=t},sa.prototype.setScale=function(t){this.scale_=t},sa.prototype.setSnapToPixel=function(t){this.snapToPixel_=t},sa.prototype.listenImageChange=function(t,e){},sa.prototype.load=function(){},sa.prototype.unlistenImageChange=function(t,e){};function la(t){this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=t.atlasManager,this.render_(this.atlasManager_);var e=void 0===t.snapToPixel||t.snapToPixel,n=void 0!==t.rotateWithView&&t.rotateWithView;ca.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==t.rotation?t.rotation:0,scale:1,snapToPixel:e})}var ca=sa;St.inherits(la,ca),la.prototype.clone=function(){var t=new la({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},la.prototype.getAnchor=function(){return this.anchor_},la.prototype.getAngle=function(){return this.angle_},la.prototype.getFill=function(){return this.fill_},la.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},la.prototype.getImage=function(t){return this.canvas_},la.prototype.getImageSize=function(){return this.imageSize_},la.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},la.prototype.getImageState=function(){return Ii.LOADED},la.prototype.getOrigin=function(){return this.origin_},la.prototype.getPoints=function(){return this.points_},la.prototype.getRadius=function(){return this.radius_},la.prototype.getRadius2=function(){return this.radius2_},la.prototype.getSize=function(){return this.size_},la.prototype.getStroke=function(){return this.stroke_},la.prototype.listenImageChange=function(t,e){},la.prototype.load=function(){},la.prototype.unlistenImageChange=function(t,e){},la.prototype.render_=function(t){var e,n,i="",r="",o=0,s=null,a=0,u=0;this.stroke_&&(null===(n=this.stroke_.getColor())&&(n=Ki.defaultStrokeStyle),n=er.asColorLike(n),void 0===(u=this.stroke_.getWidth())&&(u=Ki.defaultLineWidth),s=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),ce.CANVAS_LINE_DASH||(s=null,a=0),void 0===(r=this.stroke_.getLineJoin())&&(r=Ki.defaultLineJoin),void 0===(i=this.stroke_.getLineCap())&&(i=Ki.defaultLineCap),void 0===(o=this.stroke_.getMiterLimit())&&(o=Ki.defaultMiterLimit));var l,c,h,f,p,d=2*(this.radius_+u)+1,g={strokeStyle:n,strokeWidth:u,size:d,lineCap:i,lineDash:s,lineDashOffset:a,lineJoin:r,miterLimit:o};void 0===t?(l=xt.createCanvasContext2D(d,d),this.canvas_=l.canvas,e=d=this.canvas_.width,this.draw_(g,l,0,0),this.createHitDetectionCanvas_(g)):(d=Math.round(d),(c=!this.fill_)&&(h=this.drawHitDetectionCanvas_.bind(this,g)),f=this.getChecksum(),p=t.add(f,d,d,this.draw_.bind(this,g),h),this.canvas_=p.image,this.origin_=[p.offsetX,p.offsetY],e=p.image.width,c?(this.hitDetectionCanvas_=p.hitImage,this.hitDetectionImageSize_=[p.hitImage.width,p.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])),this.anchor_=[d/2,d/2],this.size_=[d,d],this.imageSize_=[e,e]},la.prototype.draw_=function(t,e,n,i){var r,o,s;e.setTransform(1,0,0,1,0,0),e.translate(n,i),e.beginPath();var a,u=this.points_;if(u===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(u*=2),r=0;r<=u;r++)o=2*r*Math.PI/u-Math.PI/2+this.angle_,s=r%2==0?this.radius_:l,e.lineTo(t.size/2+s*Math.cos(o),t.size/2+s*Math.sin(o))}this.fill_&&(null===(a=this.fill_.getColor())&&(a=Ki.defaultFillStyle),e.fillStyle=er.asColorLike(a),e.fill()),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},la.prototype.createHitDetectionCanvas_=function(t){var e;this.hitDetectionImageSize_=[t.size,t.size],this.fill_?this.hitDetectionCanvas_=this.canvas_:(e=xt.createCanvasContext2D(t.size,t.size),this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0))},la.prototype.drawHitDetectionCanvas_=function(t,e,n,i){e.setTransform(1,0,0,1,0,0),e.translate(n,i),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o,s,a,u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(r*=2),o=0;o<=r;o++)a=2*o*Math.PI/r-Math.PI/2+this.angle_,s=o%2==0?this.radius_:u,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}e.fillStyle=Ki.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},la.prototype.getChecksum=function(){var t,e=this.stroke_?this.stroke_.getChecksum():"-",n=this.fill_?this.fill_.getChecksum():"-";return(!this.checksums_||e!=this.checksums_[1]||n!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6])&&(t="r"+e+n+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-"),this.checksums_=[t,e,n,this.radius_,this.radius2_,this.angle_,this.points_]),this.checksums_[0]};function ha(t){var e=t||{};fa.call(this,{points:1/0,fill:e.fill,radius:e.radius,snapToPixel:e.snapToPixel,stroke:e.stroke,atlasManager:e.atlasManager})}var fa=la;St.inherits(ha,fa),ha.prototype.clone=function(){var t=new ha({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},ha.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)};function pa(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0}var da=ha;pa.prototype.clone=function(){var t=this.getColor();return new pa({color:t&&t.slice?t.slice():t||void 0})},pa.prototype.getColor=function(){return this.color_},pa.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},pa.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?this.checksum_=St.getUid(this.color_).toString():this.checksum_="f"+(this.color_?Qi.asString(this.color_):"-")),this.checksum_};var ga=pa,va=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=va.defaultGeometryFunction,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};va.prototype.clone=function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new va({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},va.prototype.getRenderer=function(){return this.renderer_},va.prototype.setRenderer=function(t){this.renderer_=t},va.prototype.getGeometry=function(){return this.geometry_},va.prototype.getGeometryFunction=function(){return this.geometryFunction_},va.prototype.getFill=function(){return this.fill_},va.prototype.setFill=function(t){this.fill_=t},va.prototype.getImage=function(){return this.image_},va.prototype.setImage=function(t){this.image_=t},va.prototype.getStroke=function(){return this.stroke_},va.prototype.setStroke=function(t){this.stroke_=t},va.prototype.getText=function(){return this.text_},va.prototype.setText=function(t){this.text_=t},va.prototype.getZIndex=function(){return this.zIndex_},va.prototype.setGeometry=function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=va.defaultGeometryFunction,this.geometry_=e},va.prototype.setZIndex=function(t){this.zIndex_=t},va.createFunction=function(t){var e;return"function"==typeof t?t:(e=Array.isArray(t)?t:(b.assert(t instanceof va,41),[t]),function(){return e})},va.default_=null,va.defaultFunction=function(t,e){var n,i;return va.default_||(n=new ga({color:"rgba(255,255,255,0.4)"}),i=new qo({color:"#3399CC",width:1.25}),va.default_=[new va({image:new da({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]),va.default_},va.createDefaultEditing=function(){var t={},e=[255,255,255,1],n=[0,153,255,1];return t[I.POLYGON]=[new va({fill:new ga({color:[255,255,255,.5]})})],t[I.MULTI_POLYGON]=t[I.POLYGON],t[I.LINE_STRING]=[new va({stroke:new qo({color:e,width:5})}),new va({stroke:new qo({color:n,width:3})})],t[I.MULTI_LINE_STRING]=t[I.LINE_STRING],t[I.CIRCLE]=t[I.POLYGON].concat(t[I.LINE_STRING]),t[I.POINT]=[new va({image:new da({radius:6,fill:new ga({color:n}),stroke:new qo({color:e,width:1.5})}),zIndex:1/0})],t[I.MULTI_POINT]=t[I.POINT],t[I.GEOMETRY_COLLECTION]=t[I.POLYGON].concat(t[I.LINE_STRING],t[I.POINT]),t},va.defaultGeometryFunction=function(t){return t.getGeometry()};function ma(t){gt.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,rt.listen(this,gt.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),void 0!==t&&(t instanceof rn||!t?this.setGeometry(t):this.setProperties(t))}var ya=va;St.inherits(ma,gt),ma.prototype.clone=function(){var t=new ma(this.getProperties());t.setGeometryName(this.getGeometryName());var e=this.getGeometry();e&&t.setGeometry(e.clone());var n=this.getStyle();return n&&t.setStyle(n),t},ma.prototype.getGeometry=function(){return this.get(this.geometryName_)},ma.prototype.getId=function(){return this.id_},ma.prototype.getGeometryName=function(){return this.geometryName_},ma.prototype.getStyle=function(){return this.style_},ma.prototype.getStyleFunction=function(){return this.styleFunction_},ma.prototype.handleGeometryChange_=function(){this.changed()},ma.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(rt.unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=rt.listen(t,ht.CHANGE,this.handleGeometryChange_,this)),this.changed()},ma.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},ma.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?ma.createStyleFunction(t):void 0,this.changed()},ma.prototype.setId=function(t){this.id_=t,this.changed()},ma.prototype.setGeometryName=function(t){rt.unlisten(this,gt.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,rt.listen(this,gt.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},ma.createStyleFunction=function(e){var t;return"function"==typeof e?2==e.length?function(t){return e(this,t)}:e:(t=Array.isArray(e)?e:(b.assert(e instanceof ya,41),[e]),function(){return t})};function _a(){this.defaultDataProjection=null,this.defaultFeatureProjection=null}var Ea=ma;_a.prototype.getReadOptions=function(t,e){var n;return e&&(n={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(n)},_a.prototype.adaptOptions=function(t){return Tt.assign({dataProjection:this.defaultDataProjection,featureProjection:this.defaultFeatureProjection},t)},_a.prototype.getLastExtent=function(){return null},_a.prototype.getType=function(){},_a.prototype.readFeature=function(t,e){},_a.prototype.readFeatures=function(t,e){},_a.prototype.readGeometry=function(t,e){},_a.prototype.readProjection=function(t){},_a.prototype.writeFeature=function(t,e){},_a.prototype.writeFeatures=function(t,e){},_a.prototype.writeGeometry=function(t,e){},_a.transformWithOptions=function(t,e,n){var i,r=n?W.get(n.featureProjection):null,o=n?W.get(n.dataProjection):null,s=r&&o&&!W.equivalent(r,o)?t instanceof rn?(e?t.clone():t).transform(e?r:o,e?o:r):W.transformExtent(t,o,r):t;return e&&n&&void 0!==n.decimals&&(i=Math.pow(10,n.decimals),s===t&&(s=s.clone()),s.applyTransform(function(t){for(var e=0,n=t.length;e<n;++e)t[e]=Math.round(t[e]*i)/i;return t})),s};function xa(){Ca.call(this)}var Ca=_a,Sa={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};St.inherits(xa,Ca),xa.prototype.getObject_=function(t){if("string"!=typeof t)return null!==t?t:null;var e=JSON.parse(t);return e||null},xa.prototype.getType=function(){return Sa.JSON},xa.prototype.readFeature=function(t,e){return this.readFeatureFromObject(this.getObject_(t),this.getReadOptions(t,e))},xa.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(this.getObject_(t),this.getReadOptions(t,e))},xa.prototype.readFeatureFromObject=function(t,e){},xa.prototype.readFeaturesFromObject=function(t,e){},xa.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(this.getObject_(t),this.getReadOptions(t,e))},xa.prototype.readGeometryFromObject=function(t,e){},xa.prototype.readProjection=function(t){return this.readProjectionFromObject(this.getObject_(t))},xa.prototype.readProjectionFromObject=function(t){},xa.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},xa.prototype.writeFeatureObject=function(t,e){},xa.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},xa.prototype.writeFeaturesObject=function(t,e){},xa.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},xa.prototype.writeGeometryObject=function(t,e){};function $a(t){rn.call(this),this.geometries_=t||null,this.listenGeometriesChange_()}var Ta=xa;St.inherits($a,rn),$a.cloneGeometries_=function(t){for(var e=[],n=0,i=t.length;n<i;++n)e.push(t[n].clone());return e},$a.prototype.unlistenGeometriesChange_=function(){var t,e;if(this.geometries_)for(t=0,e=this.geometries_.length;t<e;++t)rt.unlisten(this.geometries_[t],ht.CHANGE,this.changed,this)},$a.prototype.listenGeometriesChange_=function(){var t,e;if(this.geometries_)for(t=0,e=this.geometries_.length;t<e;++t)rt.listen(this.geometries_[t],ht.CHANGE,this.changed,this)},$a.prototype.clone=function(){var t=new $a(null);return t.setGeometries(this.geometries_),t},$a.prototype.closestPointXY=function(t,e,n,i){if(i<$t.closestSquaredDistanceXY(this.getExtent(),t,e))return i;for(var r=this.geometries_,o=0,s=r.length;o<s;++o)i=r[o].closestPointXY(t,e,n,i);return i},$a.prototype.containsXY=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0;return!1},$a.prototype.computeExtent=function(t){$t.createOrUpdateEmpty(t);for(var e=this.geometries_,n=0,i=e.length;n<i;++n)$t.extend(t,e[n].getExtent());return t},$a.prototype.getGeometries=function(){return $a.cloneGeometries_(this.geometries_)},$a.prototype.getGeometriesArray=function(){return this.geometries_},$a.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Tt.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];for(var n=[],i=this.geometries_,r=!1,o=0,s=i.length;o<s;++o){var a=i[o],u=a.getSimplifiedGeometry(t);n.push(u),u!==a&&(r=!0)}if(r){var l=new $a(null);return l.setGeometriesArray(n),this.simplifiedGeometryCache[e]=l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},$a.prototype.getType=function(){return I.GEOMETRY_COLLECTION},$a.prototype.intersectsExtent=function(t){for(var e=this.geometries_,n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1},$a.prototype.isEmpty=function(){return 0===this.geometries_.length},$a.prototype.rotate=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)n[i].rotate(t,e);this.changed()},$a.prototype.scale=function(t,e,n){for(var i=(i=n)||$t.getCenter(this.getExtent()),r=this.geometries_,o=0,s=r.length;o<s;++o)r[o].scale(t,e,i);this.changed()},$a.prototype.setGeometries=function(t){this.setGeometriesArray($a.cloneGeometries_(t))},$a.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},$a.prototype.applyTransform=function(t){for(var e=this.geometries_,n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()},$a.prototype.translate=function(t,e){for(var n=this.geometries_,i=0,r=n.length;i<r;++i)n[i].translate(t,e);this.changed()},$a.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),rn.prototype.disposeInternal.call(this)};function Ra(t,e){sn.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)}var wa=$a,ba={lineString:function(t,e,n,i,r,o){var s=NaN,a=NaN,u=(n-e)/i;if(1==u)s=t[e],a=t[e+1];else if(2==u)s=(1-r)*t[e]+r*t[e+i],a=(1-r)*t[e+1]+r*t[e+i+1];else if(0!=u){for(var l=t[e],c=t[e+1],h=0,f=[0],p=e+i;p<n;p+=i){var d=t[p],g=t[p+1];h+=Math.sqrt((d-l)*(d-l)+(g-c)*(g-c)),f.push(h),l=d,c=g}var v,m,y=r*h,_=Rt.binarySearch(f,y);a=_<0?(v=(y-f[-_-2])/(f[-_-1]-f[-_-2]),m=e+(-_-2)*i,s=z.lerp(t[m],t[m+i],v),z.lerp(t[m+1],t[m+i+1],v)):(s=t[e+_*i],t[e+_*i+1])}return o?(o[0]=s,o[1]=a,o):[s,a]},lineStringCoordinateAtM:function(t,e,n,i,r,o){if(n==e)return null;if(r<t[e+i-1])return o?((h=t.slice(e,e+i))[i-1]=r,h):null;if(t[n-1]<r)return o?((h=t.slice(n-i,n))[i-1]=r,h):null;if(r==t[e+i-1])return t.slice(e,e+i);for(var s=e/i,a=n/i;s<a;){var u=s+a>>1;r<t[(1+u)*i-1]?a=u:s=1+u}var l=t[s*i-1];if(r==l)return t.slice((s-1)*i,(s-1)*i+i);for(var c=(r-l)/(t[(s+1)*i-1]-l),h=[],f=0;f<i-1;++f)h.push(z.lerp(t[(s-1)*i+f],t[s*i+f],c));return h.push(r),h},lineStringsCoordinateAtM:function(t,e,n,i,r,o,s){if(s)return ba.lineStringCoordinateAtM(t,e,n[n.length-1],i,r,o);var a,u,l;if(r<t[i-1])return o?((a=t.slice(0,i))[i-1]=r,a):null;if(t[t.length-1]<r)return o?((a=t.slice(t.length-i))[i-1]=r,a):null;for(u=0,l=n.length;u<l;++u){var c=n[u];if(e!=c){if(r<t[e+i-1])return null;if(r<=t[c-1])return ba.lineStringCoordinateAtM(t,e,c,i,r,!1);e=c}}return null}},Ia=ba;St.inherits(Ra,sn),Ra.prototype.appendCoordinate=function(t){this.flatCoordinates?Rt.extend(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},Ra.prototype.clone=function(){var t=new Ra(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},Ra.prototype.closestPointXY=function(t,e,n,i){return i<$t.closestSquaredDistanceXY(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cn.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cn.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))},Ra.prototype.forEachSegment=function(t,e){return Rn.forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},Ra.prototype.getCoordinateAtM=function(t,e){if(this.layout!=ze.XYM&&this.layout!=ze.XYZM)return null;var n=void 0!==e&&e;return Ia.lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},Ra.prototype.getCoordinates=function(){return dn.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},Ra.prototype.getCoordinateAt=function(t,e){return Ia.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},Ra.prototype.getLength=function(){return Ar.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},Ra.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},Ra.prototype.getSimplifiedGeometryInternal=function(t){var e=[];e.length=vn.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);var n=new Ra(null);return n.setFlatCoordinates(ze.XY,e),n},Ra.prototype.getType=function(){return I.LINE_STRING},Ra.prototype.intersectsExtent=function(t){return bn.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},Ra.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fn.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(ze.XY,null)},Ra.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};function Aa(t,e){sn.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)}var Oa=Ra;St.inherits(Aa,sn),Aa.prototype.appendLineString=function(t){this.flatCoordinates?Rt.extend(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},Aa.prototype.clone=function(){var t=new Aa(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},Aa.prototype.closestPointXY=function(t,e,n,i){return i<$t.closestSquaredDistanceXY(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cn.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cn.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))},Aa.prototype.getCoordinateAtM=function(t,e,n){if(this.layout!=ze.XYM&&this.layout!=ze.XYZM||0===this.flatCoordinates.length)return null;var i=void 0!==e&&e,r=void 0!==n&&n;return Ia.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,t,i,r)},Aa.prototype.getCoordinates=function(){return dn.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)},Aa.prototype.getEnds=function(){return this.ends_},Aa.prototype.getLineString=function(t){if(t<0||this.ends_.length<=t)return null;var e=new Oa(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},Aa.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[],r=0,o=0,s=e.length;o<s;++o){var a=e[o],u=new Oa(null);u.setFlatCoordinates(n,t.slice(r,a)),i.push(u),r=a}return i},Aa.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,n=0,i=this.ends_,r=this.stride,o=0,s=i.length;o<s;++o){var a=i[o],u=Ia.lineString(e,n,a,r,.5);Rt.extend(t,u),n=a}return t},Aa.prototype.getSimplifiedGeometryInternal=function(t){var e=[],n=[];e.length=vn.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n);var i=new Aa(null);return i.setFlatCoordinates(ze.XY,e,n),i},Aa.prototype.getType=function(){return I.MULTI_LINE_STRING},Aa.prototype.intersectsExtent=function(t){return bn.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,t)},Aa.prototype.setCoordinates=function(t,e){var n;t?(this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]),n=fn.coordinatess(this.flatCoordinates,0,t,this.stride,this.ends_),this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()):this.setFlatCoordinates(ze.XY,null,this.ends_)},Aa.prototype.setFlatCoordinates=function(t,e,n){this.setFlatCoordinatesInternal(t,e),this.ends_=n,this.changed()},Aa.prototype.setLineStrings=function(t){for(var e=this.getLayout(),n=[],i=[],r=0,o=t.length;r<o;++r){var s=t[r];0===r&&(e=s.getLayout()),Rt.extend(n,s.getFlatCoordinates()),i.push(n.length)}this.setFlatCoordinates(e,n,i)};function Pa(t,e){sn.call(this),this.setCoordinates(t,e)}var La=Aa;St.inherits(Pa,sn),Pa.prototype.appendPoint=function(t){this.flatCoordinates?Rt.extend(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},Pa.prototype.clone=function(){var t=new Pa(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},Pa.prototype.closestPointXY=function(t,e,n,i){if(i<$t.closestSquaredDistanceXY(this.getExtent(),t,e))return i;for(var r,o=this.flatCoordinates,s=this.stride,a=0,u=o.length;a<u;a+=s){var l=z.squaredDistance(t,e,o[a],o[a+1]);if(l<i){for(i=l,r=0;r<s;++r)n[r]=o[a+r];n.length=s}}return i},Pa.prototype.getCoordinates=function(){return dn.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},Pa.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;if(t<0||e<=t)return null;var n=new En(null);return n.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride)),n},Pa.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,n=this.stride,i=[],r=0,o=t.length;r<o;r+=n){var s=new En(null);s.setFlatCoordinates(e,t.slice(r,r+n)),i.push(s)}return i},Pa.prototype.getType=function(){return I.MULTI_POINT},Pa.prototype.intersectsExtent=function(t){for(var e,n,i=this.flatCoordinates,r=this.stride,o=0,s=i.length;o<s;o+=r)if(e=i[o],n=i[o+1],$t.containsXY(t,e,n))return!0;return!1},Pa.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fn.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(ze.XY,null)},Pa.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};function Ma(t,e){sn.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)}var Da=Pa,Fa={linearRingss:function(t,e,n,i){for(var r=[],o=$t.createEmpty(),s=0,a=n.length;s<a;++s){var u=n[s],o=$t.createOrUpdateFromFlatCoordinates(t,e,u[0],i);r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=u[u.length-1]}return r}},ka=Fa;St.inherits(Ma,sn),Ma.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var n,i,r=this.flatCoordinates.length;for(Rt.extend(this.flatCoordinates,t.getFlatCoordinates()),n=0,i=(e=t.getEnds().slice()).length;n<i;++n)e[n]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},Ma.prototype.clone=function(){for(var t=new Ma(null),e=this.endss_.length,n=new Array(e),i=0;i<e;++i)n[i]=this.endss_[i].slice();return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),n),t},Ma.prototype.closestPointXY=function(t,e,n,i){return i<$t.closestSquaredDistanceXY(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cn.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cn.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))},Ma.prototype.containsXY=function(t,e){return Cn.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},Ma.prototype.getArea=function(){return un.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},Ma.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Pn.orientLinearRingss(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,dn.coordinatesss(e,0,this.endss_,this.stride)},Ma.prototype.getEndss=function(){return this.endss_},Ma.prototype.getFlatInteriorPoints=function(){var t;return this.flatInteriorPointsRevision_!=this.getRevision()&&(t=ka.linearRingss(this.flatCoordinates,0,this.endss_,this.stride),this.flatInteriorPoints_=$n.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()),this.flatInteriorPoints_},Ma.prototype.getInteriorPoints=function(){var t=new Da(null);return t.setFlatCoordinates(ze.XYM,this.getFlatInteriorPoints().slice()),t},Ma.prototype.getOrientedFlatCoordinates=function(){var t;return this.orientedRevision_!=this.getRevision()&&(t=this.flatCoordinates,Pn.linearRingssAreOriented(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Pn.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()),this.orientedFlatCoordinates_},Ma.prototype.getSimplifiedGeometryInternal=function(t){var e=[],n=[];e.length=vn.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n);var i=new Ma(null);return i.setFlatCoordinates(ze.XY,e,n),i},Ma.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e,n;n=0===t?0:(e=this.endss_[t-1])[e.length-1];var i=this.endss_[t].slice(),r=i[i.length-1];if(0!==n)for(var o=0,s=i.length;o<s;++o)i[o]-=n;var a=new Mn(null);return a.setFlatCoordinates(this.layout,this.flatCoordinates.slice(n,r),i),a},Ma.prototype.getPolygons=function(){for(var t,e,n=this.layout,i=this.flatCoordinates,r=this.endss_,o=[],s=0,a=0,u=r.length;a<u;++a){var l=r[a].slice(),c=l[l.length-1];if(0!==s)for(t=0,e=l.length;t<e;++t)l[t]-=s;var h=new Mn(null);h.setFlatCoordinates(n,i.slice(s,c),l),o.push(h),s=c}return o},Ma.prototype.getType=function(){return I.MULTI_POLYGON},Ma.prototype.intersectsExtent=function(t){return bn.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},Ma.prototype.setCoordinates=function(t,e){var n,i;t?(this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]),0===(n=fn.coordinatesss(this.flatCoordinates,0,t,this.stride,this.endss_)).length?this.flatCoordinates.length=0:(i=n[n.length-1],this.flatCoordinates.length=0===i.length?0:i[i.length-1]),this.changed()):this.setFlatCoordinates(ze.XY,null,this.endss_)},Ma.prototype.setFlatCoordinates=function(t,e,n){this.setFlatCoordinatesInternal(t,e),this.endss_=n,this.changed()},Ma.prototype.setPolygons=function(t){for(var e=this.getLayout(),n=[],i=[],r=0,o=t.length;r<o;++r){var s=t[r];0===r&&(e=s.getLayout());for(var a,u=n.length,l=0,c=(a=s.getEnds()).length;l<c;++l)a[l]+=u;Rt.extend(n,s.getFlatCoordinates()),i.push(a)}this.setFlatCoordinates(e,n,i)};function Na(t){var e=t||{};Ta.call(this),this.defaultDataProjection=W.get(e.defaultDataProjection?e.defaultDataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=W.get(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName}var Ua=Ma;St.inherits(Na,Ta),Na.readGeometry_=function(t,e){if(!t)return null;var n=Na.GEOMETRY_READERS_[t.type];return Ca.transformWithOptions(n(t),!1,e)},Na.readGeometryCollectionGeometry_=function(t,e){var n=t.geometries.map(function(t){return Na.readGeometry_(t,e)});return new wa(n)},Na.readPointGeometry_=function(t){return new En(t.coordinates)},Na.readLineStringGeometry_=function(t){return new Oa(t.coordinates)},Na.readMultiLineStringGeometry_=function(t){return new La(t.coordinates)},Na.readMultiPointGeometry_=function(t){return new Da(t.coordinates)},Na.readMultiPolygonGeometry_=function(t){return new Ua(t.coordinates)},Na.readPolygonGeometry_=function(t){return new Mn(t.coordinates)},Na.writeGeometry_=function(t,e){return(0,Na.GEOMETRY_WRITERS_[t.getType()])(Ca.transformWithOptions(t,!0,e),e)},Na.writeEmptyGeometryCollectionGeometry_=function(t){return{type:"GeometryCollection",geometries:[]}},Na.writeGeometryCollectionGeometry_=function(t,n){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var e=Tt.assign({},n);return delete e.featureProjection,Na.writeGeometry_(t,e)})}},Na.writeLineStringGeometry_=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}},Na.writeMultiLineStringGeometry_=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}},Na.writeMultiPointGeometry_=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}},Na.writeMultiPolygonGeometry_=function(t,e){var n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}},Na.writePointGeometry_=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}},Na.writePolygonGeometry_=function(t,e){var n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}},Na.GEOMETRY_READERS_={Point:Na.readPointGeometry_,LineString:Na.readLineStringGeometry_,Polygon:Na.readPolygonGeometry_,MultiPoint:Na.readMultiPointGeometry_,MultiLineString:Na.readMultiLineStringGeometry_,MultiPolygon:Na.readMultiPolygonGeometry_,GeometryCollection:Na.readGeometryCollectionGeometry_},Na.GEOMETRY_WRITERS_={Point:Na.writePointGeometry_,LineString:Na.writeLineStringGeometry_,Polygon:Na.writePolygonGeometry_,MultiPoint:Na.writeMultiPointGeometry_,MultiLineString:Na.writeMultiLineStringGeometry_,MultiPolygon:Na.writeMultiPolygonGeometry_,GeometryCollection:Na.writeGeometryCollectionGeometry_,Circle:Na.writeEmptyGeometryCollectionGeometry_},Na.prototype.readFeatureFromObject=function(t,e){var n=null,n="Feature"===t.type?t:{type:"Feature",geometry:t},i=Na.readGeometry_(n.geometry,e),r=new Ea;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&void 0!==n.geometry_name&&r.setGeometryName(n.geometry_name),r.setGeometry(i),void 0!==n.id&&r.setId(n.id),n.properties&&r.setProperties(n.properties),r},Na.prototype.readFeaturesFromObject=function(t,e){var n=null;if("FeatureCollection"===t.type)for(var n=[],i=t.features,r=0,o=i.length;r<o;++r)n.push(this.readFeatureFromObject(i[r],e));else n=[this.readFeatureFromObject(t,e)];return n},Na.prototype.readGeometryFromObject=function(t,e){return Na.readGeometry_(t,e)},Na.prototype.readProjectionFromObject=function(t){var e,n=t.crs;return n?"name"==n.type?e=W.get(n.properties.name):b.assert(!1,36):e=this.defaultDataProjection,e},Na.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var n={type:"Feature"},i=t.getId();void 0!==i&&(n.id=i);var r=t.getGeometry();n.geometry=r?Na.writeGeometry_(r,e):null;var o=t.getProperties();return delete o[t.getGeometryName()],Tt.isEmpty(o)?n.properties=null:n.properties=o,n},Na.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var n=[],i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}},Na.prototype.writeGeometryObject=function(t,e){return Na.writeGeometry_(t,this.adaptOptions(e))};function Ga(t){var e=t||{},n=Tt.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,kt.call(this,n),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,this.renderMode_=e.renderMode||Pi.VECTOR,this.type=Jt.VECTOR}var ja=Na;St.inherits(Ga,kt),Ga.prototype.getDeclutter=function(){return this.declutter_},Ga.prototype.setDeclutter=function(t){this.declutter_=t},Ga.prototype.getRenderBuffer=function(){return this.renderBuffer_},Ga.prototype.getRenderOrder=function(){return this.get(Ga.Property_.RENDER_ORDER)},Ga.prototype.getStyle=function(){return this.style_},Ga.prototype.getStyleFunction=function(){return this.styleFunction_},Ga.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},Ga.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},Ga.prototype.setRenderOrder=function(t){this.set(Ga.Property_.RENDER_ORDER,t)},Ga.prototype.setStyle=function(t){this.style_=void 0!==t?t:ya.defaultFunction,this.styleFunction_=null===t?void 0:ya.createFunction(this.style_),this.changed()},Ga.prototype.getRenderMode=function(){return this.renderMode_},Ga.Property_={RENDER_ORDER:"renderOrder"};var Va=Ga,Ba={};Ba.DOCUMENT=document.implementation.createDocument("","",null),Ba.createElementNS=function(t,e){return Ba.DOCUMENT.createElementNS(t,e)},Ba.getAllTextContent=function(t,e){return Ba.getAllTextContent_(t,e,[]).join("")},Ba.getAllTextContent_=function(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?n.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(t.nodeValue);else for(var i=t.firstChild;i;i=i.nextSibling)Ba.getAllTextContent_(i,e,n);return n},Ba.isDocument=function(t){return t instanceof Document},Ba.isNode=function(t){return t instanceof Node},Ba.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)||""},Ba.setAttributeNS=function(t,e,n,i){t.setAttributeNS(e,n,i)},Ba.parse=function(t){return(new DOMParser).parseFromString(t,"application/xml")},Ba.makeArrayExtender=function(r,o){return function(t,e){var n,i=r.call(o,t,e);void 0!==i&&(n=e[e.length-1],Rt.extend(n,i))}},Ba.makeArrayPusher=function(i,r){return function(t,e){var n=i.call(void 0!==r?r:this,t,e);void 0!==n&&e[e.length-1].push(n)}},Ba.makeReplacer=function(i,r){return function(t,e){var n=i.call(void 0!==r?r:this,t,e);void 0!==n&&(e[e.length-1]=n)}},Ba.makeObjectPropertyPusher=function(o,s,a){return function(t,e){var n,i,r=o.call(void 0!==a?a:this,t,e);void 0!==r&&(n=e[e.length-1],((i=void 0!==s?s:t.localName)in n?n[i]:n[i]=[]).push(r))}},Ba.makeObjectPropertySetter=function(i,r,o){return function(t,e){var n=i.call(void 0!==o?o:this,t,e);void 0!==n&&(e[e.length-1][void 0!==r?r:t.localName]=n)}},Ba.makeChildAppender=function(i,r){return function(t,e,n){i.call(void 0!==r?r:this,t,e,n),n[n.length-1].node.appendChild(t)}},Ba.makeArraySerializer=function(r,t){var o,s;return function(t,e,n){var i;void 0===o&&(o={},(i={})[t.localName]=r,o[t.namespaceURI]=i,s=Ba.makeSimpleNodeFactory(t.localName)),Ba.serialize(o,s,e,n)}},Ba.makeSimpleNodeFactory=function(t,s){var a=t;return function(t,e,n){var i=e[e.length-1].node,r=a;void 0===r&&(r=n);var o=s;return void 0===s&&(o=i.namespaceURI),Ba.createElementNS(o,r)}},Ba.OBJECT_PROPERTY_NODE_FACTORY=Ba.makeSimpleNodeFactory(),Ba.makeSequence=function(t,e){for(var n=e.length,i=new Array(n),r=0;r<n;++r)i[r]=t[e[r]];return i},Ba.makeStructureNS=function(t,e,n){for(var i=void 0!==n?n:{},r=0,o=t.length;r<o;++r)i[t[r]]=e;return i},Ba.parseNode=function(t,e,n,i){for(var r=e.firstElementChild;r;r=r.nextElementSibling){var o,s=t[r.namespaceURI];void 0===s||void 0!==(o=s[r.localName])&&o.call(i,r,n)}},Ba.pushParseAndPop=function(t,e,n,i,r){return i.push(t),Ba.parseNode(e,n,i,r),i.pop()},Ba.serialize=function(t,e,n,i,r,o){for(var s,a,u=(void 0!==r?r:n).length,l=0;l<u;++l)void 0!==(s=n[l])&&void 0!==(a=e.call(o,s,i,void 0!==r?r[l]:void 0))&&t[a.namespaceURI][a.localName].call(o,a,s,i)},Ba.pushSerializeAndPop=function(t,e,n,i,r,o,s){return r.push(t),Ba.serialize(e,n,i,r,o,s),r.pop()};function Wa(t){var e=t||{};Ks.call(this,{attributions:e.attributions,logo:e.logo,projection:void 0,state:Ft.READY,wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=St.nullFunction,this.format_=e.format,this.overlaps_=null==e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(b.assert(this.format_,7),this.loader_=Xa.xhr(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:Ya.all;var n,i,r=void 0===e.useSpatialIndex||e.useSpatialIndex;this.featuresRtree_=r?new Ko:null,this.loadedExtentsRtree_=new Ko,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,e.features instanceof mt?i=(n=e.features).getArray():Array.isArray(e.features)&&(i=e.features),r||void 0!==n||(n=new mt(i)),void 0!==i&&this.addFeaturesInternal(i),void 0!==n&&this.bindFeaturesCollection_(n)}var Ha=Ba,qa={loadFeaturesXhr:function(n,o,s,a){return function(t,e,i){var r=new XMLHttpRequest;r.open("GET","function"==typeof n?n(t,e,i):n,!0),o.getType()==Sa.ARRAY_BUFFER&&(r.responseType="arraybuffer"),r.onload=function(t){var e,n;!r.status||200<=r.status&&r.status<300?((e=o.getType())==Sa.JSON||e==Sa.TEXT?n=r.responseText:e==Sa.XML?n=(n=r.responseXML)||Ha.parse(r.responseText):e==Sa.ARRAY_BUFFER&&(n=r.response),n?s.call(this,o.readFeatures(n,{featureProjection:i}),o.readProjection(n),o.getLastExtent()):a.call(this)):a.call(this)}.bind(this),r.onerror=function(){a.call(this)}.bind(this),r.send()}},xhr:function(t,e){return qa.loadFeaturesXhr(t,e,function(t,e){this.addFeatures(t)},St.nullFunction)}},Xa=qa,za={all:function(t,e){return[[-1/0,-1/0,1/0,1/0]]},bbox:function(t,e){return[t]},tile:function(s){return function(t,e){var n=s.getZForResolution(e),i=s.getTileRangeForExtentAndZ(t,n),r=[],o=[n,0,0];for(o[1]=i.minX;o[1]<=i.maxX;++o[1])for(o[2]=i.minY;o[2]<=i.maxY;++o[2])r.push(s.getTileCoordExtent(o));return r}}},Ya=za,Ka={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};St.inherits(Wa,Ks),Wa.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},Wa.prototype.addFeatureInternal=function(t){var e,n,i=St.getUid(t).toString();this.addToIndex_(i,t)&&(this.setupChangeEvents_(i,t),(e=t.getGeometry())?(n=e.getExtent(),this.featuresRtree_&&this.featuresRtree_.insert(n,t)):this.nullGeometryFeatures_[i]=t,this.dispatchEvent(new Wa.Event(Ka.ADDFEATURE,t)))},Wa.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[rt.listen(e,ht.CHANGE,this.handleFeatureChange_,this),rt.listen(e,et.PROPERTYCHANGE,this.handleFeatureChange_,this)]},Wa.prototype.addToIndex_=function(t,e){var n=!0,i=e.getId();return void 0!==i?i.toString()in this.idIndex_?n=!1:this.idIndex_[i.toString()]=e:(b.assert(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),n},Wa.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},Wa.prototype.addFeaturesInternal=function(t){for(var e,n,i=[],r=[],o=[],s=0,a=t.length;s<a;s++)n=t[s],e=St.getUid(n).toString(),this.addToIndex_(e,n)&&r.push(n);for(s=0,a=r.length;s<a;s++){n=r[s],e=St.getUid(n).toString(),this.setupChangeEvents_(e,n);var u,l=n.getGeometry();l?(u=l.getExtent(),i.push(u),o.push(n)):this.nullGeometryFeatures_[e]=n}for(this.featuresRtree_&&this.featuresRtree_.load(i,o),s=0,a=r.length;s<a;s++)this.dispatchEvent(new Wa.Event(Ka.ADDFEATURE,r[s]))},Wa.prototype.bindFeaturesCollection_=function(e){var n=!1;rt.listen(this,Ka.ADDFEATURE,function(t){n||(n=!0,e.push(t.feature),n=!1)}),rt.listen(this,Ka.REMOVEFEATURE,function(t){n||(n=!0,e.remove(t.feature),n=!1)}),rt.listen(e,tt.ADD,function(t){n||(n=!0,this.addFeature(t.element),n=!1)},this),rt.listen(e,tt.REMOVE,function(t){n||(n=!0,this.removeFeature(t.element),n=!1)},this),this.featuresCollection_=e},Wa.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(rt.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var i=new Wa.Event(Ka.CLEAR);this.dispatchEvent(i),this.changed()},Wa.prototype.forEachFeature=function(t,e){return this.featuresRtree_?this.featuresRtree_.forEach(t,e):this.featuresCollection_?this.featuresCollection_.forEach(t,e):void 0},Wa.prototype.forEachFeatureAtCoordinateDirect=function(e,n,i){var t=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(t,function(t){return t.getGeometry().intersectsCoordinate(e)?n.call(i,t):void 0})},Wa.prototype.forEachFeatureInExtent=function(t,e,n){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(t,e,n):this.featuresCollection_?this.featuresCollection_.forEach(e,n):void 0},Wa.prototype.forEachFeatureIntersectingExtent=function(n,i,r){return this.forEachFeatureInExtent(n,function(t){if(t.getGeometry().intersectsExtent(n)){var e=i.call(r,t);if(e)return e}})},Wa.prototype.getFeaturesCollection=function(){return this.featuresCollection_},Wa.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Tt.isEmpty(this.nullGeometryFeatures_)||Rt.extend(t,Tt.getValues(this.nullGeometryFeatures_))),t},Wa.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},Wa.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},Wa.prototype.getClosestFeatureToCoordinate=function(t,e){var r=t[0],o=t[1],s=null,a=[NaN,NaN],u=1/0,l=[-1/0,-1/0,1/0,1/0],c=e||Ke.TRUE;return this.featuresRtree_.forEachInExtent(l,function(t){var e,n,i;c(t)&&(e=t.getGeometry(),n=u,(u=e.closestPointXY(r,o,a,u))<n&&(s=t,i=Math.sqrt(u),l[0]=r-i,l[1]=o-i,l[2]=r+i,l[3]=o+i))}),s},Wa.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},Wa.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},Wa.prototype.getFormat=function(){return this.format_},Wa.prototype.getOverlaps=function(){return this.overlaps_},Wa.prototype.getResolutions=function(){},Wa.prototype.getUrl=function(){return this.url_},Wa.prototype.handleFeatureChange_=function(t){var e,n=t.target,i=St.getUid(n).toString(),r=n.getGeometry();r?(e=r.getExtent(),i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(e,n)):this.featuresRtree_&&this.featuresRtree_.update(e,n)):i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);var o,s=n.getId();void 0!==s?(o=s.toString(),i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[o]=n):this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)):i in this.undefIdIndex_||(this.removeFromIdIndex_(n),this.undefIdIndex_[i]=n),this.changed(),this.dispatchEvent(new Wa.Event(Ka.CHANGEFEATURE,n))},Wa.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Tt.isEmpty(this.nullGeometryFeatures_)},Wa.prototype.loadFeatures=function(t,e,n){for(var i=this.loadedExtentsRtree_,r=this.strategy_(t,e),o=0,s=r.length;o<s;++o){var a=r[o];i.forEachInExtent(a,function(t){return $t.containsExtent(t.extent,a)})||(this.loader_.call(this,a,e,n),i.insert(a,{extent:a.slice()}))}},Wa.prototype.removeLoadedExtent=function(e){var n,t=this.loadedExtentsRtree_;t.forEachInExtent(e,function(t){if($t.equals(t.extent,e))return n=t,!0}),n&&t.remove(n)},Wa.prototype.removeFeature=function(t){var e=St.getUid(t).toString();e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},Wa.prototype.removeFeatureInternal=function(t){var e=St.getUid(t).toString();this.featureChangeKeys_[e].forEach(rt.unlistenByKey),delete this.featureChangeKeys_[e];var n=t.getId();void 0!==n?delete this.idIndex_[n.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new Wa.Event(Ka.REMOVEFEATURE,t))},Wa.prototype.removeFromIdIndex_=function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},Wa.prototype.setLoader=function(t){this.loader_=t},Wa.Event=function(t,e){ut.call(this,t),this.feature=e},St.inherits(Wa.Event,ut);var Za=Wa,Ja=function(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new ga({color:Ja.DEFAULT_FILL_COLOR_}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:Xr.POINT;var n=void 0===e.overflow?e.exceedLength:e.overflow;this.overflow_=void 0!==n&&n,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};Ja.DEFAULT_FILL_COLOR_="#333",Ja.prototype.clone=function(){return new Ja({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY()})},Ja.prototype.getOverflow=function(){return this.overflow_},Ja.prototype.getFont=function(){return this.font_},Ja.prototype.getMaxAngle=function(){return this.maxAngle_},Ja.prototype.getPlacement=function(){return this.placement_},Ja.prototype.getOffsetX=function(){return this.offsetX_},Ja.prototype.getOffsetY=function(){return this.offsetY_},Ja.prototype.getFill=function(){return this.fill_},Ja.prototype.getRotateWithView=function(){return this.rotateWithView_},Ja.prototype.getRotation=function(){return this.rotation_},Ja.prototype.getScale=function(){return this.scale_},Ja.prototype.getStroke=function(){return this.stroke_},Ja.prototype.getText=function(){return this.text_},Ja.prototype.getTextAlign=function(){return this.textAlign_},Ja.prototype.getTextBaseline=function(){return this.textBaseline_},Ja.prototype.getBackgroundFill=function(){return this.backgroundFill_},Ja.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},Ja.prototype.getPadding=function(){return this.padding_},Ja.prototype.setOverflow=function(t){this.overflow_=t},Ja.prototype.setFont=function(t){this.font_=t},Ja.prototype.setMaxAngle=function(t){this.maxAngle_=t},Ja.prototype.setOffsetX=function(t){this.offsetX_=t},Ja.prototype.setOffsetY=function(t){this.offsetY_=t},Ja.prototype.setPlacement=function(t){this.placement_=t},Ja.prototype.setFill=function(t){this.fill_=t},Ja.prototype.setRotation=function(t){this.rotation_=t},Ja.prototype.setScale=function(t){this.scale_=t},Ja.prototype.setStroke=function(t){this.stroke_=t},Ja.prototype.setText=function(t){this.text_=t},Ja.prototype.setTextAlign=function(t){this.textAlign_=t},Ja.prototype.setTextBaseline=function(t){this.textBaseline_=t},Ja.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},Ja.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},Ja.prototype.setPadding=function(t){this.padding_=t};var Qa=Ja,tu=n(93),eu=n.n(tu),nu=(n(168),n(94)),iu=n.n(nu),ru=function(){function e(t){r()(this,e),this.clusterIndex=iu()(t)}return s()(e,[{key:"loadPoints",value:function(t){this.clusterIndex.load(t)}},{key:"getClustersArray",value:function(t,e){return this.clusterIndex.getClusters(t,e)}}],[{key:"superclusterArrayToOlFeatures",value:function(t,e,n,i){for(var r=[],o=0;o<i.length;++o){var s=new t(new e(n.fromLonLat(i[o].geometry.coordinates.map(function(t){return parseFloat(t)}))));s.setProperties(i[o].properties),r.push(s)}return r}}]),e}(),ou=(new ja,function(){function e(t){r()(this,e),this.$timeout=t}return e.$inject=["$timeout"],s()(e,[{key:"$onDestroy",value:function(){}},{key:"$onInit",value:function(){this.isInitialized=!1;var i={};this.layer=new Va({name:this.options.name,source:new Za({format:new ja({dataProjection:"EPSG::4326",featureProjection:"EPSG::3857"})}),style:function(t){var e=t.get("point_count_abbreviated");null==e&&(e=1);var n=i[e];return n||(n=new ya({image:new da({radius:13,stroke:new qo({color:"#fff"}),fill:new ga({color:"#3399CC"})}),text:new Qa({text:e.toString(),fill:new ga({color:"#fff"})})}),i[e]=n),n}}),this.isLoad=!0}},{key:"$doCheck",value:function(){this.map&&!this.isInitialized&&(this.isInitialized=!0,this.init())}},{key:"$onChanges",value:function(t){t.useWebWorker&&this.isInitialized&&(this.useWebWorker?this.initWebWorker():this.resetWebWorker()),(t.points||t.useWebWorker)&&this.isInitialized&&(this.isLoad=!0,this.executeCluster())}},{key:"init",value:function(){this.map.addLayer(this.layer),this.map.on("moveend",this.executeCluster,this)}},{key:"initWebWorker",value:function(){this.superClusterWorker=new eu.a,this.superClusterWorker.addEventListener("message",this.onSuperClusterWorkerMessage.bind(this),this)}},{key:"resetWebWorker",value:function(){this.superClusterWorker&&this.superClusterWorker.terminate()}},{key:"executeCluster",value:function(){var t;this.clusterReady=!1,this.layer.getSource().clear(),this.useWebWorker?this.getWorkerClusterPoints():(t=this.getClusterPoints())&&this.showClusterOnMap(t)}},{key:"showClusterOnMap",value:function(t){var e=this;this.layer.getSource().addFeatures(t),this.$timeout(function(){e.clusterReady=!0},1)}},{key:"getClusterPoints",value:function(){this.isLoad&&(this.isLoad=!1,this.superClusterService=new ru({log:!1,radius:40,extent:256,maxZoom:17}),this.superClusterService.loadPoints(this.points.features));var t=W.transformExtent(this.map.getView().calculateExtent(),"EPSG:3857","EPSG:4326"),e=this.map.getView().getZoom(),n=this.superClusterService.getClustersArray(t,e);return ru.superclusterArrayToOlFeatures(Ea,En,W,n)}},{key:"getWorkerClusterPoints",value:function(){var t=W.transformExtent(this.map.getView().calculateExtent(),"EPSG:3857","EPSG:4326"),e=this.map.getView().getZoom();this.isLoad?(this.isLoad=!1,this.superClusterWorker.postMessage({isLoad:!0,isCluster:!0,options:{log:!1,radius:40,extent:256,maxZoom:17},bbox:t,zoom:e,points:this.points.features})):this.superClusterWorker.postMessage({isLoad:!1,isCluster:!0,bbox:t,zoom:e})}},{key:"onSuperClusterWorkerMessage",value:function(t){this.showClusterOnMap(ru.superclusterArrayToOlFeatures(Ea,En,W,t.data.clusterArray))}}]),e}());Z.component("pointsCluster",{template:'<div class="sr-only"></div>',controller:ou,bindings:{map:"<",options:"<",points:"<",clusterReady:"=",refreshCluster:"<",useWebWorker:"<",onClusterRefreshed:"&?"}});n(175);var su=function(){function t(){r()(this,t)}return s()(t,[{key:"onClusterPointsChange",value:function(){this.onClusterPointsCountChanged({pointsCount:this.clusterPointsCount})}}]),t}();Y.component("clusterSettings",{template:'<div id="clusterSettings" class="card">\r\n    <div class="card-body">\r\n        <h5 class="card-title">\r\n            Cluster Settings\r\n        </h5>\r\n        <form name="clusterSettings">\r\n            <div class="form-group row">\r\n                <label for="clusterPoints" class="col-sm-5 col-form-label col-form-label-sm">Points count</label>\r\n                <div class="col-sm-6">\r\n                    <input type="number" ng-min="1" ng-max="5000000" ng-minlength="1" ng-model="$ctrl.clusterPointsCount" ng-change="$ctrl.onClusterPointsChange()"\r\n                        class="form-control form-control-sm" id="clusterPoints" name="clusterPoints" placeholder="No.of cluster points"\r\n                        required>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="form-check">\r\n                    <input class="form-check-input" type="checkbox" ng-model="$ctrl.useWebWorker" id="webworker" required>\r\n                    <label class="form-check-label" for="webworker">\r\n                        Use web worker to avoid browser lagging!\r\n                    </label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label class="form-label">\r\n                    Status: \r\n                    <span ng-show="!$ctrl.clusterReady">\r\n                        Progress...\r\n                        <i class="fa fa-cog fa-spin fa-2x fa-fw"></i>\r\n                    </span>\r\n                    <span ng-show="$ctrl.clusterReady">\r\n                            Done.\r\n                            <i class="fa fa-check fa-2x fa-fw"></i>\r\n                        </span>\r\n                </label>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>',controller:su,bindings:{clusterPointsCount:"<",useWebWorker:"=",clusterReady:"<",onClusterPointsCountChanged:"&"}}),J.component("main",{template:'<div class="main">\r\n    <ol-map on-map-ready="$ctrl.onMapReady.call($ctrl, map)"></ol-map>\r\n    <points-cluster \r\n        map="$ctrl.map" \r\n        use-web-worker="$ctrl.useWebWorker" \r\n        points="$ctrl.points" \r\n        options="$ctrl.clusterOptions"\r\n        cluster-ready="$ctrl.clusterReady"\r\n        refresh-cluster="$ctrl.refreshCluster"\r\n        on-cluster-refreshed="$ctrl.onClusterRefreshed.call($ctrl)"\r\n    ></points-cluster>\r\n    <cluster-settings \r\n        cluster-points-count="$ctrl.pointsCount" \r\n        use-web-worker="$ctrl.useWebWorker"\r\n        cluster-ready="$ctrl.clusterReady"\r\n        on-cluster-points-count-changed="$ctrl.onPointsCountChanged.call($ctrl, pointsCount)"\r\n    ></cluster-settings>\r\n</div>',controller:H})}]);